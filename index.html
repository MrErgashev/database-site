<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ma'lumotlar bazasi ‚Äî 15 ta amaliy mashg'ulot</title>
<!-- Word eksport kutubxonalari -->
<script src="https://unpkg.com/html-docx-js/dist/html-docx.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap');

/* ===== CSS CUSTOM PROPERTIES ===== */
:root{
    --gold:#d4af37;
    --gold-light:#e8cc6a;
    --gold-dark:#b8960e;
    --bg:#f0f0f3;
    --bg-card:#f0f0f3;
    --text:#1a1a1a;
    --text-secondary:#555;
    --text-muted:#888;
    --shadow-dark:rgba(0,0,0,0.08);
    --shadow-light:rgba(255,255,255,0.9);
    --shadow-neu-dark:#d1d1d4;
    --shadow-neu-light:#fff;
    --code-bg:#1e1e2e;
    --code-text:#f8f8f2;
    --sidebar-bg:#1a1a1a;
    --sidebar-text:#ccc;
    --border-color:#e8e8e8;
    --radius-sm:12px;
    --radius-md:20px;
    --radius-lg:30px;
    --radius-xl:40px;
    --transition-fast:0.2s ease;
    --transition-normal:0.3s ease;
}

/* ===== DARK MODE ===== */
body.dark-mode{
    --bg:#1a1a2e;
    --bg-card:#222240;
    --text:#e8e8f0;
    --text-secondary:#a0a0b8;
    --text-muted:#707088;
    --shadow-dark:rgba(0,0,0,0.3);
    --shadow-light:rgba(255,255,255,0.05);
    --shadow-neu-dark:rgba(0,0,0,0.25);
    --shadow-neu-light:rgba(255,255,255,0.05);
    --code-bg:#12121e;
    --sidebar-bg:#12121e;
    --sidebar-text:#b0b0c8;
    --border-color:#333350;
}

/* ===== 3D FLUENT EMOJI ICONS ===== */
.icon-3d{display:inline-block;width:28px;height:28px;vertical-align:middle;margin-right:4px;filter:drop-shadow(0 3px 6px rgba(0,0,0,0.16));transition:transform 0.2s ease}
.icon-3d:hover{transform:scale(1.15)}
.icon-3d.sm{width:20px;height:20px}
.icon-3d.lg{width:36px;height:36px}
.icon-3d.xl{width:48px;height:48px}
h1 .icon-3d{width:36px;height:36px}
h2 .icon-3d{width:30px;height:30px}
.sidebar .icon-3d{width:18px;height:18px;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.2))}
@media print{.icon-3d{filter:none!important;width:20px;height:20px}}

/* ===== MACOS STYLE WINDOW ===== */
.mac-window{border-radius:12px;overflow:hidden;margin:20px 0;box-shadow:0 2px 8px rgba(0,0,0,0.12),0 12px 28px rgba(0,0,0,0.18),0 28px 60px rgba(0,0,0,0.22),0 0 0 1px rgba(255,255,255,0.06);background:#1e1e2e;transition:box-shadow 0.3s ease,transform 0.3s ease}
.mac-window:hover{box-shadow:0 4px 12px rgba(0,0,0,0.15),0 16px 36px rgba(0,0,0,0.22),0 36px 72px rgba(0,0,0,0.28),0 0 0 1px rgba(255,255,255,0.08);transform:translateY(-2px)}
body.dark-mode .mac-window{box-shadow:0 2px 10px rgba(0,0,0,0.3),0 14px 32px rgba(0,0,0,0.4),0 32px 68px rgba(0,0,0,0.5),0 0 0 1px rgba(255,255,255,0.08)}
body.dark-mode .mac-window:hover{box-shadow:0 4px 14px rgba(0,0,0,0.35),0 18px 40px rgba(0,0,0,0.48),0 40px 80px rgba(0,0,0,0.55),0 0 0 1px rgba(255,255,255,0.1);transform:translateY(-2px)}
.mac-titlebar{display:flex;align-items:center;padding:10px 16px;background:linear-gradient(180deg,#3a3a4a,#2d2d3d);border-bottom:1px solid rgba(0,0,0,0.3);gap:8px}
.mac-dots{display:flex;gap:7px}
.mac-dot{width:12px;height:12px;border-radius:50%}
.mac-dot.red{background:#ff5f57;box-shadow:inset 0 -1px 1px rgba(0,0,0,0.15)}
.mac-dot.yellow{background:#febc2e;box-shadow:inset 0 -1px 1px rgba(0,0,0,0.15)}
.mac-dot.green{background:#28c840;box-shadow:inset 0 -1px 1px rgba(0,0,0,0.15)}
.mac-title{flex:1;text-align:center;color:#888;font-size:0.8em;font-family:'Inter',-apple-system,sans-serif;font-weight:500;margin-right:52px}
.mac-window pre{margin:0!important;border-radius:0 0 12px 12px!important;border:none!important;box-shadow:none!important}
body.dark-mode .mac-titlebar{background:linear-gradient(180deg,#2a2a3a,#1e1e2e)}

/* ===== ANIMATIONS ===== */
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
@keyframes slideInLeft{from{opacity:0;transform:translateX(-30px)}to{opacity:1;transform:translateX(0)}}
@keyframes slideInRight{from{opacity:0;transform:translateX(30px)}to{opacity:1;transform:translateX(0)}}
@keyframes scaleIn{from{opacity:0;transform:scale(0.9)}to{opacity:1;transform:scale(1)}}
@keyframes bounceIn{0%{opacity:0;transform:scale(0.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(0.95)}100%{transform:scale(1)}}
@keyframes progressGlow{0%{box-shadow:0 0 5px rgba(212,175,55,0.3)}50%{box-shadow:0 0 20px rgba(212,175,55,0.6)}100%{box-shadow:0 0 5px rgba(212,175,55,0.3)}}

/* ===== SCROLL-REVEAL ANIMATION ===== */
.reveal{opacity:0;transform:translateY(25px);transition:opacity 0.6s ease,transform 0.6s ease}
.reveal.visible{opacity:1;transform:translateY(0)}
.reveal-left{opacity:0;transform:translateX(-25px);transition:opacity 0.6s ease,transform 0.6s ease}
.reveal-left.visible{opacity:1;transform:translateX(0)}
.reveal-right{opacity:0;transform:translateX(25px);transition:opacity 0.6s ease,transform 0.6s ease}
.reveal-right.visible{opacity:1;transform:translateX(0)}
.reveal-scale{opacity:0;transform:scale(0.92);transition:opacity 0.5s ease,transform 0.5s ease}
.reveal-scale.visible{opacity:1;transform:scale(1)}

/* ===== MOBILE LESSON NAVIGATION ===== */
.lesson-nav{display:flex;justify-content:space-between;align-items:center;margin:40px 0 20px 0;padding:20px;background:var(--bg-card);border-radius:var(--radius-md);box-shadow:5px 5px 10px var(--shadow-neu-dark),-5px -5px 10px var(--shadow-neu-light)}
.lesson-nav-btn{display:flex;align-items:center;gap:8px;padding:12px 20px;background:linear-gradient(135deg,var(--gold),var(--gold-light));color:#fff;border:none;border-radius:var(--radius-sm);cursor:pointer;font-family:'Inter',sans-serif;font-size:0.88em;font-weight:600;transition:all var(--transition-fast);text-decoration:none;box-shadow:3px 3px 8px var(--shadow-neu-dark)}
.lesson-nav-btn:hover{transform:translateY(-2px);box-shadow:5px 5px 15px var(--shadow-neu-dark)}
.lesson-nav-btn:active{transform:translateY(0)}
.lesson-nav-btn.prev{background:linear-gradient(135deg,#333,#555);color:var(--gold)}
.lesson-nav-btn:disabled{opacity:0.4;cursor:not-allowed;transform:none!important}
.lesson-nav-info{text-align:center;font-size:0.82em;color:var(--text-muted);font-weight:500}

/* ===== INTERACTIVE TOOLTIP ===== */
.tooltip-trigger{position:relative;cursor:help;border-bottom:1px dashed var(--gold);color:var(--gold)}
.tooltip-trigger:hover::after{content:attr(data-tooltip);position:absolute;bottom:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#1a1a1a;color:#fff;padding:8px 14px;border-radius:10px;font-size:0.82em;white-space:nowrap;z-index:100;box-shadow:0 4px 15px rgba(0,0,0,0.2);max-width:250px;white-space:normal;text-align:center;line-height:1.4}
.tooltip-trigger:hover::before{content:'';position:absolute;bottom:calc(100% + 2px);left:50%;transform:translateX(-50%);border:6px solid transparent;border-top-color:#1a1a1a;z-index:100}

/* ===== TOAST NOTIFICATIONS ===== */
.toast-container{position:fixed;top:20px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:10px;pointer-events:none}
.toast{background:var(--bg-card);color:var(--text);padding:14px 20px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.12);border-left:4px solid var(--gold);font-size:0.88em;font-family:'Inter',sans-serif;animation:slideInRight 0.3s ease,fadeIn 0.3s ease;pointer-events:auto;max-width:350px;display:flex;align-items:center;gap:10px;backdrop-filter:blur(10px)}
.toast.success{border-left-color:#28c840}
.toast.warning{border-left-color:#febc2e}
.toast.error{border-left-color:#ff5f57}
.toast.fadeOut{animation:fadeOut 0.3s ease forwards}
@keyframes fadeOut{to{opacity:0;transform:translateX(30px)}}

/* ===== PROGRESS INDICATOR (lesson-level) ===== */
.lesson-progress{display:flex;align-items:center;gap:12px;margin:15px 0;padding:12px 20px;background:var(--bg-card);border-radius:var(--radius-sm);box-shadow:inset 3px 3px 6px var(--shadow-neu-dark),inset -3px -3px 6px var(--shadow-neu-light)}
.lesson-progress-bar{flex:1;height:6px;background:rgba(0,0,0,0.08);border-radius:3px;overflow:hidden}
.lesson-progress-fill{height:100%;background:linear-gradient(90deg,var(--gold),var(--gold-light));border-radius:3px;transition:width 0.5s ease;animation:progressGlow 2s ease-in-out infinite}
.lesson-progress-text{font-size:0.78em;color:var(--text-muted);white-space:nowrap;font-weight:600}

/* ===== INTERACTIVE SELF-CHECK ENHANCED ===== */
.self-check{background:var(--bg-card);border-radius:var(--radius-md);padding:25px 30px;margin:25px 0;box-shadow:5px 5px 10px var(--shadow-neu-dark),-5px -5px 10px var(--shadow-neu-light);border-top:3px solid var(--gold)}
.self-check h3{font-family:'Playfair Display',serif;color:var(--gold);margin-bottom:15px}
.self-check label{display:flex;align-items:flex-start;gap:10px;padding:10px 12px;margin:6px 0;border-radius:10px;cursor:pointer;transition:all var(--transition-fast);font-size:0.9em;line-height:1.5}
.self-check label:hover{background:rgba(212,175,55,0.06)}
.self-check input[type="checkbox"]{appearance:none;-webkit-appearance:none;width:22px;height:22px;min-width:22px;border:2px solid var(--border-color);border-radius:6px;cursor:pointer;transition:all var(--transition-fast);position:relative;margin-top:2px}
.self-check input[type="checkbox"]:checked{background:var(--gold);border-color:var(--gold)}
.self-check input[type="checkbox"]:checked::after{content:'‚úì';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:0.75em;font-weight:bold}
.self-check label:has(input:checked){background:rgba(212,175,55,0.08);text-decoration:line-through;text-decoration-color:var(--gold);color:var(--text-muted)}

/* ===== GLOBAL ===== */
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'Inter',-apple-system,sans-serif;line-height:1.7;color:var(--text);background:var(--bg);font-feature-settings:'liga' 1,'kern' 1;transition:background var(--transition-normal),color var(--transition-normal)}

/* ===== READING PROGRESS BAR ===== */
.reading-progress{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--gold),var(--gold-light),var(--gold));z-index:9999;transition:width 0.15s linear;border-radius:0 2px 2px 0}

/* ===== SIDEBAR ===== */
.sidebar{position:fixed;top:0;left:0;width:280px;height:100vh;background:var(--sidebar-bg);overflow-y:auto;z-index:1000;padding:20px 0;transition:transform var(--transition-normal)}
.sidebar::-webkit-scrollbar{width:4px}
.sidebar::-webkit-scrollbar-track{background:transparent}
.sidebar::-webkit-scrollbar-thumb{background:rgba(212,175,55,0.3);border-radius:4px}
.sidebar::-webkit-scrollbar-thumb:hover{background:var(--gold)}
.sidebar .logo{color:var(--gold);font-family:'Playfair Display',serif;font-size:1.1em;font-weight:700;text-align:center;padding:15px 20px;border-bottom:1px solid #333}
.sidebar .logo small{display:block;color:var(--text-muted);font-family:'Inter',sans-serif;font-size:0.55em;font-weight:300;margin-top:4px}

/* Sidebar Search */
.sidebar-search{padding:12px 16px;border-bottom:1px solid #333}
.sidebar-search input{width:100%;padding:8px 12px 8px 32px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:#e0e0e0;font-size:0.78em;font-family:'Inter',sans-serif;outline:none;transition:all var(--transition-fast)}
.sidebar-search input::placeholder{color:#666}
.sidebar-search input:focus{border-color:var(--gold);background:rgba(255,255,255,0.1);box-shadow:0 0 0 2px rgba(212,175,55,0.15)}
.sidebar-search-icon{position:absolute;left:28px;top:50%;transform:translateY(-50%);color:#666;font-size:0.75em;pointer-events:none}
.sidebar-search{position:relative}

/* Sidebar Progress */
.sidebar-progress{padding:12px 20px;border-bottom:1px solid #333}
.sidebar-progress-bar{height:4px;background:rgba(255,255,255,0.08);border-radius:4px;overflow:hidden}
.sidebar-progress-fill{height:100%;background:linear-gradient(90deg,var(--gold),var(--gold-light));border-radius:4px;transition:width var(--transition-normal)}
.sidebar-progress-text{font-size:0.65em;color:#666;margin-top:6px;text-align:center}

/* Dark mode toggle in sidebar */
.dark-mode-toggle{display:flex;align-items:center;justify-content:center;padding:10px 20px;border-top:1px solid #333;margin-top:10px;cursor:pointer;color:#888;font-size:0.78em;transition:all var(--transition-fast);gap:8px}
.dark-mode-toggle:hover{color:var(--gold);background:rgba(212,175,55,0.05)}
.dark-mode-toggle .toggle-switch{width:36px;height:20px;background:#333;border-radius:10px;position:relative;transition:all var(--transition-fast)}
.dark-mode-toggle .toggle-switch::after{content:'';position:absolute;width:16px;height:16px;background:#888;border-radius:50%;top:2px;left:2px;transition:all var(--transition-fast)}
body.dark-mode .dark-mode-toggle .toggle-switch{background:var(--gold)}
body.dark-mode .dark-mode-toggle .toggle-switch::after{left:18px;background:#fff}

.sidebar a{display:flex;align-items:center;color:var(--sidebar-text);text-decoration:none;padding:10px 20px;font-size:0.78em;border-left:3px solid transparent;transition:all var(--transition-fast);position:relative}
.sidebar a:hover,.sidebar a.active{background:rgba(212,175,55,0.1);color:var(--gold);border-left-color:var(--gold)}
.sidebar a.active::after{content:'';position:absolute;right:12px;width:6px;height:6px;background:var(--gold);border-radius:50%;box-shadow:0 0 8px rgba(212,175,55,0.6)}
.sidebar a .check-badge{margin-left:auto;color:#50fa7b;font-size:0.85em;opacity:0;transition:opacity var(--transition-fast)}
.sidebar a.completed .check-badge{opacity:1}
.sidebar a.hidden-by-search{display:none}
.sidebar .num{display:inline-block;width:22px;height:22px;background:var(--gold);color:#1a1a1a;border-radius:50%;text-align:center;line-height:22px;font-size:0.7em;font-weight:700;margin-right:8px;flex-shrink:0}

/* ===== SIDEBAR OVERLAY (mobile) ===== */
.sidebar-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:999;opacity:0;visibility:hidden;transition:all var(--transition-normal);backdrop-filter:blur(2px)}
.sidebar-overlay.visible{opacity:1;visibility:visible}

/* ===== MAIN ===== */
.main{margin-left:280px;padding:30px 40px 60px 40px;transition:margin-left var(--transition-normal)}
.section-block{display:none}
.section-block.active{display:block;animation:fadeInUp 0.4s ease-out}

/* ===== COVER ===== */
.cover{text-align:center;padding:80px 40px;background:var(--bg);border-radius:var(--radius-xl);box-shadow:20px 20px 60px var(--shadow-neu-dark),-20px -20px 60px var(--shadow-neu-light);margin-bottom:40px;transition:all var(--transition-normal)}
.cover h1{font-family:'Playfair Display',serif;font-size:2.8em;font-weight:800;color:var(--text);margin-bottom:10px;letter-spacing:-0.02em}
.cover .sub{font-size:1.1em;color:var(--text-secondary);font-weight:300;margin-bottom:20px}
.cover .gold-line{width:120px;height:4px;background:linear-gradient(90deg,transparent,var(--gold),transparent);margin:0 auto 30px auto;border-radius:2px}
.cover .stats{display:flex;justify-content:center;gap:30px;flex-wrap:wrap;margin-top:20px}
.cover .stat{background:var(--bg-card);border-radius:18px;padding:18px 25px;box-shadow:5px 5px 10px var(--shadow-neu-dark),-5px -5px 10px var(--shadow-neu-light);text-align:center;transition:all var(--transition-fast)}
.cover .stat:hover{transform:translateY(-3px);box-shadow:8px 8px 20px var(--shadow-neu-dark),-8px -8px 20px var(--shadow-neu-light)}
.cover .stat .num2{font-family:'Playfair Display',serif;font-size:2em;color:var(--gold);font-weight:700}
.cover .stat .label{font-size:0.8em;color:var(--text-muted);margin-top:4px}

/* ===== TUTORIAL CONTAINER ===== */
.container{max-width:1100px;margin:0 auto 40px auto;background:var(--bg);border-radius:var(--radius-xl);padding:50px 60px;box-shadow:20px 20px 60px var(--shadow-neu-dark),-20px -20px 60px var(--shadow-neu-light);transition:all var(--transition-normal);overflow:hidden}

/* ===== NEUMORPHISM ELEMENTS ===== */
h1{font-family:'Playfair Display',serif;font-size:3em;font-weight:800;text-align:center;color:var(--text);margin-bottom:20px;letter-spacing:-0.02em}
h2{font-family:'Playfair Display',serif;font-size:2em;font-weight:700;color:var(--text);margin-top:60px;margin-bottom:30px;padding-left:30px;position:relative;letter-spacing:-0.01em}
h2::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:6px;height:60%;background:linear-gradient(180deg,var(--gold),var(--gold-light));border-radius:10px}
h3{font-family:'Playfair Display',serif;font-size:1.4em;font-weight:700;color:var(--text);margin-bottom:20px;margin-top:10px}
.subtitle{text-align:center;font-size:1.15em;color:var(--text-secondary);margin-bottom:15px;font-weight:300}
.gold-line{width:120px;height:4px;background:linear-gradient(90deg,transparent,var(--gold),transparent);margin:0 auto 40px auto;border-radius:2px}
.meta-info{text-align:center;font-size:0.9em;color:var(--text-muted);margin-bottom:50px;padding:25px;background:var(--bg-card);border-radius:var(--radius-md);box-shadow:inset 5px 5px 10px var(--shadow-neu-dark),inset -5px -5px 10px var(--shadow-neu-light);transition:all var(--transition-normal)}

.card{background:var(--bg-card);border-radius:25px;padding:40px;margin:30px 0;box-shadow:6px 6px 12px var(--shadow-neu-dark),-6px -6px 12px var(--shadow-neu-light);border-left:5px solid var(--gold);transition:all var(--transition-fast);overflow:hidden;overflow-wrap:break-word;word-break:break-word}
.card:hover{transform:translateY(-2px);box-shadow:8px 8px 20px var(--shadow-neu-dark),-8px -8px 20px var(--shadow-neu-light)}
.card-flat{background:var(--bg-card);border-radius:25px;padding:40px;margin:30px 0;box-shadow:6px 6px 12px var(--shadow-neu-dark),-6px -6px 12px var(--shadow-neu-light);transition:all var(--transition-fast);overflow:hidden;overflow-wrap:break-word;word-break:break-word}
.card-flat:hover{transform:translateY(-2px);box-shadow:8px 8px 20px var(--shadow-neu-dark),-8px -8px 20px var(--shadow-neu-light)}

.theory-box{background:linear-gradient(135deg,rgba(212,175,55,0.08),rgba(212,175,55,0.02));border-radius:var(--radius-md);padding:30px;margin:20px 0;border:1px solid rgba(212,175,55,0.2);transition:all var(--transition-fast);overflow-wrap:break-word;word-break:break-word}
.warning-box{background:linear-gradient(135deg,rgba(255,0,0,0.05),rgba(255,0,0,0.02));border-radius:var(--radius-md);padding:25px;margin:20px 0;border:1px solid rgba(255,0,0,0.15);overflow-wrap:break-word;word-break:break-word}
.tip-box{background:linear-gradient(135deg,rgba(0,128,0,0.05),rgba(0,128,0,0.02));border-radius:var(--radius-md);padding:25px;margin:20px 0;border:1px solid rgba(0,128,0,0.15);overflow-wrap:break-word;word-break:break-word}
.info-box{background:linear-gradient(135deg,rgba(0,100,200,0.05),rgba(0,100,200,0.02));border-radius:var(--radius-md);padding:25px;margin:20px 0;border:1px solid rgba(0,100,200,0.15);overflow-wrap:break-word;word-break:break-word}

/* ===== CODE BLOCKS (IMPROVED) ===== */
pre{background:var(--code-bg);color:var(--code-text);padding:25px 30px;border-radius:18px;overflow-x:auto;font-family:'JetBrains Mono','Fira Code',monospace;font-size:0.9em;line-height:1.8;margin:15px 0;box-shadow:inset 3px 3px 8px rgba(0,0,0,0.4),6px 6px 12px var(--shadow-neu-dark);position:relative;border:1px solid rgba(255,255,255,0.05);transition:all var(--transition-fast)}
pre:hover{box-shadow:inset 3px 3px 8px rgba(0,0,0,0.4),6px 6px 12px var(--shadow-neu-dark),0 0 0 1px rgba(212,175,55,0.2)}
pre .file-badge{position:absolute;top:8px;right:12px;background:var(--gold);color:#fff;padding:2px 10px;border-radius:8px;font-size:0.75em;font-weight:600;font-style:normal}

/* Copy button */
pre .copy-btn{position:absolute;top:8px;right:12px;background:rgba(255,255,255,0.1);color:#aaa;border:1px solid rgba(255,255,255,0.1);padding:4px 12px;border-radius:8px;font-size:0.72em;font-family:'Inter',sans-serif;cursor:pointer;opacity:0;transition:all var(--transition-fast);z-index:2;backdrop-filter:blur(4px)}
pre:hover .copy-btn{opacity:1}
pre .copy-btn:hover{background:var(--gold);color:#fff;border-color:var(--gold)}
pre .copy-btn.copied{background:#50fa7b;color:#1a1a1a;border-color:#50fa7b}
pre .file-badge ~ .copy-btn{right:auto;left:12px}

/* Inline code */
code{font-family:'JetBrains Mono','Fira Code',monospace;font-size:0.88em;background:rgba(212,175,55,0.15);padding:2px 8px;border-radius:6px;color:#6d4c00;overflow-wrap:break-word;word-break:break-word}
pre code{background:none;padding:0;color:inherit;font-size:inherit}
body.dark-mode code{background:rgba(212,175,55,0.12);color:var(--gold-light)}

/* ===== SYNTAX HIGHLIGHTING (IMPROVED CONTRAST) ===== */
.sql-keyword{color:#ff79c6;font-weight:bold}
.sql-string{color:#f1fa8c}
.sql-number{color:#bd93f9}
.sql-comment{color:#8a99c4;font-style:italic}
.sql-function{color:#50fa7b}
.sql-operator{color:#ffb86c;font-weight:bold}
.sql-proc{color:#8be9fd;font-weight:bold}
.sql-trigger{color:#ff5555;font-weight:bold}
.sql-var{color:#f8f8f2;font-style:italic}
.py-keyword{color:#ff79c6;font-weight:bold}
.py-string{color:#f1fa8c}
.py-number{color:#bd93f9}
.py-comment{color:#8a99c4;font-style:italic}
.py-func{color:#50fa7b}
.py-decorator{color:#ffb86c}
.py-class{color:#8be9fd;font-weight:bold}
.py-self{color:#ff79c6;font-style:italic}
.py-builtin{color:#8be9fd}
.html-tag{color:#ff79c6}
.html-attr{color:#50fa7b}
.html-val{color:#f1fa8c}
.css-prop{color:#8be9fd}
.css-val{color:#f1fa8c}
.jinja{color:#ffb86c;font-weight:bold}

/* ===== TABLES ===== */
table{width:100%;border-collapse:separate;border-spacing:0;margin:20px 0;border-radius:15px;overflow:hidden;box-shadow:4px 4px 10px var(--shadow-neu-dark),-4px -4px 10px var(--shadow-neu-light)}
thead th{background:linear-gradient(135deg,#1a1a1a 0%,#2a2a2a 100%);color:var(--gold);padding:16px 18px;text-align:left;font-weight:600;font-size:0.88em;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid var(--gold);position:sticky;top:0;z-index:1}
tbody td{padding:12px 16px;border-bottom:1px solid var(--border-color);font-size:0.9em;transition:all var(--transition-fast);overflow-wrap:break-word;word-break:break-word}
tbody tr:nth-child(even){background:rgba(0,0,0,0.02)}
tbody tr:hover{background:rgba(212,175,55,0.08);transform:scale(1.002)}
.toc-row{cursor:pointer;transition:all var(--transition-fast)}
.toc-row:hover{background:rgba(212,175,55,0.15)!important;transform:scale(1.005)}
tbody tr:last-child td{border-bottom:none}
.highlight-row{background:rgba(212,175,55,0.15)!important;font-weight:600}
body.dark-mode tbody td{border-bottom-color:rgba(255,255,255,0.06)}
body.dark-mode tbody tr:nth-child(even){background:rgba(255,255,255,0.02)}

.icon{font-size:1.2em;margin-right:8px}
.luxury-divider{height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent);margin:60px 0;border:none}
ul,ol{margin:15px 0 15px 20px}
li{margin-bottom:10px}
p{margin:12px 0}

.step-number{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;background:linear-gradient(135deg,var(--gold),var(--gold-light));color:#fff;border-radius:50%;font-weight:700;font-size:0.95em;margin-right:12px;box-shadow:3px 3px 6px var(--shadow-neu-dark)}
.result-label{display:inline-block;background:linear-gradient(135deg,var(--gold),var(--gold-light));color:#fff;padding:5px 16px;border-radius:20px;font-size:0.85em;font-weight:600;margin:15px 0 10px 0}
.result-ok{background:linear-gradient(135deg,rgba(40,200,64,0.08),rgba(40,200,64,0.03));border-radius:var(--radius-sm);padding:14px 20px;margin:15px 0 10px 0;border:1px solid rgba(40,200,64,0.2);border-left:4px solid #28c840;font-family:'JetBrains Mono','Courier New',monospace;font-size:0.82em;line-height:1.8;color:var(--text)}
.result-ok .rok-line{display:block;padding:2px 0}
.result-ok .rok-line .rok-icon{margin-right:6px}
body.dark-mode .result-ok{background:linear-gradient(135deg,rgba(40,200,64,0.1),rgba(40,200,64,0.04));border-color:rgba(40,200,64,0.25)}

.concept-grid{display:flex;flex-wrap:wrap;justify-content:center;gap:18px;margin:25px 0}
.concept-grid>.concept-card{flex:0 1 calc(25% - 18px);min-width:180px}
.concept-card{background:var(--bg-card);border-radius:18px;padding:22px;text-align:center;box-shadow:5px 5px 10px var(--shadow-neu-dark),-5px -5px 10px var(--shadow-neu-light);border-top:4px solid var(--gold);transition:all var(--transition-fast)}
.concept-card:hover{transform:translateY(-3px);box-shadow:8px 8px 16px var(--shadow-neu-dark),-8px -8px 16px var(--shadow-neu-light)}
.concept-card h4{font-family:'Playfair Display',serif;font-size:1em;color:var(--gold);margin-bottom:8px}
.concept-card p{font-size:0.82em;color:var(--text-secondary);margin:0;overflow-wrap:break-word;word-break:break-word}
.concept-card .big-icon{font-size:2.2em;display:block;margin-bottom:12px}

/* ===== CATEGORY BADGES (Lesson 9) ===== */
.category-badge{display:inline-block;padding:8px 16px;margin:5px;border-radius:25px;font-size:0.88em;font-weight:600;cursor:default;transition:all var(--transition-fast);box-shadow:3px 3px 8px var(--shadow-neu-dark),-3px -3px 8px var(--shadow-neu-light)}
.category-badge:hover{transform:translateY(-2px) scale(1.03);box-shadow:5px 5px 12px var(--shadow-neu-dark),-5px -5px 12px var(--shadow-neu-light)}
.badge-string{background:linear-gradient(135deg,rgba(80,250,123,0.12),rgba(80,250,123,0.04));border:1px solid rgba(80,250,123,0.3);color:#28a745}
.badge-number{background:linear-gradient(135deg,rgba(189,147,249,0.12),rgba(189,147,249,0.04));border:1px solid rgba(189,147,249,0.3);color:#8b5cf6}
.badge-date{background:linear-gradient(135deg,rgba(255,184,108,0.12),rgba(255,184,108,0.04));border:1px solid rgba(255,184,108,0.3);color:#d97706}
.badge-flow{background:linear-gradient(135deg,rgba(139,233,253,0.12),rgba(139,233,253,0.04));border:1px solid rgba(139,233,253,0.3);color:#0891b2}
.badge-agg{background:linear-gradient(135deg,rgba(255,121,198,0.12),rgba(255,121,198,0.04));border:1px solid rgba(255,121,198,0.3);color:#e91e8c}
body.dark-mode .badge-string{color:#50fa7b}
body.dark-mode .badge-number{color:#bd93f9}
body.dark-mode .badge-date{color:#ffb86c}
body.dark-mode .badge-flow{color:#8be9fd}
body.dark-mode .badge-agg{color:#ff79c6}

/* ===== FUNC GRID (Lesson 10) ===== */
.func-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin:25px 0}
.func-card{background:var(--bg-card);border-radius:16px;padding:22px 18px;text-align:center;box-shadow:5px 5px 10px var(--shadow-neu-dark),-5px -5px 10px var(--shadow-neu-light);border-top:3px solid var(--gold);transition:all var(--transition-fast);cursor:default}
.func-card:hover{transform:translateY(-4px);box-shadow:8px 8px 18px var(--shadow-neu-dark),-8px -8px 18px var(--shadow-neu-light)}
.func-card h4{font-family:'JetBrains Mono','Fira Code',monospace;font-size:1.05em;color:var(--gold);margin:0 0 6px 0;letter-spacing:-0.02em}
.func-card p{font-size:0.82em;color:var(--text-secondary);margin:0;line-height:1.4}

/* ===== TABLE SCROLL WRAPPER ===== */
.table-scroll{overflow-x:auto;-webkit-overflow-scrolling:touch;margin:20px 0;border-radius:15px;position:relative}
.table-scroll table{margin:0}
.table-scroll::after{content:'';position:absolute;top:0;right:0;width:30px;height:100%;background:linear-gradient(to left,var(--bg),transparent);pointer-events:none;opacity:0;transition:opacity var(--transition-fast);border-radius:0 15px 15px 0}
.table-scroll.has-scroll::after{opacity:1}

.flow-diagram{display:flex;align-items:center;justify-content:center;gap:8px;flex-wrap:wrap;margin:25px 0;padding:25px;background:var(--bg-card);border-radius:var(--radius-md);box-shadow:inset 5px 5px 10px var(--shadow-neu-dark),inset -5px -5px 10px var(--shadow-neu-light)}
.flow-step{background:linear-gradient(135deg,#1a1a1a,#333);color:var(--gold);padding:10px 18px;border-radius:var(--radius-sm);font-size:0.82em;font-weight:600;white-space:nowrap}
.flow-arrow{color:var(--gold);font-size:1.3em;font-weight:bold}

.arch-diagram{text-align:center;margin:30px 0;padding:30px;background:var(--bg-card);border-radius:var(--radius-md);box-shadow:inset 5px 5px 10px var(--shadow-neu-dark),inset -5px -5px 10px var(--shadow-neu-light);overflow-x:auto;-webkit-overflow-scrolling:touch}
.arch-diagram svg{max-width:100%;height:auto}
.arch-diagram svg text{font-family:'Inter',sans-serif}
.folder-tree{background:var(--code-bg);color:var(--code-text);padding:20px 25px;border-radius:15px;font-family:'JetBrains Mono',monospace;font-size:0.85em;line-height:1.9;margin:15px 0;border:1px solid rgba(255,255,255,0.05)}
.folder-tree .folder{color:#f1fa8c;font-weight:bold}
.folder-tree .file-py{color:#50fa7b}
.folder-tree .file-html{color:#ff79c6}
.folder-tree .file-css{color:#8be9fd}
.folder-tree .file-sql{color:#ffb86c}
.screenshot-box{background:var(--bg-card);border-radius:18px;padding:20px;margin:20px 0;box-shadow:6px 6px 14px var(--shadow-neu-dark),-6px -6px 14px var(--shadow-neu-light);border:1px solid var(--border-color)}
.screenshot-box .browser-bar{background:rgba(0,0,0,0.03);border-radius:10px 10px 0 0;padding:8px 15px;display:flex;align-items:center;gap:6px;margin:-20px -20px 15px -20px;border-bottom:1px solid var(--border-color)}
.screenshot-box .dot{width:10px;height:10px;border-radius:50%}
.screenshot-box .dot-r{background:#ff5f57}
.screenshot-box .dot-y{background:#febc2e}
.screenshot-box .dot-g{background:#28c840}
.screenshot-box .url-bar{flex:1;background:var(--bg);border-radius:6px;padding:4px 12px;font-size:0.78em;color:var(--text-muted);margin-left:10px;border:1px solid var(--border-color)}

/* ===== BACK TO TOP ===== */
.back-to-top{position:fixed;bottom:30px;right:30px;width:48px;height:48px;background:linear-gradient(135deg,var(--gold),var(--gold-light));color:#fff;border:none;border-radius:50%;font-size:1.2em;cursor:pointer;opacity:0;visibility:hidden;transition:all var(--transition-normal);box-shadow:4px 4px 12px rgba(0,0,0,0.2);z-index:900;display:flex;align-items:center;justify-content:center}
.back-to-top.visible{opacity:1;visibility:visible}
.back-to-top:hover{transform:translateY(-3px) scale(1.05);box-shadow:6px 6px 20px rgba(0,0,0,0.3)}

/* ===== CUSTOM SCROLLBAR ===== */
::-webkit-scrollbar{width:8px;height:8px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.15);border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.25)}
body.dark-mode ::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1)}
body.dark-mode ::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.2)}

/* ===== MOBILE ===== */
.menu-toggle{display:none;position:fixed;top:15px;left:15px;z-index:1001;background:var(--gold);color:#fff;border:none;border-radius:10px;padding:8px 12px;font-size:1.2em;cursor:pointer;transition:all var(--transition-fast);box-shadow:2px 2px 8px rgba(0,0,0,0.2)}
.menu-toggle:hover{transform:scale(1.05)}
.menu-toggle.is-open{background:#ff5555;border-radius:50%}

@media(max-width:1200px){
    .main{padding:30px 30px 60px 30px}
    .container{padding:40px 45px}
    .concept-grid>.concept-card{flex:0 1 calc(33.33% - 18px);min-width:160px}
    .func-grid{grid-template-columns:repeat(3,1fr)}
}
@media(max-width:900px){
    .sidebar{transform:translateX(-100%)}
    .sidebar.open{transform:translateX(0)}
    .main{margin-left:0;padding:20px 15px}
    .menu-toggle{display:block}
    .container{padding:25px;border-radius:25px}
    h1{font-size:2em}
    h2{font-size:1.5em}
    pre{padding:15px 18px;font-size:0.82em}
    pre .copy-btn{opacity:1;font-size:0.68em;padding:3px 8px}
    .card,.card-flat{padding:25px}
    .cover{padding:50px 25px}
    .cover h1{font-size:2em}
    .back-to-top{bottom:20px;right:20px;width:42px;height:42px}
    .concept-grid>.concept-card{flex:0 1 calc(50% - 12px);min-width:0}
    .func-grid{grid-template-columns:repeat(2,1fr)}
    .category-badge{padding:6px 12px;font-size:0.82em;margin:4px}
    .flow-diagram{gap:6px;padding:18px}
    .flow-step{padding:8px 14px;font-size:0.78em}
    .flow-arrow{font-size:1.1em}
}
@media(max-width:600px){
    .main{padding:15px 10px}
    .container{padding:20px 16px;border-radius:20px}
    h1{font-size:1.6em}
    h2{font-size:1.3em;padding-left:22px}
    h3{font-size:1.15em}
    pre{padding:12px 14px;font-size:0.78em;border-radius:14px}
    .card,.card-flat{padding:20px;border-radius:20px;margin:20px 0}
    .cover .stats{gap:15px}
    .cover .stat{padding:14px 18px}
    .concept-grid>.concept-card{flex:0 1 calc(50% - 8px);min-width:0}
    .concept-grid{gap:10px}
    .func-grid{grid-template-columns:repeat(2,1fr);gap:10px}
    .func-card{padding:16px 12px}
    .func-card h4{font-size:0.92em}
    .func-card p{font-size:0.78em}
    table{font-size:0.85em}
    thead th{padding:10px 12px;font-size:0.8em}
    tbody td{padding:8px 10px}
    .category-badge{padding:5px 10px;font-size:0.78em;margin:3px}
    .flow-diagram{padding:15px;gap:5px}
    .flow-step{padding:6px 10px;font-size:0.75em}
    .flow-arrow{font-size:0.9em}
    .arch-diagram{padding:15px}
    .arch-diagram svg{min-width:500px}
}
@media(max-width:380px){
    h1{font-size:1.4em}
    pre{font-size:0.72em;padding:10px 12px}
    .concept-grid>.concept-card{flex:0 1 100%}
    .container{padding:16px 12px}
    .func-grid{grid-template-columns:1fr 1fr;gap:8px}
    .func-card{padding:14px 10px}
    .category-badge{display:block;text-align:center;margin:4px 0}
}

/* ===== PRINT ‚Äî KITOBCHA (A4, 3-2-2-1.5 cm) ===== */
@media print{
    /* A4 sahifa sozlamalari */
    @page{size:A4 portrait;margin:2cm 2cm 1.5cm 3cm}
    @page:first{margin-top:0}

    /* UI elementlarni yashirish */
    .sidebar,.menu-toggle,.reading-progress,.back-to-top,
    .copy-btn,.sidebar-overlay,.file-badge,.dark-mode-toggle,
    .sidebar-search,.sidebar-progress,.check-badge,
    .print-btn-wrap,.lesson-nav,.toast-container,.toast{display:none!important}
    .reveal,.reveal-left,.reveal-right,.reveal-scale{opacity:1!important;transform:none!important}

    /* Layout ‚Äî to'liq kenglik */
    .main{margin-left:0!important;padding:0!important}

    /* BARCHA sectionlarni ko'rsatish */
    .section-block{display:block!important;page-break-before:auto}
    .section-block+.section-block{page-break-before:always}

    /* Kontent ichida uzilishni oldini olish */
    .container,.card,.card-flat,.theory-box,.warning-box,
    .tip-box,.info-box,.meta-info{
        page-break-inside:avoid;
        box-shadow:none!important;
        border:1px solid #ddd;
        border-radius:4px;
        padding:15px;
        margin:10px 0
    }
    pre{
        page-break-inside:avoid;
        box-shadow:none!important;
        font-size:8pt;
        line-height:1.5;
        border:1px solid #ccc;
        padding:10px;
        border-radius:4px
    }
    table{page-break-inside:avoid;width:100%;border-collapse:collapse}
    tr{page-break-inside:avoid}
    td,th{border:1px solid #999;padding:6px 8px;font-size:9pt}
    h2,h3{page-break-after:avoid}
    img{max-width:100%;page-break-inside:avoid}

    /* Kitobcha tipografiyasi */
    body{
        background:#fff!important;
        color:#1a1a1a!important;
        font-family:'Inter','Segoe UI',Arial,sans-serif;
        font-size:10pt;
        line-height:1.6
    }
    h1{
        font-family:'Playfair Display',Georgia,serif;
        font-size:22pt;
        color:#1a1a1a!important;
        text-align:center;
        margin-bottom:10px
    }
    h2{
        font-family:'Playfair Display',Georgia,serif;
        font-size:16pt;
        color:#1a1a1a!important;
        margin-top:20px;
        border-bottom:2px solid #d4af37;
        padding-bottom:5px
    }
    h2::before{background:#d4af37!important}
    h3{font-size:12pt;color:#333!important;margin-top:15px}
    p,li{font-size:10pt;line-height:1.6;orphans:3;widows:3}

    /* Ranglar ‚Äî CSS variablelarsiz */
    .cover{box-shadow:none!important;background:#fff!important;border:none;padding:40px 20px}
    .container{box-shadow:none!important;padding:10px 0;background:#fff!important;border-radius:0;border:none}
    .gold-line{background:#d4af37!important;height:2px}

    /* Code ‚Äî print friendly */
    pre{background:#f8f8f8!important;color:#1a1a1a!important}
    code{background:#f0f0f0!important;color:#333!important;font-size:8.5pt}
    pre code{background:transparent!important}

    /* Info boxlar ‚Äî solid ranglar */
    .theory-box{background:#fffbe6!important;border-left:4px solid #d4af37!important}
    .warning-box{background:#fff5f5!important;border-left:4px solid #e74c3c!important}
    .tip-box{background:#f0fff0!important;border-left:4px solid #27ae60!important}
    .result-ok{background:#f0fff0!important;border-left:4px solid #28c840!important;font-family:'Courier New',monospace;font-size:9pt;padding:8px 12px;margin:8px 0}
    .info-box{background:#f0f5ff!important;border-left:4px solid #3498db!important}

    /* Syntax highlighting */
    .sql-keyword{color:#c71585!important;font-weight:bold}
    .sql-string{color:#b8860b!important}
    .sql-comment{color:#666!important}
    .sql-function{color:#0066cc!important}

    /* Cover rasm ‚Äî 1-sahifa */
    #cover .cover img{max-width:100%!important;width:100%!important;border-radius:0!important;box-shadow:none!important}
    #cover .cover{padding:0!important;margin:0!important;border:none!important}

    /* Back page ‚Äî oxirgi sahifa */
    #backpage{page-break-before:always;display:block!important}
    #backpage img{max-width:100%!important;width:100%!important;box-shadow:none!important;border-radius:0!important}

    /* MacOS window ‚Äî print (saytdagidek ranglar saqlanadi) */
    .mac-window{border:1px solid #333;border-radius:12px;overflow:hidden;-webkit-print-color-adjust:exact;print-color-adjust:exact}
    .mac-titlebar{background:#2d2d3d!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
    .mac-dot.red{background:#ff5f57!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
    .mac-dot.yellow{background:#febc2e!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
    .mac-dot.green{background:#28c840!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
    .mac-title{color:#888!important}
    .mac-window pre{background:#1e1e2e!important;color:#f8f8f2!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
    .mac-window code{background:transparent!important;color:#f8f8f2!important}
    .mac-window .sql-keyword{color:#ff79c6!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
    .mac-window .sql-string{color:#f1fa8c!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
    .mac-window .sql-comment{color:#6272a4!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
    .mac-window .sql-number{color:#bd93f9!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}

    /* Yangi elementlar uchun print uslublari */
    .category-badge{display:inline-block;padding:4px 10px;margin:3px;border:1px solid #ccc;border-radius:4px;font-size:9pt}
    .func-grid{display:flex;flex-wrap:wrap;gap:8px}
    .func-card{flex:0 1 calc(33% - 8px);border:1px solid #ccc;border-radius:4px;padding:8px;text-align:center;box-shadow:none!important}
    .func-card h4{font-size:10pt;color:#333!important}
    .func-card p{font-size:8pt}
    .table-scroll{overflow:visible!important}
    .table-scroll::after{display:none!important}
    .self-check input[type="checkbox"]{-webkit-appearance:auto;appearance:auto;width:14px;height:14px}

    /* Animatsiyalarni o'chirish */
    *{animation:none!important;transition:none!important;transform:none!important}
}

/* ===== ADMIN PANEL STYLES ===== */
.admin-toolbar{
    position:fixed;top:0;right:-360px;width:350px;height:100vh;
    background:var(--sidebar-bg);color:#e0e0e0;z-index:10001;
    display:flex;flex-direction:column;overflow-y:auto;
    box-shadow:-4px 0 20px rgba(0,0,0,0.3);
    transition:right 0.3s ease;font-family:'Inter',sans-serif;
}
.admin-toolbar.open{right:0}
.admin-toolbar-header{
    display:flex;align-items:center;justify-content:space-between;
    padding:18px 20px;border-bottom:2px solid var(--gold);
    background:linear-gradient(135deg,#1a1a1a,#2a2a3e);
    position:sticky;top:0;z-index:2;min-height:auto;
}
.admin-toolbar-header h3{margin:0;color:var(--gold);font-size:1.1em;font-family:'Playfair Display',serif}
.admin-close-btn{
    background:none;border:1px solid rgba(255,255,255,0.2);color:#fff;
    width:32px;height:32px;border-radius:8px;cursor:pointer;font-size:1em;
    transition:all 0.2s ease;
}
.admin-close-btn:hover{background:var(--gold);color:#1a1a1a;border-color:var(--gold)}
.admin-section{padding:16px 20px;border-bottom:1px solid rgba(255,255,255,0.08)}
.admin-section h4{color:var(--gold);font-size:0.85em;text-transform:uppercase;letter-spacing:1.5px;margin:0 0 12px 0}
.admin-hint{font-size:0.78em;color:#888;margin:0 0 10px 0;line-height:1.4}
.admin-btn-primary,.admin-btn-secondary,.admin-btn-danger{
    display:block;width:100%;padding:10px 16px;border:none;border-radius:10px;
    cursor:pointer;font-size:0.88em;font-weight:600;margin-bottom:8px;
    transition:all 0.2s ease;font-family:'Inter',sans-serif;
}
.admin-btn-primary{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:#1a1a1a}
.admin-btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 15px rgba(212,175,55,0.4)}
.admin-btn-secondary{background:rgba(255,255,255,0.08);color:#ccc;border:1px solid rgba(255,255,255,0.15)}
.admin-btn-secondary:hover{background:rgba(255,255,255,0.15);color:#fff}
.admin-btn-danger{background:rgba(231,76,60,0.15);color:#e74c3c;border:1px solid rgba(231,76,60,0.3)}
.admin-btn-danger:hover{background:rgba(231,76,60,0.3)}
.admin-component-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.admin-component-btn{
    display:flex;flex-direction:column;align-items:center;gap:4px;
    padding:12px 8px;border-radius:10px;border:1px solid rgba(255,255,255,0.1);
    background:rgba(255,255,255,0.04);color:#ccc;cursor:pointer;
    font-size:0.78em;transition:all 0.2s ease;font-family:'Inter',sans-serif;
}
.admin-component-btn:hover{border-color:var(--gold);color:var(--gold);background:rgba(212,175,55,0.08);transform:translateY(-1px)}
.admin-component-btn .comp-icon{font-size:1.6em}
body.admin-mode .editable-highlight{
    outline:2px dashed rgba(212,175,55,0.4);outline-offset:2px;
    border-radius:4px;transition:outline 0.2s ease;cursor:text;
}
body.admin-mode .editable-highlight:focus{
    outline:2px solid var(--gold);background:rgba(212,175,55,0.06);
}
body.admin-mode .main{margin-right:360px;transition:margin-right 0.3s ease}
.admin-insert-marker{
    display:flex;align-items:center;justify-content:center;
    margin:6px 0;opacity:0;transition:opacity 0.2s ease;
    position:relative;z-index:5;height:0;overflow:visible;
}
body.admin-mode .admin-insert-marker{opacity:0.35;height:30px;overflow:visible}
body.admin-mode .admin-insert-marker:hover{opacity:1}
.admin-insert-marker button{
    background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:#1a1a1a;
    border:none;width:28px;height:28px;border-radius:50%;cursor:pointer;
    font-size:1.1em;font-weight:bold;box-shadow:0 2px 8px rgba(212,175,55,0.3);
    transition:all 0.2s ease;line-height:1;padding:0;
}
.admin-insert-marker button:hover{transform:scale(1.15);box-shadow:0 4px 15px rgba(212,175,55,0.5)}
.admin-insert-marker.selected button{background:linear-gradient(135deg,#27ae60,#2ecc71);box-shadow:0 0 0 3px rgba(39,174,96,0.3)}
.admin-insert-marker::before,.admin-insert-marker::after{
    content:'';flex:1;height:1px;
    background:linear-gradient(to right,transparent,rgba(212,175,55,0.3),transparent);
}
.admin-delete-component{
    position:absolute;top:6px;right:6px;
    background:rgba(231,76,60,0.9);color:#fff;border:none;
    width:26px;height:26px;border-radius:6px;cursor:pointer;
    font-size:0.85em;font-weight:bold;z-index:10;
    opacity:0;transition:opacity 0.2s ease;line-height:26px;text-align:center;padding:0;
}
body.admin-mode .card:hover>.admin-delete-component,
body.admin-mode .theory-box:hover>.admin-delete-component,
body.admin-mode .warning-box:hover>.admin-delete-component,
body.admin-mode .tip-box:hover>.admin-delete-component,
body.admin-mode .info-box:hover>.admin-delete-component,
body.admin-mode .mac-window:hover>.admin-delete-component,
body.admin-mode .concept-grid:hover>.admin-delete-component,
body.admin-mode h2:hover>.admin-delete-component{opacity:1}
.admin-delete-component:hover{background:#c0392b;transform:scale(1.1)}
.admin-badge{
    position:fixed;top:8px;left:50%;transform:translateX(-50%);
    background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:#1a1a1a;
    padding:6px 18px;border-radius:20px;font-size:0.8em;font-weight:700;
    z-index:10002;box-shadow:0 4px 15px rgba(212,175,55,0.4);
    font-family:'Inter',sans-serif;letter-spacing:0.5px;display:none;
}
body.admin-mode .admin-badge{display:block}
.admin-section-item{
    display:flex;align-items:center;gap:8px;padding:8px 10px;
    border-radius:8px;margin-bottom:4px;background:rgba(255,255,255,0.04);
    border:1px solid rgba(255,255,255,0.06);transition:all 0.2s ease;font-size:0.82em;
}
.admin-section-item:hover{background:rgba(255,255,255,0.08)}
.admin-section-item .sec-name{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#ccc}
.admin-section-item .sec-actions{display:flex;gap:4px}
.admin-section-item .sec-actions button{
    background:none;border:1px solid rgba(255,255,255,0.15);color:#aaa;
    width:24px;height:24px;border-radius:6px;cursor:pointer;font-size:0.75em;
    transition:all 0.2s ease;padding:0;line-height:24px;text-align:center;
}
.admin-section-item .sec-actions button:hover{color:var(--gold);border-color:var(--gold)}
.admin-section-item .sec-actions button.del-btn:hover{color:#e74c3c;border-color:#e74c3c}
.admin-modal-overlay{
    position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:10003;
    display:flex;align-items:center;justify-content:center;backdrop-filter:blur(4px);
}
.admin-modal{
    background:var(--bg-card);color:var(--text);border-radius:20px;
    padding:30px;width:90%;max-width:480px;
    box-shadow:0 20px 60px rgba(0,0,0,0.3),0 0 0 1px rgba(212,175,55,0.2);
}
.admin-modal h3{font-family:'Playfair Display',serif;color:var(--gold);margin:0 0 20px 0;font-size:1.3em}
.admin-modal label{display:block;font-size:0.85em;color:var(--text-secondary);margin-bottom:4px;text-align:left}
.admin-modal input,.admin-modal textarea{
    width:100%;padding:10px 14px;border:1px solid var(--border-color);
    border-radius:10px;background:var(--bg);color:var(--text);
    font-size:0.95em;margin-bottom:14px;font-family:'Inter',sans-serif;box-sizing:border-box;
}
.admin-modal input:focus,.admin-modal textarea:focus{outline:none;border-color:var(--gold);box-shadow:0 0 0 3px rgba(212,175,55,0.15)}
.admin-modal textarea{resize:vertical;min-height:60px}
.admin-modal-actions{display:flex;gap:10px;margin-top:6px}
.admin-modal-actions button{flex:1}
@media print{
    .admin-toolbar,.admin-badge,.admin-insert-marker,.admin-delete-component,.admin-modal-overlay{display:none!important}
    body.admin-mode .main{margin-right:0!important}
}
@media(max-width:900px){
    .admin-toolbar{width:300px;right:-310px}
    body.admin-mode .main{margin-right:0}
}
</style>
</head>
<body>

<!-- Reading Progress Bar -->
<div class="reading-progress" id="readingProgress"></div>

<!-- Mobile Menu Toggle -->
<button class="menu-toggle" id="menuToggle" onclick="toggleSidebar()">‚ò∞</button>

<!-- Sidebar -->
<nav class="sidebar" id="sidebar" role="navigation" aria-label="Darslar navigatsiyasi">
    <div class="logo" onclick="showSection('cover',event)" style="cursor:pointer" title="Bosh sahifaga o'tish">üìò Ma'lumotlar bazasi<small>15 ta amaliy mashg'ulot</small></div>

    <!-- Search -->
    <div class="sidebar-search">
        <span class="sidebar-search-icon">üîç</span>
        <input type="text" id="sidebarSearch" placeholder="Darslarni qidirish..." oninput="filterSidebar(this.value)">
    </div>

    <!-- Progress -->
    <div class="sidebar-progress">
        <div class="sidebar-progress-bar"><div class="sidebar-progress-fill" id="progressFill" style="width:0%"></div></div>
        <div class="sidebar-progress-text" id="progressText">0 / 15 dars o'tilgan</div>
    </div>

    <a href="#" onclick="showSection('cover',event)" class="active" data-section="cover"><span class="num">‚≠ê</span>Bosh sahifa<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t1',event)" data-section="t1"><span class="num">1</span>MB dasturlarini o'rnatish<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t2',event)" data-section="t2"><span class="num">2</span>MB loyihalash, ER diagramma<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t3',event)" data-section="t3"><span class="num">3</span>SQL ‚Äî Jadvallar<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t4',event)" data-section="t4"><span class="num">4</span>AND, OR, NOR amallar<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t5',event)" data-section="t5"><span class="num">5</span>WHERE, saralash<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t6',event)" data-section="t6"><span class="num">6</span>GROUP BY, ORDER BY, HAVING<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t7',event)" data-section="t7"><span class="num">7</span>UNION, INTERSECT, MINUS<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t8',event)" data-section="t8"><span class="num">8</span>JOIN bilan ishlash<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t9',event)" data-section="t9"><span class="num">9</span>Standart funksiyalar<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t10',event)" data-section="t10"><span class="num">10</span>Agregat funksiyalar<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t11',event)" data-section="t11"><span class="num">11</span>Murakkab so'rovlar<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t12',event)" data-section="t12"><span class="num">12</span>INDEX yaratish<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t13',event)" data-section="t13"><span class="num">13</span>VIEW yaratish<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t14',event)" data-section="t14"><span class="num">14</span>Funksiya, protsedura, trigger<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('t15',event)" data-section="t15"><span class="num">15</span>Oddiy interfeys yaratish<span class="check-badge">‚úì</span></a>
    <a href="#" onclick="showSection('backpage',event)" data-section="backpage" style="border-top:1px solid rgba(255,255,255,0.1);margin-top:8px;padding-top:12px"><span class="num">üìÑ</span>Orqa muqova</a>

    <!-- Dark Mode Toggle -->
    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <span id="darkModeIcon">üåô</span>
        <span id="darkModeText">Tungi rejim</span>
        <div class="toggle-switch" id="toggleSwitch"></div>
    </div>
</nav>

<!-- Sidebar Overlay (mobile) -->
<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

<!-- Back to Top -->
<button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚Üë</button>

<div class="main">

<!-- ===== COVER ===== -->
<div class="section-block active" id="cover">
<div class="cover" style="padding:40px 20px">
    <!-- Kitob muqovasi rasmi -->
    <div style="text-align:center;margin-bottom:30px">
        <img src="cover.png" alt="Ma'lumotlar bazasi ‚Äî M.U.Ergashev" style="max-width:420px;width:100%;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,0.15),0 8px 20px rgba(0,0,0,0.1);transition:transform 0.3s ease" onmouseover="this.style.transform='translateY(-5px) scale(1.02)'" onmouseout="this.style.transform='translateY(0) scale(1)'">
    </div>
    <h1 style="font-size:2.2em;border:none;margin-bottom:5px">Ma'lumotlar bazasi</h1>
    <p class="sub">Amaliy mashg'ulotlar to'plami ‚Äî 15 ta dars</p>
    <div class="gold-line"></div>
    <div class="stats">
        <div class="stat" onclick="document.getElementById('mundarija').scrollIntoView({behavior:'smooth'})" style="cursor:pointer"><div class="num2">15</div><div class="label">Amaliy mashg'ulot</div></div>
        <div class="stat"><div class="num2">30</div><div class="label">Soat</div></div>
        <div class="stat"><div class="num2">120+</div><div class="label">SQL misollar</div></div>
        <div class="stat"><div class="num2">100+</div><div class="label">Topshiriqlar</div></div>
    </div>
    <div class="print-btn-wrap" style="text-align:center;margin-top:30px;display:flex;justify-content:center;gap:15px;flex-wrap:wrap">
        <button onclick="window.print()" style="background:linear-gradient(135deg,#d4af37,#e8cc6a);color:#fff;border:none;padding:15px 40px;font-size:1.1em;font-weight:600;border-radius:15px;cursor:pointer;font-family:'Inter',sans-serif;box-shadow:4px 4px 10px rgba(0,0,0,0.1);transition:transform 0.2s ease" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">PDF yuklab olish</button>
        <button onclick="exportToWord()" style="background:linear-gradient(135deg,#2b5797,#4a8bc2);color:#fff;border:none;padding:15px 40px;font-size:1.1em;font-weight:600;border-radius:15px;cursor:pointer;font-family:'Inter',sans-serif;box-shadow:4px 4px 10px rgba(0,0,0,0.1);transition:transform 0.2s ease" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">Word yuklab olish</button>
    </div>
</div>
<div class="container" style="margin-top:30px">
<h2 id="mundarija"><span class="icon">üìã</span>Mundarija</h2>
<table>
<thead><tr><th>#</th><th>Mavzu</th><th>Asosiy tushunchalar</th></tr></thead>
<tbody>
<tr class="toc-row" onclick="showSection('t1',event)"><td><strong>1</strong></td><td>MB dasturlarini o'rnatish va sozlash</td><td>MySQL Server, Oracle Server, Microsoft SQL Server</td></tr>
<tr class="toc-row" onclick="showSection('t2',event)"><td><strong>2</strong></td><td>MB loyihalash, mohiyat‚Äìaloqa diagrammasi</td><td>Mohiyat, aloqa (1:1, 1:N, M:N), Relyatsion MB, Primary/Foreign Key</td></tr>
<tr class="toc-row" onclick="showSection('t3',event)"><td><strong>3</strong></td><td>SQL tilida jadvallar yaratish, o'zgartirish va o'chirish</td><td>CREATE, ALTER, DROP, RENAME, TRUNCATE, ma'lumot turlari</td></tr>
<tr class="toc-row" onclick="showSection('t4',event)"><td><strong>4</strong></td><td>Ma'lumotlarni tanlash. AND, OR, NOR</td><td>SELECT, WHERE, AND, OR, NOR, BETWEEN, IN, LIKE</td></tr>
<tr class="toc-row" onclick="showSection('t5',event)"><td><strong>5</strong></td><td>Ma'lumotlarni saralash. WHERE</td><td>ORDER BY, LIMIT, OFFSET, WHERE</td></tr>
<tr class="toc-row" onclick="showSection('t6',event)"><td><strong>6</strong></td><td>GROUP BY, ORDER BY va HAVING bilan so'rovlar</td><td>Agregat funksiyalar, WITH ROLLUP, GROUP_CONCAT</td></tr>
<tr class="toc-row" onclick="showSection('t7',event)"><td><strong>7</strong></td><td>UNION, INTERSECT va MINUS buyruqlari</td><td>To'plam operatorlari, UNION ALL, MINUS</td></tr>
<tr class="toc-row" onclick="showSection('t8',event)"><td><strong>8</strong></td><td>Jadvallarni birlashtirish, ¬´JOIN¬ªlar</td><td>INNER, LEFT, RIGHT, FULL, CROSS, SELF JOIN</td></tr>
<tr class="toc-row" onclick="showSection('t9',event)"><td><strong>9</strong></td><td>Standart funksiyalar bilan so'rovlar</td><td>String, son, sana, CASE, IF, COALESCE</td></tr>
<tr class="toc-row" onclick="showSection('t10',event)"><td><strong>10</strong></td><td>Agregat funksiyalardan foydalanish</td><td>COUNT, SUM, AVG, MIN, MAX, STD, VARIANCE</td></tr>
<tr class="toc-row" onclick="showSection('t11',event)"><td><strong>11</strong></td><td>Murakkab so'rovlar yaratish</td><td>Subquery, CTE, Window functions, Recursive</td></tr>
<tr class="toc-row" onclick="showSection('t12',event)"><td><strong>12</strong></td><td>SQL tilida INDEX yaratish</td><td>B-Tree, UNIQUE, COMPOSITE, FULLTEXT, EXPLAIN</td></tr>
<tr class="toc-row" onclick="showSection('t13',event)"><td><strong>13</strong></td><td>Tasavvur, VIEW yaratish va foydalanish</td><td>Virtual jadval, Updatable VIEW, WITH CHECK OPTION</td></tr>
<tr class="toc-row" onclick="showSection('t14',event)"><td><strong>14</strong></td><td>SQLda funksiyalar, protseduralar va triggerlar</td><td>DELIMITER, RETURN, IN/OUT, BEFORE/AFTER, SIGNAL</td></tr>
<tr class="toc-row" onclick="showSection('t15',event)"><td><strong>15</strong></td><td>Oddiy interfeys yaratish</td><td>Dasturlash tillari, MB, CRUD, HTML formalar</td></tr>
</tbody>
</table>
</div>
</div>


<!-- ===== TUTORIAL 1 ===== -->
<div class="section-block" id="t1">
<div class="container">

<h1>1-amaliy mashg'ulot</h1>
<p class="subtitle">Ma'lumotlar bazasi dasturlarini o'rnatish va sozlash (MySQL server, Oracle Server, Microsoft SQL Server)</p>
<div class="gold-line"></div>
<div class="meta-info"><strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp; <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp; <strong>üéØ Daraja:</strong> Boshlang'ich</div>

<h2><span class="icon">üìñ</span>Nazariy qism</h2>
<div class="card">
<h3><span class="icon">üóÑ</span>Ma'lumotlar bazasi tizimi (MBBT) nima?</h3>
<p>MBBT (Database Management System ‚Äî DBMS) ‚Äî ma'lumotlarni tashkil etish, saqlash, boshqarish va ulardan foydalanish imkonini beruvchi dasturiy ta'minot majmuasidir. U ma'lumotlarni yaratish, o'qish, yangilash va o'chirish (CRUD) amallarini bajaradi.</p>
<div class="concept-grid">
<div class="concept-card"><span class="big-icon">üê¨</span><h4>MySQL</h4><p>Bepul, ochiq kodli, eng mashhur relyatsion MBBT</p></div>
<div class="concept-card"><span class="big-icon">üêò</span><h4>PostgreSQL</h4><p>Kengaytirilgan, murakkab so'rovlar uchun kuchli</p></div>
<div class="concept-card"><span class="big-icon">üî∂</span><h4>Oracle</h4><p>Korporativ darajadagi MBBT, pullik</p></div>
<div class="concept-card"><span class="big-icon">üî∑</span><h4>MS SQL</h4><p>Microsoft ekotizimi uchun</p></div>
</div>
</div>

<div class="card">
<h3><span class="icon">üìä</span>MBBT turlari qiyoslash</h3>
<table>
<thead><tr><th>Xususiyat</th><th>MySQL</th><th>PostgreSQL</th><th>Oracle</th><th>MS SQL</th></tr></thead>
<tbody>
<tr><td><strong>Narx</strong></td><td>Bepul</td><td>Bepul</td><td>Pullik</td><td>Pullik*</td></tr>
<tr><td><strong>Tezlik</strong></td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
<tr><td><strong>O'rganish</strong></td><td>Oson</td><td>O'rta</td><td>Murakkab</td><td>O'rta</td></tr>
<tr><td><strong>OS</strong></td><td>Barcha</td><td>Barcha</td><td>Linux, Win</td><td>Faqat Win</td></tr>
</tbody>
</table>
</div>

<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<div class="card">
<h3><span class="step-number">1</span>MySQL o'rnatish</h3>
<p><strong>1-qadam.</strong> MySQL rasmiy saytiga kiring: <code>https://dev.mysql.com/downloads/installer/</code></p>
<p><strong>2-qadam.</strong> "MySQL Installer for Windows" ni yuklab oling (mysql-installer-community-8.0.xx.msi)</p>
<div class="theory-box"><p><strong>üí° Tizim talablari:</strong> Windows 10/11 (64-bit), 4 GB+ RAM, 2 GB+ bo'sh disk, Internet</p></div>
<p><strong>3-qadam.</strong> O'rnatuvchini ishga tushiring va <strong>"Custom"</strong> turini tanlang</p>
<p><strong>4-qadam.</strong> Quyidagi komponentlarni tanlang:</p>
<ul>
<li>‚úÖ MySQL Server 8.0</li>
<li>‚úÖ MySQL Workbench 8.0</li>
<li>‚úÖ MySQL Shell</li>
<li>‚úÖ Connector/J (Java uchun)</li>
</ul>
<p><strong>5-qadam.</strong> "Execute" tugmasini bosib, o'rnatishni boshlang</p>
<p><strong>6-qadam.</strong> Konfiguratsiya:</p>
<ul>
<li>Type: <strong>Development Computer</strong></li>
<li>Port: <strong>3306</strong> (standart)</li>
<li>Authentication: <strong>Use Strong Password Encryption</strong></li>
</ul>
<p><strong>7-qadam.</strong> Root parolini o'rnating (masalan: <code>Root@2025</code>)</p>
<div class="warning-box"><p>‚ö†Ô∏è <strong>Muhim:</strong> Root parolini yodda saqlang! Bu eng muhim ma'muriy parol.</p></div>
<p><strong>8-qadam.</strong> Windows Service ‚Äî <strong>"Start the MySQL Server at System Startup"</strong> belgilang</p>
<p><strong>9-qadam.</strong> "Finish" tugmasini bosing. O'rnatish tugadi!</p>
</div>

<div class="card">
<h3><span class="step-number">2</span>MySQL xizmatini tekshirish</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">Terminal ‚Äî MySQL xizmatini tekshirish</div></div>
<pre><code><span class="sql-comment">-- CMD dan tekshirish</span>
sc query MySQL80

<span class="sql-comment">-- Yoki services.msc orqali</span>
<span class="sql-comment">-- Win+R ‚Üí services.msc ‚Üí MySQL80 ni toping</span>

<span class="sql-comment">-- MySQL ga ulanish</span>
mysql -u root -p
<span class="sql-comment">-- Parolni kiriting</span></code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>SERVICE_NAME: MySQL80 ‚Äî STATE: 4 RUNNING</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Welcome to the MySQL monitor. Server version: 8.0.36</span>
<span class="rok-line">mysql></span>
</div>
</div>

<div class="card">
<h3><span class="step-number">3</span>MySQL Workbench bilan ishlash</h3>
<p><strong>1.</strong> MySQL Workbench dasturini oching</p>
<p><strong>2.</strong> "MySQL Connections" bo'limida <strong>"Local instance MySQL80"</strong> ni bosing</p>
<p><strong>3.</strong> Root parolni kiriting va ulaning</p>
<p><strong>4.</strong> Query oynasida SQL buyruqlarni yozishni boshlang</p>
</div>

<div class="card">
<h3><span class="step-number">4</span>Birinchi ma'lumotlar bazasi</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Ma'lumotlar bazasi yaratish</div></div>
<pre><code><span class="sql-comment">-- Ma'lumotlar bazasi yaratish</span>
<span class="sql-keyword">CREATE DATABASE</span> university_db;
<span class="sql-keyword">USE</span> university_db;

<span class="sql-comment">-- Jadval yaratish</span>
<span class="sql-keyword">CREATE TABLE</span> students (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    fname <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    lname <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    age <span class="sql-keyword">INT</span>,
    faculty <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    gpa <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">3</span>,<span class="sql-number">2</span>)
);

<span class="sql-comment">-- Ma'lumot kiritish</span>
<span class="sql-keyword">INSERT INTO</span> students (fname, lname, age, faculty, gpa) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Alisher'</span>, <span class="sql-string">'Karimov'</span>, <span class="sql-number">20</span>, <span class="sql-string">'Informatika'</span>, <span class="sql-number">4.5</span>),
(<span class="sql-string">'Malika'</span>,  <span class="sql-string">'Rahimova'</span>, <span class="sql-number">21</span>, <span class="sql-string">'Iqtisodiyot'</span>, <span class="sql-number">3.8</span>),
(<span class="sql-string">'Jasur'</span>,   <span class="sql-string">'Toshmatov'</span>, <span class="sql-number">19</span>, <span class="sql-string">'Informatika'</span>, <span class="sql-number">4.2</span>);

<span class="sql-comment">-- Ma'lumotlarni ko'rish</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> students;</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 3 rows affected (0.01 sec) ‚Äî <code>INSERT INTO</code></span>
<span class="rok-line">Records: 3 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<span class="result-label">üìã Natija ‚Äî SELECT * FROM students</span>
<table>
<thead><tr><th>id</th><th>fname</th><th>lname</th><th>age</th><th>faculty</th><th>gpa</th></tr></thead>
<tbody>
<tr><td>1</td><td>Alisher</td><td>Karimov</td><td>20</td><td>Informatika</td><td>4.50</td></tr>
<tr><td>2</td><td>Malika</td><td>Rahimova</td><td>21</td><td>Iqtisodiyot</td><td>3.80</td></tr>
<tr><td>3</td><td>Jasur</td><td>Toshmatov</td><td>19</td><td>Informatika</td><td>4.20</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="step-number">5</span>Foydalanuvchi yaratish va huquqlar</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Foydalanuvchi va huquqlar</div></div>
<pre><code><span class="sql-comment">-- Yangi foydalanuvchi yaratish</span>
<span class="sql-keyword">CREATE USER</span> <span class="sql-string">'talaba'</span>@<span class="sql-string">'localhost'</span>
<span class="sql-keyword">IDENTIFIED BY</span> <span class="sql-string">'Talaba@123'</span>;

<span class="sql-comment">-- Huquqlar berish</span>
<span class="sql-keyword">GRANT ALL PRIVILEGES ON</span> university_db.* <span class="sql-keyword">TO</span> <span class="sql-string">'talaba'</span>@<span class="sql-string">'localhost'</span>;

<span class="sql-keyword">FLUSH PRIVILEGES</span>;

<span class="sql-comment">-- Bazalar ro'yxati</span>
<span class="sql-keyword">SHOW DATABASES</span>;

<span class="sql-comment">-- Jadvallar ro'yxati</span>
<span class="sql-keyword">SHOW TABLES</span>;</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE USER</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>GRANT ALL PRIVILEGES</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>FLUSH PRIVILEGES</code></span>
</div>
<span class="result-label">üìã Natija ‚Äî SHOW DATABASES</span>
<table>
<thead><tr><th>Database</th></tr></thead>
<tbody>
<tr><td>information_schema</td></tr>
<tr><td>mysql</td></tr>
<tr><td>performance_schema</td></tr>
<tr><td>sys</td></tr>
<tr><td>university_db</td></tr>
</tbody>
</table>
<span class="result-label">üìã Natija ‚Äî SHOW TABLES</span>
<table>
<thead><tr><th>Tables_in_university_db</th></tr></thead>
<tbody>
<tr><td>students</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card"><ol>
<li>MBBT nima va uning asosiy vazifalari?</li>
<li>MySQL ning boshqa MBBT lardan afzalliklari?</li>
<li>MySQL o'rnatish paytida qaysi port standart?</li>
<li><code>root</code> foydalanuvchisi nima?</li>
<li><code>CREATE DATABASE</code> va <code>USE</code> buyruqlari farqi?</li>
<li><code>GRANT</code> buyrug'i nima uchun ishlatiladi?</li>
</ol></div>

<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>
<div class="card"><ol>
<li><code>teachers</code> jadvali yarating (id, fname, subject)</li>
<li>3 ta o'qituvchi ma'lumotini kiriting</li>
<li><code>courses</code> jadvali yarating (id, name, credit)</li>
<li><code>SELECT</code> bilan barcha jadvallar ma'lumotini ko'rsating</li>
<li>Yangi foydalanuvchi yaratib, unga faqat <code>SELECT</code> huquqini bering</li>
</ol></div>

<div class="luxury-divider"></div>
<div class="card"><h2><span class="icon">üèÜ</span>Xulosa</h2><p>Ushbu mashg'ulotda MySQL Server o'rnatish, Workbench bilan ishlash, birinchi baza yaratish, jadval yaratish, ma'lumot kiritish, SELECT, foydalanuvchi yaratish va huquqlar berish o'rganildi.</p></div>

</div>
</div>

<!-- ===== TUTORIAL 2 ===== -->
<div class="section-block" id="t2">
<div class="container">

<h1>2-amaliy mashg'ulot</h1>
<p class="subtitle">Ma'lumotlar bazasini loyihalash, mohiyat‚Äìaloqa diagrammasini qurish. Relyatsion ma'lumotlar bazasini loyihalash</p>
<div class="gold-line"></div>
<div class="meta-info"><strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp; <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp; <strong>üéØ Daraja:</strong> Boshlang'ich-O'rta</div>

<h2><span class="icon">üìñ</span>Nazariy qism</h2>
<div class="card">
<h3><span class="icon">üß©</span>Asosiy tushunchalar</h3>
<div class="concept-grid">
<div class="concept-card"><span class="big-icon">üì¶</span><h4>Mohiyat (Entity)</h4><p>Real dunyodagi ob'ekt: Talaba, Kurs, O'qituvchi</p></div>
<div class="concept-card"><span class="big-icon">üìù</span><h4>Atribut (Attribute)</h4><p>Mohiyat xususiyati: ism, yosh, telefon</p></div>
<div class="concept-card"><span class="big-icon">üîó</span><h4>Aloqa (Relationship)</h4><p>Mohiyatlar orasidagi bog'lanish</p></div>
</div>
</div>

<div class="card">
<h3><span class="icon">üîó</span>Aloqa turlari</h3>
<table>
<thead><tr><th>Tur</th><th>Misol</th><th>Tushuntirish</th></tr></thead>
<tbody>
<tr><td><strong>1:1</strong> (Birga-bir)</td><td>Shaxs ‚Üî Passport</td><td>Har bir shaxsning bitta pasporti bor</td></tr>
<tr><td><strong>1:N</strong> (Birga-ko'p)</td><td>Fakultet ‚Üí Talabalar</td><td>Bitta fakultetda ko'p talaba</td></tr>
<tr><td><strong>M:N</strong> (Ko'pga-ko'p)</td><td>Talaba ‚Üî Kurs</td><td>Oraliq jadval kerak (enrollment)</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="icon">üîë</span>Kalit turlari</h3>
<table>
<thead><tr><th>Tur</th><th>Nomi</th><th>Tavsif</th></tr></thead>
<tbody>
<tr><td><strong>PK</strong></td><td>Primary Key</td><td>Jadval ichida yagona identifikator (id)</td></tr>
<tr><td><strong>FK</strong></td><td>Foreign Key</td><td>Boshqa jadvalga havola (bog'lanish)</td></tr>
<tr><td><strong>UK</strong></td><td>Unique Key</td><td>Takrorlanmas qiymat (email, passport_no)</td></tr>
</tbody>
</table>
</div>

<h2><span class="icon">‚ö°</span>Amaliy qism ‚Äî "Universitet" tizimi</h2>

<div class="card">
<h3><span class="step-number">1</span>Mohiyatlarni aniqlash</h3>
<p>Universitet tizimida quyidagi mohiyatlar mavjud:</p>
<table>
<thead><tr><th>Mohiyat</th><th>Jadval nomi</th><th>Asosiy atributlar</th></tr></thead>
<tbody>
<tr><td>Fakultet</td><td>fakultetlar</td><td>id, nomi, dekan</td></tr>
<tr><td>Yo'nalish</td><td>yonalishlar</td><td>id, nomi, fakultet_id (FK)</td></tr>
<tr><td>Guruh</td><td>guruhlar</td><td>id, nomi, yonalish_id (FK), bosqich</td></tr>
<tr><td>Talaba</td><td>talabalar</td><td>id, ism, familiya, guruh_id (FK)</td></tr>
<tr><td>Fan</td><td>fanlar</td><td>id, nomi, kredit</td></tr>
<tr><td>Baho</td><td>baholar</td><td>id, talaba_id (FK), fan_id (FK), baho</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="step-number">2</span>Jadvallarni yaratish (FOREIGN KEY bilan)</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Jadvallar yaratish</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE</span> universitet_db;
<span class="sql-keyword">USE</span> universitet_db;

<span class="sql-keyword">CREATE TABLE</span> fakultetlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>) <span class="sql-keyword">NOT NULL</span>,
    dekan <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>)
);

<span class="sql-keyword">CREATE TABLE</span> yonalishlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>) <span class="sql-keyword">NOT NULL</span>,
    fakultet_id <span class="sql-keyword">INT</span>,
    <span class="sql-keyword">FOREIGN KEY</span> (fakultet_id) <span class="sql-keyword">REFERENCES</span> fakultetlar(id)
);

<span class="sql-keyword">CREATE TABLE</span> guruhlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">20</span>) <span class="sql-keyword">NOT NULL</span>,
    yonalish_id <span class="sql-keyword">INT</span>,
    bosqich <span class="sql-keyword">INT</span>,
    <span class="sql-keyword">FOREIGN KEY</span> (yonalish_id) <span class="sql-keyword">REFERENCES</span> yonalishlar(id)
);

<span class="sql-keyword">CREATE TABLE</span> talabalar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    guruh_id <span class="sql-keyword">INT</span>,
    <span class="sql-keyword">FOREIGN KEY</span> (guruh_id) <span class="sql-keyword">REFERENCES</span> guruhlar(id)
);

<span class="sql-keyword">CREATE TABLE</span> fanlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    kredit <span class="sql-keyword">INT</span>
);

<span class="sql-keyword">CREATE TABLE</span> baholar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    talaba_id <span class="sql-keyword">INT</span>,
    fan_id <span class="sql-keyword">INT</span>,
    baho <span class="sql-keyword">INT CHECK</span>(baho <span class="sql-keyword">BETWEEN</span> <span class="sql-number">1</span> <span class="sql-keyword">AND</span> <span class="sql-number">5</span>),
    <span class="sql-keyword">FOREIGN KEY</span> (talaba_id) <span class="sql-keyword">REFERENCES</span> talabalar(id),
    <span class="sql-keyword">FOREIGN KEY</span> (fan_id) <span class="sql-keyword">REFERENCES</span> fanlar(id)
);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE fakultetlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE yonalishlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE guruhlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE talabalar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE fanlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE baholar</code></span>
</div>
</div>

<div class="card">
<h3><span class="step-number">3</span>Namuna ma'lumotlar va JOIN tekshirish</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Namuna ma‚Äòlumotlar</div></div>
<pre><code><span class="sql-keyword">INSERT INTO</span> fakultetlar (nomi, dekan) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Informatika'</span>, <span class="sql-string">'Prof. Karimov'</span>),
(<span class="sql-string">'Iqtisodiyot'</span>, <span class="sql-string">'Prof. Rahimova'</span>);

<span class="sql-keyword">INSERT INTO</span> yonalishlar (nomi, fakultet_id) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Dasturiy injiniring'</span>, <span class="sql-number">1</span>),
(<span class="sql-string">'Moliya va audit'</span>, <span class="sql-number">2</span>);

<span class="sql-keyword">INSERT INTO</span> guruhlar (nomi, yonalish_id, bosqich) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'DI-21'</span>, <span class="sql-number">1</span>, <span class="sql-number">3</span>), (<span class="sql-string">'MA-22'</span>, <span class="sql-number">2</span>, <span class="sql-number">2</span>);

<span class="sql-keyword">INSERT INTO</span> talabalar (ism, familiya, guruh_id) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Alisher'</span>, <span class="sql-string">'Karimov'</span>, <span class="sql-number">1</span>), (<span class="sql-string">'Malika'</span>, <span class="sql-string">'Tursunova'</span>, <span class="sql-number">2</span>);

<span class="sql-comment">-- JOIN bilan tekshirish</span>
<span class="sql-keyword">SELECT</span> t.ism, t.familiya, g.nomi <span class="sql-keyword">AS</span> guruh,
       y.nomi <span class="sql-keyword">AS</span> yonalish, f.nomi <span class="sql-keyword">AS</span> fakultet
<span class="sql-keyword">FROM</span> talabalar t
<span class="sql-keyword">INNER JOIN</span> guruhlar g <span class="sql-keyword">ON</span> t.guruh_id = g.id
<span class="sql-keyword">INNER JOIN</span> yonalishlar y <span class="sql-keyword">ON</span> g.yonalish_id = y.id
<span class="sql-keyword">INNER JOIN</span> fakultetlar f <span class="sql-keyword">ON</span> y.fakultet_id = f.id;</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 2 rows affected (0.01 sec) ‚Äî <code>INSERT INTO fakultetlar</code></span>
<span class="rok-line">Records: 2 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 2 rows affected (0.01 sec) ‚Äî <code>INSERT INTO yonalishlar</code></span>
<span class="rok-line">Records: 2 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 2 rows affected (0.01 sec) ‚Äî <code>INSERT INTO guruhlar</code></span>
<span class="rok-line">Records: 2 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 2 rows affected (0.01 sec) ‚Äî <code>INSERT INTO talabalar</code></span>
<span class="rok-line">Records: 2 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<span class="result-label">üìã Natija ‚Äî SELECT ... JOIN</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>guruh</th><th>yonalish</th><th>fakultet</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>DI-21</td><td>Dasturiy injiniring</td><td>Informatika</td></tr>
<tr><td>Malika</td><td>Tursunova</td><td>MA-22</td><td>Moliya va audit</td><td>Iqtisodiyot</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card"><ol>
<li>Mohiyat (Entity) nima? Misol keltiring.</li>
<li>1:1, 1:N, M:N aloqa turlari orasidagi farq?</li>
<li>Primary Key va Foreign Key nima?</li>
<li>M:N aloqani qanday hal qilasiz?</li>
<li>FOREIGN KEY nima uchun kerak?</li>
</ol></div>

<div class="card"><h2><span class="icon">üèÜ</span>Xulosa</h2><p>Ushbu mashg'ulotda MB loyihalash, ER diagramma tushunchalari, mohiyat-aloqa-atribut, aloqa turlari (1:1, 1:N, M:N), Primary/Foreign Key, va 6 jadvallik "Universitet" tizimini SQL da yaratish o'rganildi.</p></div>

</div>
</div>

<!-- ===== TUTORIAL 3 ===== -->
<div class="section-block" id="t3">
<div class="container">

<h1>3-amaliy mashg'ulot</h1>
<p class="subtitle">SQL tilida jadvallar yaratish, o'zgartirish va o'chirish</p>
<div class="gold-line"></div>
<div class="meta-info"><strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp; <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp; <strong>üéØ Daraja:</strong> Boshlang'ich-O'rta</div>

<h2><span class="icon">üìñ</span>Nazariy qism</h2>
<div class="card">
<h3><span class="icon">üß©</span>DDL buyruqlari</h3>
<table>
<thead><tr><th>Buyruq</th><th>Vazifasi</th><th>Misol</th></tr></thead>
<tbody>
<tr><td><code>CREATE TABLE</code></td><td>Yangi jadval yaratish</td><td><code>CREATE TABLE talabalar (...)</code></td></tr>
<tr><td><code>ALTER TABLE</code></td><td>Jadval tuzilmasini o'zgartirish</td><td><code>ALTER TABLE ... ADD COLUMN</code></td></tr>
<tr><td><code>DROP TABLE</code></td><td>Jadvalni to'liq o'chirish</td><td><code>DROP TABLE IF EXISTS nomi</code></td></tr>
<tr><td><code>TRUNCATE TABLE</code></td><td>Ma'lumotlarni tozalash (tuzilma qoladi)</td><td><code>TRUNCATE TABLE nomi</code></td></tr>
<tr><td><code>RENAME TABLE</code></td><td>Jadval nomini o'zgartirish</td><td><code>RENAME TABLE eski TO yangi</code></td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="icon">üìä</span>Ma'lumot turlari</h3>
<table>
<thead><tr><th>Tur</th><th>Tavsif</th><th>Hajm</th></tr></thead>
<tbody>
<tr><td><code>INT</code></td><td>Butun son</td><td>4 bayt</td></tr>
<tr><td><code>BIGINT</code></td><td>Katta butun son</td><td>8 bayt</td></tr>
<tr><td><code>DECIMAL(M,D)</code></td><td>Aniq kasr son</td><td>M raqam, D kasr</td></tr>
<tr><td><code>VARCHAR(N)</code></td><td>O'zgaruvchan matn</td><td>1-65535 belgi</td></tr>
<tr><td><code>TEXT</code></td><td>Uzun matn</td><td>65535 belgi</td></tr>
<tr><td><code>DATE</code></td><td>Sana (YYYY-MM-DD)</td><td>3 bayt</td></tr>
<tr><td><code>DATETIME</code></td><td>Sana + vaqt</td><td>8 bayt</td></tr>
<tr><td><code>BOOLEAN</code></td><td>True/False (TINYINT)</td><td>1 bayt</td></tr>
<tr><td><code>ENUM</code></td><td>Ro'yxatdan tanlash</td><td>1-2 bayt</td></tr>
</tbody>
</table>
</div>

<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<div class="card">
<h3><span class="step-number">1</span>Jadval yaratish (CREATE TABLE)</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CREATE TABLE</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE</span> ddl_db;
<span class="sql-keyword">USE</span> ddl_db;

<span class="sql-keyword">CREATE TABLE</span> xodimlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    email <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>) <span class="sql-keyword">UNIQUE</span>,
    maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>) <span class="sql-keyword">DEFAULT</span> <span class="sql-number">0</span>,
    yosh <span class="sql-keyword">INT CHECK</span>(yosh >= <span class="sql-number">18</span>),
    bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    ishga_kirgan <span class="sql-keyword">DATE DEFAULT</span> (<span class="sql-function">CURDATE</span>()),
    holat <span class="sql-keyword">ENUM</span>(<span class="sql-string">'faol'</span>, <span class="sql-string">'nofaol'</span>) <span class="sql-keyword">DEFAULT</span> <span class="sql-string">'faol'</span>
);

<span class="sql-keyword">DESCRIBE</span> xodimlar;</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.04 sec) ‚Äî <code>CREATE TABLE xodimlar</code></span>
</div>
<span class="result-label">üìã Natija ‚Äî DESCRIBE xodimlar</span>
<table>
<thead><tr><th>Field</th><th>Type</th><th>Null</th><th>Key</th><th>Default</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>id</td><td>int</td><td>NO</td><td>PRI</td><td>NULL</td><td>auto_increment</td></tr>
<tr><td>ism</td><td>varchar(50)</td><td>NO</td><td></td><td>NULL</td><td></td></tr>
<tr><td>familiya</td><td>varchar(50)</td><td>NO</td><td></td><td>NULL</td><td></td></tr>
<tr><td>email</td><td>varchar(100)</td><td>YES</td><td>UNI</td><td>NULL</td><td></td></tr>
<tr><td>maosh</td><td>decimal(12,2)</td><td>YES</td><td></td><td>0.00</td><td></td></tr>
<tr><td>yosh</td><td>int</td><td>YES</td><td></td><td>NULL</td><td></td></tr>
<tr><td>bolim</td><td>varchar(50)</td><td>YES</td><td></td><td>NULL</td><td></td></tr>
<tr><td>ishga_kirgan</td><td>date</td><td>YES</td><td></td><td>curdate()</td><td>DEFAULT_GENERATED</td></tr>
<tr><td>holat</td><td>enum('faol','nofaol')</td><td>YES</td><td></td><td>faol</td><td></td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="step-number">2</span>Jadvalni o'zgartirish (ALTER TABLE)</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî ALTER TABLE</div></div>
<pre><code><span class="sql-comment">-- Ustun qo'shish</span>
<span class="sql-keyword">ALTER TABLE</span> xodimlar <span class="sql-keyword">ADD COLUMN</span> telefon <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">20</span>);
<span class="sql-keyword">ALTER TABLE</span> xodimlar <span class="sql-keyword">ADD COLUMN</span> manzil <span class="sql-keyword">TEXT AFTER</span> telefon;

<span class="sql-comment">-- Ustun turini o'zgartirish</span>
<span class="sql-keyword">ALTER TABLE</span> xodimlar <span class="sql-keyword">MODIFY COLUMN</span> email <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">150</span>);

<span class="sql-comment">-- Ustun nomini o'zgartirish</span>
<span class="sql-keyword">ALTER TABLE</span> xodimlar <span class="sql-keyword">CHANGE COLUMN</span> yosh tug_yili <span class="sql-keyword">YEAR</span>;

<span class="sql-comment">-- Ustunni o'chirish</span>
<span class="sql-keyword">ALTER TABLE</span> xodimlar <span class="sql-keyword">DROP COLUMN</span> manzil;

<span class="sql-comment">-- Indeks qo'shish</span>
<span class="sql-keyword">ALTER TABLE</span> xodimlar <span class="sql-keyword">ADD INDEX</span> idx_bolim (bolim);

<span class="sql-comment">-- Jadval nomini o'zgartirish</span>
<span class="sql-keyword">RENAME TABLE</span> xodimlar <span class="sql-keyword">TO</span> employees;
<span class="sql-keyword">RENAME TABLE</span> employees <span class="sql-keyword">TO</span> xodimlar;</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.05 sec) ‚Äî <code>ADD COLUMN telefon</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.04 sec) ‚Äî <code>ADD COLUMN manzil</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>MODIFY COLUMN email</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.04 sec) ‚Äî <code>CHANGE COLUMN yosh ‚Üí tug_yili</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>DROP COLUMN manzil</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>ADD INDEX idx_bolim</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>RENAME TABLE xodimlar ‚Üí employees</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>RENAME TABLE employees ‚Üí xodimlar</code></span>
</div>
</div>

<div class="card">
<h3><span class="step-number">3</span>O'chirish buyruqlari</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî TRUNCATE va DROP</div></div>
<pre><code><span class="sql-comment">-- TRUNCATE ‚Äî ma'lumotlarni tozalash (jadval qoladi)</span>
<span class="sql-keyword">CREATE TABLE</span> test_jadval (id <span class="sql-keyword">INT</span>, nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>));
<span class="sql-keyword">INSERT INTO</span> test_jadval <span class="sql-keyword">VALUES</span> (<span class="sql-number">1</span>,<span class="sql-string">'test'</span>);
<span class="sql-keyword">TRUNCATE TABLE</span> test_jadval;
<span class="sql-comment">-- Jadval mavjud, lekin bo'sh</span>

<span class="sql-comment">-- DROP ‚Äî jadvalni butunlay o'chirish</span>
<span class="sql-keyword">DROP TABLE IF EXISTS</span> test_jadval;
<span class="sql-comment">-- Jadval umuman yo'q bo'ladi</span>

<span class="sql-comment">-- DROP va TRUNCATE farqi:</span>
<span class="sql-comment">-- TRUNCATE: tez, AUTO_INCREMENT ni qaytaradi, ROLLBACK mumkin emas</span>
<span class="sql-comment">-- DELETE: sekin, WHERE bilan, ROLLBACK mumkin</span></code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE test_jadval</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>INSERT INTO test_jadval</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>TRUNCATE TABLE test_jadval</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>DROP TABLE IF EXISTS test_jadval</code></span>
</div>
</div>

<div class="luxury-divider"></div>
<div class="card"><h2><span class="icon">üèÜ</span>Xulosa</h2><p>Ushbu mashg'ulotda DDL buyruqlari (CREATE, ALTER, DROP, TRUNCATE, RENAME), ma'lumot turlari (INT, VARCHAR, DECIMAL, DATE, ENUM), cheklovlar (PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK, DEFAULT, NOT NULL) va jadval tuzilmasini o'zgartirish o'rganildi.</p></div>

</div>
</div>

<!-- ===== TUTORIAL 4 ===== -->
<div class="section-block" id="t4">
<div class="container">

<h1>4-amaliy mashg'ulot</h1>
<p class="subtitle">Ma'lumotlarni tanlash va ular ustida amallar. AND, OR, NOR mantiqiy standart so'zlardan foydalanish</p>
<div class="gold-line"></div>
<div class="meta-info"><strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp; <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp; <strong>üéØ Daraja:</strong> O'rta</div>

<h2><span class="icon">üìñ</span>Nazariy qism</h2>
<div class="card">
<h3><span class="icon">üìä</span>SELECT sintaksisi</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî SELECT sintaksisi</div></div>
<pre><code><span class="sql-keyword">SELECT</span> ustunlar       <span class="sql-comment">-- Qaysi ustunlar</span>
<span class="sql-keyword">FROM</span>   jadval          <span class="sql-comment">-- Qaysi jadval</span>
<span class="sql-keyword">WHERE</span>  shart            <span class="sql-comment">-- Qaysi qatorlar (filtr)</span>
<span class="sql-keyword">ORDER BY</span> ustun         <span class="sql-comment">-- Tartiblash</span>
<span class="sql-keyword">LIMIT</span>  son;             <span class="sql-comment">-- Cheklash</span></code></pre>
</div>
</div>

<div class="card">
<h3><span class="icon">‚öñÔ∏è</span>Operatorlar</h3>
<table>
<thead><tr><th>Operator</th><th>Ma'nosi</th><th>Misol</th></tr></thead>
<tbody>
<tr><td><code>AND</code></td><td>Ikkala shart ham to'g'ri bo'lsa</td><td><code>WHERE narx > 100 AND soni > 0</code></td></tr>
<tr><td><code>OR</code></td><td>Kamida bitta shart to'g'ri bo'lsa</td><td><code>WHERE rang='qizil' OR rang='ko'k'</code></td></tr>
<tr><td><code>NOT</code></td><td>Shartni teskari qiladi</td><td><code>WHERE NOT kategoriya='oziq'</code></td></tr>
<tr><td><code>BETWEEN</code></td><td>Oraliqda (chegaralar ham kiradi)</td><td><code>WHERE narx BETWEEN 100 AND 500</code></td></tr>
<tr><td><code>IN</code></td><td>Ro'yxatdan birortasiga teng</td><td><code>WHERE shahar IN ('Toshkent','Buxoro')</code></td></tr>
<tr><td><code>LIKE</code></td><td>Shablon bo'yicha qidirish</td><td><code>WHERE ism LIKE 'A%'</code></td></tr>
<tr><td><code>IS NULL</code></td><td>Bo'sh qiymat tekshirish</td><td><code>WHERE telefon IS NULL</code></td></tr>
</tbody>
</table>
<div class="warning-box"><p>‚ö†Ô∏è <strong>Ustuvorlik:</strong> NOT &gt; AND &gt; OR. Qavslar bilan aniq tartib bering!</p></div>
</div>

<h2><span class="icon">‚ö°</span>Amaliy qism</h2>
<div class="card">
<h3><span class="step-number">1</span>Mashq ma'lumotlari</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Mahsulotlar jadvali</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE</span> select_db; <span class="sql-keyword">USE</span> select_db;

<span class="sql-keyword">CREATE TABLE</span> mahsulotlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>), kategoriya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    ishlab_chiqaruvchi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>), narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    soni <span class="sql-keyword">INT</span>, chegirma <span class="sql-keyword">INT DEFAULT</span> <span class="sql-number">0</span>,
    qoshilgan <span class="sql-keyword">DATE</span>
);

<span class="sql-keyword">INSERT INTO</span> mahsulotlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>, <span class="sql-string">'iPhone 15 Pro'</span>, <span class="sql-string">'Telefonlar'</span>, <span class="sql-string">'Apple'</span>, <span class="sql-number">15000000</span>, <span class="sql-number">20</span>, <span class="sql-number">5</span>, <span class="sql-string">'2024-01-15'</span>),
(<span class="sql-number">2</span>, <span class="sql-string">'Samsung S24'</span>, <span class="sql-string">'Telefonlar'</span>, <span class="sql-string">'Samsung'</span>, <span class="sql-number">12000000</span>, <span class="sql-number">35</span>, <span class="sql-number">10</span>, <span class="sql-string">'2024-02-01'</span>),
(<span class="sql-number">3</span>, <span class="sql-string">'MacBook Pro'</span>, <span class="sql-string">'Noutbuklar'</span>, <span class="sql-string">'Apple'</span>, <span class="sql-number">25000000</span>, <span class="sql-number">10</span>, <span class="sql-number">0</span>, <span class="sql-string">'2024-01-20'</span>),
(<span class="sql-number">4</span>, <span class="sql-string">'HP Pavilion'</span>, <span class="sql-string">'Noutbuklar'</span>, <span class="sql-string">'HP'</span>, <span class="sql-number">8500000</span>, <span class="sql-number">15</span>, <span class="sql-number">15</span>, <span class="sql-string">'2024-03-05'</span>),
(<span class="sql-number">5</span>, <span class="sql-string">'Xiaomi 14'</span>, <span class="sql-string">'Telefonlar'</span>, <span class="sql-string">'Xiaomi'</span>, <span class="sql-number">6500000</span>, <span class="sql-number">50</span>, <span class="sql-number">0</span>, <span class="sql-string">'2024-02-10'</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE mahsulotlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 5 rows affected (0.01 sec) ‚Äî <code>INSERT INTO mahsulotlar</code></span>
<span class="rok-line">Records: 5 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
</div>

<div class="card">
<h3><span class="step-number">2</span>AND, OR, NOT amaliyoti</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Mantiqiy operatorlar</div></div>
<pre><code><span class="sql-comment">-- AND: Apple telefonlari</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> mahsulotlar
<span class="sql-keyword">WHERE</span> ishlab_chiqaruvchi = <span class="sql-string">'Apple'</span> <span class="sql-keyword">AND</span> kategoriya = <span class="sql-string">'Telefonlar'</span>;

<span class="sql-comment">-- OR: Telefonlar yoki Noutbuklar</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> mahsulotlar
<span class="sql-keyword">WHERE</span> kategoriya = <span class="sql-string">'Telefonlar'</span> <span class="sql-keyword">OR</span> kategoriya = <span class="sql-string">'Noutbuklar'</span>;

<span class="sql-comment">-- NOT: Apple emas</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> mahsulotlar
<span class="sql-keyword">WHERE NOT</span> ishlab_chiqaruvchi = <span class="sql-string">'Apple'</span>;

<span class="sql-comment">-- BETWEEN, IN, LIKE</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> mahsulotlar <span class="sql-keyword">WHERE</span> narx <span class="sql-keyword">BETWEEN</span> <span class="sql-number">5000000</span> <span class="sql-keyword">AND</span> <span class="sql-number">15000000</span>;
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> mahsulotlar <span class="sql-keyword">WHERE</span> ishlab_chiqaruvchi <span class="sql-keyword">IN</span>(<span class="sql-string">'Apple'</span>,<span class="sql-string">'Samsung'</span>);
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> mahsulotlar <span class="sql-keyword">WHERE</span> nomi <span class="sql-keyword">LIKE</span> <span class="sql-string">'%Pro%'</span>;

<span class="sql-comment">-- Murakkab kombinatsiya</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> mahsulotlar
<span class="sql-keyword">WHERE</span> (kategoriya = <span class="sql-string">'Telefonlar'</span> <span class="sql-keyword">AND</span> narx &lt; <span class="sql-number">10000000</span>)
   <span class="sql-keyword">OR</span> (kategoriya = <span class="sql-string">'Noutbuklar'</span> <span class="sql-keyword">AND</span> chegirma > <span class="sql-number">0</span>);</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî WHERE AND (Apple telefonlari)</span>
<table>
<thead><tr><th>id</th><th>nomi</th><th>kategoriya</th><th>ishlab_chiqaruvchi</th><th>narx</th><th>soni</th><th>chegirma</th><th>qoshilgan</th></tr></thead>
<tbody>
<tr><td>1</td><td>iPhone 15 Pro</td><td>Telefonlar</td><td>Apple</td><td>15000000</td><td>20</td><td>5</td><td>2024-01-15</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî WHERE OR (Telefonlar yoki Noutbuklar)</span>
<table>
<thead><tr><th>id</th><th>nomi</th><th>kategoriya</th><th>ishlab_chiqaruvchi</th><th>narx</th><th>soni</th><th>chegirma</th><th>qoshilgan</th></tr></thead>
<tbody>
<tr><td>1</td><td>iPhone 15 Pro</td><td>Telefonlar</td><td>Apple</td><td>15000000</td><td>20</td><td>5</td><td>2024-01-15</td></tr>
<tr><td>2</td><td>Samsung S24</td><td>Telefonlar</td><td>Samsung</td><td>12000000</td><td>35</td><td>10</td><td>2024-02-01</td></tr>
<tr><td>3</td><td>MacBook Pro</td><td>Noutbuklar</td><td>Apple</td><td>25000000</td><td>10</td><td>0</td><td>2024-01-20</td></tr>
<tr><td>4</td><td>HP Pavilion</td><td>Noutbuklar</td><td>HP</td><td>8500000</td><td>15</td><td>15</td><td>2024-03-05</td></tr>
<tr><td>5</td><td>Xiaomi 14</td><td>Telefonlar</td><td>Xiaomi</td><td>6500000</td><td>50</td><td>0</td><td>2024-02-10</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî WHERE NOT (Apple emas)</span>
<table>
<thead><tr><th>id</th><th>nomi</th><th>kategoriya</th><th>ishlab_chiqaruvchi</th><th>narx</th><th>soni</th><th>chegirma</th><th>qoshilgan</th></tr></thead>
<tbody>
<tr><td>2</td><td>Samsung S24</td><td>Telefonlar</td><td>Samsung</td><td>12000000</td><td>35</td><td>10</td><td>2024-02-01</td></tr>
<tr><td>4</td><td>HP Pavilion</td><td>Noutbuklar</td><td>HP</td><td>8500000</td><td>15</td><td>15</td><td>2024-03-05</td></tr>
<tr><td>5</td><td>Xiaomi 14</td><td>Telefonlar</td><td>Xiaomi</td><td>6500000</td><td>50</td><td>0</td><td>2024-02-10</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî BETWEEN 5000000 AND 15000000</span>
<table>
<thead><tr><th>id</th><th>nomi</th><th>kategoriya</th><th>ishlab_chiqaruvchi</th><th>narx</th><th>soni</th><th>chegirma</th><th>qoshilgan</th></tr></thead>
<tbody>
<tr><td>1</td><td>iPhone 15 Pro</td><td>Telefonlar</td><td>Apple</td><td>15000000</td><td>20</td><td>5</td><td>2024-01-15</td></tr>
<tr><td>2</td><td>Samsung S24</td><td>Telefonlar</td><td>Samsung</td><td>12000000</td><td>35</td><td>10</td><td>2024-02-01</td></tr>
<tr><td>4</td><td>HP Pavilion</td><td>Noutbuklar</td><td>HP</td><td>8500000</td><td>15</td><td>15</td><td>2024-03-05</td></tr>
<tr><td>5</td><td>Xiaomi 14</td><td>Telefonlar</td><td>Xiaomi</td><td>6500000</td><td>50</td><td>0</td><td>2024-02-10</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî IN ('Apple','Samsung')</span>
<table>
<thead><tr><th>id</th><th>nomi</th><th>kategoriya</th><th>ishlab_chiqaruvchi</th><th>narx</th><th>soni</th><th>chegirma</th><th>qoshilgan</th></tr></thead>
<tbody>
<tr><td>1</td><td>iPhone 15 Pro</td><td>Telefonlar</td><td>Apple</td><td>15000000</td><td>20</td><td>5</td><td>2024-01-15</td></tr>
<tr><td>2</td><td>Samsung S24</td><td>Telefonlar</td><td>Samsung</td><td>12000000</td><td>35</td><td>10</td><td>2024-02-01</td></tr>
<tr><td>3</td><td>MacBook Pro</td><td>Noutbuklar</td><td>Apple</td><td>25000000</td><td>10</td><td>0</td><td>2024-01-20</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî LIKE '%Pro%'</span>
<table>
<thead><tr><th>id</th><th>nomi</th><th>kategoriya</th><th>ishlab_chiqaruvchi</th><th>narx</th><th>soni</th><th>chegirma</th><th>qoshilgan</th></tr></thead>
<tbody>
<tr><td>1</td><td>iPhone 15 Pro</td><td>Telefonlar</td><td>Apple</td><td>15000000</td><td>20</td><td>5</td><td>2024-01-15</td></tr>
<tr><td>3</td><td>MacBook Pro</td><td>Noutbuklar</td><td>Apple</td><td>25000000</td><td>10</td><td>0</td><td>2024-01-20</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî Murakkab kombinatsiya</span>
<table>
<thead><tr><th>id</th><th>nomi</th><th>kategoriya</th><th>ishlab_chiqaruvchi</th><th>narx</th><th>soni</th><th>chegirma</th><th>qoshilgan</th></tr></thead>
<tbody>
<tr><td>2</td><td>Samsung S24</td><td>Telefonlar</td><td>Samsung</td><td>12000000</td><td>35</td><td>10</td><td>2024-02-01</td></tr>
<tr><td>4</td><td>HP Pavilion</td><td>Noutbuklar</td><td>HP</td><td>8500000</td><td>15</td><td>15</td><td>2024-03-05</td></tr>
<tr><td>5</td><td>Xiaomi 14</td><td>Telefonlar</td><td>Xiaomi</td><td>6500000</td><td>50</td><td>0</td><td>2024-02-10</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>
<div class="card"><h2><span class="icon">üèÜ</span>Xulosa</h2><p>Ushbu mashg'ulotda SELECT operatori, WHERE sharti, AND/OR/NOT mantiqiy operatorlari, qavslar bilan ustuvorlik, BETWEEN, IN, LIKE, IS NULL operatorlari, ORDER BY va LIMIT o'rganildi.</p></div>

</div>
</div>

<!-- ===== TUTORIAL 5 ===== -->
<div class="section-block" id="t5">
<div class="container">

<h1>5-amaliy mashg'ulot</h1>
<p class="subtitle">Ma'lumotlarni saralash. WHERE standart so'zidan foydalanish</p>
<div class="gold-line"></div>
<div class="meta-info"><strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp; <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp; <strong>üéØ Daraja:</strong> O'rta</div>

<h2><span class="icon">üìñ</span>Nazariy qism</h2>
<div class="card">
<h3><span class="icon">üîÑ</span>SQL so'rov bajarilish tartibi</h3>
<div class="flow-diagram">
<span class="flow-step">1. FROM</span><span class="flow-arrow">‚Üí</span>
<span class="flow-step">2. WHERE</span><span class="flow-arrow">‚Üí</span>
<span class="flow-step">3. GROUP BY</span><span class="flow-arrow">‚Üí</span>
<span class="flow-step">4. HAVING</span><span class="flow-arrow">‚Üí</span>
<span class="flow-step">5. SELECT</span><span class="flow-arrow">‚Üí</span>
<span class="flow-step">6. ORDER BY</span><span class="flow-arrow">‚Üí</span>
<span class="flow-step">7. LIMIT</span>
</div>
</div>

<h2><span class="icon">‚ö°</span>Amaliy qism</h2>
<div class="card">
<h3><span class="step-number">1</span>Mashq ma'lumotlari</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Talabalar jadvali</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE</span> sort_db; <span class="sql-keyword">USE</span> sort_db;

<span class="sql-keyword">CREATE TABLE</span> talabalar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>), familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    guruh_nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">20</span>), fakultet <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    ball <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">4</span>,<span class="sql-number">1</span>), stipendiya <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">10</span>,<span class="sql-number">2</span>),
    jinsi <span class="sql-keyword">ENUM</span>(<span class="sql-string">'E'</span>,<span class="sql-string">'A'</span>), tug_sana <span class="sql-keyword">DATE</span>
);

<span class="sql-keyword">INSERT INTO</span> talabalar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>,<span class="sql-string">'Alisher'</span>,<span class="sql-string">'Karimov'</span>,<span class="sql-string">'DI-21'</span>,<span class="sql-string">'Informatika'</span>,<span class="sql-number">85.5</span>,<span class="sql-number">500000</span>,<span class="sql-string">'E'</span>,<span class="sql-string">'2003-05-15'</span>),
(<span class="sql-number">2</span>,<span class="sql-string">'Malika'</span>,<span class="sql-string">'Rahimova'</span>,<span class="sql-string">'IQ-22'</span>,<span class="sql-string">'Iqtisodiyot'</span>,<span class="sql-number">92.0</span>,<span class="sql-number">700000</span>,<span class="sql-string">'A'</span>,<span class="sql-string">'2004-01-20'</span>),
(<span class="sql-number">3</span>,<span class="sql-string">'Jasur'</span>,<span class="sql-string">'Toshmatov'</span>,<span class="sql-string">'DI-21'</span>,<span class="sql-string">'Informatika'</span>,<span class="sql-number">78.0</span>,<span class="sql-number">400000</span>,<span class="sql-string">'E'</span>,<span class="sql-string">'2003-11-03'</span>),
(<span class="sql-number">4</span>,<span class="sql-string">'Nodira'</span>,<span class="sql-string">'Azimova'</span>,<span class="sql-string">'HQ-23'</span>,<span class="sql-string">'Huquq'</span>,<span class="sql-number">88.5</span>,<span class="sql-number">600000</span>,<span class="sql-string">'A'</span>,<span class="sql-string">'2004-07-10'</span>),
(<span class="sql-number">5</span>,<span class="sql-string">'Sardor'</span>,<span class="sql-string">'Ergashev'</span>,<span class="sql-string">'DI-22'</span>,<span class="sql-string">'Informatika'</span>,<span class="sql-number">95.0</span>,<span class="sql-number">800000</span>,<span class="sql-string">'E'</span>,<span class="sql-string">'2003-03-25'</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE talabalar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 5 rows affected (0.01 sec) ‚Äî <code>INSERT INTO talabalar</code></span>
<span class="rok-line">Records: 5 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
</div>

<div class="card">
<h3><span class="step-number">2</span>WHERE, ORDER BY, LIMIT</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Filtrlash va saralash</div></div>
<pre><code><span class="sql-comment">-- WHERE filtrlash</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> talabalar <span class="sql-keyword">WHERE</span> ball >= <span class="sql-number">85</span>;
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> talabalar <span class="sql-keyword">WHERE</span> fakultet = <span class="sql-string">'Informatika'</span> <span class="sql-keyword">AND</span> ball > <span class="sql-number">80</span>;

<span class="sql-comment">-- ORDER BY saralash</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> talabalar <span class="sql-keyword">ORDER BY</span> ball <span class="sql-keyword">DESC</span>;
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> talabalar <span class="sql-keyword">ORDER BY</span> fakultet <span class="sql-keyword">ASC</span>, ball <span class="sql-keyword">DESC</span>;

<span class="sql-comment">-- LIMIT va OFFSET (sahifalash)</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> talabalar <span class="sql-keyword">ORDER BY</span> ball <span class="sql-keyword">DESC LIMIT</span> <span class="sql-number">3</span>;
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> talabalar <span class="sql-keyword">ORDER BY</span> id <span class="sql-keyword">LIMIT</span> <span class="sql-number">3</span> <span class="sql-keyword">OFFSET</span> <span class="sql-number">2</span>;

<span class="sql-comment">-- GROUP BY va HAVING</span>
<span class="sql-keyword">SELECT</span> fakultet, <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni, <span class="sql-function">AVG</span>(ball) <span class="sql-keyword">AS</span> ort_ball
<span class="sql-keyword">FROM</span> talabalar <span class="sql-keyword">GROUP BY</span> fakultet;

<span class="sql-keyword">SELECT</span> fakultet, <span class="sql-function">AVG</span>(ball) <span class="sql-keyword">AS</span> ort_ball
<span class="sql-keyword">FROM</span> talabalar <span class="sql-keyword">GROUP BY</span> fakultet
<span class="sql-keyword">HAVING</span> <span class="sql-function">AVG</span>(ball) > <span class="sql-number">85</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî WHERE ball >= 85</span>
<table>
<thead><tr><th>id</th><th>ism</th><th>familiya</th><th>guruh_nomi</th><th>fakultet</th><th>ball</th><th>stipendiya</th><th>jinsi</th><th>tug_sana</th></tr></thead>
<tbody>
<tr><td>1</td><td>Alisher</td><td>Karimov</td><td>DI-21</td><td>Informatika</td><td>85.5</td><td>500000</td><td>E</td><td>2003-05-15</td></tr>
<tr><td>2</td><td>Malika</td><td>Rahimova</td><td>IQ-22</td><td>Iqtisodiyot</td><td>92.0</td><td>700000</td><td>A</td><td>2004-01-20</td></tr>
<tr><td>4</td><td>Nodira</td><td>Azimova</td><td>HQ-23</td><td>Huquq</td><td>88.5</td><td>600000</td><td>A</td><td>2004-07-10</td></tr>
<tr><td>5</td><td>Sardor</td><td>Ergashev</td><td>DI-22</td><td>Informatika</td><td>95.0</td><td>800000</td><td>E</td><td>2003-03-25</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî ORDER BY ball DESC</span>
<table>
<thead><tr><th>id</th><th>ism</th><th>familiya</th><th>guruh_nomi</th><th>fakultet</th><th>ball</th><th>stipendiya</th><th>jinsi</th><th>tug_sana</th></tr></thead>
<tbody>
<tr><td>5</td><td>Sardor</td><td>Ergashev</td><td>DI-22</td><td>Informatika</td><td>95.0</td><td>800000</td><td>E</td><td>2003-03-25</td></tr>
<tr><td>2</td><td>Malika</td><td>Rahimova</td><td>IQ-22</td><td>Iqtisodiyot</td><td>92.0</td><td>700000</td><td>A</td><td>2004-01-20</td></tr>
<tr><td>4</td><td>Nodira</td><td>Azimova</td><td>HQ-23</td><td>Huquq</td><td>88.5</td><td>600000</td><td>A</td><td>2004-07-10</td></tr>
<tr><td>1</td><td>Alisher</td><td>Karimov</td><td>DI-21</td><td>Informatika</td><td>85.5</td><td>500000</td><td>E</td><td>2003-05-15</td></tr>
<tr><td>3</td><td>Jasur</td><td>Toshmatov</td><td>DI-21</td><td>Informatika</td><td>78.0</td><td>400000</td><td>E</td><td>2003-11-03</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî ORDER BY ball DESC LIMIT 3</span>
<table>
<thead><tr><th>id</th><th>ism</th><th>familiya</th><th>guruh_nomi</th><th>fakultet</th><th>ball</th><th>stipendiya</th><th>jinsi</th><th>tug_sana</th></tr></thead>
<tbody>
<tr><td>5</td><td>Sardor</td><td>Ergashev</td><td>DI-22</td><td>Informatika</td><td>95.0</td><td>800000</td><td>E</td><td>2003-03-25</td></tr>
<tr><td>2</td><td>Malika</td><td>Rahimova</td><td>IQ-22</td><td>Iqtisodiyot</td><td>92.0</td><td>700000</td><td>A</td><td>2004-01-20</td></tr>
<tr><td>4</td><td>Nodira</td><td>Azimova</td><td>HQ-23</td><td>Huquq</td><td>88.5</td><td>600000</td><td>A</td><td>2004-07-10</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî LIMIT 3 OFFSET 2</span>
<table>
<thead><tr><th>id</th><th>ism</th><th>familiya</th><th>guruh_nomi</th><th>fakultet</th><th>ball</th><th>stipendiya</th><th>jinsi</th><th>tug_sana</th></tr></thead>
<tbody>
<tr><td>3</td><td>Jasur</td><td>Toshmatov</td><td>DI-21</td><td>Informatika</td><td>78.0</td><td>400000</td><td>E</td><td>2003-11-03</td></tr>
<tr><td>4</td><td>Nodira</td><td>Azimova</td><td>HQ-23</td><td>Huquq</td><td>88.5</td><td>600000</td><td>A</td><td>2004-07-10</td></tr>
<tr><td>5</td><td>Sardor</td><td>Ergashev</td><td>DI-22</td><td>Informatika</td><td>95.0</td><td>800000</td><td>E</td><td>2003-03-25</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî GROUP BY fakultet</span>
<table>
<thead><tr><th>fakultet</th><th>soni</th><th>ort_ball</th></tr></thead>
<tbody>
<tr><td>Huquq</td><td>1</td><td>88.50</td></tr>
<tr><td>Informatika</td><td>3</td><td>86.17</td></tr>
<tr><td>Iqtisodiyot</td><td>1</td><td>92.00</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî HAVING AVG(ball) > 85</span>
<table>
<thead><tr><th>fakultet</th><th>ort_ball</th></tr></thead>
<tbody>
<tr><td>Huquq</td><td>88.50</td></tr>
<tr><td>Informatika</td><td>86.17</td></tr>
<tr><td>Iqtisodiyot</td><td>92.00</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>
<div class="card"><h2><span class="icon">üèÜ</span>Xulosa</h2><p>Ushbu mashg'ulotda SQL bajarilish tartibi, WHERE bilan filtrlash, ORDER BY (ASC/DESC), LIMIT/OFFSET, GROUP BY, HAVING, agregat funksiyalar (COUNT, AVG, SUM, MIN, MAX), va CASE ifodasi o'rganildi.</p></div>

</div>
</div>

<!-- ===== TUTORIAL 6 ===== -->
<div class="section-block" id="t6">
<div class="container">

<h1>6-amaliy mashg'ulot</h1>
<p class="subtitle">GROUP BY, ORDER BY va HAVING standart so'zlardan foydalanib so'rovlar yaratish</p>
<div class="gold-line"></div>
<div class="meta-info"><strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp; <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp; <strong>üéØ Daraja:</strong> O'rta-Yuqori</div>

<h2><span class="icon">üìñ</span>Nazariy qism</h2>
<div class="card">
<h3><span class="icon">üìä</span>WHERE vs HAVING</h3>
<table>
<thead><tr><th>Xususiyat</th><th>WHERE</th><th>HAVING</th></tr></thead>
<tbody>
<tr><td><strong>Qachon ishlaydi</strong></td><td>GROUP BY dan OLDIN</td><td>GROUP BY dan KEYIN</td></tr>
<tr><td><strong>Agregat funksiya</strong></td><td>‚ùå Ishlatib bo'lmaydi</td><td>‚úÖ Ishlatish mumkin</td></tr>
<tr><td><strong>Maqsad</strong></td><td>Qatorlarni filtrlash</td><td>Guruhlarni filtrlash</td></tr>
</tbody>
</table>
</div>

<h2><span class="icon">‚ö°</span>Amaliy qism</h2>
<div class="card">
<h3><span class="step-number">1</span>Mashq ma'lumotlari</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Xodimlar va sotuvlar</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE</span> group_db; <span class="sql-keyword">USE</span> group_db;

<span class="sql-keyword">CREATE TABLE</span> xodimlar (id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>, ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>), bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>), maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>), jinsi <span class="sql-keyword">ENUM</span>(<span class="sql-string">'E'</span>,<span class="sql-string">'A'</span>));
<span class="sql-keyword">CREATE TABLE</span> sotuvlar (id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>, xodim_id <span class="sql-keyword">INT</span>, mahsulot <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>), miqdor <span class="sql-keyword">INT</span>, narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>), sotuv_sana <span class="sql-keyword">DATE</span>);

<span class="sql-keyword">INSERT INTO</span> xodimlar (ism, bolim, maosh, jinsi) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Alisher'</span>,<span class="sql-string">'IT'</span>,<span class="sql-number">12000000</span>,<span class="sql-string">'E'</span>),(<span class="sql-string">'Malika'</span>,<span class="sql-string">'Sotuv'</span>,<span class="sql-number">8000000</span>,<span class="sql-string">'A'</span>),
(<span class="sql-string">'Jasur'</span>,<span class="sql-string">'IT'</span>,<span class="sql-number">9000000</span>,<span class="sql-string">'E'</span>),(<span class="sql-string">'Nodira'</span>,<span class="sql-string">'Moliya'</span>,<span class="sql-number">11000000</span>,<span class="sql-string">'A'</span>),
(<span class="sql-string">'Sardor'</span>,<span class="sql-string">'Sotuv'</span>,<span class="sql-number">7500000</span>,<span class="sql-string">'E'</span>),(<span class="sql-string">'Gulnora'</span>,<span class="sql-string">'Moliya'</span>,<span class="sql-number">10000000</span>,<span class="sql-string">'A'</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE xodimlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE sotuvlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 6 rows affected (0.01 sec) ‚Äî <code>INSERT INTO xodimlar</code></span>
<span class="rok-line">Records: 6 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
</div>

<div class="card">
<h3><span class="step-number">2</span>GROUP BY, HAVING, WITH ROLLUP</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Guruhlash va agregat</div></div>
<pre><code><span class="sql-comment">-- Bo'lim bo'yicha statistika</span>
<span class="sql-keyword">SELECT</span> bolim, <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni,
       <span class="sql-function">AVG</span>(maosh) <span class="sql-keyword">AS</span> ort_maosh, <span class="sql-function">SUM</span>(maosh) <span class="sql-keyword">AS</span> jami
<span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">GROUP BY</span> bolim;

<span class="sql-comment">-- HAVING ‚Äî faqat 2+ xodimli bo'limlar</span>
<span class="sql-keyword">SELECT</span> bolim, <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni
<span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">GROUP BY</span> bolim
<span class="sql-keyword">HAVING</span> <span class="sql-function">COUNT</span>(*) >= <span class="sql-number">2</span>;

<span class="sql-comment">-- WITH ROLLUP ‚Äî yakuniy qator</span>
<span class="sql-keyword">SELECT</span> <span class="sql-function">IFNULL</span>(bolim, <span class="sql-string">'üìä JAMI'</span>) <span class="sql-keyword">AS</span> bolim,
       <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni, <span class="sql-function">SUM</span>(maosh) <span class="sql-keyword">AS</span> jami
<span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">GROUP BY</span> bolim <span class="sql-keyword">WITH ROLLUP</span>;

<span class="sql-comment">-- GROUP_CONCAT</span>
<span class="sql-keyword">SELECT</span> bolim, <span class="sql-function">GROUP_CONCAT</span>(ism <span class="sql-keyword">ORDER BY</span> ism <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>) <span class="sql-keyword">AS</span> xodimlar
<span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">GROUP BY</span> bolim;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî GROUP BY bolim (statistika)</span>
<table>
<thead><tr><th>bolim</th><th>soni</th><th>ort_maosh</th><th>jami</th></tr></thead>
<tbody>
<tr><td>IT</td><td>2</td><td>10500000.00</td><td>21000000.00</td></tr>
<tr><td>Moliya</td><td>2</td><td>10500000.00</td><td>21000000.00</td></tr>
<tr><td>Sotuv</td><td>2</td><td>7750000.00</td><td>15500000.00</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî HAVING COUNT(*) >= 2</span>
<table>
<thead><tr><th>bolim</th><th>soni</th></tr></thead>
<tbody>
<tr><td>IT</td><td>2</td></tr>
<tr><td>Moliya</td><td>2</td></tr>
<tr><td>Sotuv</td><td>2</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî WITH ROLLUP</span>
<table>
<thead><tr><th>bolim</th><th>soni</th><th>jami</th></tr></thead>
<tbody>
<tr><td>IT</td><td>2</td><td>21000000.00</td></tr>
<tr><td>Moliya</td><td>2</td><td>21000000.00</td></tr>
<tr><td>Sotuv</td><td>2</td><td>15500000.00</td></tr>
<tr><td>JAMI</td><td>6</td><td>57500000.00</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî GROUP_CONCAT</span>
<table>
<thead><tr><th>bolim</th><th>xodimlar</th></tr></thead>
<tbody>
<tr><td>IT</td><td>Alisher, Jasur</td></tr>
<tr><td>Moliya</td><td>Gulnora, Nodira</td></tr>
<tr><td>Sotuv</td><td>Malika, Sardor</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>
<div class="card"><h2><span class="icon">üèÜ</span>Xulosa</h2><p>Ushbu mashg'ulotda GROUP BY guruhlash, bir nechta ustun bo'yicha GROUP BY, ORDER BY saralash, HAVING guruhlarni filtrlash, WHERE + GROUP BY + HAVING + ORDER BY kombinatsiyasi, WITH ROLLUP, GROUP_CONCAT va murakkab hisobotlar o'rganildi.</p></div>

</div>
</div>

<!-- ===== TUTORIAL 7 ===== -->
<div class="section-block" id="t7">
<div class="container">

<h1>7-amaliy mashg'ulot</h1>
<p class="subtitle">UNION, INTERSECT va MINUS standart buyruqlardan foydalanish</p>
<div class="gold-line"></div>
<div class="meta-info"><strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp; <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp; <strong>üéØ Daraja:</strong> O'rta-Yuqori</div>

<h2><span class="icon">üìñ</span>Nazariy qism</h2>
<div class="card">
<h3><span class="icon">üîó</span>To'plam operatorlari</h3>
<div class="concept-grid">
<div class="concept-card"><span class="big-icon">‚à™</span><h4>UNION</h4><p>Ikki so'rovni birlashtiradi (takrorlarsiz)</p></div>
<div class="concept-card"><span class="big-icon">‚à©</span><h4>INTERSECT</h4><p>Ikkala so'rovda ham bor qatorlar (kesishma)</p></div>
<div class="concept-card"><span class="big-icon">‚àí</span><h4>EXCEPT</h4><p>Birinchida bor, ikkinchida yo'q (ayirma)</p></div>
</div>
<table>
<thead><tr><th>Operator</th><th>Takrorlar</th><th>MySQL 8.0+</th><th>Alternativa</th></tr></thead>
<tbody>
<tr><td><code>UNION</code></td><td>O'chiradi</td><td>‚úÖ</td><td>‚Äî</td></tr>
<tr><td><code>UNION ALL</code></td><td>Saqlaydi</td><td>‚úÖ</td><td>‚Äî</td></tr>
<tr><td><code>INTERSECT</code></td><td>O'chiradi</td><td>‚úÖ (8.0.31+)</td><td>INNER JOIN, IN</td></tr>
<tr><td><code>EXCEPT</code></td><td>O'chiradi</td><td>‚úÖ (8.0.31+)</td><td>NOT IN, NOT EXISTS</td></tr>
</tbody>
</table>
</div>

<h2><span class="icon">‚ö°</span>Amaliy qism</h2>
<div class="card">
<h3><span class="step-number">1</span>Mashq ma'lumotlari ‚Äî ikki filial</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Filial jadvallari</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE</span> union_db; <span class="sql-keyword">USE</span> union_db;

<span class="sql-keyword">CREATE TABLE</span> toshkent_xodimlar (id <span class="sql-keyword">INT</span>, ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>), bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>), maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>));
<span class="sql-keyword">CREATE TABLE</span> samarqand_xodimlar (id <span class="sql-keyword">INT</span>, ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>), bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>), maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>));

<span class="sql-keyword">INSERT INTO</span> toshkent_xodimlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>,<span class="sql-string">'Alisher'</span>,<span class="sql-string">'IT'</span>,<span class="sql-number">12000000</span>),(<span class="sql-number">2</span>,<span class="sql-string">'Malika'</span>,<span class="sql-string">'Sotuv'</span>,<span class="sql-number">8000000</span>),
(<span class="sql-number">3</span>,<span class="sql-string">'Jasur'</span>,<span class="sql-string">'Moliya'</span>,<span class="sql-number">9000000</span>),(<span class="sql-number">4</span>,<span class="sql-string">'Nodira'</span>,<span class="sql-string">'IT'</span>,<span class="sql-number">10000000</span>);

<span class="sql-keyword">INSERT INTO</span> samarqand_xodimlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>,<span class="sql-string">'Sardor'</span>,<span class="sql-string">'IT'</span>,<span class="sql-number">7000000</span>),(<span class="sql-number">2</span>,<span class="sql-string">'Gulnora'</span>,<span class="sql-string">'Sotuv'</span>,<span class="sql-number">6500000</span>),
(<span class="sql-number">3</span>,<span class="sql-string">'Alisher'</span>,<span class="sql-string">'IT'</span>,<span class="sql-number">12000000</span>),(<span class="sql-number">4</span>,<span class="sql-string">'Kamola'</span>,<span class="sql-string">'Logistika'</span>,<span class="sql-number">8000000</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE toshkent_xodimlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE samarqand_xodimlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 4 rows affected (0.01 sec) ‚Äî <code>INSERT INTO toshkent_xodimlar</code></span>
<span class="rok-line">Records: 4 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 4 rows affected (0.01 sec) ‚Äî <code>INSERT INTO samarqand_xodimlar</code></span>
<span class="rok-line">Records: 4 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
</div>

<div class="card">
<h3><span class="step-number">2</span>UNION, INTERSECT, EXCEPT</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî To‚Äòplam operatorlari</div></div>
<pre><code><span class="sql-comment">-- UNION ‚Äî barcha xodimlar (takrorlarsiz)</span>
<span class="sql-keyword">SELECT</span> ism, bolim <span class="sql-keyword">FROM</span> toshkent_xodimlar
<span class="sql-operator">UNION</span>
<span class="sql-keyword">SELECT</span> ism, bolim <span class="sql-keyword">FROM</span> samarqand_xodimlar;

<span class="sql-comment">-- UNION ALL ‚Äî barcha (takrorlar bilan)</span>
<span class="sql-keyword">SELECT</span> ism, bolim, <span class="sql-string">'Toshkent'</span> <span class="sql-keyword">AS</span> filial <span class="sql-keyword">FROM</span> toshkent_xodimlar
<span class="sql-operator">UNION ALL</span>
<span class="sql-keyword">SELECT</span> ism, bolim, <span class="sql-string">'Samarqand'</span> <span class="sql-keyword">FROM</span> samarqand_xodimlar;

<span class="sql-comment">-- INTERSECT ‚Äî ikkala filialda ham bor</span>
<span class="sql-keyword">SELECT</span> ism, bolim <span class="sql-keyword">FROM</span> toshkent_xodimlar
<span class="sql-operator">INTERSECT</span>
<span class="sql-keyword">SELECT</span> ism, bolim <span class="sql-keyword">FROM</span> samarqand_xodimlar;

<span class="sql-comment">-- EXCEPT ‚Äî faqat Toshkentda bor, Samarqandda yo'q</span>
<span class="sql-keyword">SELECT</span> ism, bolim <span class="sql-keyword">FROM</span> toshkent_xodimlar
<span class="sql-operator">EXCEPT</span>
<span class="sql-keyword">SELECT</span> ism, bolim <span class="sql-keyword">FROM</span> samarqand_xodimlar;

<span class="sql-comment">-- Eski MySQL uchun alternativa (INTERSECT ‚Üí JOIN)</span>
<span class="sql-keyword">SELECT DISTINCT</span> t.ism, t.bolim
<span class="sql-keyword">FROM</span> toshkent_xodimlar t
<span class="sql-keyword">INNER JOIN</span> samarqand_xodimlar s
    <span class="sql-keyword">ON</span> t.ism = s.ism <span class="sql-keyword">AND</span> t.bolim = s.bolim;

<span class="sql-comment">-- Eski MySQL uchun alternativa (EXCEPT ‚Üí NOT IN)</span>
<span class="sql-keyword">SELECT</span> ism, bolim <span class="sql-keyword">FROM</span> toshkent_xodimlar
<span class="sql-keyword">WHERE</span> (ism, bolim) <span class="sql-keyword">NOT IN</span> (
    <span class="sql-keyword">SELECT</span> ism, bolim <span class="sql-keyword">FROM</span> samarqand_xodimlar
);</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî UNION (takrorlarsiz)</span>
<table>
<thead><tr><th>ism</th><th>bolim</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>IT</td></tr>
<tr><td>Malika</td><td>Sotuv</td></tr>
<tr><td>Jasur</td><td>Moliya</td></tr>
<tr><td>Nodira</td><td>IT</td></tr>
<tr><td>Sardor</td><td>IT</td></tr>
<tr><td>Gulnora</td><td>Sotuv</td></tr>
<tr><td>Kamola</td><td>Logistika</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî UNION ALL (takrorlar bilan)</span>
<table>
<thead><tr><th>ism</th><th>bolim</th><th>filial</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>IT</td><td>Toshkent</td></tr>
<tr><td>Malika</td><td>Sotuv</td><td>Toshkent</td></tr>
<tr><td>Jasur</td><td>Moliya</td><td>Toshkent</td></tr>
<tr><td>Nodira</td><td>IT</td><td>Toshkent</td></tr>
<tr><td>Sardor</td><td>IT</td><td>Samarqand</td></tr>
<tr><td>Gulnora</td><td>Sotuv</td><td>Samarqand</td></tr>
<tr><td>Alisher</td><td>IT</td><td>Samarqand</td></tr>
<tr><td>Kamola</td><td>Logistika</td><td>Samarqand</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî INTERSECT (ikkala filialda ham bor)</span>
<table>
<thead><tr><th>ism</th><th>bolim</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>IT</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXCEPT (faqat Toshkentda)</span>
<table>
<thead><tr><th>ism</th><th>bolim</th></tr></thead>
<tbody>
<tr><td>Malika</td><td>Sotuv</td></tr>
<tr><td>Jasur</td><td>Moliya</td></tr>
<tr><td>Nodira</td><td>IT</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>
<div class="card"><h2><span class="icon">üèÜ</span>Xulosa</h2><p>Ushbu mashg'ulotda UNION va UNION ALL (birlashtirish), INTERSECT (kesishma), EXCEPT/MINUS (ayirma), eski MySQL versiyalari uchun alternativalar (JOIN, IN, EXISTS), CTE va UNION kombinatsiyasi o'rganildi.</p></div>

</div>
</div>
<!-- ===== TUTORIAL 8 ===== -->
<div class="section-block" id="t8">
<div class="container">
<h1>8-amaliy mashg'ulot</h1>
<p class="subtitle">Bir nechta jadvallarni birlashtirish, ¬´JOIN¬ªlar bilan ishlash</p>
<div class="gold-line"></div>

<div class="meta-info">
    <strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp;
    <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp;
    <strong>üéØ Daraja:</strong> O'rta
</div>

<!-- ===== NAZARIY QISM ===== -->
<h2><span class="icon">üìñ</span>Nazariy qism</h2>

<div class="card">
<h3><span class="icon">üîó</span>JOIN nima?</h3>
<p><strong>JOIN</strong> ‚Äî bu ikki yoki undan ortiq jadvallarni ma'lum shart asosida birlashtirib, yagona natija to'plamini hosil qiluvchi SQL operatoridir. Relatsion ma'lumotlar bazasida ma'lumotlar normallashtirilgan holda turli jadvallarda saqlanadi. JOIN operatori shu jadvallarni bog'lab, bitta natija sifatida ko'rsatishga imkon beradi.</p>

<div class="theory-box">
<p><strong>üí° Asosiy tamoyil:</strong> JOIN operatori ikkita jadvalning har bir qatorini shart bo'yicha solishtiradi va mos keladigan qatorlarni birlashtiradi. Bu shart odatda <code>PRIMARY KEY</code> va <code>FOREIGN KEY</code> orasidagi bog'lanish orqali ifodalanadi.</p>
</div>
</div>

<div class="card">
<h3><span class="icon">üìä</span>JOIN turlari</h3>
<p>SQL standartida quyidagi asosiy JOIN turlari mavjud:</p>

<table>
<thead><tr><th>JOIN turi</th><th>Tavsif</th><th>Natija</th></tr></thead>
<tbody>
<tr><td><code>INNER JOIN</code></td><td>Faqat ikkala jadvalda mos keladigan qatorlar</td><td>Kesishma (‚à©)</td></tr>
<tr><td><code>LEFT JOIN</code></td><td>Chap jadvalning <strong>barcha</strong> qatorlari + o'ng jadvaldan moslar</td><td>Chap to'liq + kesishma</td></tr>
<tr><td><code>RIGHT JOIN</code></td><td>O'ng jadvalning <strong>barcha</strong> qatorlari + chap jadvaldan moslar</td><td>O'ng to'liq + kesishma</td></tr>
<tr><td><code>FULL OUTER JOIN</code></td><td>Ikkala jadvalning <strong>barcha</strong> qatorlari</td><td>Birlashma (‚à™)</td></tr>
<tr><td><code>CROSS JOIN</code></td><td>Dekart ko'paytmasi (barcha kombinatsiyalar)</td><td>n √ó m qator</td></tr>
<tr><td><code>SELF JOIN</code></td><td>Jadval o'zi bilan birlashtiriladi</td><td>Ierarxiya, taqqoslash</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="icon">üé®</span>JOIN turlari ‚Äî vizual ko'rinish</h3>

<div class="join-diagram">
<div class="join-visual">
    <div class="join-name">INNER JOIN</div>
    <svg viewBox="0 0 120 80">
        <circle cx="40" cy="40" r="30" fill="none" stroke="#ccc" stroke-width="2"/>
        <circle cx="80" cy="40" r="30" fill="none" stroke="#ccc" stroke-width="2"/>
        <path d="M60 15.4 A30 30 0 0 1 60 64.6 A30 30 0 0 1 60 15.4" fill="#d4af37" opacity="0.6"/>
    </svg>
    <div style="font-size:0.75em;color:#888;">Faqat mos keladiganlar</div>
</div>

<div class="join-visual">
    <div class="join-name">LEFT JOIN</div>
    <svg viewBox="0 0 120 80">
        <circle cx="40" cy="40" r="30" fill="#d4af37" opacity="0.4"/>
        <circle cx="80" cy="40" r="30" fill="none" stroke="#ccc" stroke-width="2"/>
        <path d="M60 15.4 A30 30 0 0 1 60 64.6 A30 30 0 0 1 60 15.4" fill="#d4af37" opacity="0.6"/>
    </svg>
    <div style="font-size:0.75em;color:#888;">Chap jadval to'liq</div>
</div>

<div class="join-visual">
    <div class="join-name">RIGHT JOIN</div>
    <svg viewBox="0 0 120 80">
        <circle cx="40" cy="40" r="30" fill="none" stroke="#ccc" stroke-width="2"/>
        <circle cx="80" cy="40" r="30" fill="#d4af37" opacity="0.4"/>
        <path d="M60 15.4 A30 30 0 0 1 60 64.6 A30 30 0 0 1 60 15.4" fill="#d4af37" opacity="0.6"/>
    </svg>
    <div style="font-size:0.75em;color:#888;">O'ng jadval to'liq</div>
</div>

<div class="join-visual">
    <div class="join-name">FULL JOIN</div>
    <svg viewBox="0 0 120 80">
        <circle cx="40" cy="40" r="30" fill="#d4af37" opacity="0.35"/>
        <circle cx="80" cy="40" r="30" fill="#d4af37" opacity="0.35"/>
        <path d="M60 15.4 A30 30 0 0 1 60 64.6 A30 30 0 0 1 60 15.4" fill="#d4af37" opacity="0.6"/>
    </svg>
    <div style="font-size:0.75em;color:#888;">Ikkalasi to'liq</div>
</div>
</div>
</div>

<div class="card">
<h3><span class="icon">üìê</span>JOIN sintaksisi</h3>
<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî JOIN sintaksisi</div></div>
<pre><code><span class="sql-comment">-- Umumiy JOIN sintaksisi</span>
<span class="sql-keyword">SELECT</span> a.ustun1, b.ustun2
<span class="sql-keyword">FROM</span> jadval_a a
<span class="sql-join">INNER JOIN</span> jadval_b b <span class="sql-keyword">ON</span> a.kalit = b.kalit;</code></pre>
</div>

<div class="tip-box">
<p><strong>üí° Muhim:</strong> <code>ON</code> kalit so'zi orqali birlashtirish sharti ko'rsatiladi. Bu shart odatda birinchi jadvalning <code>PRIMARY KEY</code> ustuni ikkinchi jadvalning <code>FOREIGN KEY</code> ustuniga teng bo'lishi shaklida yoziladi.</p>
</div>
</div>

<div class="luxury-divider"></div>

<!-- ===== AMALIY QISM ===== -->
<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<!-- BOSQICH 1 -->
<div class="card">
<h3><span class="step-number">1</span>Ma'lumotlar bazasini tayyorlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Kompaniya bazasi</div></div>
<pre><code><span class="sql-comment">-- Ma'lumotlar bazasini yaratish</span>
<span class="sql-keyword">CREATE DATABASE IF NOT EXISTS</span> kompaniya_db;
<span class="sql-keyword">USE</span> kompaniya_db;

<span class="sql-comment">-- Bo'limlar jadvali</span>
<span class="sql-keyword">CREATE TABLE</span> bolimlar (
    bolim_id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    bolim_nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>) <span class="sql-keyword">NOT NULL</span>,
    rahbar_id <span class="sql-keyword">INT</span>,
    joylashuv <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>)
);

<span class="sql-comment">-- Xodimlar jadvali</span>
<span class="sql-keyword">CREATE TABLE</span> xodimlar (
    xodim_id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    bolim_id <span class="sql-keyword">INT</span>,
    lavozim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    ishga_kirgan <span class="sql-keyword">DATE</span>,
    menejer_id <span class="sql-keyword">INT</span>,
    <span class="sql-keyword">FOREIGN KEY</span> (bolim_id) <span class="sql-keyword">REFERENCES</span> bolimlar(bolim_id),
    <span class="sql-keyword">FOREIGN KEY</span> (menejer_id) <span class="sql-keyword">REFERENCES</span> xodimlar(xodim_id)
);

<span class="sql-comment">-- Loyihalar jadvali</span>
<span class="sql-keyword">CREATE TABLE</span> loyihalar (
    loyiha_id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    loyiha_nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">150</span>) <span class="sql-keyword">NOT NULL</span>,
    boshlash_sana <span class="sql-keyword">DATE</span>,
    tugash_sana <span class="sql-keyword">DATE</span>,
    byudjet <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">15</span>,<span class="sql-number">2</span>),
    holat <span class="sql-keyword">ENUM</span>(<span class="sql-string">'faol'</span>, <span class="sql-string">'yakunlangan'</span>, <span class="sql-string">'rejalashtirilgan'</span>)
);

<span class="sql-comment">-- Xodim-Loyiha bog'lanish jadvali (ko'p-ko'pga)</span>
<span class="sql-keyword">CREATE TABLE</span> xodim_loyiha (
    xodim_id <span class="sql-keyword">INT</span>,
    loyiha_id <span class="sql-keyword">INT</span>,
    rol <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    qoshilgan_sana <span class="sql-keyword">DATE</span>,
    <span class="sql-keyword">PRIMARY KEY</span> (xodim_id, loyiha_id),
    <span class="sql-keyword">FOREIGN KEY</span> (xodim_id) <span class="sql-keyword">REFERENCES</span> xodimlar(xodim_id),
    <span class="sql-keyword">FOREIGN KEY</span> (loyiha_id) <span class="sql-keyword">REFERENCES</span> loyihalar(loyiha_id)
);

<span class="sql-comment">-- Maoshlar tarixi jadvali</span>
<span class="sql-keyword">CREATE TABLE</span> maosh_tarixi (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    xodim_id <span class="sql-keyword">INT</span>,
    eski_maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    yangi_maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    ozgarish_sana <span class="sql-keyword">DATE</span>,
    <span class="sql-keyword">FOREIGN KEY</span> (xodim_id) <span class="sql-keyword">REFERENCES</span> xodimlar(xodim_id)
);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE bolimlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE xodimlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE loyihalar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE xodim_loyiha</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE maosh_tarixi</code></span>
</div>
</div>

<div class="card">
<h3><span class="step-number">‚ú¶</span>Ma'lumotlarni kiritish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Ma‚Äòlumot kiritish</div></div>
<pre><code><span class="sql-comment">-- Bo'limlar</span>
<span class="sql-keyword">INSERT INTO</span> bolimlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>, <span class="sql-string">'IT bo\'limi'</span>, <span class="sql-keyword">NULL</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">2</span>, <span class="sql-string">'Moliya bo\'limi'</span>, <span class="sql-keyword">NULL</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">3</span>, <span class="sql-string">'Marketing bo\'limi'</span>, <span class="sql-keyword">NULL</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">4</span>, <span class="sql-string">'HR bo\'limi'</span>, <span class="sql-keyword">NULL</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">5</span>, <span class="sql-string">'Logistika bo\'limi'</span>, <span class="sql-keyword">NULL</span>, <span class="sql-string">'Buxoro'</span>); <span class="sql-comment">-- xodimsiz bo'lim</span>

<span class="sql-comment">-- Xodimlar</span>
<span class="sql-keyword">INSERT INTO</span> xodimlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>, <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'Karimov'</span>,   <span class="sql-number">1</span>, <span class="sql-string">'Senior dasturchi'</span>,  <span class="sql-number">12000000</span>, <span class="sql-string">'2020-03-15'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-number">2</span>, <span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'Rahimova'</span>,  <span class="sql-number">1</span>, <span class="sql-string">'Junior dasturchi'</span>,  <span class="sql-number">6000000</span>,  <span class="sql-string">'2023-01-10'</span>, <span class="sql-number">1</span>),
(<span class="sql-number">3</span>, <span class="sql-string">'Bobur'</span>,    <span class="sql-string">'Toshmatov'</span>, <span class="sql-number">1</span>, <span class="sql-string">'DevOps muhandis'</span>,   <span class="sql-number">10000000</span>, <span class="sql-string">'2021-06-20'</span>, <span class="sql-number">1</span>),
(<span class="sql-number">4</span>, <span class="sql-string">'Gulnora'</span>,  <span class="sql-string">'Azimova'</span>,   <span class="sql-number">2</span>, <span class="sql-string">'Bosh hisobchi'</span>,     <span class="sql-number">9500000</span>,  <span class="sql-string">'2019-09-01'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-number">5</span>, <span class="sql-string">'Sanjar'</span>,   <span class="sql-string">'Alimov'</span>,    <span class="sql-number">2</span>, <span class="sql-string">'Hisobchi'</span>,          <span class="sql-number">7000000</span>,  <span class="sql-string">'2022-04-12'</span>, <span class="sql-number">4</span>),
(<span class="sql-number">6</span>, <span class="sql-string">'Nodira'</span>,   <span class="sql-string">'Yusupova'</span>,  <span class="sql-number">3</span>, <span class="sql-string">'Marketing menejer'</span>, <span class="sql-number">8500000</span>,  <span class="sql-string">'2021-11-05'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-number">7</span>, <span class="sql-string">'Otabek'</span>,   <span class="sql-string">'Nazarov'</span>,   <span class="sql-number">3</span>, <span class="sql-string">'SMM mutaxassis'</span>,    <span class="sql-number">5500000</span>,  <span class="sql-string">'2023-07-18'</span>, <span class="sql-number">6</span>),
(<span class="sql-number">8</span>, <span class="sql-string">'Kamola'</span>,   <span class="sql-string">'Umarova'</span>,   <span class="sql-number">4</span>, <span class="sql-string">'HR menejer'</span>,        <span class="sql-number">8000000</span>,  <span class="sql-string">'2020-08-22'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-number">9</span>, <span class="sql-string">'Jasur'</span>,    <span class="sql-string">'Ergashev'</span>,  <span class="sql-keyword">NULL</span>, <span class="sql-string">'Stajyor'</span>,         <span class="sql-number">2500000</span>,  <span class="sql-string">'2024-01-15'</span>, <span class="sql-number">1</span>),  <span class="sql-comment">-- bo'limsiz xodim</span>
(<span class="sql-number">10</span>, <span class="sql-string">'Malika'</span>,  <span class="sql-string">'Tursunova'</span>, <span class="sql-keyword">NULL</span>, <span class="sql-string">'Amaliyotchi'</span>,      <span class="sql-number">2000000</span>,  <span class="sql-string">'2024-02-01'</span>, <span class="sql-number">8</span>); <span class="sql-comment">-- bo'limsiz xodim</span>

<span class="sql-comment">-- Bo'lim rahbarlarini yangilash</span>
<span class="sql-keyword">UPDATE</span> bolimlar <span class="sql-keyword">SET</span> rahbar_id = <span class="sql-number">1</span> <span class="sql-keyword">WHERE</span> bolim_id = <span class="sql-number">1</span>;
<span class="sql-keyword">UPDATE</span> bolimlar <span class="sql-keyword">SET</span> rahbar_id = <span class="sql-number">4</span> <span class="sql-keyword">WHERE</span> bolim_id = <span class="sql-number">2</span>;
<span class="sql-keyword">UPDATE</span> bolimlar <span class="sql-keyword">SET</span> rahbar_id = <span class="sql-number">6</span> <span class="sql-keyword">WHERE</span> bolim_id = <span class="sql-number">3</span>;
<span class="sql-keyword">UPDATE</span> bolimlar <span class="sql-keyword">SET</span> rahbar_id = <span class="sql-number">8</span> <span class="sql-keyword">WHERE</span> bolim_id = <span class="sql-number">4</span>;

<span class="sql-comment">-- Loyihalar</span>
<span class="sql-keyword">INSERT INTO</span> loyihalar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>, <span class="sql-string">'E-commerce platforma'</span>,    <span class="sql-string">'2024-01-01'</span>, <span class="sql-string">'2024-06-30'</span>, <span class="sql-number">150000000</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-number">2</span>, <span class="sql-string">'CRM tizimi'</span>,              <span class="sql-string">'2023-06-01'</span>, <span class="sql-string">'2024-01-31'</span>, <span class="sql-number">80000000</span>,  <span class="sql-string">'yakunlangan'</span>),
(<span class="sql-number">3</span>, <span class="sql-string">'Mobil ilova'</span>,             <span class="sql-string">'2024-03-01'</span>, <span class="sql-string">'2024-12-31'</span>, <span class="sql-number">200000000</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-number">4</span>, <span class="sql-string">'Marketing kampaniya'</span>,     <span class="sql-string">'2024-02-01'</span>, <span class="sql-string">'2024-04-30'</span>, <span class="sql-number">30000000</span>,  <span class="sql-string">'yakunlangan'</span>),
(<span class="sql-number">5</span>, <span class="sql-string">'AI chatbot'</span>,              <span class="sql-string">'2024-07-01'</span>, <span class="sql-string">'2025-03-31'</span>, <span class="sql-number">120000000</span>, <span class="sql-string">'rejalashtirilgan'</span>);

<span class="sql-comment">-- Xodim-Loyiha bog'lanishi</span>
<span class="sql-keyword">INSERT INTO</span> xodim_loyiha <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>, <span class="sql-number">1</span>, <span class="sql-string">'Loyiha rahbari'</span>,     <span class="sql-string">'2024-01-01'</span>),
(<span class="sql-number">2</span>, <span class="sql-number">1</span>, <span class="sql-string">'Dasturchi'</span>,          <span class="sql-string">'2024-01-15'</span>),
(<span class="sql-number">3</span>, <span class="sql-number">1</span>, <span class="sql-string">'DevOps'</span>,             <span class="sql-string">'2024-01-10'</span>),
(<span class="sql-number">1</span>, <span class="sql-number">2</span>, <span class="sql-string">'Texnik rahbar'</span>,      <span class="sql-string">'2023-06-01'</span>),
(<span class="sql-number">2</span>, <span class="sql-number">2</span>, <span class="sql-string">'Dasturchi'</span>,          <span class="sql-string">'2023-07-01'</span>),
(<span class="sql-number">1</span>, <span class="sql-number">3</span>, <span class="sql-string">'Loyiha rahbari'</span>,     <span class="sql-string">'2024-03-01'</span>),
(<span class="sql-number">3</span>, <span class="sql-number">3</span>, <span class="sql-string">'DevOps'</span>,             <span class="sql-string">'2024-03-05'</span>),
(<span class="sql-number">6</span>, <span class="sql-number">4</span>, <span class="sql-string">'Loyiha rahbari'</span>,     <span class="sql-string">'2024-02-01'</span>),
(<span class="sql-number">7</span>, <span class="sql-number">4</span>, <span class="sql-string">'Kontent menejer'</span>,    <span class="sql-string">'2024-02-10'</span>),
(<span class="sql-number">5</span>, <span class="sql-number">2</span>, <span class="sql-string">'Moliya nazoratchi'</span>,  <span class="sql-string">'2023-06-15'</span>);

<span class="sql-comment">-- Maosh tarixi</span>
<span class="sql-keyword">INSERT INTO</span> maosh_tarixi <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>, <span class="sql-number">1</span>, <span class="sql-number">8000000</span>,  <span class="sql-number">10000000</span>, <span class="sql-string">'2022-01-01'</span>),
(<span class="sql-number">2</span>, <span class="sql-number">1</span>, <span class="sql-number">10000000</span>, <span class="sql-number">12000000</span>, <span class="sql-string">'2023-07-01'</span>),
(<span class="sql-number">3</span>, <span class="sql-number">2</span>, <span class="sql-number">4500000</span>,  <span class="sql-number">6000000</span>,  <span class="sql-string">'2023-07-01'</span>),
(<span class="sql-number">4</span>, <span class="sql-number">4</span>, <span class="sql-number">7500000</span>,  <span class="sql-number">9500000</span>,  <span class="sql-string">'2022-09-01'</span>),
(<span class="sql-number">5</span>, <span class="sql-number">6</span>, <span class="sql-number">7000000</span>,  <span class="sql-number">8500000</span>,  <span class="sql-string">'2023-01-01'</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 5 rows affected (0.01 sec) ‚Äî <code>INSERT INTO bolimlar</code></span>
<span class="rok-line">Records: 5 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 10 rows affected (0.01 sec) ‚Äî <code>INSERT INTO xodimlar</code></span>
<span class="rok-line">Records: 10 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>UPDATE bolimlar</code> (rahbar_id = 1)</span>
<span class="rok-line">Rows matched: 1 &nbsp;Changed: 1 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>UPDATE bolimlar</code> (rahbar_id = 4)</span>
<span class="rok-line">Rows matched: 1 &nbsp;Changed: 1 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>UPDATE bolimlar</code> (rahbar_id = 6)</span>
<span class="rok-line">Rows matched: 1 &nbsp;Changed: 1 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>UPDATE bolimlar</code> (rahbar_id = 8)</span>
<span class="rok-line">Rows matched: 1 &nbsp;Changed: 1 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 5 rows affected (0.01 sec) ‚Äî <code>INSERT INTO loyihalar</code></span>
<span class="rok-line">Records: 5 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 10 rows affected (0.01 sec) ‚Äî <code>INSERT INTO xodim_loyiha</code></span>
<span class="rok-line">Records: 10 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 5 rows affected (0.01 sec) ‚Äî <code>INSERT INTO maosh_tarixi</code></span>
<span class="rok-line">Records: 5 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 2: INNER JOIN -->
<div class="card">
<h3><span class="step-number">2</span>INNER JOIN ‚Äî Ichki birlashtirish</h3>
<p><code>INNER JOIN</code> faqat ikkala jadvalda ham mos keladigan qatorlarni qaytaradi. Agar biror jadvalda mos qator bo'lmasa, u natijada ko'rinmaydi.</p>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî INNER JOIN</div></div>
<pre><code><span class="sql-comment">-- 1. Xodimlar va ularning bo'limlari</span>
<span class="sql-keyword">SELECT</span> 
    x.xodim_id,
    x.ism,
    x.familiya,
    x.lavozim,
    b.bolim_nomi
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.bolim_id;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>xodim_id</th><th>ism</th><th>familiya</th><th>lavozim</th><th>bolim_nomi</th></tr></thead>
<tbody>
<tr><td>1</td><td>Alisher</td><td>Karimov</td><td>Senior dasturchi</td><td>IT bo'limi</td></tr>
<tr><td>2</td><td>Dilnoza</td><td>Rahimova</td><td>Junior dasturchi</td><td>IT bo'limi</td></tr>
<tr><td>3</td><td>Bobur</td><td>Toshmatov</td><td>DevOps muhandis</td><td>IT bo'limi</td></tr>
<tr><td>4</td><td>Gulnora</td><td>Azimova</td><td>Bosh hisobchi</td><td>Moliya bo'limi</td></tr>
<tr><td>5</td><td>Sanjar</td><td>Alimov</td><td>Hisobchi</td><td>Moliya bo'limi</td></tr>
<tr><td>6</td><td>Nodira</td><td>Yusupova</td><td>Marketing menejer</td><td>Marketing bo'limi</td></tr>
<tr><td>7</td><td>Otabek</td><td>Nazarov</td><td>SMM mutaxassis</td><td>Marketing bo'limi</td></tr>
<tr><td>8</td><td>Kamola</td><td>Umarova</td><td>HR menejer</td><td>HR bo'limi</td></tr>
</tbody>
</table>

<div class="warning-box">
<p><strong>‚ö†Ô∏è E'tibor bering:</strong> Jasur (id=9) va Malika (id=10) natijada <strong>yo'q</strong>, chunki ularning <code>bolim_id</code> qiymati <code>NULL</code>. Shuningdek, "Logistika bo'limi" ham ko'rinmaydi, chunki unga birorta xodim tayinlanmagan.</p>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî INNER JOIN</div></div>
<pre><code><span class="sql-comment">-- 2. Xodimlar va ularning loyihalari</span>
<span class="sql-keyword">SELECT</span> 
    x.ism,
    x.familiya,
    l.loyiha_nomi,
    xl.rol,
    l.holat
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">INNER JOIN</span> xodim_loyiha xl <span class="sql-keyword">ON</span> x.xodim_id = xl.xodim_id
<span class="sql-join">INNER JOIN</span> loyihalar l <span class="sql-keyword">ON</span> xl.loyiha_id = l.loyiha_id
<span class="sql-keyword">ORDER BY</span> l.loyiha_nomi, xl.rol;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>loyiha_nomi</th><th>rol</th><th>holat</th></tr></thead>
<tbody>
<tr><td>Dilnoza</td><td>Rahimova</td><td>CRM tizimi</td><td>Dasturchi</td><td>yakunlangan</td></tr>
<tr><td>Sanjar</td><td>Alimov</td><td>CRM tizimi</td><td>Moliya nazoratchi</td><td>yakunlangan</td></tr>
<tr><td>Alisher</td><td>Karimov</td><td>CRM tizimi</td><td>Texnik rahbar</td><td>yakunlangan</td></tr>
<tr><td>Dilnoza</td><td>Rahimova</td><td>E-commerce platforma</td><td>Dasturchi</td><td>faol</td></tr>
<tr><td>Bobur</td><td>Toshmatov</td><td>E-commerce platforma</td><td>DevOps</td><td>faol</td></tr>
<tr><td>Alisher</td><td>Karimov</td><td>E-commerce platforma</td><td>Loyiha rahbari</td><td>faol</td></tr>
<tr><td>Otabek</td><td>Nazarov</td><td>Marketing kampaniya</td><td>Kontent menejer</td><td>yakunlangan</td></tr>
<tr><td>Nodira</td><td>Yusupova</td><td>Marketing kampaniya</td><td>Loyiha rahbari</td><td>yakunlangan</td></tr>
<tr><td>Bobur</td><td>Toshmatov</td><td>Mobil ilova</td><td>DevOps</td><td>faol</td></tr>
<tr><td>Alisher</td><td>Karimov</td><td>Mobil ilova</td><td>Loyiha rahbari</td><td>faol</td></tr>
</tbody>
</table>

<div class="tip-box">
<p><strong>üí° Eslatma:</strong> "AI chatbot" loyihasi natijada <strong>yo'q</strong>, chunki unga hali xodim tayinlanmagan. INNER JOIN faqat <strong>mos keladigan</strong> qatorlarni qaytaradi.</p>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 3: LEFT JOIN -->
<div class="card">
<h3><span class="step-number">3</span>LEFT JOIN ‚Äî Chap birlashtirish</h3>
<p><code>LEFT JOIN</code> chap jadvaldagi <strong>barcha</strong> qatorlarni qaytaradi. O'ng jadvalda mos qator bo'lmasa, <code>NULL</code> qiymat ko'rsatiladi.</p>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî LEFT JOIN</div></div>
<pre><code><span class="sql-comment">-- 1. BARCHA xodimlar, shu jumladan bo'limsizlar</span>
<span class="sql-keyword">SELECT</span> 
    x.xodim_id,
    x.ism,
    x.familiya,
    x.lavozim,
    <span class="sql-function">IFNULL</span>(b.bolim_nomi, <span class="sql-string">'‚ùå Tayinlanmagan'</span>) <span class="sql-keyword">AS</span> bolim
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">LEFT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.bolim_id;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>xodim_id</th><th>ism</th><th>familiya</th><th>lavozim</th><th>bolim</th></tr></thead>
<tbody>
<tr><td>1</td><td>Alisher</td><td>Karimov</td><td>Senior dasturchi</td><td>IT bo'limi</td></tr>
<tr><td>2</td><td>Dilnoza</td><td>Rahimova</td><td>Junior dasturchi</td><td>IT bo'limi</td></tr>
<tr><td>3</td><td>Bobur</td><td>Toshmatov</td><td>DevOps muhandis</td><td>IT bo'limi</td></tr>
<tr><td>4</td><td>Gulnora</td><td>Azimova</td><td>Bosh hisobchi</td><td>Moliya bo'limi</td></tr>
<tr><td>5</td><td>Sanjar</td><td>Alimov</td><td>Hisobchi</td><td>Moliya bo'limi</td></tr>
<tr><td>6</td><td>Nodira</td><td>Yusupova</td><td>Marketing menejer</td><td>Marketing bo'limi</td></tr>
<tr><td>7</td><td>Otabek</td><td>Nazarov</td><td>SMM mutaxassis</td><td>Marketing bo'limi</td></tr>
<tr><td>8</td><td>Kamola</td><td>Umarova</td><td>HR menejer</td><td>HR bo'limi</td></tr>
<tr class="highlight-row"><td>9</td><td>Jasur</td><td>Ergashev</td><td>Stajyor</td><td>‚ùå Tayinlanmagan</td></tr>
<tr class="highlight-row"><td>10</td><td>Malika</td><td>Tursunova</td><td>Amaliyotchi</td><td>‚ùå Tayinlanmagan</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî LEFT JOIN</div></div>
<pre><code><span class="sql-comment">-- 2. Faqat bo'limga tayinlanMAGAN xodimlar</span>
<span class="sql-keyword">SELECT</span> 
    x.ism,
    x.familiya,
    x.lavozim
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">LEFT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.bolim_id
<span class="sql-keyword">WHERE</span> b.bolim_id <span class="sql-keyword">IS NULL</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>lavozim</th></tr></thead>
<tbody>
<tr><td>Jasur</td><td>Ergashev</td><td>Stajyor</td></tr>
<tr><td>Malika</td><td>Tursunova</td><td>Amaliyotchi</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî LEFT JOIN</div></div>
<pre><code><span class="sql-comment">-- 3. Xodimlar va ularning maosh tarixi (barchasi, shu jumladan o'zgarishsizlar)</span>
<span class="sql-keyword">SELECT</span> 
    x.ism,
    x.familiya,
    x.maosh <span class="sql-keyword">AS</span> joriy_maosh,
    <span class="sql-function">COUNT</span>(mt.id) <span class="sql-keyword">AS</span> ozgarishlar_soni,
    <span class="sql-function">MIN</span>(mt.eski_maosh) <span class="sql-keyword">AS</span> boshlangich_maosh
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">LEFT JOIN</span> maosh_tarixi mt <span class="sql-keyword">ON</span> x.xodim_id = mt.xodim_id
<span class="sql-keyword">GROUP BY</span> x.xodim_id, x.ism, x.familiya, x.maosh
<span class="sql-keyword">ORDER BY</span> ozgarishlar_soni <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî Xodimlar va maosh o'zgarishlari</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>joriy_maosh</th><th>ozgarishlar_soni</th><th>boshlangich_maosh</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>12000000.00</td><td>2</td><td>8000000.00</td></tr>
<tr><td>Dilnoza</td><td>Rahimova</td><td>6000000.00</td><td>1</td><td>4500000.00</td></tr>
<tr><td>Gulnora</td><td>Azimova</td><td>9500000.00</td><td>1</td><td>7500000.00</td></tr>
<tr><td>Nodira</td><td>Yusupova</td><td>8500000.00</td><td>1</td><td>7000000.00</td></tr>
<tr><td>Bobur</td><td>Toshmatov</td><td>10000000.00</td><td>0</td><td>NULL</td></tr>
<tr><td>Sanjar</td><td>Alimov</td><td>7000000.00</td><td>0</td><td>NULL</td></tr>
<tr><td>Otabek</td><td>Nazarov</td><td>5500000.00</td><td>0</td><td>NULL</td></tr>
<tr><td>Kamola</td><td>Umarova</td><td>8000000.00</td><td>0</td><td>NULL</td></tr>
<tr><td>Jasur</td><td>Ergashev</td><td>2500000.00</td><td>0</td><td>NULL</td></tr>
<tr><td>Malika</td><td>Tursunova</td><td>2000000.00</td><td>0</td><td>NULL</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 4: RIGHT JOIN -->
<div class="card">
<h3><span class="step-number">4</span>RIGHT JOIN ‚Äî O'ng birlashtirish</h3>
<p><code>RIGHT JOIN</code> o'ng jadvaldagi <strong>barcha</strong> qatorlarni qaytaradi. Chap jadvalda mos qator bo'lmasa, <code>NULL</code> qiymat ko'rsatiladi.</p>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî RIGHT JOIN</div></div>
<pre><code><span class="sql-comment">-- 1. Barcha bo'limlar, shu jumladan xodimsizlar</span>
<span class="sql-keyword">SELECT</span> 
    b.bolim_nomi,
    b.joylashuv,
    <span class="sql-function">COUNT</span>(x.xodim_id) <span class="sql-keyword">AS</span> xodimlar_soni
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">RIGHT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.bolim_id
<span class="sql-keyword">GROUP BY</span> b.bolim_id, b.bolim_nomi, b.joylashuv;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>bolim_nomi</th><th>joylashuv</th><th>xodimlar_soni</th></tr></thead>
<tbody>
<tr><td>IT bo'limi</td><td>Toshkent</td><td>3</td></tr>
<tr><td>Moliya bo'limi</td><td>Toshkent</td><td>2</td></tr>
<tr><td>Marketing bo'limi</td><td>Samarqand</td><td>2</td></tr>
<tr><td>HR bo'limi</td><td>Toshkent</td><td>1</td></tr>
<tr class="highlight-row"><td>Logistika bo'limi</td><td>Buxoro</td><td>0</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî RIGHT JOIN</div></div>
<pre><code><span class="sql-comment">-- 2. Bo'sh (xodimsiz) bo'limlarni topish</span>
<span class="sql-keyword">SELECT</span> 
    b.bolim_nomi,
    b.joylashuv
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">RIGHT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.bolim_id
<span class="sql-keyword">WHERE</span> x.xodim_id <span class="sql-keyword">IS NULL</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>bolim_nomi</th><th>joylashuv</th></tr></thead>
<tbody>
<tr class="highlight-row"><td>Logistika bo'limi</td><td>Buxoro</td></tr>
</tbody>
</table>

<div class="tip-box">
<p><strong>üí° Amaliy maslahat:</strong> Ko'pchilik dasturchilar <code>RIGHT JOIN</code> o'rniga jadvallar tartibini almashtirib <code>LEFT JOIN</code> ishlatishni afzal ko'radi. Bu kodni o'qishni osonlashtiradi.</p>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 5: FULL OUTER JOIN -->
<div class="card">
<h3><span class="step-number">5</span>FULL OUTER JOIN ‚Äî To'liq birlashtirish</h3>
<p>MySQL da <code>FULL OUTER JOIN</code> to'g'ridan-to'g'ri qo'llab-quvvatlanmaydi. Uni <code>LEFT JOIN</code> + <code>UNION</code> + <code>RIGHT JOIN</code> kombinatsiyasi bilan simulyatsiya qilamiz.</p>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî FULL OUTER JOIN</div></div>
<pre><code><span class="sql-comment">-- MySQL da FULL OUTER JOIN simulyatsiyasi</span>
<span class="sql-keyword">SELECT</span> 
    x.ism,
    x.familiya,
    x.lavozim,
    b.bolim_nomi
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">LEFT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.bolim_id

<span class="sql-operator">UNION</span>

<span class="sql-keyword">SELECT</span> 
    x.ism,
    x.familiya,
    x.lavozim,
    b.bolim_nomi
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">RIGHT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.bolim_id;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>lavozim</th><th>bolim_nomi</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>Senior dasturchi</td><td>IT bo'limi</td></tr>
<tr><td>Dilnoza</td><td>Rahimova</td><td>Junior dasturchi</td><td>IT bo'limi</td></tr>
<tr><td>Bobur</td><td>Toshmatov</td><td>DevOps muhandis</td><td>IT bo'limi</td></tr>
<tr><td>Gulnora</td><td>Azimova</td><td>Bosh hisobchi</td><td>Moliya bo'limi</td></tr>
<tr><td>Sanjar</td><td>Alimov</td><td>Hisobchi</td><td>Moliya bo'limi</td></tr>
<tr><td>Nodira</td><td>Yusupova</td><td>Marketing menejer</td><td>Marketing bo'limi</td></tr>
<tr><td>Otabek</td><td>Nazarov</td><td>SMM mutaxassis</td><td>Marketing bo'limi</td></tr>
<tr><td>Kamola</td><td>Umarova</td><td>HR menejer</td><td>HR bo'limi</td></tr>
<tr class="highlight-row"><td>Jasur</td><td>Ergashev</td><td>Stajyor</td><td>NULL</td></tr>
<tr class="highlight-row"><td>Malika</td><td>Tursunova</td><td>Amaliyotchi</td><td>NULL</td></tr>
<tr class="highlight-row"><td>NULL</td><td>NULL</td><td>NULL</td><td>Logistika bo'limi</td></tr>
</tbody>
</table>

<div class="warning-box">
<p><strong>‚ö†Ô∏è MySQL xususiyati:</strong> Standart SQL da <code>FULL OUTER JOIN</code> mavjud (PostgreSQL, SQL Server). MySQL da esa yuqoridagi <code>LEFT JOIN + UNION + RIGHT JOIN</code> usuli qo'llaniladi.</p>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 6: CROSS JOIN -->
<div class="card">
<h3><span class="step-number">6</span>CROSS JOIN ‚Äî Dekart ko'paytmasi</h3>
<p><code>CROSS JOIN</code> birinchi jadvalning har bir qatorini ikkinchi jadvalning barcha qatorlari bilan birlashtiradi. <strong>ON</strong> sharti ishlatilmaydi.</p>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CROSS JOIN</div></div>
<pre><code><span class="sql-comment">-- 1. Barcha xodim-loyiha kombinatsiyalari</span>
<span class="sql-keyword">SELECT</span> 
    x.ism,
    l.loyiha_nomi
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">CROSS JOIN</span> loyihalar l
<span class="sql-keyword">WHERE</span> l.holat = <span class="sql-string">'faol'</span>
<span class="sql-keyword">ORDER BY</span> x.ism, l.loyiha_nomi;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî CROSS JOIN (faqat faol loyihalar)</span>
<table>
<thead><tr><th>ism</th><th>loyiha_nomi</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>E-commerce platforma</td></tr>
<tr><td>Alisher</td><td>Mobil ilova</td></tr>
<tr><td>Bobur</td><td>E-commerce platforma</td></tr>
<tr><td>Bobur</td><td>Mobil ilova</td></tr>
<tr><td>Dilnoza</td><td>E-commerce platforma</td></tr>
<tr><td>Dilnoza</td><td>Mobil ilova</td></tr>
<tr><td>Gulnora</td><td>E-commerce platforma</td></tr>
<tr><td>Gulnora</td><td>Mobil ilova</td></tr>
<tr><td>Jasur</td><td>E-commerce platforma</td></tr>
<tr><td>Jasur</td><td>Mobil ilova</td></tr>
<tr><td>Kamola</td><td>E-commerce platforma</td></tr>
<tr><td>Kamola</td><td>Mobil ilova</td></tr>
<tr><td>Malika</td><td>E-commerce platforma</td></tr>
<tr><td>Malika</td><td>Mobil ilova</td></tr>
<tr><td>Nodira</td><td>E-commerce platforma</td></tr>
<tr><td>Nodira</td><td>Mobil ilova</td></tr>
<tr><td>Otabek</td><td>E-commerce platforma</td></tr>
<tr><td>Otabek</td><td>Mobil ilova</td></tr>
<tr><td>Sanjar</td><td>E-commerce platforma</td></tr>
<tr><td>Sanjar</td><td>Mobil ilova</td></tr>
</tbody>
</table>

<div class="warning-box">
<p><strong>‚ö†Ô∏è Ehtiyot bo'ling!</strong> CROSS JOIN natijasi juda katta bo'lishi mumkin. Agar birinchi jadvalda 1000, ikkinchisida 500 qator bo'lsa, natija <strong>500,000</strong> qator bo'ladi! Faqat zarur holatlarda ishlating.</p>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CROSS JOIN</div></div>
<pre><code><span class="sql-comment">-- 2. Amaliy misol: Barcha bo'lim-joylashuv kombinatsiyalari</span>
<span class="sql-keyword">SELECT</span> 
    b1.bolim_nomi,
    b2.joylashuv <span class="sql-keyword">AS</span> mumkin_joylashuv
<span class="sql-keyword">FROM</span> (<span class="sql-keyword">SELECT DISTINCT</span> bolim_nomi <span class="sql-keyword">FROM</span> bolimlar) b1
<span class="sql-join">CROSS JOIN</span> (<span class="sql-keyword">SELECT DISTINCT</span> joylashuv <span class="sql-keyword">FROM</span> bolimlar) b2;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî Barcha bo'lim-joylashuv kombinatsiyalari</span>
<table>
<thead><tr><th>bolim_nomi</th><th>mumkin_joylashuv</th></tr></thead>
<tbody>
<tr><td>IT bo'limi</td><td>Toshkent</td></tr>
<tr><td>IT bo'limi</td><td>Samarqand</td></tr>
<tr><td>IT bo'limi</td><td>Buxoro</td></tr>
<tr><td>Moliya bo'limi</td><td>Toshkent</td></tr>
<tr><td>Moliya bo'limi</td><td>Samarqand</td></tr>
<tr><td>Moliya bo'limi</td><td>Buxoro</td></tr>
<tr><td>Marketing bo'limi</td><td>Toshkent</td></tr>
<tr><td>Marketing bo'limi</td><td>Samarqand</td></tr>
<tr><td>Marketing bo'limi</td><td>Buxoro</td></tr>
<tr><td>HR bo'limi</td><td>Toshkent</td></tr>
<tr><td>HR bo'limi</td><td>Samarqand</td></tr>
<tr><td>HR bo'limi</td><td>Buxoro</td></tr>
<tr><td>Logistika bo'limi</td><td>Toshkent</td></tr>
<tr><td>Logistika bo'limi</td><td>Samarqand</td></tr>
<tr><td>Logistika bo'limi</td><td>Buxoro</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 7: SELF JOIN -->
<div class="card">
<h3><span class="step-number">7</span>SELF JOIN ‚Äî Jadval o'zi bilan birlashtirish</h3>
<p><code>SELF JOIN</code> ‚Äî jadval o'zi bilan birlashtiriladi. Bu ierarxik tuzilmalar (menejer-xodim) va taqqoslash uchun ishlatiladi.</p>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî SELF JOIN</div></div>
<pre><code><span class="sql-comment">-- 1. Xodimlar va ularning menejerlari</span>
<span class="sql-keyword">SELECT</span> 
    x.ism <span class="sql-keyword">AS</span> xodim_ismi,
    x.familiya <span class="sql-keyword">AS</span> xodim_familiyasi,
    x.lavozim,
    <span class="sql-function">CONCAT</span>(m.ism, <span class="sql-string">' '</span>, m.familiya) <span class="sql-keyword">AS</span> menejer
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">LEFT JOIN</span> xodimlar m <span class="sql-keyword">ON</span> x.menejer_id = m.xodim_id;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>xodim_ismi</th><th>xodim_familiyasi</th><th>lavozim</th><th>menejer</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>Senior dasturchi</td><td>NULL</td></tr>
<tr><td>Dilnoza</td><td>Rahimova</td><td>Junior dasturchi</td><td>Alisher Karimov</td></tr>
<tr><td>Bobur</td><td>Toshmatov</td><td>DevOps muhandis</td><td>Alisher Karimov</td></tr>
<tr><td>Gulnora</td><td>Azimova</td><td>Bosh hisobchi</td><td>NULL</td></tr>
<tr><td>Sanjar</td><td>Alimov</td><td>Hisobchi</td><td>Gulnora Azimova</td></tr>
<tr><td>Nodira</td><td>Yusupova</td><td>Marketing menejer</td><td>NULL</td></tr>
<tr><td>Otabek</td><td>Nazarov</td><td>SMM mutaxassis</td><td>Nodira Yusupova</td></tr>
<tr><td>Kamola</td><td>Umarova</td><td>HR menejer</td><td>NULL</td></tr>
<tr><td>Jasur</td><td>Ergashev</td><td>Stajyor</td><td>Alisher Karimov</td></tr>
<tr><td>Malika</td><td>Tursunova</td><td>Amaliyotchi</td><td>Kamola Umarova</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî SELF JOIN</div></div>
<pre><code><span class="sql-comment">-- 2. Bir xil bo'limdagi hamkasblar (o'zidan boshqa)</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(x1.ism, <span class="sql-string">' '</span>, x1.familiya) <span class="sql-keyword">AS</span> xodim_1,
    <span class="sql-function">CONCAT</span>(x2.ism, <span class="sql-string">' '</span>, x2.familiya) <span class="sql-keyword">AS</span> xodim_2,
    b.bolim_nomi
<span class="sql-keyword">FROM</span> xodimlar x1
<span class="sql-join">INNER JOIN</span> xodimlar x2 <span class="sql-keyword">ON</span> x1.bolim_id = x2.bolim_id 
    <span class="sql-keyword">AND</span> x1.xodim_id &lt; x2.xodim_id
<span class="sql-join">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x1.bolim_id = b.bolim_id
<span class="sql-keyword">ORDER BY</span> b.bolim_nomi;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî Bir xil bo'limdagi hamkasblar</span>
<table>
<thead><tr><th>xodim_1</th><th>xodim_2</th><th>bolim_nomi</th></tr></thead>
<tbody>
<tr><td>Alisher Karimov</td><td>Dilnoza Rahimova</td><td>IT bo'limi</td></tr>
<tr><td>Alisher Karimov</td><td>Bobur Toshmatov</td><td>IT bo'limi</td></tr>
<tr><td>Dilnoza Rahimova</td><td>Bobur Toshmatov</td><td>IT bo'limi</td></tr>
<tr><td>Nodira Yusupova</td><td>Otabek Nazarov</td><td>Marketing bo'limi</td></tr>
<tr><td>Gulnora Azimova</td><td>Sanjar Alimov</td><td>Moliya bo'limi</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî SELF JOIN</div></div>
<pre><code><span class="sql-comment">-- 3. Menejerlar va ularning bo'ysinuvchilari soni</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(m.ism, <span class="sql-string">' '</span>, m.familiya) <span class="sql-keyword">AS</span> menejer,
    m.lavozim,
    <span class="sql-function">COUNT</span>(x.xodim_id) <span class="sql-keyword">AS</span> boysinuvchilar_soni,
    <span class="sql-function">GROUP_CONCAT</span>(x.ism <span class="sql-keyword">ORDER BY</span> x.ism <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>) <span class="sql-keyword">AS</span> xodimlar
<span class="sql-keyword">FROM</span> xodimlar m
<span class="sql-join">INNER JOIN</span> xodimlar x <span class="sql-keyword">ON</span> m.xodim_id = x.menejer_id
<span class="sql-keyword">GROUP BY</span> m.xodim_id, m.ism, m.familiya, m.lavozim
<span class="sql-keyword">ORDER BY</span> boysinuvchilar_soni <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>menejer</th><th>lavozim</th><th>boysinuvchilar_soni</th><th>xodimlar</th></tr></thead>
<tbody>
<tr><td>Alisher Karimov</td><td>Senior dasturchi</td><td>3</td><td>Bobur, Dilnoza, Jasur</td></tr>
<tr><td>Kamola Umarova</td><td>HR menejer</td><td>1</td><td>Malika</td></tr>
<tr><td>Gulnora Azimova</td><td>Bosh hisobchi</td><td>1</td><td>Sanjar</td></tr>
<tr><td>Nodira Yusupova</td><td>Marketing menejer</td><td>1</td><td>Otabek</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 8: MURAKKAB JOINLAR -->
<div class="card">
<h3><span class="step-number">8</span>Murakkab JOIN so'rovlari</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab JOIN</div></div>
<pre><code><span class="sql-comment">-- 1. To'liq hisobot: Xodim + Bo'lim + Loyihalar + Menejer</span>
<span class="sql-keyword">SELECT</span> 
    x.ism,
    x.familiya,
    x.lavozim,
    <span class="sql-function">IFNULL</span>(b.bolim_nomi, <span class="sql-string">'Tayinlanmagan'</span>) <span class="sql-keyword">AS</span> bolim,
    <span class="sql-function">IFNULL</span>(<span class="sql-function">CONCAT</span>(m.ism, <span class="sql-string">' '</span>, m.familiya), <span class="sql-string">'‚Äî'</span>) <span class="sql-keyword">AS</span> menejer,
    <span class="sql-function">COUNT</span>(xl.loyiha_id) <span class="sql-keyword">AS</span> loyihalar_soni,
    <span class="sql-function">FORMAT</span>(x.maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">LEFT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.bolim_id
<span class="sql-join">LEFT JOIN</span> xodimlar m <span class="sql-keyword">ON</span> x.menejer_id = m.xodim_id
<span class="sql-join">LEFT JOIN</span> xodim_loyiha xl <span class="sql-keyword">ON</span> x.xodim_id = xl.xodim_id
<span class="sql-keyword">GROUP BY</span> x.xodim_id, x.ism, x.familiya, x.lavozim, b.bolim_nomi, m.ism, m.familiya, x.maosh
<span class="sql-keyword">ORDER BY</span> loyihalar_soni <span class="sql-keyword">DESC</span>, x.maosh <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî To'liq hisobot</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>lavozim</th><th>bolim</th><th>menejer</th><th>loyihalar_soni</th><th>maosh</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>Senior dasturchi</td><td>IT bo'limi</td><td>‚Äî</td><td>3</td><td>12,000,000</td></tr>
<tr><td>Bobur</td><td>Toshmatov</td><td>DevOps muhandis</td><td>IT bo'limi</td><td>Alisher Karimov</td><td>2</td><td>10,000,000</td></tr>
<tr><td>Dilnoza</td><td>Rahimova</td><td>Junior dasturchi</td><td>IT bo'limi</td><td>Alisher Karimov</td><td>2</td><td>6,000,000</td></tr>
<tr><td>Nodira</td><td>Yusupova</td><td>Marketing menejer</td><td>Marketing bo'limi</td><td>‚Äî</td><td>1</td><td>8,500,000</td></tr>
<tr><td>Sanjar</td><td>Alimov</td><td>Hisobchi</td><td>Moliya bo'limi</td><td>Gulnora Azimova</td><td>1</td><td>7,000,000</td></tr>
<tr><td>Otabek</td><td>Nazarov</td><td>SMM mutaxassis</td><td>Marketing bo'limi</td><td>Nodira Yusupova</td><td>1</td><td>5,500,000</td></tr>
<tr><td>Gulnora</td><td>Azimova</td><td>Bosh hisobchi</td><td>Moliya bo'limi</td><td>‚Äî</td><td>0</td><td>9,500,000</td></tr>
<tr><td>Kamola</td><td>Umarova</td><td>HR menejer</td><td>HR bo'limi</td><td>‚Äî</td><td>0</td><td>8,000,000</td></tr>
<tr><td>Jasur</td><td>Ergashev</td><td>Stajyor</td><td>Tayinlanmagan</td><td>Alisher Karimov</td><td>0</td><td>2,500,000</td></tr>
<tr><td>Malika</td><td>Tursunova</td><td>Amaliyotchi</td><td>Tayinlanmagan</td><td>Kamola Umarova</td><td>0</td><td>2,000,000</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab JOIN</div></div>
<pre><code><span class="sql-comment">-- 2. Bo'limlar bo'yicha batafsil statistika</span>
<span class="sql-keyword">SELECT</span> 
    b.bolim_nomi,
    b.joylashuv,
    <span class="sql-function">CONCAT</span>(r.ism, <span class="sql-string">' '</span>, r.familiya) <span class="sql-keyword">AS</span> rahbar,
    <span class="sql-function">COUNT</span>(x.xodim_id) <span class="sql-keyword">AS</span> xodimlar_soni,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">AVG</span>(x.maosh), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MAX</span>(x.maosh), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> max_maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MIN</span>(x.maosh), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> min_maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(x.maosh), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_maosh
<span class="sql-keyword">FROM</span> bolimlar b
<span class="sql-join">LEFT JOIN</span> xodimlar x <span class="sql-keyword">ON</span> b.bolim_id = x.bolim_id
<span class="sql-join">LEFT JOIN</span> xodimlar r <span class="sql-keyword">ON</span> b.rahbar_id = r.xodim_id
<span class="sql-keyword">GROUP BY</span> b.bolim_id, b.bolim_nomi, b.joylashuv, r.ism, r.familiya
<span class="sql-keyword">ORDER BY</span> xodimlar_soni <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî Bo'limlar bo'yicha batafsil statistika</span>
<table>
<thead><tr><th>bolim_nomi</th><th>joylashuv</th><th>rahbar</th><th>xodimlar_soni</th><th>ort_maosh</th><th>max_maosh</th><th>min_maosh</th><th>jami_maosh</th></tr></thead>
<tbody>
<tr><td>IT bo'limi</td><td>Toshkent</td><td>Alisher Karimov</td><td>3</td><td>9,333,333</td><td>12,000,000</td><td>6,000,000</td><td>28,000,000</td></tr>
<tr><td>Moliya bo'limi</td><td>Toshkent</td><td>Gulnora Azimova</td><td>2</td><td>8,250,000</td><td>9,500,000</td><td>7,000,000</td><td>16,500,000</td></tr>
<tr><td>Marketing bo'limi</td><td>Samarqand</td><td>Nodira Yusupova</td><td>2</td><td>7,000,000</td><td>8,500,000</td><td>5,500,000</td><td>14,000,000</td></tr>
<tr><td>HR bo'limi</td><td>Toshkent</td><td>Kamola Umarova</td><td>1</td><td>8,000,000</td><td>8,000,000</td><td>8,000,000</td><td>8,000,000</td></tr>
<tr class="highlight-row"><td>Logistika bo'limi</td><td>Buxoro</td><td>NULL</td><td>0</td><td>NULL</td><td>NULL</td><td>NULL</td><td>NULL</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab JOIN</div></div>
<pre><code><span class="sql-comment">-- 3. Qaysi xodim qancha loyihada qatnashmoqda + maosh o'sishi</span>
<span class="sql-keyword">SELECT</span> 
    x.ism,
    x.familiya,
    b.bolim_nomi,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> xl.loyiha_id) <span class="sql-keyword">AS</span> loyihalar,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> mt.id) <span class="sql-keyword">AS</span> maosh_ozgarishlari,
    <span class="sql-keyword">CASE</span> 
        <span class="sql-keyword">WHEN</span> <span class="sql-function">COUNT</span>(mt.id) > <span class="sql-number">0</span> 
        <span class="sql-keyword">THEN</span> <span class="sql-function">CONCAT</span>(
            <span class="sql-function">ROUND</span>((x.maosh - <span class="sql-function">MIN</span>(mt.eski_maosh)) / <span class="sql-function">MIN</span>(mt.eski_maosh) * <span class="sql-number">100</span>), <span class="sql-string">'%'</span>
        )
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'‚Äî'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> maosh_osishi
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">LEFT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.bolim_id
<span class="sql-join">LEFT JOIN</span> xodim_loyiha xl <span class="sql-keyword">ON</span> x.xodim_id = xl.xodim_id
<span class="sql-join">LEFT JOIN</span> maosh_tarixi mt <span class="sql-keyword">ON</span> x.xodim_id = mt.xodim_id
<span class="sql-keyword">GROUP BY</span> x.xodim_id, x.ism, x.familiya, b.bolim_nomi, x.maosh
<span class="sql-keyword">ORDER BY</span> loyihalar <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî Loyihalar soni va maosh o'sishi</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>bolim_nomi</th><th>loyihalar</th><th>maosh_ozgarishlari</th><th>maosh_osishi</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>IT bo'limi</td><td>3</td><td>2</td><td>50%</td></tr>
<tr><td>Dilnoza</td><td>Rahimova</td><td>IT bo'limi</td><td>2</td><td>1</td><td>33%</td></tr>
<tr><td>Bobur</td><td>Toshmatov</td><td>IT bo'limi</td><td>2</td><td>0</td><td>‚Äî</td></tr>
<tr><td>Nodira</td><td>Yusupova</td><td>Marketing bo'limi</td><td>1</td><td>1</td><td>21%</td></tr>
<tr><td>Sanjar</td><td>Alimov</td><td>Moliya bo'limi</td><td>1</td><td>0</td><td>‚Äî</td></tr>
<tr><td>Otabek</td><td>Nazarov</td><td>Marketing bo'limi</td><td>1</td><td>0</td><td>‚Äî</td></tr>
<tr><td>Gulnora</td><td>Azimova</td><td>Moliya bo'limi</td><td>0</td><td>1</td><td>27%</td></tr>
<tr><td>Kamola</td><td>Umarova</td><td>HR bo'limi</td><td>0</td><td>0</td><td>‚Äî</td></tr>
<tr><td>Jasur</td><td>Ergashev</td><td>NULL</td><td>0</td><td>0</td><td>‚Äî</td></tr>
<tr><td>Malika</td><td>Tursunova</td><td>NULL</td><td>0</td><td>0</td><td>‚Äî</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab JOIN</div></div>
<pre><code><span class="sql-comment">-- 4. Loyihalar va ulardagi xodimlar (GROUP_CONCAT bilan)</span>
<span class="sql-keyword">SELECT</span> 
    l.loyiha_nomi,
    l.holat,
    <span class="sql-function">FORMAT</span>(l.byudjet, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> byudjet,
    <span class="sql-function">COUNT</span>(xl.xodim_id) <span class="sql-keyword">AS</span> jamoa_soni,
    <span class="sql-function">IFNULL</span>(
        <span class="sql-function">GROUP_CONCAT</span>(
            <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' ('</span>, xl.rol, <span class="sql-string">')'</span>)
            <span class="sql-keyword">ORDER BY</span> xl.rol
            <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>
        ), <span class="sql-string">'Hali tayinlanmagan'</span>
    ) <span class="sql-keyword">AS</span> jamoa
<span class="sql-keyword">FROM</span> loyihalar l
<span class="sql-join">LEFT JOIN</span> xodim_loyiha xl <span class="sql-keyword">ON</span> l.loyiha_id = xl.loyiha_id
<span class="sql-join">LEFT JOIN</span> xodimlar x <span class="sql-keyword">ON</span> xl.xodim_id = x.xodim_id
<span class="sql-keyword">GROUP BY</span> l.loyiha_id, l.loyiha_nomi, l.holat, l.byudjet
<span class="sql-keyword">ORDER BY</span> l.boshlash_sana;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>loyiha_nomi</th><th>holat</th><th>byudjet</th><th>jamoa_soni</th><th>jamoa</th></tr></thead>
<tbody>
<tr><td>CRM tizimi</td><td>yakunlangan</td><td>80,000,000</td><td>3</td><td>Dilnoza (Dasturchi), Sanjar (Moliya nazoratchi), Alisher (Texnik rahbar)</td></tr>
<tr><td>E-commerce platforma</td><td>faol</td><td>150,000,000</td><td>3</td><td>Dilnoza (Dasturchi), Bobur (DevOps), Alisher (Loyiha rahbari)</td></tr>
<tr><td>Marketing kampaniya</td><td>yakunlangan</td><td>30,000,000</td><td>2</td><td>Otabek (Kontent menejer), Nodira (Loyiha rahbari)</td></tr>
<tr><td>Mobil ilova</td><td>faol</td><td>200,000,000</td><td>2</td><td>Bobur (DevOps), Alisher (Loyiha rahbari)</td></tr>
<tr class="highlight-row"><td>AI chatbot</td><td>rejalashtirilgan</td><td>120,000,000</td><td>0</td><td>Hali tayinlanmagan</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- QIYOSLASH JADVALI -->
<h2><span class="icon">üìä</span>JOIN turlari qiyosiy jadvali</h2>
<div class="card-flat">
<table>
<thead><tr><th>Xususiyat</th><th>INNER JOIN</th><th>LEFT JOIN</th><th>RIGHT JOIN</th><th>CROSS JOIN</th><th>SELF JOIN</th></tr></thead>
<tbody>
<tr><td><strong>ON sharti</strong></td><td>‚úÖ Kerak</td><td>‚úÖ Kerak</td><td>‚úÖ Kerak</td><td>‚ùå Kerak emas</td><td>‚úÖ Kerak</td></tr>
<tr><td><strong>NULL qatorlar</strong></td><td>‚ùå Yo'q</td><td>‚úÖ O'ngda</td><td>‚úÖ Chapda</td><td>‚ùå Yo'q</td><td>Shaklga bog'liq</td></tr>
<tr><td><strong>Ishlash tezligi</strong></td><td>‚ö° Tez</td><td>üîÑ O'rtacha</td><td>üîÑ O'rtacha</td><td>üêå Sekin</td><td>üîÑ O'rtacha</td></tr>
<tr><td><strong>Ishlatilish</strong></td><td>Eng ko'p</td><td>Ko'p</td><td>Kam</td><td>Kam</td><td>O'rtacha</td></tr>
<tr><td><strong>Amaliy holat</strong></td><td>Mos ma'lumotlar</td><td>Hammasi + mos</td><td>Hammasi + mos</td><td>Kombinatsiyalar</td><td>Ierarxiya</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- NAZORAT SAVOLLARI -->
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card">
<ol>
<li><code>INNER JOIN</code> va <code>LEFT JOIN</code> orasidagi asosiy farq nimada?</li>
<li>Qachon <code>LEFT JOIN</code> ishlatish zarur bo'ladi? Misol keltiring.</li>
<li>MySQL da <code>FULL OUTER JOIN</code> ni qanday simulyatsiya qilish mumkin?</li>
<li><code>CROSS JOIN</code> qachon foydali bo'lishi mumkin? Uning xavfi nimada?</li>
<li><code>SELF JOIN</code> nima va u qanday holatlarda ishlatiladi?</li>
<li><code>ON</code> va <code>WHERE</code> shartlari orasidagi farq nimada (<code>LEFT JOIN</code> da)?</li>
<li>Bir so'rovda nechta <code>JOIN</code> ishlatish mumkin?</li>
<li><code>JOIN</code> so'rovlarining ishlash samaradorligini oshirish uchun nima qilish kerak?</li>
</ol>
</div>

<!-- AMALIY TOPSHIRIQLAR -->
<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>
<div class="card">
<ol>
<li>Barcha xodimlarni bo'lim nomlari bilan birga ko'rsating (<code>INNER JOIN</code>)</li>
<li>Bo'limga tayinlanmagan xodimlarni toping (<code>LEFT JOIN</code> + <code>IS NULL</code>)</li>
<li>Har bir bo'limning xodimlar sonini ko'rsating, xodimsiz bo'limlarni ham qo'shing (<code>RIGHT JOIN</code>)</li>
<li>Xodimlarni menejerlari bilan birga chiqaring (<code>SELF JOIN</code>)</li>
<li>Har bir loyihada ishtirok etayotgan xodimlarning to'liq ro'yxatini tuzing (3 jadval <code>JOIN</code>)</li>
<li>Birorta loyihada qatnashmagan xodimlarni toping</li>
<li>Har bir bo'lim rahbari va bo'limdagi o'rtacha maoshni ko'rsating</li>
<li><strong>üí´ Bonus:</strong> Har bir xodimning loyihalar soni, maosh o'sishi foizi, va bo'limi bilan to'liq hisobot tuzing (4+ jadval <code>JOIN</code>)</li>
</ol>
</div>

<!-- HISOBOT SHABLONI -->
<h2><span class="icon">üìù</span>Hisobot shabloni</h2>
<table>
<thead><tr><th>Bo'lim</th><th>Tavsif</th></tr></thead>
<tbody>
<tr><td><strong>Ishdan maqsad</strong></td><td>JOIN operatorlarini amaliyotda qo'llashni o'rganish</td></tr>
<tr><td><strong>INNER JOIN so'rovlari</strong></td><td>Ichki birlashtirish so'rovlari va natijalar</td></tr>
<tr><td><strong>LEFT/RIGHT JOIN</strong></td><td>Tashqi birlashtirish so'rovlari va NULL holatlari</td></tr>
<tr><td><strong>SELF JOIN</strong></td><td>Ierarxik so'rovlar (menejer-xodim)</td></tr>
<tr><td><strong>Murakkab so'rovlar</strong></td><td>Ko'p jadvalli birlashtirish hisobotlari</td></tr>
<tr><td><strong>Xulosa</strong></td><td>O'rganilgan JOIN turlari va ularning qo'llanilishi</td></tr>
</tbody>
</table>

<div class="luxury-divider"></div>

<!-- XULOSA -->
<div class="card">
<h2><span class="icon">üèÜ</span>Xulosa</h2>
<p>Ushbu amaliy mashg'ulotni yakunlagan talaba quyidagi ko'nikmalarga ega bo'ladi:</p>
<ul>
<li><code>INNER JOIN</code> bilan ikki va undan ortiq jadvalni birlashtirish</li>
<li><code>LEFT JOIN</code> va <code>RIGHT JOIN</code> bilan barcha qatorlarni saqlab birlashtirish</li>
<li>MySQL da <code>FULL OUTER JOIN</code> ni simulyatsiya qilish</li>
<li><code>CROSS JOIN</code> bilan Dekart ko'paytmasini yaratish va ishlatish</li>
<li><code>SELF JOIN</code> bilan ierarxik ma'lumotlarni so'rash</li>
<li>Ko'p jadvalli murakkab so'rovlarni tuzish (3-5 jadval)</li>
<li><code>IFNULL</code>, <code>CONCAT</code>, <code>GROUP_CONCAT</code> funksiyalarini JOIN bilan birga qo'llash</li>
<li>JOIN so'rovlari natijalarida <code>GROUP BY</code>, <code>ORDER BY</code>, <code>HAVING</code> ishlatish</li>
</ul>
</div>
</div>
</div>

<!-- ===== TUTORIAL 9 ===== -->
<div class="section-block" id="t9">
<div class="container">
<h1>9-amaliy mashg'ulot</h1>
<p class="subtitle">Standart funksiyalardan foydalanib so'rovlar yaratish</p>
<div class="gold-line"></div>

<div class="meta-info">
    <strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp;
    <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp;
    <strong>üéØ Daraja:</strong> O'rta-yuqori
</div>

<!-- ===== NAZARIY QISM ===== -->
<h2><span class="icon">üìñ</span>Nazariy qism</h2>

<div class="card">
<h3><span class="icon">üß©</span>SQL funksiyalar nima?</h3>
<p>SQL funksiyalari ‚Äî bu ma'lumotlar ustida turli amallarni bajaradigan tayyor ko'rsatmalar bo'lib, ular kiritilgan qiymatni qayta ishlab, natija qaytaradi. MySQL da funksiyalar bir necha katta toifalarga bo'linadi:</p>

<div style="text-align:center; margin: 25px 0;">
    <span class="category-badge badge-string">üî§ Satr (String)</span>
    <span class="category-badge badge-number">üî¢ Sonli (Numeric)</span>
    <span class="category-badge badge-date">üìÖ Sana/Vaqt (Date/Time)</span>
    <span class="category-badge badge-flow">üîÄ Boshqaruv (Control Flow)</span>
    <span class="category-badge badge-agg">üìä Agregat (Aggregate)</span>
</div>

<div class="theory-box">
<p><strong>üí° Muhim farq:</strong> Funksiyalar ikki turga bo'linadi:</p>
<ul>
<li><strong>Skalyar funksiyalar</strong> ‚Äî har bir qator uchun alohida qiymat qaytaradi (<code>UPPER()</code>, <code>ROUND()</code>, <code>NOW()</code>)</li>
<li><strong>Agregat funksiyalar</strong> ‚Äî bir guruh qatorlar uchun bitta qiymat qaytaradi (<code>COUNT()</code>, <code>SUM()</code>, <code>AVG()</code>)</li>
</ul>
</div>
</div>

<div class="card">
<h3><span class="icon">üìã</span>Asosiy funksiyalar ro'yxati</h3>

<h3 style="margin-top:25px;">üî§ Satr (String) funksiyalari</h3>
<table>
<thead><tr><th>Funksiya</th><th>Tavsif</th><th>Misol</th><th>Natija</th></tr></thead>
<tbody>
<tr><td><code>CONCAT()</code></td><td>Satrlarni birlashtirish</td><td><code>CONCAT('Ali', ' ', 'Valiyev')</code></td><td>Ali Valiyev</td></tr>
<tr><td><code>CONCAT_WS()</code></td><td>Ajratgich bilan birlashtirish</td><td><code>CONCAT_WS('-', '2024', '01', '15')</code></td><td>2024-01-15</td></tr>
<tr><td><code>UPPER()</code></td><td>Katta harfga</td><td><code>UPPER('salom')</code></td><td>SALOM</td></tr>
<tr><td><code>LOWER()</code></td><td>Kichik harfga</td><td><code>LOWER('SALOM')</code></td><td>salom</td></tr>
<tr><td><code>LENGTH()</code></td><td>Satr uzunligi (baytlarda)</td><td><code>LENGTH('Salom')</code></td><td>5</td></tr>
<tr><td><code>CHAR_LENGTH()</code></td><td>Belgilar soni</td><td><code>CHAR_LENGTH('Salom')</code></td><td>5</td></tr>
<tr><td><code>SUBSTRING()</code></td><td>Qism satr ajratish</td><td><code>SUBSTRING('Salom', 1, 3)</code></td><td>Sal</td></tr>
<tr><td><code>LEFT() / RIGHT()</code></td><td>Chap/o'ng qism</td><td><code>LEFT('Salom', 2)</code></td><td>Sa</td></tr>
<tr><td><code>TRIM()</code></td><td>Bo'sh joylarni olib tashlash</td><td><code>TRIM('  Salom  ')</code></td><td>Salom</td></tr>
<tr><td><code>REPLACE()</code></td><td>Satrni almashtirish</td><td><code>REPLACE('Salom', 'a', 'o')</code></td><td>Solom</td></tr>
<tr><td><code>REVERSE()</code></td><td>Teskari aylantirish</td><td><code>REVERSE('Salom')</code></td><td>molaS</td></tr>
<tr><td><code>LPAD() / RPAD()</code></td><td>Chapdan/o'ngdan to'ldirish</td><td><code>LPAD('42', 5, '0')</code></td><td>00042</td></tr>
<tr><td><code>LOCATE()</code></td><td>Pozitsiyani topish</td><td><code>LOCATE('lo', 'Salom')</code></td><td>3</td></tr>
</tbody>
</table>

<h3 style="margin-top:35px;">üî¢ Sonli (Numeric) funksiyalari</h3>
<table>
<thead><tr><th>Funksiya</th><th>Tavsif</th><th>Misol</th><th>Natija</th></tr></thead>
<tbody>
<tr><td><code>ROUND()</code></td><td>Yaxlitlash</td><td><code>ROUND(3.756, 2)</code></td><td>3.76</td></tr>
<tr><td><code>CEIL() / CEILING()</code></td><td>Yuqoriga yaxlitlash</td><td><code>CEIL(3.2)</code></td><td>4</td></tr>
<tr><td><code>FLOOR()</code></td><td>Pastga yaxlitlash</td><td><code>FLOOR(3.9)</code></td><td>3</td></tr>
<tr><td><code>TRUNCATE()</code></td><td>Kesib tashlash</td><td><code>TRUNCATE(3.756, 1)</code></td><td>3.7</td></tr>
<tr><td><code>ABS()</code></td><td>Absolyut qiymat</td><td><code>ABS(-15)</code></td><td>15</td></tr>
<tr><td><code>MOD()</code></td><td>Qoldiq</td><td><code>MOD(10, 3)</code></td><td>1</td></tr>
<tr><td><code>POWER()</code></td><td>Daraja</td><td><code>POWER(2, 3)</code></td><td>8</td></tr>
<tr><td><code>SQRT()</code></td><td>Kvadrat ildiz</td><td><code>SQRT(16)</code></td><td>4</td></tr>
<tr><td><code>RAND()</code></td><td>Tasodifiy son (0-1)</td><td><code>RAND()</code></td><td>0.7281...</td></tr>
<tr><td><code>FORMAT()</code></td><td>Raqamni formatlash</td><td><code>FORMAT(1234567, 0)</code></td><td>1,234,567</td></tr>
</tbody>
</table>

<h3 style="margin-top:35px;">üìÖ Sana va Vaqt funksiyalari</h3>
<table>
<thead><tr><th>Funksiya</th><th>Tavsif</th><th>Misol</th><th>Natija</th></tr></thead>
<tbody>
<tr><td><code>NOW()</code></td><td>Joriy sana va vaqt</td><td><code>NOW()</code></td><td>2024-06-15 14:30:00</td></tr>
<tr><td><code>CURDATE()</code></td><td>Joriy sana</td><td><code>CURDATE()</code></td><td>2024-06-15</td></tr>
<tr><td><code>CURTIME()</code></td><td>Joriy vaqt</td><td><code>CURTIME()</code></td><td>14:30:00</td></tr>
<tr><td><code>YEAR() / MONTH() / DAY()</code></td><td>Yil / Oy / Kun ajratish</td><td><code>YEAR('2024-06-15')</code></td><td>2024</td></tr>
<tr><td><code>DATE_FORMAT()</code></td><td>Sanani formatlash</td><td><code>DATE_FORMAT(NOW(), '%d.%m.%Y')</code></td><td>15.06.2024</td></tr>
<tr><td><code>DATEDIFF()</code></td><td>Kunlar farqi</td><td><code>DATEDIFF('2024-12-31', '2024-01-01')</code></td><td>365</td></tr>
<tr><td><code>DATE_ADD()</code></td><td>Sanaga qo'shish</td><td><code>DATE_ADD('2024-01-01', INTERVAL 3 MONTH)</code></td><td>2024-04-01</td></tr>
<tr><td><code>DATE_SUB()</code></td><td>Sanadan ayirish</td><td><code>DATE_SUB('2024-06-15', INTERVAL 7 DAY)</code></td><td>2024-06-08</td></tr>
<tr><td><code>TIMESTAMPDIFF()</code></td><td>Vaqt farqi (birlikda)</td><td><code>TIMESTAMPDIFF(YEAR, '2000-05-10', NOW())</code></td><td>24</td></tr>
<tr><td><code>DAYNAME()</code></td><td>Hafta kuni nomi</td><td><code>DAYNAME('2024-06-15')</code></td><td>Saturday</td></tr>
<tr><td><code>LAST_DAY()</code></td><td>Oyning oxirgi kuni</td><td><code>LAST_DAY('2024-02-01')</code></td><td>2024-02-29</td></tr>
</tbody>
</table>

<h3 style="margin-top:35px;">üîÄ Boshqaruv (Control Flow) funksiyalari</h3>
<table>
<thead><tr><th>Funksiya</th><th>Tavsif</th><th>Misol</th></tr></thead>
<tbody>
<tr><td><code>IF()</code></td><td>Shart bo'yicha qiymat</td><td><code>IF(maosh > 8000000, 'Yuqori', 'Past')</code></td></tr>
<tr><td><code>IFNULL()</code></td><td>NULL o'rniga qiymat</td><td><code>IFNULL(bolim_id, 'Tayinlanmagan')</code></td></tr>
<tr><td><code>NULLIF()</code></td><td>Teng bo'lsa NULL</td><td><code>NULLIF(a, b)</code> ‚Äî agar a=b bo'lsa NULL</td></tr>
<tr><td><code>COALESCE()</code></td><td>Birinchi NULL bo'lmagan</td><td><code>COALESCE(tel, email, 'Ma'lumot yo'q')</code></td></tr>
<tr><td><code>CASE WHEN</code></td><td>Ko'p shartli tanlash</td><td><code>CASE WHEN maosh > 10M THEN 'A' ... END</code></td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- ===== AMALIY QISM ===== -->
<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<!-- BOSQICH 1 -->
<div class="card">
<h3><span class="step-number">1</span>Ma'lumotlar bazasini tayyorlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Bazani tayyorlash</div></div>
<pre><code><span class="sql-comment">-- Ma'lumotlar bazasini yaratish</span>
<span class="sql-keyword">CREATE DATABASE IF NOT EXISTS</span> funksiyalar_db;
<span class="sql-keyword">USE</span> funksiyalar_db;

<span class="sql-comment">-- Xodimlar jadvali</span>
<span class="sql-keyword">CREATE TABLE</span> xodimlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    email <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    telefon <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">20</span>),
    bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    lavozim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    ishga_kirgan <span class="sql-keyword">DATE</span>,
    tugulgan_sana <span class="sql-keyword">DATE</span>,
    shahar <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    izoh <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">200</span>)
);

<span class="sql-comment">-- Buyurtmalar jadvali</span>
<span class="sql-keyword">CREATE TABLE</span> buyurtmalar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    xodim_id <span class="sql-keyword">INT</span>,
    mijoz_nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    mahsulot <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    miqdor <span class="sql-keyword">INT</span>,
    narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    chegirma <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">5</span>,<span class="sql-number">2</span>) <span class="sql-keyword">DEFAULT</span> <span class="sql-number">0</span>,
    buyurtma_sana <span class="sql-keyword">DATETIME</span>,
    yetkazish_sana <span class="sql-keyword">DATE</span>,
    holat <span class="sql-keyword">ENUM</span>(<span class="sql-string">'yangi'</span>, <span class="sql-string">'jarayonda'</span>, <span class="sql-string">'yetkazildi'</span>, <span class="sql-string">'bekor'</span>),
    <span class="sql-keyword">FOREIGN KEY</span> (xodim_id) <span class="sql-keyword">REFERENCES</span> xodimlar(id)
);

<span class="sql-comment">-- Ma'lumotlarni kiritish: Xodimlar</span>
<span class="sql-keyword">INSERT INTO</span> xodimlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>,  <span class="sql-string">'Alisher'</span>,   <span class="sql-string">'Karimov'</span>,    <span class="sql-string">'alisher@kompaniya.uz'</span>,   <span class="sql-string">'+998901234567'</span>, <span class="sql-string">'IT'</span>,        <span class="sql-string">'Senior dasturchi'</span>,  <span class="sql-number">12500000</span>, <span class="sql-string">'2020-03-15'</span>, <span class="sql-string">'1995-08-22'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'Python va Java bo\'yicha tajribali'</span>),
(<span class="sql-number">2</span>,  <span class="sql-string">'Dilnoza'</span>,   <span class="sql-string">'Rahimova'</span>,   <span class="sql-string">'dilnoza@kompaniya.uz'</span>,   <span class="sql-string">'+998931112233'</span>, <span class="sql-string">'IT'</span>,        <span class="sql-string">'Junior dasturchi'</span>,  <span class="sql-number">6200000</span>,  <span class="sql-string">'2023-01-10'</span>, <span class="sql-string">'2000-12-05'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-keyword">NULL</span>),
(<span class="sql-number">3</span>,  <span class="sql-string">'Bobur'</span>,     <span class="sql-string">'Toshmatov'</span>,  <span class="sql-string">'bobur@kompaniya.uz'</span>,     <span class="sql-string">'+998944445566'</span>, <span class="sql-string">'IT'</span>,        <span class="sql-string">'DevOps muhandis'</span>,   <span class="sql-number">10800000</span>, <span class="sql-string">'2021-06-20'</span>, <span class="sql-string">'1993-04-17'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-string">'AWS va Docker mutaxassisi'</span>),
(<span class="sql-number">4</span>,  <span class="sql-string">'Gulnora'</span>,   <span class="sql-string">'Azimova'</span>,    <span class="sql-string">'gulnora@kompaniya.uz'</span>,   <span class="sql-string">'+998977778899'</span>, <span class="sql-string">'Moliya'</span>,    <span class="sql-string">'Bosh hisobchi'</span>,     <span class="sql-number">9800000</span>,  <span class="sql-string">'2019-09-01'</span>, <span class="sql-string">'1988-11-30'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'10 yillik tajriba'</span>),
(<span class="sql-number">5</span>,  <span class="sql-string">'Sanjar'</span>,    <span class="sql-string">'Alimov'</span>,     <span class="sql-string">'SANJAR@KOMPANIYA.UZ'</span>,   <span class="sql-string">'+998901001020'</span>, <span class="sql-string">'Moliya'</span>,    <span class="sql-string">'Hisobchi'</span>,          <span class="sql-number">7100000</span>,  <span class="sql-string">'2022-04-12'</span>, <span class="sql-string">'1997-07-08'</span>, <span class="sql-string">'Buxoro'</span>,     <span class="sql-keyword">NULL</span>),
(<span class="sql-number">6</span>,  <span class="sql-string">'Nodira'</span>,    <span class="sql-string">'Yusupova'</span>,   <span class="sql-string">'nodira@kompaniya.uz'</span>,    <span class="sql-keyword">NULL</span>,             <span class="sql-string">'Marketing'</span>, <span class="sql-string">'Marketing menejer'</span>, <span class="sql-number">8700000</span>,  <span class="sql-string">'2021-11-05'</span>, <span class="sql-string">'1994-02-14'</span>, <span class="sql-string">'Namangan'</span>,   <span class="sql-string">'SMM va SEO bo\'yicha sertifikat'</span>),
(<span class="sql-number">7</span>,  <span class="sql-string">'Otabek'</span>,    <span class="sql-string">'Nazarov'</span>,    <span class="sql-string">'otabek@kompaniya.uz'</span>,    <span class="sql-string">'+998955556677'</span>, <span class="sql-string">'Marketing'</span>, <span class="sql-string">'SMM mutaxassis'</span>,    <span class="sql-number">5500000</span>,  <span class="sql-string">'2023-07-18'</span>, <span class="sql-string">'2001-09-25'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-keyword">NULL</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Kamola'</span>,    <span class="sql-string">'Umarova'</span>,    <span class="sql-string">'kamola@kompaniya.uz'</span>,    <span class="sql-string">'+998903334455'</span>, <span class="sql-string">'HR'</span>,        <span class="sql-string">'HR menejer'</span>,        <span class="sql-number">8200000</span>,  <span class="sql-string">'2020-08-22'</span>, <span class="sql-string">'1992-06-10'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'Xalqaro HR sertifikati bor'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Jasur'</span>,     <span class="sql-string">'Ergashev'</span>,   <span class="sql-string">'jasur@kompaniya.uz'</span>,     <span class="sql-string">'+998911122233'</span>, <span class="sql-keyword">NULL</span>,        <span class="sql-string">'Stajyor'</span>,           <span class="sql-number">2500000</span>,  <span class="sql-string">'2024-01-15'</span>, <span class="sql-string">'2003-03-28'</span>, <span class="sql-string">'Andijon'</span>,    <span class="sql-keyword">NULL</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Malika'</span>,    <span class="sql-string">'Tursunova'</span>,  <span class="sql-keyword">NULL</span>,                       <span class="sql-string">'+998998887766'</span>, <span class="sql-keyword">NULL</span>,        <span class="sql-string">'Amaliyotchi'</span>,        <span class="sql-number">2000000</span>,  <span class="sql-string">'2024-02-01'</span>, <span class="sql-string">'2004-01-12'</span>, <span class="sql-string">'Fargona'</span>,    <span class="sql-keyword">NULL</span>);

<span class="sql-comment">-- Ma'lumotlarni kiritish: Buyurtmalar</span>
<span class="sql-keyword">INSERT INTO</span> buyurtmalar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>,  <span class="sql-number">1</span>, <span class="sql-string">'Texno Market LLC'</span>,     <span class="sql-string">'Server Dell PowerEdge'</span>,    <span class="sql-number">2</span>,  <span class="sql-number">45000000</span>,  <span class="sql-number">5.00</span>,  <span class="sql-string">'2024-01-15 09:30:00'</span>, <span class="sql-string">'2024-01-22'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">2</span>,  <span class="sql-number">1</span>, <span class="sql-string">'Digital Solutions'</span>,    <span class="sql-string">'Monitor Samsung 27"'</span>,      <span class="sql-number">10</span>, <span class="sql-number">4500000</span>,   <span class="sql-number">10.00</span>, <span class="sql-string">'2024-02-20 14:15:00'</span>, <span class="sql-string">'2024-02-25'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">3</span>,  <span class="sql-number">3</span>, <span class="sql-string">'SmartTech Group'</span>,      <span class="sql-string">'Noutbuk HP EliteBook'</span>,     <span class="sql-number">5</span>,  <span class="sql-number">18000000</span>,  <span class="sql-number">7.50</span>,  <span class="sql-string">'2024-03-10 11:00:00'</span>, <span class="sql-string">'2024-03-17'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">4</span>,  <span class="sql-number">4</span>, <span class="sql-string">'BizHub Partners'</span>,      <span class="sql-string">'Printer HP LaserJet'</span>,      <span class="sql-number">3</span>,  <span class="sql-number">8500000</span>,   <span class="sql-number">0.00</span>,  <span class="sql-string">'2024-03-25 16:45:00'</span>, <span class="sql-string">'2024-04-01'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">5</span>,  <span class="sql-number">6</span>, <span class="sql-string">'MediaPlus Agency'</span>,     <span class="sql-string">'Reklama banneri'</span>,          <span class="sql-number">20</span>, <span class="sql-number">1200000</span>,   <span class="sql-number">15.00</span>, <span class="sql-string">'2024-04-05 10:20:00'</span>, <span class="sql-string">'2024-04-10'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">6</span>,  <span class="sql-number">1</span>, <span class="sql-string">'CloudNet Services'</span>,    <span class="sql-string">'SSD Samsung 1TB'</span>,          <span class="sql-number">15</span>, <span class="sql-number">2800000</span>,   <span class="sql-number">12.00</span>, <span class="sql-string">'2024-05-12 13:30:00'</span>, <span class="sql-string">'2024-05-18'</span>, <span class="sql-string">'jarayonda'</span>),
(<span class="sql-number">7</span>,  <span class="sql-number">5</span>, <span class="sql-string">'GreenTrade Co'</span>,        <span class="sql-string">'Ofis mebeli to\'plami'</span>,    <span class="sql-number">1</span>,  <span class="sql-number">35000000</span>,  <span class="sql-number">0.00</span>,  <span class="sql-string">'2024-05-20 09:00:00'</span>, <span class="sql-string">'2024-06-01'</span>, <span class="sql-string">'jarayonda'</span>),
(<span class="sql-number">8</span>,  <span class="sql-number">7</span>, <span class="sql-string">'FreshAds Studio'</span>,      <span class="sql-string">'Video reklama xizmati'</span>,    <span class="sql-number">1</span>,  <span class="sql-number">25000000</span>,  <span class="sql-number">5.00</span>,  <span class="sql-string">'2024-06-01 15:00:00'</span>, <span class="sql-keyword">NULL</span>,         <span class="sql-string">'yangi'</span>),
(<span class="sql-number">9</span>,  <span class="sql-number">3</span>, <span class="sql-string">'DataPro Systems'</span>,      <span class="sql-string">'Router Cisco'</span>,             <span class="sql-number">8</span>,  <span class="sql-number">12000000</span>,  <span class="sql-number">8.00</span>,  <span class="sql-string">'2024-06-10 10:45:00'</span>, <span class="sql-string">'2024-06-20'</span>, <span class="sql-string">'yangi'</span>),
(<span class="sql-number">10</span>, <span class="sql-number">6</span>, <span class="sql-string">'BrandWave LLC'</span>,        <span class="sql-string">'Brending paketi'</span>,          <span class="sql-number">1</span>,  <span class="sql-number">50000000</span>,  <span class="sql-number">3.00</span>,  <span class="sql-string">'2024-06-15 11:30:00'</span>, <span class="sql-string">'2024-07-15'</span>, <span class="sql-string">'yangi'</span>),
(<span class="sql-number">11</span>, <span class="sql-number">4</span>, <span class="sql-string">'FinExpert Group'</span>,      <span class="sql-string">'Buxgalteriya dasturi'</span>,     <span class="sql-number">1</span>,  <span class="sql-number">15000000</span>,  <span class="sql-number">0.00</span>,  <span class="sql-string">'2024-04-20 08:30:00'</span>, <span class="sql-string">'2024-04-25'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">12</span>, <span class="sql-number">8</span>, <span class="sql-string">'HR Solutions Intl'</span>,    <span class="sql-string">'HR platformasi litsenziya'</span>,<span class="sql-number">1</span>,  <span class="sql-number">20000000</span>,  <span class="sql-number">10.00</span>, <span class="sql-string">'2024-05-01 12:00:00'</span>, <span class="sql-string">'2024-05-10'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">13</span>, <span class="sql-number">1</span>, <span class="sql-string">'Texno Market LLC'</span>,     <span class="sql-string">'Klaviatura Logitech'</span>,      <span class="sql-number">25</span>, <span class="sql-number">850000</span>,    <span class="sql-number">20.00</span>, <span class="sql-string">'2024-01-20 10:00:00'</span>, <span class="sql-string">'2024-01-25'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">14</span>, <span class="sql-number">2</span>, <span class="sql-string">'StartUp Hub'</span>,          <span class="sql-string">'Web sayt ishlab chiqish'</span>,  <span class="sql-number">1</span>,  <span class="sql-number">30000000</span>,  <span class="sql-number">0.00</span>,  <span class="sql-string">'2024-06-20 09:15:00'</span>, <span class="sql-keyword">NULL</span>,         <span class="sql-string">'bekor'</span>),
(<span class="sql-number">15</span>, <span class="sql-number">3</span>, <span class="sql-string">'NexGen Technologies'</span>,  <span class="sql-string">'UPS APC 3000VA'</span>,           <span class="sql-number">4</span>,  <span class="sql-number">7500000</span>,   <span class="sql-number">5.00</span>,  <span class="sql-string">'2024-02-14 14:00:00'</span>, <span class="sql-string">'2024-02-21'</span>, <span class="sql-string">'yetkazildi'</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE xodimlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE buyurtmalar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 10 rows affected (0.01 sec) ‚Äî <code>INSERT INTO xodimlar</code></span>
<span class="rok-line">Records: 10 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 15 rows affected (0.01 sec) ‚Äî <code>INSERT INTO buyurtmalar</code></span>
<span class="rok-line">Records: 15 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 2: SATR FUNKSIYALARI -->
<div class="card">
<h3><span class="step-number">2</span>Satr (String) funksiyalari bilan ishlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Satr funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 1. To'liq ism-familiya birlashtirish</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> toliq_ism,
    <span class="sql-function">UPPER</span>(familiya) <span class="sql-keyword">AS</span> familiya_katta,
    <span class="sql-function">LOWER</span>(email) <span class="sql-keyword">AS</span> email_kichik,
    <span class="sql-function">CHAR_LENGTH</span>(ism) <span class="sql-keyword">AS</span> ism_uzunligi
<span class="sql-keyword">FROM</span> xodimlar;</code></pre>
</div>

<span class="result-label">üìã Natija (qisqartirilgan)</span>
<table>
<thead><tr><th>toliq_ism</th><th>familiya_katta</th><th>email_kichik</th><th>ism_uzunligi</th></tr></thead>
<tbody>
<tr><td>Alisher Karimov</td><td>KARIMOV</td><td>alisher@kompaniya.uz</td><td>7</td></tr>
<tr><td>Sanjar Alimov</td><td>ALIMOV</td><td>sanjar@kompaniya.uz</td><td>6</td></tr>
<tr><td>Malika Tursunova</td><td>TURSUNOVA</td><td>NULL</td><td>6</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Satr funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 2. Email domenini ajratish</span>
<span class="sql-keyword">SELECT</span> 
    ism,
    email,
    <span class="sql-function">SUBSTRING</span>(email, <span class="sql-function">LOCATE</span>(<span class="sql-string">'@'</span>, email) + <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> domen,
    <span class="sql-function">LEFT</span>(email, <span class="sql-function">LOCATE</span>(<span class="sql-string">'@'</span>, email) - <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> foydalanuvchi
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> email <span class="sql-keyword">IS NOT NULL</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî Email domen ajratish (qisqartirilgan)</span>
<table>
<thead><tr><th>ism</th><th>email</th><th>domen</th><th>foydalanuvchi</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>alisher@kompaniya.uz</td><td>kompaniya.uz</td><td>alisher</td></tr>
<tr><td>Sanjar</td><td>SANJAR@KOMPANIYA.UZ</td><td>KOMPANIYA.UZ</td><td>SANJAR</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Satr funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 3. Telefon raqamni formatlash va maskali ko'rsatish</span>
<span class="sql-keyword">SELECT</span> 
    ism,
    telefon,
    <span class="sql-function">CONCAT</span>(
        <span class="sql-function">LEFT</span>(telefon, <span class="sql-number">4</span>), <span class="sql-string">' ** *** '</span>,
        <span class="sql-function">RIGHT</span>(telefon, <span class="sql-number">2</span>)
    ) <span class="sql-keyword">AS</span> maskali_telefon,
    <span class="sql-function">REPLACE</span>(telefon, <span class="sql-string">'+998'</span>, <span class="sql-string">'8'</span>) <span class="sql-keyword">AS</span> mahalliy_format
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> telefon <span class="sql-keyword">IS NOT NULL</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî Telefon formatlash (qisqartirilgan)</span>
<table>
<thead><tr><th>ism</th><th>telefon</th><th>maskali_telefon</th><th>mahalliy_format</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>+998901234567</td><td>+998 ** *** 67</td><td>8901234567</td></tr>
<tr><td>Bobur</td><td>+998944445566</td><td>+998 ** *** 66</td><td>8944445566</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Satr funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 4. Xodim kodi generatsiya qilish</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(
        <span class="sql-function">UPPER</span>(<span class="sql-function">LEFT</span>(ism, <span class="sql-number">1</span>)),
        <span class="sql-function">UPPER</span>(<span class="sql-function">LEFT</span>(familiya, <span class="sql-number">3</span>)),
        <span class="sql-string">'-'</span>,
        <span class="sql-function">LPAD</span>(id, <span class="sql-number">4</span>, <span class="sql-string">'0'</span>)
    ) <span class="sql-keyword">AS</span> xodim_kodi,
    <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> toliq_ism
<span class="sql-keyword">FROM</span> xodimlar;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>xodim_kodi</th><th>toliq_ism</th></tr></thead>
<tbody>
<tr><td>AKAR-0001</td><td>Alisher Karimov</td></tr>
<tr><td>DRAH-0002</td><td>Dilnoza Rahimova</td></tr>
<tr><td>BTOS-0003</td><td>Bobur Toshmatov</td></tr>
<tr><td>GAZI-0004</td><td>Gulnora Azimova</td></tr>
<tr><td>SALI-0005</td><td>Sanjar Alimov</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Satr funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 5. Izoh maydonini tozalash va qisqartirish</span>
<span class="sql-keyword">SELECT</span> 
    ism,
    izoh,
    <span class="sql-function">IFNULL</span>(
        <span class="sql-function">CONCAT</span>(<span class="sql-function">LEFT</span>(<span class="sql-function">TRIM</span>(izoh), <span class="sql-number">20</span>), <span class="sql-string">'...'</span>),
        <span class="sql-string">'Ma\'lumot kiritilmagan'</span>
    ) <span class="sql-keyword">AS</span> qisqa_izoh
<span class="sql-keyword">FROM</span> xodimlar;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 3: SONLI FUNKSIYALAR -->
<div class="card">
<h3><span class="step-number">3</span>Sonli (Numeric) funksiyalar bilan ishlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Sonli funksiyalar</div></div>
<pre><code><span class="sql-comment">-- 1. Maosh hisoblashlari</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> xodim,
    <span class="sql-function">FORMAT</span>(maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(maosh * <span class="sql-number">0.12</span>, <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> soliq_12foiz,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(maosh * <span class="sql-number">0.88</span>, <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> qolga_tegadigan,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(maosh * <span class="sql-number">12</span>, <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> yillik_maosh
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">ORDER BY</span> maosh <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija (TOP 5)</span>
<table>
<thead><tr><th>xodim</th><th>maosh</th><th>soliq_12foiz</th><th>qolga_tegadigan</th><th>yillik_maosh</th></tr></thead>
<tbody>
<tr><td>Alisher Karimov</td><td>12,500,000</td><td>1,500,000</td><td>11,000,000</td><td>150,000,000</td></tr>
<tr><td>Bobur Toshmatov</td><td>10,800,000</td><td>1,296,000</td><td>9,504,000</td><td>129,600,000</td></tr>
<tr><td>Gulnora Azimova</td><td>9,800,000</td><td>1,176,000</td><td>8,624,000</td><td>117,600,000</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Sonli funksiyalar</div></div>
<pre><code><span class="sql-comment">-- 2. Buyurtma summalari</span>
<span class="sql-keyword">SELECT</span> 
    id,
    mahsulot,
    miqdor,
    <span class="sql-function">FORMAT</span>(narx, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> narx,
    <span class="sql-function">FORMAT</span>(miqdor * narx, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> umumiy_summa,
    <span class="sql-function">CONCAT</span>(chegirma, <span class="sql-string">'%'</span>) <span class="sql-keyword">AS</span> chegirma,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma/<span class="sql-number">100</span>), <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> chegirmali_summa,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(miqdor * narx * chegirma / <span class="sql-number">100</span>, <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> tejaldi
<span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> holat != <span class="sql-string">'bekor'</span>
<span class="sql-keyword">ORDER BY</span> miqdor * narx <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Sonli funksiyalar</div></div>
<pre><code><span class="sql-comment">-- 3. ROUND, CEIL, FLOOR, TRUNCATE farqi</span>
<span class="sql-keyword">SELECT</span> 
    mahsulot,
    narx / <span class="sql-number">1000000.0</span> <span class="sql-keyword">AS</span> mln_aniq,
    <span class="sql-function">ROUND</span>(narx / <span class="sql-number">1000000.0</span>, <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> mln_round,
    <span class="sql-function">CEIL</span>(narx / <span class="sql-number">1000000.0</span>) <span class="sql-keyword">AS</span> mln_ceil,
    <span class="sql-function">FLOOR</span>(narx / <span class="sql-number">1000000.0</span>) <span class="sql-keyword">AS</span> mln_floor,
    <span class="sql-function">TRUNCATE</span>(narx / <span class="sql-number">1000000.0</span>, <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> mln_truncate
<span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">LIMIT</span> <span class="sql-number">5</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Sonli funksiyalar</div></div>
<pre><code><span class="sql-comment">-- 4. Tasodifiy bonus tayinlash (1-5 mln oralig'ida)</span>
<span class="sql-keyword">SELECT</span> 
    ism,
    <span class="sql-function">FORMAT</span>(maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">FLOOR</span>(<span class="sql-function">RAND</span>() * <span class="sql-number">5000000</span>) + <span class="sql-number">1000000</span>, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> tasodifiy_bonus
<span class="sql-keyword">FROM</span> xodimlar;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 4: SANA FUNKSIYALARI -->
<div class="card">
<h3><span class="step-number">4</span>Sana va Vaqt funksiyalari bilan ishlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Sana funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 1. Xodimlar yoshi va ish staji</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> xodim,
    <span class="sql-function">DATE_FORMAT</span>(tugulgan_sana, <span class="sql-string">'%d.%m.%Y'</span>) <span class="sql-keyword">AS</span> tugilgan_sana,
    <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, tugulgan_sana, <span class="sql-function">CURDATE</span>()) <span class="sql-keyword">AS</span> yosh,
    <span class="sql-function">DATE_FORMAT</span>(ishga_kirgan, <span class="sql-string">'%d.%m.%Y'</span>) <span class="sql-keyword">AS</span> ishga_kirgan,
    <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, ishga_kirgan, <span class="sql-function">CURDATE</span>()) <span class="sql-keyword">AS</span> staj_yil,
    <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">MONTH</span>, ishga_kirgan, <span class="sql-function">CURDATE</span>()) <span class="sql-keyword">AS</span> staj_oy,
    <span class="sql-function">DATEDIFF</span>(<span class="sql-function">CURDATE</span>(), ishga_kirgan) <span class="sql-keyword">AS</span> staj_kun
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">ORDER BY</span> ishga_kirgan;</code></pre>
</div>

<span class="result-label">üìã Natija (qisqartirilgan)</span>
<table>
<thead><tr><th>xodim</th><th>tugilgan_sana</th><th>yosh</th><th>ishga_kirgan</th><th>staj_yil</th><th>staj_oy</th></tr></thead>
<tbody>
<tr><td>Gulnora Azimova</td><td>30.11.1988</td><td>35</td><td>01.09.2019</td><td>4</td><td>57</td></tr>
<tr><td>Alisher Karimov</td><td>22.08.1995</td><td>28</td><td>15.03.2020</td><td>4</td><td>51</td></tr>
<tr><td>Kamola Umarova</td><td>10.06.1992</td><td>32</td><td>22.08.2020</td><td>3</td><td>46</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Sana funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 2. Tug'ilgan kun yaqinlashayotgan xodimlar</span>
<span class="sql-keyword">SELECT</span> 
    ism,
    familiya,
    <span class="sql-function">DATE_FORMAT</span>(tugulgan_sana, <span class="sql-string">'%d %M'</span>) <span class="sql-keyword">AS</span> tugilgan_kun,
    <span class="sql-function">DATEDIFF</span>(
        <span class="sql-function">DATE_ADD</span>(tugulgan_sana, 
            <span class="sql-keyword">INTERVAL</span> <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, tugulgan_sana, <span class="sql-function">CURDATE</span>()) + 
            <span class="sql-keyword">IF</span>(<span class="sql-function">DAYOFYEAR</span>(tugulgan_sana) >= <span class="sql-function">DAYOFYEAR</span>(<span class="sql-function">CURDATE</span>()), <span class="sql-number">0</span>, <span class="sql-number">1</span>) <span class="sql-keyword">YEAR</span>),
        <span class="sql-function">CURDATE</span>()
    ) <span class="sql-keyword">AS</span> kunlar_qoldi
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">ORDER BY</span> kunlar_qoldi;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Sana funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 3. Buyurtmalar vaqt tahlili</span>
<span class="sql-keyword">SELECT</span> 
    id,
    mahsulot,
    <span class="sql-function">DATE_FORMAT</span>(buyurtma_sana, <span class="sql-string">'%d.%m.%Y'</span>) <span class="sql-keyword">AS</span> sana,
    <span class="sql-function">DATE_FORMAT</span>(buyurtma_sana, <span class="sql-string">'%H:%i'</span>) <span class="sql-keyword">AS</span> vaqt,
    <span class="sql-function">DAYNAME</span>(buyurtma_sana) <span class="sql-keyword">AS</span> hafta_kuni,
    <span class="sql-function">MONTHNAME</span>(buyurtma_sana) <span class="sql-keyword">AS</span> oy_nomi,
    <span class="sql-function">QUARTER</span>(buyurtma_sana) <span class="sql-keyword">AS</span> chorak
<span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">ORDER BY</span> buyurtma_sana;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Sana funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 4. Yetkazish muddati tahlili</span>
<span class="sql-keyword">SELECT</span> 
    mahsulot,
    holat,
    <span class="sql-function">DATE_FORMAT</span>(buyurtma_sana, <span class="sql-string">'%d.%m.%Y'</span>) <span class="sql-keyword">AS</span> buyurtma,
    <span class="sql-function">DATE_FORMAT</span>(yetkazish_sana, <span class="sql-string">'%d.%m.%Y'</span>) <span class="sql-keyword">AS</span> yetkazish,
    <span class="sql-function">DATEDIFF</span>(yetkazish_sana, <span class="sql-function">DATE</span>(buyurtma_sana)) <span class="sql-keyword">AS</span> yetkazish_kunlari,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">DATEDIFF</span>(yetkazish_sana, <span class="sql-function">DATE</span>(buyurtma_sana)) &lt;= <span class="sql-number">5</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚ö° Tez'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">DATEDIFF</span>(yetkazish_sana, <span class="sql-function">DATE</span>(buyurtma_sana)) &lt;= <span class="sql-number">10</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚úÖ Normal'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'üêå Sekin'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> tezlik
<span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> yetkazish_sana <span class="sql-keyword">IS NOT NULL</span>
<span class="sql-keyword">ORDER BY</span> yetkazish_kunlari <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Sana funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 5. Oylar bo'yicha buyurtmalar statistikasi</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">DATE_FORMAT</span>(buyurtma_sana, <span class="sql-string">'%Y-%m'</span>) <span class="sql-keyword">AS</span> oy,
    <span class="sql-function">MONTHNAME</span>(buyurtma_sana) <span class="sql-keyword">AS</span> oy_nomi,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> buyurtmalar_soni,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_summa
<span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> holat != <span class="sql-string">'bekor'</span>
<span class="sql-keyword">GROUP BY</span> <span class="sql-function">DATE_FORMAT</span>(buyurtma_sana, <span class="sql-string">'%Y-%m'</span>), <span class="sql-function">MONTHNAME</span>(buyurtma_sana)
<span class="sql-keyword">ORDER BY</span> oy;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 5: BOSHQARUV FUNKSIYALARI -->
<div class="card">
<h3><span class="step-number">5</span>Boshqaruv (Control Flow) funksiyalari</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Boshqaruv funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 1. IF() funksiyasi - maosh darajasi</span>
<span class="sql-keyword">SELECT</span> 
    ism,
    familiya,
    <span class="sql-function">FORMAT</span>(maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">IF</span>(maosh >= <span class="sql-number">8000000</span>, <span class="sql-string">'Yuqori'</span>, <span class="sql-string">'Past'</span>) <span class="sql-keyword">AS</span> daraja,
    <span class="sql-function">IF</span>(bolim <span class="sql-keyword">IS NULL</span>, <span class="sql-string">'‚ùå Tayinlanmagan'</span>, bolim) <span class="sql-keyword">AS</span> bolim
<span class="sql-keyword">FROM</span> xodimlar;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî IF() funksiyasi (qisqartirilgan)</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>maosh</th><th>daraja</th><th>bolim</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>12,500,000</td><td>Yuqori</td><td>IT</td></tr>
<tr><td>Dilnoza</td><td>Rahimova</td><td>6,200,000</td><td>Past</td><td>IT</td></tr>
<tr><td>Jasur</td><td>Ergashev</td><td>2,500,000</td><td>Past</td><td>‚ùå Tayinlanmagan</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Boshqaruv funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 2. CASE WHEN ‚Äî ko'p bosqichli tasniflash</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> xodim,
    <span class="sql-function">FORMAT</span>(maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> maosh >= <span class="sql-number">10000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•á A daraja (Premium)'</span>
        <span class="sql-keyword">WHEN</span> maosh >= <span class="sql-number">7000000</span>  <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•à B daraja (Yuqori)'</span>
        <span class="sql-keyword">WHEN</span> maosh >= <span class="sql-number">4000000</span>  <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•â C daraja (O\'rta)'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'üìå D daraja (Boshlang\'ich)'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> maosh_darajasi,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, ishga_kirgan, <span class="sql-function">CURDATE</span>()) >= <span class="sql-number">4</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'Tajribali'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, ishga_kirgan, <span class="sql-function">CURDATE</span>()) >= <span class="sql-number">2</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'O\'rta'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, ishga_kirgan, <span class="sql-function">CURDATE</span>()) >= <span class="sql-number">1</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'Yangi'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'Stajyor'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> tajriba_darajasi
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">ORDER BY</span> maosh <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>xodim</th><th>maosh</th><th>maosh_darajasi</th><th>tajriba_darajasi</th></tr></thead>
<tbody>
<tr><td>Alisher Karimov</td><td>12,500,000</td><td>ü•á A daraja (Premium)</td><td>Tajribali</td></tr>
<tr><td>Bobur Toshmatov</td><td>10,800,000</td><td>ü•á A daraja (Premium)</td><td>O'rta</td></tr>
<tr><td>Gulnora Azimova</td><td>9,800,000</td><td>ü•à B daraja (Yuqori)</td><td>Tajribali</td></tr>
<tr><td>Nodira Yusupova</td><td>8,700,000</td><td>ü•à B daraja (Yuqori)</td><td>O'rta</td></tr>
<tr><td>Kamola Umarova</td><td>8,200,000</td><td>ü•à B daraja (Yuqori)</td><td>Tajribali</td></tr>
<tr><td>Sanjar Alimov</td><td>7,100,000</td><td>ü•à B daraja (Yuqori)</td><td>O'rta</td></tr>
<tr><td>Dilnoza Rahimova</td><td>6,200,000</td><td>ü•â C daraja (O'rta)</td><td>Yangi</td></tr>
<tr><td>Otabek Nazarov</td><td>5,500,000</td><td>ü•â C daraja (O'rta)</td><td>Yangi</td></tr>
<tr><td>Jasur Ergashev</td><td>2,500,000</td><td>üìå D daraja (Boshlang'ich)</td><td>Stajyor</td></tr>
<tr><td>Malika Tursunova</td><td>2,000,000</td><td>üìå D daraja (Boshlang'ich)</td><td>Stajyor</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Boshqaruv funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 3. COALESCE ‚Äî birinchi NULL bo'lmagan qiymat</span>
<span class="sql-keyword">SELECT</span> 
    ism,
    <span class="sql-function">COALESCE</span>(email, telefon, <span class="sql-string">'Aloqa ma\'lumoti yo\'q'</span>) <span class="sql-keyword">AS</span> aloqa,
    <span class="sql-function">COALESCE</span>(bolim, <span class="sql-string">'Bo\'limga tayinlanmagan'</span>) <span class="sql-keyword">AS</span> bolim,
    <span class="sql-function">COALESCE</span>(izoh, <span class="sql-string">'Izoh kiritilmagan'</span>) <span class="sql-keyword">AS</span> izoh
<span class="sql-keyword">FROM</span> xodimlar;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Boshqaruv funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 4. Buyurtma holati bo'yicha rang va tavsif</span>
<span class="sql-keyword">SELECT</span> 
    id,
    mahsulot,
    holat,
    <span class="sql-keyword">CASE</span> holat
        <span class="sql-keyword">WHEN</span> <span class="sql-string">'yangi'</span>       <span class="sql-keyword">THEN</span> <span class="sql-string">'üîµ Yangi ‚Äî kutilmoqda'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-string">'jarayonda'</span>   <span class="sql-keyword">THEN</span> <span class="sql-string">'üü° Jarayonda ‚Äî tayyorlanmoqda'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-string">'yetkazildi'</span>  <span class="sql-keyword">THEN</span> <span class="sql-string">'üü¢ Yetkazildi ‚Äî yakunlangan'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-string">'bekor'</span>       <span class="sql-keyword">THEN</span> <span class="sql-string">'üî¥ Bekor qilingan'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> holat_tavsifi,
    <span class="sql-function">FORMAT</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma/<span class="sql-number">100</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> summa
<span class="sql-keyword">FROM</span> buyurtmalar;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 6: FUNKSIYALARNI BIRLASHTIRISH -->
<div class="card">
<h3><span class="step-number">6</span>Funksiyalarni birgalikda ishlatish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Kombinatsiya</div></div>
<pre><code><span class="sql-comment">-- 1. Xodimning to'liq profili (barcha funksiya turlari birgalikda)</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-comment">-- Satr funksiyalari</span>
    <span class="sql-function">CONCAT</span>(<span class="sql-function">UPPER</span>(<span class="sql-function">LEFT</span>(ism, <span class="sql-number">1</span>)), <span class="sql-function">LOWER</span>(<span class="sql-function">SUBSTRING</span>(ism, <span class="sql-number">2</span>))) <span class="sql-keyword">AS</span> ism,
    <span class="sql-function">UPPER</span>(familiya) <span class="sql-keyword">AS</span> familiya,
    
    <span class="sql-comment">-- Sana funksiyalari</span>
    <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, tugulgan_sana, <span class="sql-function">CURDATE</span>()) <span class="sql-keyword">AS</span> yosh,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, ishga_kirgan, <span class="sql-function">CURDATE</span>()), <span class="sql-string">' yil '</span>,
           <span class="sql-function">MOD</span>(<span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">MONTH</span>, ishga_kirgan, <span class="sql-function">CURDATE</span>()), <span class="sql-number">12</span>), <span class="sql-string">' oy'</span>) <span class="sql-keyword">AS</span> ish_staji,
    
    <span class="sql-comment">-- Sonli funksiyalar</span>
    <span class="sql-function">FORMAT</span>(maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(maosh * <span class="sql-number">0.88</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_maosh,
    
    <span class="sql-comment">-- Boshqaruv funksiyalari</span>
    <span class="sql-function">COALESCE</span>(bolim, <span class="sql-string">'Tayinlanmagan'</span>) <span class="sql-keyword">AS</span> bolim,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> maosh >= <span class="sql-number">10000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•á'</span>
        <span class="sql-keyword">WHEN</span> maosh >= <span class="sql-number">7000000</span>  <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•à'</span>
        <span class="sql-keyword">WHEN</span> maosh >= <span class="sql-number">4000000</span>  <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•â'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'üìå'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> reyting
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">ORDER BY</span> maosh <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Kombinatsiya</div></div>
<pre><code><span class="sql-comment">-- 2. Buyurtma batafsil hisoboti (JOIN + funksiyalar)</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">LPAD</span>(b.id, <span class="sql-number">5</span>, <span class="sql-string">'0'</span>) <span class="sql-keyword">AS</span> buyurtma_raqam,
    b.mijoz_nomi,
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, <span class="sql-function">LEFT</span>(x.familiya, <span class="sql-number">1</span>), <span class="sql-string">'.'</span>) <span class="sql-keyword">AS</span> mas_ul_xodim,
    <span class="sql-function">LEFT</span>(b.mahsulot, <span class="sql-number">25</span>) <span class="sql-keyword">AS</span> mahsulot,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(b.miqdor * b.narx * (<span class="sql-number">1</span> - b.chegirma/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> summa,
    <span class="sql-function">DATE_FORMAT</span>(b.buyurtma_sana, <span class="sql-string">'%d.%m.%Y %H:%i'</span>) <span class="sql-keyword">AS</span> sana,
    <span class="sql-function">IFNULL</span>(
        <span class="sql-function">CONCAT</span>(<span class="sql-function">DATEDIFF</span>(b.yetkazish_sana, <span class="sql-function">DATE</span>(b.buyurtma_sana)), <span class="sql-string">' kun'</span>),
        <span class="sql-string">'Belgilanmagan'</span>
    ) <span class="sql-keyword">AS</span> muddat,
    <span class="sql-keyword">CASE</span> b.holat
        <span class="sql-keyword">WHEN</span> <span class="sql-string">'yetkazildi'</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üü¢'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-string">'jarayonda'</span>  <span class="sql-keyword">THEN</span> <span class="sql-string">'üü°'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-string">'yangi'</span>      <span class="sql-keyword">THEN</span> <span class="sql-string">'üîµ'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-string">'bekor'</span>      <span class="sql-keyword">THEN</span> <span class="sql-string">'üî¥'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> holat
<span class="sql-keyword">FROM</span> buyurtmalar b
<span class="sql-keyword">INNER JOIN</span> xodimlar x <span class="sql-keyword">ON</span> b.xodim_id = x.id
<span class="sql-keyword">ORDER BY</span> b.buyurtma_sana <span class="sql-keyword">DESC</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 7: AGREGAT + FUNKSIYALAR -->
<div class="card">
<h3><span class="step-number">7</span>Agregat funksiyalar bilan kombinatsiyalar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Agregat + funksiyalar</div></div>
<pre><code><span class="sql-comment">-- 1. Bo'limlar bo'yicha batafsil statistika</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">COALESCE</span>(bolim, <span class="sql-string">'TAYINLANMAGAN'</span>) <span class="sql-keyword">AS</span> bolim,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> xodimlar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(maosh)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MAX</span>(maosh), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> max_maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MIN</span>(maosh), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> min_maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MAX</span>(maosh) - <span class="sql-function">MIN</span>(maosh), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> farq,
    <span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(<span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, tugulgan_sana, <span class="sql-function">CURDATE</span>())), <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> ort_yosh,
    <span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(<span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">MONTH</span>, ishga_kirgan, <span class="sql-function">CURDATE</span>())), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_staj_oy
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">GROUP BY</span> bolim
<span class="sql-keyword">ORDER BY</span> xodimlar <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Agregat + funksiyalar</div></div>
<pre><code><span class="sql-comment">-- 2. Xodimlar bo'yicha buyurtmalar tahlili</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> xodim,
    x.bolim,
    <span class="sql-function">COUNT</span>(b.id) <span class="sql-keyword">AS</span> buyurtmalar_soni,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(b.miqdor * b.narx * (<span class="sql-number">1</span> - b.chegirma/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_summa,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(b.miqdor * b.narx * (<span class="sql-number">1</span> - b.chegirma/<span class="sql-number">100</span>))), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_summa,
    <span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(b.chegirma), <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> ort_chegirma,
    <span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> b.holat = <span class="sql-string">'yetkazildi'</span> <span class="sql-keyword">THEN</span> <span class="sql-number">1</span> <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>) <span class="sql-keyword">AS</span> yakunlangan,
    <span class="sql-function">CONCAT</span>(
        <span class="sql-function">ROUND</span>(
            <span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> b.holat = <span class="sql-string">'yetkazildi'</span> <span class="sql-keyword">THEN</span> <span class="sql-number">1</span> <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>) * <span class="sql-number">100.0</span> / <span class="sql-function">COUNT</span>(*), <span class="sql-number">0</span>
        ), <span class="sql-string">'%'</span>
    ) <span class="sql-keyword">AS</span> muvaffaqiyat
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">INNER JOIN</span> buyurtmalar b <span class="sql-keyword">ON</span> x.id = b.xodim_id
<span class="sql-keyword">GROUP BY</span> x.id, x.ism, x.familiya, x.bolim
<span class="sql-keyword">ORDER BY</span> jami_summa <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Agregat + funksiyalar</div></div>
<pre><code><span class="sql-comment">-- 3. Choraklar bo'yicha sotuv tendensiyasi</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(<span class="sql-function">YEAR</span>(buyurtma_sana), <span class="sql-string">'-Q'</span>, <span class="sql-function">QUARTER</span>(buyurtma_sana)) <span class="sql-keyword">AS</span> chorak,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> buyurtmalar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_sotuv,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * chegirma / <span class="sql-number">100</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_chegirma,
    <span class="sql-function">GROUP_CONCAT</span>(<span class="sql-keyword">DISTINCT</span> holat <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>) <span class="sql-keyword">AS</span> holatlar
<span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> holat != <span class="sql-string">'bekor'</span>
<span class="sql-keyword">GROUP BY</span> <span class="sql-function">YEAR</span>(buyurtma_sana), <span class="sql-function">QUARTER</span>(buyurtma_sana)
<span class="sql-keyword">ORDER BY</span> chorak;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 8: MURAKKAB AMALIY MISOLLAR -->
<div class="card">
<h3><span class="step-number">8</span>Murakkab amaliy misollar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 1. Xodimlar reytingi ‚Äî barcha funksiyalar birgalikda</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">LPAD</span>(<span class="sql-keyword">@rownum</span> := <span class="sql-keyword">@rownum</span> + <span class="sql-number">1</span>, <span class="sql-number">2</span>, <span class="sql-string">'0'</span>) <span class="sql-keyword">AS</span> o_rin,
    <span class="sql-function">CONCAT</span>(
        <span class="sql-function">UPPER</span>(<span class="sql-function">LEFT</span>(x.ism, <span class="sql-number">1</span>)), <span class="sql-function">LOWER</span>(<span class="sql-function">SUBSTRING</span>(x.ism, <span class="sql-number">2</span>)), <span class="sql-string">' '</span>, <span class="sql-function">UPPER</span>(x.familiya)
    ) <span class="sql-keyword">AS</span> xodim,
    <span class="sql-function">COALESCE</span>(x.bolim, <span class="sql-string">'‚Äî'</span>) <span class="sql-keyword">AS</span> bolim,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, x.tugulgan_sana, <span class="sql-function">CURDATE</span>()), <span class="sql-string">' yosh'</span>) <span class="sql-keyword">AS</span> yosh,
    <span class="sql-function">FORMAT</span>(x.maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">IFNULL</span>(<span class="sql-function">COUNT</span>(b.id), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> buyurtmalar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(b.miqdor * b.narx * (<span class="sql-number">1</span> - b.chegirma/<span class="sql-number">100</span>)), <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_sotuv,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(b.miqdor * b.narx), <span class="sql-number">0</span>) > <span class="sql-number">100000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚≠ê‚≠ê‚≠ê'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(b.miqdor * b.narx), <span class="sql-number">0</span>) > <span class="sql-number">30000000</span>  <span class="sql-keyword">THEN</span> <span class="sql-string">'‚≠ê‚≠ê'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(b.miqdor * b.narx), <span class="sql-number">0</span>) > <span class="sql-number">0</span>         <span class="sql-keyword">THEN</span> <span class="sql-string">'‚≠ê'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'‚Äî'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> reyting
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">LEFT JOIN</span> buyurtmalar b <span class="sql-keyword">ON</span> x.id = b.xodim_id <span class="sql-keyword">AND</span> b.holat != <span class="sql-string">'bekor'</span>,
(<span class="sql-keyword">SELECT</span> <span class="sql-keyword">@rownum</span> := <span class="sql-number">0</span>) r
<span class="sql-keyword">GROUP BY</span> x.id, x.ism, x.familiya, x.bolim, x.maosh, x.tugulgan_sana
<span class="sql-keyword">ORDER BY</span> <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(b.miqdor * b.narx), <span class="sql-number">0</span>) <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 2. Oylik hisobot ‚Äî pivot uslubida</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, <span class="sql-function">LEFT</span>(x.familiya, <span class="sql-number">1</span>), <span class="sql-string">'.'</span>) <span class="sql-keyword">AS</span> xodim,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> <span class="sql-function">MONTH</span>(b.buyurtma_sana) = <span class="sql-number">1</span> <span class="sql-keyword">THEN</span> b.miqdor * b.narx <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> Yanvar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> <span class="sql-function">MONTH</span>(b.buyurtma_sana) = <span class="sql-number">2</span> <span class="sql-keyword">THEN</span> b.miqdor * b.narx <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> Fevral,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> <span class="sql-function">MONTH</span>(b.buyurtma_sana) = <span class="sql-number">3</span> <span class="sql-keyword">THEN</span> b.miqdor * b.narx <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> Mart,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> <span class="sql-function">MONTH</span>(b.buyurtma_sana) = <span class="sql-number">4</span> <span class="sql-keyword">THEN</span> b.miqdor * b.narx <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> Aprel,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> <span class="sql-function">MONTH</span>(b.buyurtma_sana) = <span class="sql-number">5</span> <span class="sql-keyword">THEN</span> b.miqdor * b.narx <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> May,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> <span class="sql-function">MONTH</span>(b.buyurtma_sana) = <span class="sql-number">6</span> <span class="sql-keyword">THEN</span> b.miqdor * b.narx <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> Iyun,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(b.miqdor * b.narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> JAMI
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">INNER JOIN</span> buyurtmalar b <span class="sql-keyword">ON</span> x.id = b.xodim_id
<span class="sql-keyword">WHERE</span> b.holat != <span class="sql-string">'bekor'</span>
<span class="sql-keyword">GROUP BY</span> x.id, x.ism, x.familiya
<span class="sql-keyword">ORDER BY</span> <span class="sql-function">SUM</span>(b.miqdor * b.narx) <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 3. Dinamik sana hisobotlari</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(<span class="sql-string">'Bugun: '</span>, <span class="sql-function">DATE_FORMAT</span>(<span class="sql-function">NOW</span>(), <span class="sql-string">'%d.%m.%Y %H:%i'</span>)) <span class="sql-keyword">AS</span> joriy_vaqt,
    <span class="sql-function">CONCAT</span>(<span class="sql-string">'Hafta kuni: '</span>, <span class="sql-function">DAYNAME</span>(<span class="sql-function">NOW</span>())) <span class="sql-keyword">AS</span> hafta_kuni,
    <span class="sql-function">CONCAT</span>(<span class="sql-string">'Oy oxiri: '</span>, <span class="sql-function">DATE_FORMAT</span>(<span class="sql-function">LAST_DAY</span>(<span class="sql-function">NOW</span>()), <span class="sql-string">'%d.%m.%Y'</span>)) <span class="sql-keyword">AS</span> oy_oxiri,
    <span class="sql-function">CONCAT</span>(<span class="sql-string">'Yil oxirigacha: '</span>, <span class="sql-function">DATEDIFF</span>(<span class="sql-function">CONCAT</span>(<span class="sql-function">YEAR</span>(<span class="sql-function">NOW</span>()), <span class="sql-string">'-12-31'</span>), <span class="sql-function">NOW</span>()), <span class="sql-string">' kun'</span>) <span class="sql-keyword">AS</span> yil_qoldi;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- FUNKSIYALAR QIYOSIY JADVALI -->
<h2><span class="icon">üìä</span>Funksiyalar toifalari ‚Äî qisqacha xulosa</h2>
<div class="card-flat">
<table>
<thead><tr><th>Toifa</th><th>Maqsad</th><th>Eng ko'p ishlatiluvchilar</th><th>Ishlash</th></tr></thead>
<tbody>
<tr><td><strong>üî§ Satr</strong></td><td>Matnni qayta ishlash</td><td>CONCAT, UPPER, LOWER, SUBSTRING, TRIM, REPLACE</td><td>Har bir qator uchun</td></tr>
<tr><td><strong>üî¢ Sonli</strong></td><td>Raqamlarni hisoblash</td><td>ROUND, CEIL, FLOOR, FORMAT, ABS, MOD</td><td>Har bir qator uchun</td></tr>
<tr><td><strong>üìÖ Sana</strong></td><td>Vaqtni boshqarish</td><td>NOW, DATE_FORMAT, DATEDIFF, TIMESTAMPDIFF, DATE_ADD</td><td>Har bir qator uchun</td></tr>
<tr><td><strong>üîÄ Boshqaruv</strong></td><td>Shartli mantiq</td><td>IF, CASE WHEN, IFNULL, COALESCE, NULLIF</td><td>Har bir qator uchun</td></tr>
<tr><td><strong>üìä Agregat</strong></td><td>Guruhlarni hisoblash</td><td>COUNT, SUM, AVG, MIN, MAX, GROUP_CONCAT</td><td>Guruh uchun</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- NAZORAT SAVOLLARI -->
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card">
<ol>
<li><code>CONCAT()</code> va <code>CONCAT_WS()</code> orasidagi farq nimada?</li>
<li><code>LENGTH()</code> va <code>CHAR_LENGTH()</code> qachon farqli natija beradi?</li>
<li><code>ROUND()</code>, <code>CEIL()</code>, <code>FLOOR()</code> va <code>TRUNCATE()</code> orasidagi farqni tushuntiring.</li>
<li><code>NOW()</code>, <code>CURDATE()</code>, <code>CURTIME()</code> nimalarni qaytaradi?</li>
<li><code>DATEDIFF()</code> va <code>TIMESTAMPDIFF()</code> orasidagi farq nimada?</li>
<li><code>IF()</code> va <code>CASE WHEN</code> qachon ishlatiladi? Farqi nimada?</li>
<li><code>IFNULL()</code>, <code>COALESCE()</code> va <code>NULLIF()</code> farqlarini tushuntiring.</li>
<li>Skalyar funksiya va agregat funksiya orasidagi asosiy farq nimada?</li>
</ol>
</div>

<!-- AMALIY TOPSHIRIQLAR -->
<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>
<div class="card">
<ol>
<li>Barcha xodimlarning <strong>to'liq ismini katta harflarda</strong> va <strong>emailini kichik harflarda</strong> ko'rsating</li>
<li>Har bir xodim uchun <strong>unikal kod</strong> yarating: familiyaning 3 harfi + yil (<code>KAR-2020</code>)</li>
<li>Xodimlarning <strong>yoshi</strong> va <strong>ish stajini</strong> (yil va oylarda) hisoblang</li>
<li>Buyurtmalarning <strong>chegirmali summasi</strong>ni hisoblang va <strong>FORMAT</strong> bilan chiroyli ko'rsating</li>
<li>Har bir buyurtmaning <strong>yetkazish muddatini</strong> hisoblang va tezligini baholang (Tez/Normal/Sekin)</li>
<li>Xodimlarni maoshi bo'yicha <strong>4 darajaga</strong> ajrating (<code>CASE WHEN</code> bilan)</li>
<li><strong>Oylik sotuv hisoboti</strong> tuzing ‚Äî har bir xodimning oylardagi sotuvlarini ko'rsating (Pivot)</li>
<li><strong>üí´ Bonus:</strong> Barcha funksiya turlarini birgalikda ishlatib, <strong>to'liq xodim profili + sotuv statistikasi</strong> hisobotini yarating</li>
</ol>
</div>

<!-- HISOBOT SHABLONI -->
<h2><span class="icon">üìù</span>Hisobot shabloni</h2>
<table>
<thead><tr><th>Bo'lim</th><th>Tavsif</th></tr></thead>
<tbody>
<tr><td><strong>Ishdan maqsad</strong></td><td>SQL standart funksiyalarni amaliyotda qo'llashni o'rganish</td></tr>
<tr><td><strong>Satr funksiyalari</strong></td><td>CONCAT, UPPER, LOWER, SUBSTRING va boshqalar bilan so'rovlar</td></tr>
<tr><td><strong>Sonli funksiyalar</strong></td><td>ROUND, FORMAT, ABS, MOD va boshqalar bilan hisoblashlar</td></tr>
<tr><td><strong>Sana funksiyalari</strong></td><td>NOW, DATEDIFF, DATE_FORMAT, TIMESTAMPDIFF va boshqalar</td></tr>
<tr><td><strong>Boshqaruv funksiyalari</strong></td><td>IF, CASE WHEN, COALESCE, IFNULL bilan shartli so'rovlar</td></tr>
<tr><td><strong>Murakkab so'rovlar</strong></td><td>Barcha funksiya turlari + JOIN + GROUP BY kombinatsiyasi</td></tr>
<tr><td><strong>Xulosa</strong></td><td>O'rganilgan funksiyalar va ularning amaliy qo'llanilishi</td></tr>
</tbody>
</table>

<div class="luxury-divider"></div>

<!-- XULOSA -->
<div class="card">
<h2><span class="icon">üèÜ</span>Xulosa</h2>
<p>Ushbu amaliy mashg'ulotni yakunlagan talaba quyidagi ko'nikmalarga ega bo'ladi:</p>
<ul>
<li><strong>Satr funksiyalari:</strong> <code>CONCAT</code>, <code>UPPER</code>, <code>LOWER</code>, <code>SUBSTRING</code>, <code>TRIM</code>, <code>REPLACE</code>, <code>LPAD</code>, <code>LOCATE</code> bilan matnni qayta ishlash</li>
<li><strong>Sonli funksiyalar:</strong> <code>ROUND</code>, <code>CEIL</code>, <code>FLOOR</code>, <code>FORMAT</code>, <code>ABS</code>, <code>MOD</code>, <code>RAND</code> bilan raqamli hisob-kitob</li>
<li><strong>Sana funksiyalari:</strong> <code>NOW</code>, <code>DATE_FORMAT</code>, <code>DATEDIFF</code>, <code>TIMESTAMPDIFF</code>, <code>DATE_ADD</code> bilan vaqtni boshqarish</li>
<li><strong>Boshqaruv funksiyalari:</strong> <code>IF</code>, <code>CASE WHEN</code>, <code>IFNULL</code>, <code>COALESCE</code> bilan shartli mantiq</li>
<li>Funksiyalarni <strong>JOIN</strong>, <strong>GROUP BY</strong> va <strong>agregat funksiyalar</strong> bilan birgalikda qo'llash</li>
<li>Professional darajadagi <strong>murakkab hisobotlar</strong> yaratish (Pivot, reyting, profil)</li>
<li><code>NULL</code> qiymatlarni to'g'ri boshqarish va <strong>xavfsiz so'rovlar</strong> yozish</li>
</ul>
</div>
</div>
</div>

<!-- ===== TUTORIAL 10 ===== -->
<div class="section-block" id="t10">
<div class="container">
<h1>10-amaliy mashg'ulot</h1>
<p class="subtitle">Agregat funksiyalardan foydalanish</p>
<div class="gold-line"></div>

<div class="meta-info">
    <strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp;
    <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp;
    <strong>üéØ Daraja:</strong> O'rta-yuqori
</div>

<!-- ===== NAZARIY QISM ===== -->
<h2><span class="icon">üìñ</span>Nazariy qism</h2>

<div class="card">
<h3><span class="icon">üìä</span>Agregat funksiyalar nima?</h3>
<p><strong>Agregat funksiyalar</strong> ‚Äî bu bir guruh qatorlar ustida hisoblash bajarib, bitta natija qiymat qaytaruvchi maxsus SQL funksiyalaridir. Ular oddiy (skalyar) funksiyalardan farqli ravishda, ko'plab qatorlarni bitta qiymatga "yig'adi".</p>

<div class="theory-box">
<p><strong>üí° Asosiy tamoyil:</strong> Skalyar funksiya har bir qator uchun alohida natija beradi, agregat funksiya esa butun jadval yoki guruhlangan qatorlar to'plami uchun bitta natija beradi.</p>
</div>

<div class="func-grid">
    <div class="func-card">
        <h4>COUNT()</h4>
        <p>Qatorlar sonini hisoblaydi</p>
    </div>
    <div class="func-card">
        <h4>SUM()</h4>
        <p>Qiymatlar yig'indisi</p>
    </div>
    <div class="func-card">
        <h4>AVG()</h4>
        <p>O'rtacha qiymat</p>
    </div>
    <div class="func-card">
        <h4>MIN()</h4>
        <p>Eng kichik qiymat</p>
    </div>
    <div class="func-card">
        <h4>MAX()</h4>
        <p>Eng katta qiymat</p>
    </div>
    <div class="func-card">
        <h4>GROUP_CONCAT()</h4>
        <p>Qiymatlarni birlashtiradi</p>
    </div>
</div>
</div>

<div class="card">
<h3><span class="icon">üìê</span>Agregat funksiyalar ‚Äî batafsil</h3>

<table>
<thead><tr><th>Funksiya</th><th>Sintaksis</th><th>Tavsif</th><th>NULL bilan</th></tr></thead>
<tbody>
<tr><td><code>COUNT(*)</code></td><td><code>COUNT(*)</code></td><td>Barcha qatorlar soni (NULL ham)</td><td>Hisobga oladi</td></tr>
<tr><td><code>COUNT(ustun)</code></td><td><code>COUNT(ustun)</code></td><td>NULL bo'lmagan qatorlar soni</td><td>E'tiborsiz qoldiradi</td></tr>
<tr><td><code>COUNT(DISTINCT)</code></td><td><code>COUNT(DISTINCT ustun)</code></td><td>Unikal qiymatlar soni</td><td>E'tiborsiz qoldiradi</td></tr>
<tr><td><code>SUM()</code></td><td><code>SUM(ustun)</code></td><td>Sonli qiymatlar yig'indisi</td><td>E'tiborsiz qoldiradi</td></tr>
<tr><td><code>AVG()</code></td><td><code>AVG(ustun)</code></td><td>O'rtacha arifmetik qiymat</td><td>E'tiborsiz qoldiradi</td></tr>
<tr><td><code>MIN()</code></td><td><code>MIN(ustun)</code></td><td>Eng kichik qiymat</td><td>E'tiborsiz qoldiradi</td></tr>
<tr><td><code>MAX()</code></td><td><code>MAX(ustun)</code></td><td>Eng katta qiymat</td><td>E'tiborsiz qoldiradi</td></tr>
<tr><td><code>GROUP_CONCAT()</code></td><td><code>GROUP_CONCAT(ustun SEPARATOR ',')</code></td><td>Qiymatlarni satr sifatida birlashtiradi</td><td>E'tiborsiz qoldiradi</td></tr>
<tr><td><code>STD() / STDDEV()</code></td><td><code>STD(ustun)</code></td><td>Standart og'ish (dispersiya ildizi)</td><td>E'tiborsiz qoldiradi</td></tr>
<tr><td><code>VARIANCE()</code></td><td><code>VARIANCE(ustun)</code></td><td>Dispersiya</td><td>E'tiborsiz qoldiradi</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="icon">üîÑ</span>SQL so'rov bajarilish tartibi (agregat kontekstida)</h3>

<div class="flow-diagram">
    <div class="flow-step">‚ë† FROM</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-step">‚ë° WHERE</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-step">‚ë¢ GROUP BY</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-step">‚ë£ Agregat funksiyalar</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-step">‚ë§ HAVING</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-step">‚ë• SELECT</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-step">‚ë¶ ORDER BY</div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-step">‚ëß LIMIT</div>
</div>

<div class="warning-box">
<p><strong>‚ö†Ô∏è Muhim qoidalar:</strong></p>
<ul>
<li><code>WHERE</code> ichida agregat funksiya ishlatish <strong>MUMKIN EMAS</strong> ‚Äî faqat <code>HAVING</code> da</li>
<li><code>GROUP BY</code> ishlatilganda <code>SELECT</code> da faqat guruhlangan ustunlar yoki agregat funksiyalar bo'lishi kerak</li>
<li>Barcha agregat funksiyalar (faqat <code>COUNT(*)</code> bundan mustasno) <code>NULL</code> qiymatlarni <strong>e'tiborsiz qoldiradi</strong></li>
</ul>
</div>
</div>

<div class="card">
<h3><span class="icon">‚öñÔ∏è</span>WHERE va HAVING farqi</h3>

<table>
<thead><tr><th>Xususiyat</th><th>WHERE</th><th>HAVING</th></tr></thead>
<tbody>
<tr><td><strong>Qachon ishlaydi</strong></td><td>GROUP BY dan <strong>oldin</strong></td><td>GROUP BY dan <strong>keyin</strong></td></tr>
<tr><td><strong>Nima filtrlaydi</strong></td><td>Alohida <strong>qatorlarni</strong></td><td><strong>Guruhlarni</strong></td></tr>
<tr><td><strong>Agregat funksiya</strong></td><td>‚ùå Ishlatib bo'lmaydi</td><td>‚úÖ Ishlatish mumkin</td></tr>
<tr><td><strong>Ishlash tezligi</strong></td><td>‚ö° Tezroq (oldin filtrlaydi)</td><td>üîÑ Sekinroq (keyin filtrlaydi)</td></tr>
<tr><td><strong>Misol</strong></td><td><code>WHERE maosh > 5000000</code></td><td><code>HAVING AVG(maosh) > 5000000</code></td></tr>
</tbody>
</table>

<div class="tip-box">
<p><strong>üí° Qoida:</strong> Imkon qadar filtrlashni <code>WHERE</code> da bajaring ‚Äî bu samaradorlikni oshiradi. <code>HAVING</code> ni faqat agregat funksiya natijalarini filtrlash uchun ishlating.</p>
</div>
</div>

<div class="luxury-divider"></div>

<!-- ===== AMALIY QISM ===== -->
<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<!-- BOSQICH 1 -->
<div class="card">
<h3><span class="step-number">1</span>Ma'lumotlar bazasini tayyorlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Bazani tayyorlash</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE IF NOT EXISTS</span> agregat_db;
<span class="sql-keyword">USE</span> agregat_db;

<span class="sql-comment">-- Mahsulotlar jadvali</span>
<span class="sql-keyword">CREATE TABLE</span> mahsulotlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>) <span class="sql-keyword">NOT NULL</span>,
    kategoriya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    tan_narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    qoldiq <span class="sql-keyword">INT DEFAULT</span> <span class="sql-number">0</span>,
    yetkazuvchi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    qoshilgan_sana <span class="sql-keyword">DATE</span>
);

<span class="sql-comment">-- Sotuvlar jadvali</span>
<span class="sql-keyword">CREATE TABLE</span> sotuvlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    mahsulot_id <span class="sql-keyword">INT</span>,
    sotuvchi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    mijoz_nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    miqdor <span class="sql-keyword">INT</span>,
    narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    chegirma_foiz <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">5</span>,<span class="sql-number">2</span>) <span class="sql-keyword">DEFAULT</span> <span class="sql-number">0</span>,
    sotuv_sana <span class="sql-keyword">DATE</span>,
    sotuv_vaqti <span class="sql-keyword">TIME</span>,
    shahar <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    tolov_turi <span class="sql-keyword">ENUM</span>(<span class="sql-string">'naqd'</span>, <span class="sql-string">'karta'</span>, <span class="sql-string">'nasiya'</span>, <span class="sql-string">'online'</span>),
    <span class="sql-keyword">FOREIGN KEY</span> (mahsulot_id) <span class="sql-keyword">REFERENCES</span> mahsulotlar(id)
);

<span class="sql-comment">-- Mahsulotlar ma'lumotlari</span>
<span class="sql-keyword">INSERT INTO</span> mahsulotlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>,  <span class="sql-string">'Noutbuk HP EliteBook'</span>,      <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">18000000</span>, <span class="sql-number">14500000</span>, <span class="sql-number">25</span>,  <span class="sql-string">'TechImport LLC'</span>,    <span class="sql-string">'2024-01-10'</span>),
(<span class="sql-number">2</span>,  <span class="sql-string">'Monitor Samsung 27"'</span>,        <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">4500000</span>,  <span class="sql-number">3200000</span>,  <span class="sql-number">40</span>,  <span class="sql-string">'DigiWorld'</span>,         <span class="sql-string">'2024-01-15'</span>),
(<span class="sql-number">3</span>,  <span class="sql-string">'Klaviatura Logitech MX'</span>,     <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">1200000</span>,  <span class="sql-number">750000</span>,   <span class="sql-number">100</span>, <span class="sql-string">'DigiWorld'</span>,         <span class="sql-string">'2024-01-20'</span>),
(<span class="sql-number">4</span>,  <span class="sql-string">'Sichqoncha Razer'</span>,           <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">850000</span>,   <span class="sql-number">500000</span>,   <span class="sql-number">80</span>,  <span class="sql-string">'GameZone'</span>,          <span class="sql-string">'2024-02-01'</span>),
(<span class="sql-number">5</span>,  <span class="sql-string">'Printer HP LaserJet'</span>,        <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">8500000</span>,  <span class="sql-number">6800000</span>,  <span class="sql-number">15</span>,  <span class="sql-string">'TechImport LLC'</span>,    <span class="sql-string">'2024-02-05'</span>),
(<span class="sql-number">6</span>,  <span class="sql-string">'Server Dell PowerEdge'</span>,      <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">45000000</span>, <span class="sql-number">38000000</span>, <span class="sql-number">5</span>,   <span class="sql-string">'TechImport LLC'</span>,    <span class="sql-string">'2024-02-10'</span>),
(<span class="sql-number">7</span>,  <span class="sql-string">'SSD Samsung 1TB'</span>,            <span class="sql-string">'Komponentlar'</span>, <span class="sql-number">2800000</span>,  <span class="sql-number">2100000</span>,  <span class="sql-number">60</span>,  <span class="sql-string">'DigiWorld'</span>,         <span class="sql-string">'2024-02-15'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Router Cisco'</span>,              <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">12000000</span>, <span class="sql-number">9500000</span>,  <span class="sql-number">12</span>,  <span class="sql-string">'NetPro'</span>,            <span class="sql-string">'2024-03-01'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'UPS APC 3000VA'</span>,             <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">7500000</span>,  <span class="sql-number">5800000</span>,  <span class="sql-number">18</span>,  <span class="sql-string">'NetPro'</span>,            <span class="sql-string">'2024-03-05'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Quloqchin Sony WH-1000'</span>,     <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">3500000</span>,  <span class="sql-number">2600000</span>,  <span class="sql-number">35</span>,  <span class="sql-string">'GameZone'</span>,          <span class="sql-string">'2024-03-10'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Kabel Cat6 (100m)'</span>,          <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">350000</span>,   <span class="sql-number">180000</span>,   <span class="sql-number">200</span>, <span class="sql-string">'NetPro'</span>,            <span class="sql-string">'2024-03-15'</span>),
(<span class="sql-number">12</span>, <span class="sql-string">'Webcam Logitech C920'</span>,       <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">1500000</span>,  <span class="sql-number">950000</span>,   <span class="sql-number">45</span>,  <span class="sql-string">'DigiWorld'</span>,         <span class="sql-string">'2024-03-20'</span>);

<span class="sql-comment">-- Sotuvlar ma'lumotlari (30 ta yozuv)</span>
<span class="sql-keyword">INSERT INTO</span> sotuvlar (mahsulot_id, sotuvchi, mijoz_nomi, miqdor, narx, chegirma_foiz, sotuv_sana, sotuv_vaqti, shahar, tolov_turi) <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>,  <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'Texno Market'</span>,       <span class="sql-number">2</span>,  <span class="sql-number">18000000</span>, <span class="sql-number">5</span>,    <span class="sql-string">'2024-01-15'</span>, <span class="sql-string">'09:30:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'karta'</span>),
(<span class="sql-number">2</span>,  <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'Digital Solutions'</span>,  <span class="sql-number">10</span>, <span class="sql-number">4500000</span>,  <span class="sql-number">10</span>,   <span class="sql-string">'2024-01-20'</span>, <span class="sql-string">'14:15:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'naqd'</span>),
(<span class="sql-number">3</span>,  <span class="sql-string">'Bobur'</span>,    <span class="sql-string">'SmartTech Group'</span>,    <span class="sql-number">15</span>, <span class="sql-number">1200000</span>,  <span class="sql-number">8</span>,    <span class="sql-string">'2024-01-25'</span>, <span class="sql-string">'11:00:00'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-string">'karta'</span>),
(<span class="sql-number">6</span>,  <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'CloudNet Services'</span>,  <span class="sql-number">1</span>,  <span class="sql-number">45000000</span>, <span class="sql-number">3</span>,    <span class="sql-string">'2024-02-05'</span>, <span class="sql-string">'10:00:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'online'</span>),
(<span class="sql-number">5</span>,  <span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'BizHub Partners'</span>,    <span class="sql-number">3</span>,  <span class="sql-number">8500000</span>,  <span class="sql-number">0</span>,    <span class="sql-string">'2024-02-10'</span>, <span class="sql-string">'16:45:00'</span>, <span class="sql-string">'Buxoro'</span>,     <span class="sql-string">'nasiya'</span>),
(<span class="sql-number">4</span>,  <span class="sql-string">'Bobur'</span>,    <span class="sql-string">'GameWorld'</span>,          <span class="sql-number">20</span>, <span class="sql-number">850000</span>,   <span class="sql-number">12</span>,   <span class="sql-string">'2024-02-14'</span>, <span class="sql-string">'13:20:00'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-string">'naqd'</span>),
(<span class="sql-number">7</span>,  <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'DataPro Systems'</span>,    <span class="sql-number">8</span>,  <span class="sql-number">2800000</span>,  <span class="sql-number">7</span>,    <span class="sql-string">'2024-02-20'</span>, <span class="sql-string">'09:45:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'karta'</span>),
(<span class="sql-number">1</span>,  <span class="sql-string">'Nodira'</span>,   <span class="sql-string">'EduTech Academy'</span>,    <span class="sql-number">5</span>,  <span class="sql-number">18000000</span>, <span class="sql-number">15</span>,   <span class="sql-string">'2024-02-25'</span>, <span class="sql-string">'11:30:00'</span>, <span class="sql-string">'Namangan'</span>,   <span class="sql-string">'online'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Bobur'</span>,    <span class="sql-string">'NetCom Group'</span>,       <span class="sql-number">4</span>,  <span class="sql-number">12000000</span>, <span class="sql-number">5</span>,    <span class="sql-string">'2024-03-01'</span>, <span class="sql-string">'15:00:00'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-string">'karta'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'AudioPlus'</span>,          <span class="sql-number">10</span>, <span class="sql-number">3500000</span>,  <span class="sql-number">10</span>,   <span class="sql-string">'2024-03-05'</span>, <span class="sql-string">'12:10:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'naqd'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Sanjar'</span>,   <span class="sql-string">'BuildNet'</span>,           <span class="sql-number">50</span>, <span class="sql-number">350000</span>,   <span class="sql-number">0</span>,    <span class="sql-string">'2024-03-10'</span>, <span class="sql-string">'08:30:00'</span>, <span class="sql-string">'Fargona'</span>,    <span class="sql-string">'naqd'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Nodira'</span>,   <span class="sql-string">'PowerSafe Co'</span>,       <span class="sql-number">3</span>,  <span class="sql-number">7500000</span>,  <span class="sql-number">5</span>,    <span class="sql-string">'2024-03-12'</span>, <span class="sql-string">'14:00:00'</span>, <span class="sql-string">'Namangan'</span>,   <span class="sql-string">'nasiya'</span>),
(<span class="sql-number">2</span>,  <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'OfficeMax'</span>,          <span class="sql-number">6</span>,  <span class="sql-number">4500000</span>,  <span class="sql-number">8</span>,    <span class="sql-string">'2024-03-18'</span>, <span class="sql-string">'10:20:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'online'</span>),
(<span class="sql-number">3</span>,  <span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'CompStore'</span>,          <span class="sql-number">25</span>, <span class="sql-number">1200000</span>,  <span class="sql-number">15</span>,   <span class="sql-string">'2024-03-22'</span>, <span class="sql-string">'16:00:00'</span>, <span class="sql-string">'Buxoro'</span>,     <span class="sql-string">'karta'</span>),
(<span class="sql-number">12</span>, <span class="sql-string">'Sanjar'</span>,   <span class="sql-string">'VideoConf Ltd'</span>,      <span class="sql-number">8</span>,  <span class="sql-number">1500000</span>,  <span class="sql-number">5</span>,    <span class="sql-string">'2024-03-25'</span>, <span class="sql-string">'09:15:00'</span>, <span class="sql-string">'Andijon'</span>,    <span class="sql-string">'naqd'</span>),
(<span class="sql-number">6</span>,  <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'MegaHost'</span>,           <span class="sql-number">2</span>,  <span class="sql-number">45000000</span>, <span class="sql-number">7</span>,    <span class="sql-string">'2024-04-02'</span>, <span class="sql-string">'11:00:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'karta'</span>),
(<span class="sql-number">1</span>,  <span class="sql-string">'Bobur'</span>,    <span class="sql-string">'IT Academy'</span>,         <span class="sql-number">3</span>,  <span class="sql-number">18000000</span>, <span class="sql-number">10</span>,   <span class="sql-string">'2024-04-08'</span>, <span class="sql-string">'14:30:00'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-string">'online'</span>),
(<span class="sql-number">4</span>,  <span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'GamerShop'</span>,          <span class="sql-number">30</span>, <span class="sql-number">850000</span>,   <span class="sql-number">18</span>,   <span class="sql-string">'2024-04-12'</span>, <span class="sql-string">'15:45:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'naqd'</span>),
(<span class="sql-number">7</span>,  <span class="sql-string">'Sanjar'</span>,   <span class="sql-string">'UpgradePC'</span>,          <span class="sql-number">12</span>, <span class="sql-number">2800000</span>,  <span class="sql-number">5</span>,    <span class="sql-string">'2024-04-15'</span>, <span class="sql-string">'10:30:00'</span>, <span class="sql-string">'Fargona'</span>,    <span class="sql-string">'karta'</span>),
(<span class="sql-number">5</span>,  <span class="sql-string">'Nodira'</span>,   <span class="sql-string">'PrintHouse'</span>,         <span class="sql-number">2</span>,  <span class="sql-number">8500000</span>,  <span class="sql-number">0</span>,    <span class="sql-string">'2024-04-20'</span>, <span class="sql-string">'13:00:00'</span>, <span class="sql-string">'Namangan'</span>,   <span class="sql-string">'naqd'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Bobur'</span>,    <span class="sql-string">'MusicLand'</span>,          <span class="sql-number">7</span>,  <span class="sql-number">3500000</span>,  <span class="sql-number">12</span>,   <span class="sql-string">'2024-04-25'</span>, <span class="sql-string">'11:40:00'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-string">'online'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'ServerPark'</span>,         <span class="sql-number">6</span>,  <span class="sql-number">12000000</span>, <span class="sql-number">8</span>,    <span class="sql-string">'2024-05-03'</span>, <span class="sql-string">'09:00:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'online'</span>),
(<span class="sql-number">2</span>,  <span class="sql-string">'Nodira'</span>,   <span class="sql-string">'SmartOffice'</span>,        <span class="sql-number">15</span>, <span class="sql-number">4500000</span>,  <span class="sql-number">12</span>,   <span class="sql-string">'2024-05-10'</span>, <span class="sql-string">'15:20:00'</span>, <span class="sql-string">'Namangan'</span>,   <span class="sql-string">'karta'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Sanjar'</span>,   <span class="sql-string">'SafeEnergy'</span>,         <span class="sql-number">5</span>,  <span class="sql-number">7500000</span>,  <span class="sql-number">3</span>,    <span class="sql-string">'2024-05-15'</span>, <span class="sql-string">'12:30:00'</span>, <span class="sql-string">'Andijon'</span>,    <span class="sql-string">'nasiya'</span>),
(<span class="sql-number">3</span>,  <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'KeyMaster'</span>,          <span class="sql-number">40</span>, <span class="sql-number">1200000</span>,  <span class="sql-number">20</span>,   <span class="sql-string">'2024-05-20'</span>, <span class="sql-string">'10:45:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'naqd'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Bobur'</span>,    <span class="sql-string">'NetBuilder'</span>,         <span class="sql-number">100</span>,<span class="sql-number">350000</span>,   <span class="sql-number">10</span>,   <span class="sql-string">'2024-05-25'</span>, <span class="sql-string">'08:00:00'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-string">'karta'</span>),
(<span class="sql-number">12</span>, <span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'StreamPro'</span>,          <span class="sql-number">5</span>,  <span class="sql-number">1500000</span>,  <span class="sql-number">0</span>,    <span class="sql-string">'2024-05-28'</span>, <span class="sql-string">'14:10:00'</span>, <span class="sql-string">'Buxoro'</span>,     <span class="sql-string">'online'</span>),
(<span class="sql-number">6</span>,  <span class="sql-string">'Bobur'</span>,    <span class="sql-string">'BigData Corp'</span>,       <span class="sql-number">1</span>,  <span class="sql-number">45000000</span>, <span class="sql-number">5</span>,    <span class="sql-string">'2024-06-01'</span>, <span class="sql-string">'10:15:00'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-string">'online'</span>),
(<span class="sql-number">1</span>,  <span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'CodeFactory'</span>,        <span class="sql-number">4</span>,  <span class="sql-number">18000000</span>, <span class="sql-number">12</span>,   <span class="sql-string">'2024-06-05'</span>, <span class="sql-string">'16:30:00'</span>, <span class="sql-string">'Toshkent'</span>,   <span class="sql-string">'karta'</span>),
(<span class="sql-number">4</span>,  <span class="sql-string">'Sanjar'</span>,   <span class="sql-string">'TechStore'</span>,          <span class="sql-number">15</span>, <span class="sql-number">850000</span>,   <span class="sql-number">10</span>,   <span class="sql-string">'2024-06-10'</span>, <span class="sql-string">'11:20:00'</span>, <span class="sql-string">'Fargona'</span>,    <span class="sql-string">'naqd'</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE mahsulotlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE sotuvlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 12 rows affected (0.01 sec) ‚Äî <code>INSERT INTO mahsulotlar</code></span>
<span class="rok-line">Records: 12 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 30 rows affected (0.01 sec) ‚Äî <code>INSERT INTO sotuvlar</code></span>
<span class="rok-line">Records: 30 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 2: ASOSIY AGREGAT FUNKSIYALAR -->
<div class="card">
<h3><span class="step-number">2</span>Asosiy agregat funksiyalar ‚Äî COUNT, SUM, AVG, MIN, MAX</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî COUNT, SUM, AVG</div></div>
<pre><code><span class="sql-comment">-- 1. Umumiy statistika (butun jadval bo'yicha)</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> jami_sotuvlar,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> sotuvchi) <span class="sql-keyword">AS</span> sotuvchilar_soni,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> mijoz_nomi) <span class="sql-keyword">AS</span> mijozlar_soni,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> mahsulot_id) <span class="sql-keyword">AS</span> mahsulotlar_soni,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> shahar) <span class="sql-keyword">AS</span> shaharlar_soni,
    <span class="sql-function">SUM</span>(miqdor) <span class="sql-keyword">AS</span> jami_miqdor
<span class="sql-keyword">FROM</span> sotuvlar;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>jami_sotuvlar</th><th>sotuvchilar_soni</th><th>mijozlar_soni</th><th>mahsulotlar_soni</th><th>shaharlar_soni</th><th>jami_miqdor</th></tr></thead>
<tbody>
<tr class="highlight-row"><td>30</td><td>5</td><td>30</td><td>12</td><td>6</td><td>401</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî COUNT, SUM, AVG</div></div>
<pre><code><span class="sql-comment">-- 2. Moliyaviy umumiy ko'rsatkichlar</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> umumiy_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * chegirma_foiz / <span class="sql-number">100</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_chegirmalar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(miqdor * narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_sotuv_summasi,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MAX</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> eng_katta_sotuv,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MIN</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> eng_kichik_sotuv
<span class="sql-keyword">FROM</span> sotuvlar;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>umumiy_tushum</th><th>jami_chegirmalar</th><th>sof_tushum</th><th>ort_sotuv_summasi</th><th>eng_katta_sotuv</th><th>eng_kichik_sotuv</th></tr></thead>
<tbody>
<tr class="highlight-row"><td>803,550,000</td><td>68,672,500</td><td>734,877,500</td><td>26,785,000</td><td>90,000,000</td><td>7,500,000</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî COUNT, SUM, AVG</div></div>
<pre><code><span class="sql-comment">-- 3. COUNT turlari orasidagi farq</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> barcha_qatorlar,
    <span class="sql-function">COUNT</span>(chegirma_foiz) <span class="sql-keyword">AS</span> chegirmali,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> sotuvchi) <span class="sql-keyword">AS</span> unikal_sotuvchilar,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> tolov_turi) <span class="sql-keyword">AS</span> tolov_turlari,
    <span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> chegirma_foiz > <span class="sql-number">0</span> <span class="sql-keyword">THEN</span> <span class="sql-number">1</span> <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>) <span class="sql-keyword">AS</span> chegirmali_sotuvlar,
    <span class="sql-function">SUM</span>(<span class="sql-keyword">CASE</span> <span class="sql-keyword">WHEN</span> chegirma_foiz = <span class="sql-number">0</span> <span class="sql-keyword">THEN</span> <span class="sql-number">1</span> <span class="sql-keyword">ELSE</span> <span class="sql-number">0</span> <span class="sql-keyword">END</span>) <span class="sql-keyword">AS</span> chegirmasiz_sotuvlar
<span class="sql-keyword">FROM</span> sotuvlar;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 3: GROUP BY BILAN AGREGAT -->
<div class="card">
<h3><span class="step-number">3</span>GROUP BY bilan agregat funksiyalar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Gurupp statistikasi</div></div>
<pre><code><span class="sql-comment">-- 1. Sotuvchilar bo'yicha sotuv statistikasi</span>
<span class="sql-keyword">SELECT</span> 
    sotuvchi,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar_soni,
    <span class="sql-function">SUM</span>(miqdor) <span class="sql-keyword">AS</span> jami_miqdor,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(miqdor * narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_sotuv,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MAX</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> max_sotuv,
    <span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(chegirma_foiz), <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> ort_chegirma
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> sotuvchi
<span class="sql-keyword">ORDER BY</span> <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>sotuvchi</th><th>sotuvlar_soni</th><th>jami_miqdor</th><th>sof_tushum</th><th>ort_sotuv</th><th>max_sotuv</th><th>ort_chegirma</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>8</td><td>90</td><td>268,510,000</td><td>35,350,000</td><td>90,000,000</td><td>8.5</td></tr>
<tr><td>Bobur</td><td>7</td><td>150</td><td>158,190,000</td><td>25,607,143</td><td>45,000,000</td><td>8.7</td></tr>
<tr><td>Nodira</td><td>5</td><td>35</td><td>129,375,000</td><td>28,400,000</td><td>90,000,000</td><td>7.0</td></tr>
<tr><td>Dilnoza</td><td>5</td><td>72</td><td>96,790,000</td><td>22,500,000</td><td>72,000,000</td><td>9.0</td></tr>
<tr><td>Sanjar</td><td>5</td><td>182</td><td>82,012,500</td><td>17,350,000</td><td>37,500,000</td><td>4.6</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Gurupp statistikasi</div></div>
<pre><code><span class="sql-comment">-- 2. Kategoriya bo'yicha mahsulot statistikasi</span>
<span class="sql-keyword">SELECT</span> 
    m.kategoriya,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> m.id) <span class="sql-keyword">AS</span> mahsulotlar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">AVG</span>(m.narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_narx,
    <span class="sql-function">SUM</span>(s.miqdor) <span class="sql-keyword">AS</span> jami_sotilgan,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx * (<span class="sql-number">1</span> - s.chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(s.miqdor * (s.narx - m.tan_narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> yalpi_foyda
<span class="sql-keyword">FROM</span> mahsulotlar m
<span class="sql-join">INNER JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> m.id = s.mahsulot_id
<span class="sql-keyword">GROUP BY</span> m.kategoriya
<span class="sql-keyword">ORDER BY</span> <span class="sql-function">SUM</span>(s.miqdor * s.narx) <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>kategoriya</th><th>mahsulotlar</th><th>ort_narx</th><th>jami_sotilgan</th><th>sof_tushum</th><th>yalpi_foyda</th></tr></thead>
<tbody>
<tr><td>Elektronika</td><td>3</td><td>22,500,000</td><td>52</td><td>456,780,000</td><td>148,600,000</td></tr>
<tr><td>Aksesuar</td><td>4</td><td>1,762,500</td><td>170</td><td>91,970,000</td><td>58,050,000</td></tr>
<tr><td>Tarmoq</td><td>2</td><td>6,175,000</td><td>60</td><td>74,250,000</td><td>28,500,000</td></tr>
<tr><td>Orgtexnika</td><td>2</td><td>8,000,000</td><td>21</td><td>60,537,500</td><td>22,000,000</td></tr>
<tr><td>Komponentlar</td><td>1</td><td>2,800,000</td><td>20</td><td>51,340,000</td><td>14,000,000</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Gurupp statistikasi</div></div>
<pre><code><span class="sql-comment">-- 3. Shaharlar bo'yicha sotuv tahlili</span>
<span class="sql-keyword">SELECT</span> 
    shahar,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> sotuvchi) <span class="sql-keyword">AS</span> sotuvchilar,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> mahsulot_id) <span class="sql-keyword">AS</span> mahsulotlar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">GROUP_CONCAT</span>(<span class="sql-keyword">DISTINCT</span> tolov_turi <span class="sql-keyword">ORDER BY</span> tolov_turi <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>) <span class="sql-keyword">AS</span> tolov_turlari
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> shahar
<span class="sql-keyword">ORDER BY</span> <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Gurupp statistikasi</div></div>
<pre><code><span class="sql-comment">-- 4. To'lov turi bo'yicha tahlil</span>
<span class="sql-keyword">SELECT</span> 
    tolov_turi,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">COUNT</span>(*) * <span class="sql-number">100.0</span> / (<span class="sql-keyword">SELECT COUNT</span>(*) <span class="sql-keyword">FROM</span> sotuvlar), <span class="sql-number">1</span>), <span class="sql-string">'%'</span>) <span class="sql-keyword">AS</span> ulushi,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(miqdor * narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_summa
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> tolov_turi
<span class="sql-keyword">ORDER BY</span> soni <span class="sql-keyword">DESC</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 4: HAVING BILAN FILTRLASH -->
<div class="card">
<h3><span class="step-number">4</span>HAVING bilan guruhlarni filtrlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî HAVING filtrlash</div></div>
<pre><code><span class="sql-comment">-- 1. 50 mln dan ortiq sotuv qilgan sotuvchilar</span>
<span class="sql-keyword">SELECT</span> 
    sotuvchi,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar_soni,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> sotuvchi
<span class="sql-keyword">HAVING</span> <span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)) > <span class="sql-number">100000000</span>
<span class="sql-keyword">ORDER BY</span> <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>sotuvchi</th><th>sotuvlar_soni</th><th>sof_tushum</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>8</td><td>268,510,000</td></tr>
<tr><td>Bobur</td><td>7</td><td>158,190,000</td></tr>
<tr><td>Nodira</td><td>5</td><td>129,375,000</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî HAVING filtrlash</div></div>
<pre><code><span class="sql-comment">-- 2. 5 dan ortiq sotilgan mahsulotlar (faqat karta bilan)</span>
<span class="sql-keyword">SELECT</span> 
    m.nomi,
    m.kategoriya,
    <span class="sql-function">SUM</span>(s.miqdor) <span class="sql-keyword">AS</span> jami_sotilgan,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> umumiy_summa
<span class="sql-keyword">FROM</span> mahsulotlar m
<span class="sql-join">INNER JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> m.id = s.mahsulot_id
<span class="sql-keyword">WHERE</span> s.tolov_turi = <span class="sql-string">'karta'</span>
<span class="sql-keyword">GROUP BY</span> m.id, m.nomi, m.kategoriya
<span class="sql-keyword">HAVING</span> <span class="sql-function">SUM</span>(s.miqdor) > <span class="sql-number">5</span>
<span class="sql-keyword">ORDER BY</span> jami_sotilgan <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî HAVING filtrlash</div></div>
<pre><code><span class="sql-comment">-- 3. O'rtacha chegirmasi 10% dan yuqori bo'lgan shaharlar</span>
<span class="sql-keyword">SELECT</span> 
    shahar,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(chegirma_foiz), <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> ort_chegirma,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * chegirma_foiz / <span class="sql-number">100</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_chegirma_summa
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> shahar
<span class="sql-keyword">HAVING</span> <span class="sql-function">AVG</span>(chegirma_foiz) > <span class="sql-number">10</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî HAVING filtrlash</div></div>
<pre><code><span class="sql-comment">-- 4. WHERE + GROUP BY + HAVING + ORDER BY kombinatsiyasi</span>
<span class="sql-keyword">SELECT</span> 
    sotuvchi,
    <span class="sql-function">MONTHNAME</span>(sotuv_sana) <span class="sql-keyword">AS</span> oy,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">WHERE</span> sotuv_sana >= <span class="sql-string">'2024-03-01'</span>                         <span class="sql-comment">-- 1. WHERE: qatorlarni filtrlash</span>
<span class="sql-keyword">GROUP BY</span> sotuvchi, <span class="sql-function">MONTH</span>(sotuv_sana), <span class="sql-function">MONTHNAME</span>(sotuv_sana)  <span class="sql-comment">-- 2. GROUP BY: guruhlash</span>
<span class="sql-keyword">HAVING</span> <span class="sql-function">COUNT</span>(*) >= <span class="sql-number">2</span>                                    <span class="sql-comment">-- 3. HAVING: guruhlarni filtrlash</span>
<span class="sql-keyword">ORDER BY</span> sotuvchi, <span class="sql-function">MONTH</span>(sotuv_sana);                    <span class="sql-comment">-- 4. ORDER BY: saralash</span></code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 5: GROUP_CONCAT -->
<div class="card">
<h3><span class="step-number">5</span>GROUP_CONCAT ‚Äî qiymatlarni birlashtirish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî GROUP_CONCAT</div></div>
<pre><code><span class="sql-comment">-- 1. Har bir sotuvchi qaysi mahsulotlarni sotgan</span>
<span class="sql-keyword">SELECT</span> 
    sotuvchi,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> mahsulot_id) <span class="sql-keyword">AS</span> mahsulotlar_soni,
    <span class="sql-function">GROUP_CONCAT</span>(
        <span class="sql-keyword">DISTINCT</span> m.nomi
        <span class="sql-keyword">ORDER BY</span> m.nomi
        <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">' | '</span>
    ) <span class="sql-keyword">AS</span> sotilgan_mahsulotlar
<span class="sql-keyword">FROM</span> sotuvlar s
<span class="sql-join">INNER JOIN</span> mahsulotlar m <span class="sql-keyword">ON</span> s.mahsulot_id = m.id
<span class="sql-keyword">GROUP BY</span> sotuvchi
<span class="sql-keyword">ORDER BY</span> mahsulotlar_soni <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija (qisqartirilgan)</span>
<table>
<thead><tr><th>sotuvchi</th><th>mahsulotlar_soni</th><th>sotilgan_mahsulotlar</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>6</td><td>Klaviatura Logitech MX | Monitor Samsung 27" | Noutbuk HP EliteBook | Router Cisco | SSD Samsung 1TB | Server Dell PowerEdge</td></tr>
<tr><td>Bobur</td><td>6</td><td>Kabel Cat6 (100m) | Noutbuk HP EliteBook | Quloqchin Sony WH-1000 | Router Cisco | Server Dell PowerEdge | Sichqoncha Razer</td></tr>
<tr><td>Dilnoza</td><td>5</td><td>Klaviatura Logitech MX | Noutbuk HP EliteBook | Quloqchin Sony WH-1000 | Sichqoncha Razer | Webcam Logitech C920</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî GROUP_CONCAT</div></div>
<pre><code><span class="sql-comment">-- 2. Kategoriya bo'yicha mahsulotlar ro'yxati va narx diapazoni</span>
<span class="sql-keyword">SELECT</span> 
    kategoriya,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni,
    <span class="sql-function">GROUP_CONCAT</span>(nomi <span class="sql-keyword">ORDER BY</span> narx <span class="sql-keyword">DESC SEPARATOR</span> <span class="sql-string">', '</span>) <span class="sql-keyword">AS</span> mahsulotlar,
    <span class="sql-function">CONCAT</span>(
        <span class="sql-function">FORMAT</span>(<span class="sql-function">MIN</span>(narx), <span class="sql-number">0</span>), <span class="sql-string">' ‚Äî '</span>, <span class="sql-function">FORMAT</span>(<span class="sql-function">MAX</span>(narx), <span class="sql-number">0</span>)
    ) <span class="sql-keyword">AS</span> narx_diapazoni
<span class="sql-keyword">FROM</span> mahsulotlar
<span class="sql-keyword">GROUP BY</span> kategoriya;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî GROUP_CONCAT</div></div>
<pre><code><span class="sql-comment">-- 3. Har bir shahardan xarid qilgan mijozlar ro'yxati</span>
<span class="sql-keyword">SELECT</span> 
    shahar,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> mijoz_nomi) <span class="sql-keyword">AS</span> mijozlar_soni,
    <span class="sql-function">GROUP_CONCAT</span>(
        <span class="sql-keyword">DISTINCT</span> mijoz_nomi
        <span class="sql-keyword">ORDER BY</span> mijoz_nomi
        <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>
    ) <span class="sql-keyword">AS</span> mijozlar
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> shahar;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 6: VAQT BO'YICHA AGREGAT TAHLIL -->
<div class="card">
<h3><span class="step-number">6</span>Vaqt bo'yicha agregat tahlil</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Vaqt tahlili</div></div>
<pre><code><span class="sql-comment">-- 1. Oylik sotuv tendensiyasi</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>) <span class="sql-keyword">AS</span> oy,
    <span class="sql-function">MONTHNAME</span>(sotuv_sana) <span class="sql-keyword">AS</span> oy_nomi,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">SUM</span>(miqdor) <span class="sql-keyword">AS</span> jami_dona,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> umumiy_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(miqdor * narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_sotuv
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>), <span class="sql-function">MONTHNAME</span>(sotuv_sana)
<span class="sql-keyword">ORDER BY</span> oy;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>oy</th><th>oy_nomi</th><th>sotuvlar</th><th>jami_dona</th><th>umumiy_tushum</th><th>sof_tushum</th><th>ort_sotuv</th></tr></thead>
<tbody>
<tr><td>2024-01</td><td>January</td><td>3</td><td>27</td><td>99,000,000</td><td>91,560,000</td><td>33,000,000</td></tr>
<tr><td>2024-02</td><td>February</td><td>4</td><td>34</td><td>131,900,000</td><td>122,520,000</td><td>32,975,000</td></tr>
<tr><td>2024-03</td><td>March</td><td>7</td><td>103</td><td>175,500,000</td><td>159,225,000</td><td>25,071,429</td></tr>
<tr><td>2024-04</td><td>April</td><td>5</td><td>57</td><td>196,400,000</td><td>177,342,500</td><td>39,280,000</td></tr>
<tr><td>2024-05</td><td>May</td><td>7</td><td>215</td><td>134,250,000</td><td>125,380,000</td><td>19,178,571</td></tr>
<tr><td>2024-06</td><td>June</td><td>4</td><td>24</td><td>66,500,000</td><td>58,850,000</td><td>16,625,000</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Vaqt tahlili</div></div>
<pre><code><span class="sql-comment">-- 2. Hafta kunlari bo'yicha sotuv faolligi</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">DAYNAME</span>(sotuv_sana) <span class="sql-keyword">AS</span> hafta_kuni,
    <span class="sql-function">DAYOFWEEK</span>(sotuv_sana) <span class="sql-keyword">AS</span> kun_raqami,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar_soni,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_tushum,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">COUNT</span>(*) * <span class="sql-number">100.0</span> / (<span class="sql-keyword">SELECT COUNT</span>(*) <span class="sql-keyword">FROM</span> sotuvlar), <span class="sql-number">1</span>), <span class="sql-string">'%'</span>) <span class="sql-keyword">AS</span> ulushi
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> <span class="sql-function">DAYNAME</span>(sotuv_sana), <span class="sql-function">DAYOFWEEK</span>(sotuv_sana)
<span class="sql-keyword">ORDER BY</span> kun_raqami;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Vaqt tahlili</div></div>
<pre><code><span class="sql-comment">-- 3. Soat bo'yicha sotuv taqsimoti</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">HOUR</span>(sotuv_vaqti) <span class="sql-keyword">BETWEEN</span> <span class="sql-number">8</span> <span class="sql-keyword">AND</span> <span class="sql-number">11</span>  <span class="sql-keyword">THEN</span> <span class="sql-string">'üåÖ Ertalab (8-12)'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">HOUR</span>(sotuv_vaqti) <span class="sql-keyword">BETWEEN</span> <span class="sql-number">12</span> <span class="sql-keyword">AND</span> <span class="sql-number">14</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚òÄÔ∏è Tushlik (12-15)'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">HOUR</span>(sotuv_vaqti) <span class="sql-keyword">BETWEEN</span> <span class="sql-number">15</span> <span class="sql-keyword">AND</span> <span class="sql-number">17</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üåá Kechqurun (15-18)'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> vaqt_oraligi,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar_soni,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(miqdor * narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_sotuv
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> vaqt_oraligi
<span class="sql-keyword">ORDER BY</span> sotuvlar_soni <span class="sql-keyword">DESC</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 7: ICHMA-ICH AGREGAT -->
<div class="card">
<h3><span class="step-number">7</span>Ichki so'rovlar (Subquery) bilan agregat funksiyalar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Ichki so‚Äòrovlar</div></div>
<pre><code><span class="sql-comment">-- 1. O'rtachadan yuqori sotuvga ega sotuvchilar</span>
<span class="sql-keyword">SELECT</span> 
    sotuvchi,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">FORMAT</span>((<span class="sql-keyword">SELECT ROUND</span>(<span class="sql-function">AVG</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>))) <span class="sql-keyword">FROM</span> sotuvlar), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> umumiy_ortacha,
    <span class="sql-function">CONCAT</span>(
        <span class="sql-function">ROUND</span>(
            <span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)) * <span class="sql-number">100.0</span> / 
            (<span class="sql-keyword">SELECT SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)) <span class="sql-keyword">FROM</span> sotuvlar), <span class="sql-number">1</span>
        ), <span class="sql-string">'%'</span>
    ) <span class="sql-keyword">AS</span> umumiy_ulush
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> sotuvchi
<span class="sql-keyword">HAVING</span> <span class="sql-function">SUM</span>(miqdor * narx) > (
    <span class="sql-keyword">SELECT AVG</span>(jami) <span class="sql-keyword">FROM</span> (
        <span class="sql-keyword">SELECT SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> jami 
        <span class="sql-keyword">FROM</span> sotuvlar <span class="sql-keyword">GROUP BY</span> sotuvchi
    ) tmp
)
<span class="sql-keyword">ORDER BY</span> <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Ichki so‚Äòrovlar</div></div>
<pre><code><span class="sql-comment">-- 2. Eng ko'p sotilgan mahsulot (TOP 1) va uning statistikasi</span>
<span class="sql-keyword">SELECT</span> 
    m.nomi,
    m.kategoriya,
    <span class="sql-function">SUM</span>(s.miqdor) <span class="sql-keyword">AS</span> jami_sotilgan,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> umumiy_tushum,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> s.mijoz_nomi) <span class="sql-keyword">AS</span> unikal_mijozlar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MIN</span>(s.narx * s.miqdor), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> min_sotuv,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MAX</span>(s.narx * s.miqdor), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> max_sotuv
<span class="sql-keyword">FROM</span> mahsulotlar m
<span class="sql-join">INNER JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> m.id = s.mahsulot_id
<span class="sql-keyword">GROUP BY</span> m.id, m.nomi, m.kategoriya
<span class="sql-keyword">ORDER BY</span> jami_sotilgan <span class="sql-keyword">DESC</span>
<span class="sql-keyword">LIMIT</span> <span class="sql-number">5</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>nomi</th><th>kategoriya</th><th>jami_sotilgan</th><th>umumiy_tushum</th><th>unikal_mijozlar</th><th>min_sotuv</th><th>max_sotuv</th></tr></thead>
<tbody>
<tr><td>Kabel Cat6 (100m)</td><td>Tarmoq</td><td>150</td><td>52,500,000</td><td>2</td><td>17,500,000</td><td>35,000,000</td></tr>
<tr><td>Klaviatura Logitech MX</td><td>Aksesuar</td><td>80</td><td>96,000,000</td><td>3</td><td>18,000,000</td><td>48,000,000</td></tr>
<tr><td>Sichqoncha Razer</td><td>Aksesuar</td><td>65</td><td>55,250,000</td><td>3</td><td>12,750,000</td><td>25,500,000</td></tr>
<tr><td>Monitor Samsung 27"</td><td>Elektronika</td><td>31</td><td>139,500,000</td><td>3</td><td>27,000,000</td><td>67,500,000</td></tr>
<tr><td>SSD Samsung 1TB</td><td>Komponentlar</td><td>20</td><td>56,000,000</td><td>2</td><td>22,400,000</td><td>33,600,000</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Ichki so'rovlar</div></div>
<pre><code><span class="sql-comment">-- 3. Har bir sotuvchining eng yaxshi va eng yomon oyi</span>
<span class="sql-keyword">SELECT</span> 
    sotuvchi,
    <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>) <span class="sql-keyword">AS</span> oy,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> oylik_tushum,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">SUM</span>(miqdor * narx) = (
            <span class="sql-keyword">SELECT MAX</span>(oy_tushum) <span class="sql-keyword">FROM</span> (
                <span class="sql-keyword">SELECT</span> sotuvchi <span class="sql-keyword">AS</span> sv, <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> oy_tushum
                <span class="sql-keyword">FROM</span> sotuvlar <span class="sql-keyword">WHERE</span> sotuvchi = s.sotuvchi
                <span class="sql-keyword">GROUP BY</span> sv, <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>)
            ) tmp
        ) <span class="sql-keyword">THEN</span> <span class="sql-string">'üèÜ Eng yaxshi'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">SUM</span>(miqdor * narx) = (
            <span class="sql-keyword">SELECT MIN</span>(oy_tushum) <span class="sql-keyword">FROM</span> (
                <span class="sql-keyword">SELECT</span> sotuvchi <span class="sql-keyword">AS</span> sv, <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> oy_tushum
                <span class="sql-keyword">FROM</span> sotuvlar <span class="sql-keyword">WHERE</span> sotuvchi = s.sotuvchi
                <span class="sql-keyword">GROUP BY</span> sv, <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>)
            ) tmp
        ) <span class="sql-keyword">THEN</span> <span class="sql-string">'üìâ Eng past'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">''</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> baho
<span class="sql-keyword">FROM</span> sotuvlar s
<span class="sql-keyword">GROUP BY</span> sotuvchi, <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>)
<span class="sql-keyword">ORDER BY</span> sotuvchi, oy;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 8: MURAKKAB HISOBOTLAR -->
<div class="card">
<h3><span class="step-number">8</span>Murakkab biznes hisobotlari</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 1. Ombor holati ‚Äî mahsulotlar qoldig'i va sotilish tezligi</span>
<span class="sql-keyword">SELECT</span> 
    m.nomi,
    m.kategoriya,
    m.qoldiq <span class="sql-keyword">AS</span> omborda,
    <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(s.miqdor), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_sotilgan,
    <span class="sql-function">FORMAT</span>(m.narx, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> narx,
    <span class="sql-function">FORMAT</span>(m.qoldiq * m.narx, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ombor_qiymati,
    <span class="sql-function">ROUND</span>(<span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(s.miqdor), <span class="sql-number">0</span>) / 
        <span class="sql-function">GREATEST</span>(<span class="sql-function">DATEDIFF</span>(<span class="sql-function">CURDATE</span>(), m.qoshilgan_sana) / <span class="sql-number">30</span>, <span class="sql-number">1</span>), <span class="sql-number">1</span>
    ) <span class="sql-keyword">AS</span> oylik_sotuv_tezligi,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> m.qoldiq &lt;= <span class="sql-number">5</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üî¥ Kam'</span>
        <span class="sql-keyword">WHEN</span> m.qoldiq &lt;= <span class="sql-number">20</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üü° O\'rtacha'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'üü¢ Yetarli'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> qoldiq_holati
<span class="sql-keyword">FROM</span> mahsulotlar m
<span class="sql-join">LEFT JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> m.id = s.mahsulot_id
<span class="sql-keyword">GROUP BY</span> m.id, m.nomi, m.kategoriya, m.qoldiq, m.narx, m.qoshilgan_sana
<span class="sql-keyword">ORDER BY</span> m.qoldiq;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 2. Foyda tahlili ‚Äî kategoriya bo'yicha</span>
<span class="sql-keyword">SELECT</span> 
    m.kategoriya,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx * (<span class="sql-number">1</span> - s.chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(s.miqdor * m.tan_narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> tan_narx_jami,
    <span class="sql-function">FORMAT</span>(
        <span class="sql-function">SUM</span>(s.miqdor * s.narx * (<span class="sql-number">1</span> - s.chegirma_foiz/<span class="sql-number">100</span>)) - <span class="sql-function">SUM</span>(s.miqdor * m.tan_narx), <span class="sql-number">0</span>
    ) <span class="sql-keyword">AS</span> sof_foyda,
    <span class="sql-function">CONCAT</span>(
        <span class="sql-function">ROUND</span>(
            (<span class="sql-function">SUM</span>(s.miqdor * s.narx * (<span class="sql-number">1</span> - s.chegirma_foiz/<span class="sql-number">100</span>)) - <span class="sql-function">SUM</span>(s.miqdor * m.tan_narx)) * <span class="sql-number">100.0</span> / 
            <span class="sql-function">SUM</span>(s.miqdor * s.narx * (<span class="sql-number">1</span> - s.chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">1</span>
        ), <span class="sql-string">'%'</span>
    ) <span class="sql-keyword">AS</span> foyda_foizi
<span class="sql-keyword">FROM</span> mahsulotlar m
<span class="sql-join">INNER JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> m.id = s.mahsulot_id
<span class="sql-keyword">GROUP BY</span> m.kategoriya
<span class="sql-keyword">ORDER BY</span> sof_foyda <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 3. Yetkazuvchilar samaradorligi</span>
<span class="sql-keyword">SELECT</span> 
    m.yetkazuvchi,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> m.id) <span class="sql-keyword">AS</span> mahsulotlar_soni,
    <span class="sql-function">GROUP_CONCAT</span>(<span class="sql-keyword">DISTINCT</span> m.kategoriya <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>) <span class="sql-keyword">AS</span> kategoriyalar,
    <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(s.miqdor), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_sotilgan,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx * (<span class="sql-number">1</span> - s.chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(m.qoldiq * m.narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ombor_qiymati
<span class="sql-keyword">FROM</span> mahsulotlar m
<span class="sql-join">LEFT JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> m.id = s.mahsulot_id
<span class="sql-keyword">GROUP BY</span> m.yetkazuvchi
<span class="sql-keyword">ORDER BY</span> <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx), <span class="sql-number">0</span>) <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 4. WITH ROLLUP ‚Äî yakuniy qator bilan hisobot</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">IFNULL</span>(sotuvchi, <span class="sql-string">'‚ïê‚ïê‚ïê JAMI ‚ïê‚ïê‚ïê'</span>) <span class="sql-keyword">AS</span> sotuvchi,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">SUM</span>(miqdor) <span class="sql-keyword">AS</span> miqdor,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> umumiy_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * (<span class="sql-number">1</span> - chegirma_foiz/<span class="sql-number">100</span>)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sof_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx * chegirma_foiz / <span class="sql-number">100</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_chegirma
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> sotuvchi <span class="sql-keyword">WITH ROLLUP</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>sotuvchi</th><th>sotuvlar</th><th>miqdor</th><th>umumiy_tushum</th><th>sof_tushum</th><th>jami_chegirma</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>8</td><td>90</td><td>282,850,000</td><td>268,510,000</td><td>14,340,000</td></tr>
<tr><td>Bobur</td><td>7</td><td>150</td><td>179,250,000</td><td>158,190,000</td><td>21,060,000</td></tr>
<tr><td>Dilnoza</td><td>5</td><td>72</td><td>112,700,000</td><td>96,790,000</td><td>15,910,000</td></tr>
<tr><td>Nodira</td><td>5</td><td>35</td><td>142,000,000</td><td>129,375,000</td><td>12,625,000</td></tr>
<tr><td>Sanjar</td><td>5</td><td>182</td><td>86,750,000</td><td>82,012,500</td><td>4,737,500</td></tr>
<tr class="highlight-row"><td>‚ïê‚ïê‚ïê JAMI ‚ïê‚ïê‚ïê</td><td>30</td><td>529</td><td>803,550,000</td><td>734,877,500</td><td>68,672,500</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 5. STD va VARIANCE ‚Äî statistik tahlil</span>
<span class="sql-keyword">SELECT</span> 
    m.kategoriya,
    <span class="sql-function">COUNT</span>(s.id) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(s.miqdor * s.narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_sotuv,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">STD</span>(s.miqdor * s.narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> standart_ogish,
    <span class="sql-function">ROUND</span>(<span class="sql-function">STD</span>(s.miqdor * s.narx) / <span class="sql-function">AVG</span>(s.miqdor * s.narx) * <span class="sql-number">100</span>, <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> variatsiya_koef
<span class="sql-keyword">FROM</span> mahsulotlar m
<span class="sql-join">INNER JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> m.id = s.mahsulot_id
<span class="sql-keyword">GROUP BY</span> m.kategoriya
<span class="sql-keyword">ORDER BY</span> variatsiya_koef;</code></pre>
</div>

<div class="tip-box">
<p><strong>üí° Variatsiya koeffitsienti:</strong> Qiymat qanchalik <strong>past</strong> bo'lsa, sotuvlar shunchalik <strong>barqaror</strong>. Yuqori qiymat sotuvlar hajmidagi katta farqni ko'rsatadi.</p>
</div>
</div>

<div class="luxury-divider"></div>

<!-- QIYOSIY JADVAL -->
<h2><span class="icon">üìä</span>Agregat funksiyalar ‚Äî qisqacha xulosa</h2>
<div class="card-flat">
<table>
<thead><tr><th>Funksiya</th><th>Maqsad</th><th>NULL</th><th>Ishlash</th><th>Maslahat</th></tr></thead>
<tbody>
<tr><td><code>COUNT(*)</code></td><td>Barcha qatorlar</td><td>‚úÖ Hisobga oladi</td><td>Eng tez</td><td>Qatorlar sonini bilish uchun</td></tr>
<tr><td><code>COUNT(ustun)</code></td><td>NULL bo'lmaganlar</td><td>‚ùå O'tkazib yuboradi</td><td>Tez</td><td>To'ldirilgan maydonlar soni</td></tr>
<tr><td><code>COUNT(DISTINCT)</code></td><td>Unikal qiymatlar</td><td>‚ùå O'tkazib yuboradi</td><td>O'rtacha</td><td>Nechta turli xil qiymat bor</td></tr>
<tr><td><code>SUM()</code></td><td>Yig'indi</td><td>‚ùå O'tkazib yuboradi</td><td>Tez</td><td>Jami summani hisoblash</td></tr>
<tr><td><code>AVG()</code></td><td>O'rtacha</td><td>‚ùå O'tkazib yuboradi</td><td>Tez</td><td>NULL lar ort. ni buzishi mumkin!</td></tr>
<tr><td><code>MIN() / MAX()</code></td><td>Eng kichik/katta</td><td>‚ùå O'tkazib yuboradi</td><td>Tez</td><td>Diapazonni aniqlash</td></tr>
<tr><td><code>GROUP_CONCAT()</code></td><td>Birlashtirish</td><td>‚ùå O'tkazib yuboradi</td><td>O'rtacha</td><td>Ro'yxatni satr qilish</td></tr>
<tr><td><code>STD() / VARIANCE()</code></td><td>Statistika</td><td>‚ùå O'tkazib yuboradi</td><td>Sekinroq</td><td>Ma'lumotlar tarqalishini o'lchash</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- NAZORAT SAVOLLARI -->
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card">
<ol>
<li><code>COUNT(*)</code> va <code>COUNT(ustun_nomi)</code> orasidagi farq nimada?</li>
<li>Agregat funksiyalar <code>NULL</code> qiymatlarni qanday boshqaradi? Bu qanday muammolarga olib kelishi mumkin?</li>
<li><code>WHERE</code> ichida <code>AVG(maosh) > 5000000</code> yozish mumkinmi? Nima uchun?</li>
<li><code>GROUP BY</code> ishlatilganda <code>SELECT</code> da qanday ustunlar ko'rsatilishi mumkin?</li>
<li><code>WITH ROLLUP</code> nima va u qachon foydali?</li>
<li><code>GROUPING()</code> funksiyasi nima uchun ishlatiladi?</li>
<li><code>GROUP_CONCAT()</code> da <code>SEPARATOR</code> va <code>ORDER BY</code> qanday ishlaydi?</li>
<li><code>STD()</code> (standart og'ish) amaliyotda qachon foydali bo'ladi?</li>
</ol>
</div>

<!-- AMALIY TOPSHIRIQLAR -->
<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>
<div class="card">
<ol>
<li>Barcha sotuvlarning <strong>umumiy summasi, o'rtacha summasi, eng katta va kichik</strong> sotuvini hisoblang</li>
<li>Har bir <strong>sotuvchi</strong> bo'yicha sotuv statistikasini tuzing (soni, summasi, o'rtacha chegirmasi)</li>
<li>Har bir <strong>mahsulot kategoriyasi</strong> bo'yicha sotilgan miqdor va tushumni hisoblang</li>
<li><strong>HAVING</strong> yordamida faqat 3 dan ortiq sotuv qilgan sotuvchilarni ko'rsating</li>
<li>Har bir <strong>shahar</strong>da nechta unikal mijoz va nechta unikal mahsulot sotilganini toping</li>
<li><strong>Oylik tushum hisoboti</strong> tuzing: har oy uchun sotuvlar soni, jami tushum, o'rtacha sotuv</li>
<li><code>GROUP_CONCAT</code> bilan har bir sotuvchining <strong>sotgan mahsulotlari ro'yxati</strong>ni tuzing</li>
<li><strong>üí´ Bonus:</strong> <code>WITH ROLLUP</code>, <code>STD()</code>, foizli ulush va <code>CASE WHEN</code> bilan <strong>to'liq biznes hisobot</strong> yarating</li>
</ol>
</div>

<!-- HISOBOT SHABLONI -->
<h2><span class="icon">üìù</span>Hisobot shabloni</h2>
<table>
<thead><tr><th>Bo'lim</th><th>Tavsif</th></tr></thead>
<tbody>
<tr><td><strong>Ishdan maqsad</strong></td><td>Agregat funksiyalarni chuqur o'rganish va amaliyotda qo'llash</td></tr>
<tr><td><strong>Asosiy funksiyalar</strong></td><td>COUNT, SUM, AVG, MIN, MAX bilan umumiy statistika</td></tr>
<tr><td><strong>GROUP BY</strong></td><td>Turli guruhlash bo'yicha agregat so'rovlar</td></tr>
<tr><td><strong>HAVING</strong></td><td>Guruhlarni agregat funksiyalar bilan filtrlash</td></tr>
<tr><td><strong>GROUP_CONCAT</strong></td><td>Qiymatlarni guruhlash va birlashtirish</td></tr>
<tr><td><strong>Vaqt tahlili</strong></td><td>Oylik, haftalik, soatlik sotuv tendensiyalari</td></tr>
<tr><td><strong>Murakkab hisobotlar</strong></td><td>Foyda tahlili, ombor holati, ROLLUP, statistik tahlil</td></tr>
<tr><td><strong>Xulosa</strong></td><td>O'rganilgan funksiyalar va ularning biznes qo'llanilishi</td></tr>
</tbody>
</table>

<div class="luxury-divider"></div>

<!-- XULOSA -->
<div class="card">
<h2><span class="icon">üèÜ</span>Xulosa</h2>
<p>Ushbu amaliy mashg'ulotni yakunlagan talaba quyidagi ko'nikmalarga ega bo'ladi:</p>
<ul>
<li><code>COUNT</code>, <code>SUM</code>, <code>AVG</code>, <code>MIN</code>, <code>MAX</code> funksiyalarini mustaqil qo'llash</li>
<li><code>COUNT(*)</code>, <code>COUNT(ustun)</code> va <code>COUNT(DISTINCT)</code> orasidagi farqlarni tushunish</li>
<li><code>GROUP BY</code> bilan turli guruhlash mezonlari bo'yicha agregat hisoblash</li>
<li><code>HAVING</code> bilan agregat natijalarni filtrlash va <code>WHERE</code> dan farqini bilish</li>
<li><code>GROUP_CONCAT</code> funksiyasi bilan qiymatlarni satr sifatida birlashtirish</li>
<li>Vaqt bo'yicha (oylik, haftalik, soatlik) sotuv tendensiyalarini tahlil qilish</li>
<li>Ichki so'rovlar (subquery) bilan agregat funksiyalarni kombinatsiya qilish</li>
<li><code>WITH ROLLUP</code>, <code>STD()</code>, <code>VARIANCE()</code> kabi ilg'or usullarni qo'llash</li>
<li>Foyda tahlili, ombor holati, yetkazuvchi samaradorligi kabi <strong>real biznes hisobotlar</strong> yaratish</li>
</ul>
</div>
</div>
</div>

<!-- ===== TUTORIAL 11 ===== -->
<div class="section-block" id="t11">
<div class="container">
<h1>11-amaliy mashg'ulot</h1>
<p class="subtitle">Murakkab so'rovlar yaratish</p>
<div class="gold-line"></div>

<div class="meta-info">
    <strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp;
    <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp;
    <strong>üéØ Daraja:</strong> Yuqori
</div>

<!-- ===== NAZARIY QISM ===== -->
<h2><span class="icon">üìñ</span>Nazariy qism</h2>

<div class="card">
<h3><span class="icon">üß†</span>Murakkab so'rovlar nima?</h3>
<p><strong>Murakkab so'rovlar</strong> ‚Äî bu bir nechta SQL texnikalarini (ichki so'rovlar, CTE, oyna funksiyalari, ko'p jadvalli birlashtirish, shartli mantiq) birgalikda ishlatib, kuchli va samarali ma'lumot tahlilini amalga oshiruvchi so'rovlardir.</p>

<div class="concept-grid">
    <div class="concept-card">
        <h4>üîÑ Subquery</h4>
        <p>Ichki (joylashgan) so'rovlar ‚Äî boshqa so'rov ichida yoziladi</p>
    </div>
    <div class="concept-card">
        <h4>üì¶ CTE</h4>
        <p>Common Table Expressions ‚Äî vaqtinchalik nomlangan natija to'plami</p>
    </div>
    <div class="concept-card">
        <h4>ü™ü Window</h4>
        <p>Oyna funksiyalari ‚Äî guruhlashsiz agregat hisoblash</p>
    </div>
    <div class="concept-card">
        <h4>üîó Multi-JOIN</h4>
        <p>Ko'p jadvalli murakkab birlashtirish</p>
    </div>
    <div class="concept-card">
        <h4>üìä Derived Table</h4>
        <p>FROM ichidagi ichki so'rov (hosila jadval)</p>
    </div>
    <div class="concept-card">
        <h4>üîÅ Recursive CTE</h4>
        <p>Rekursiv so'rovlar ‚Äî ierarxik ma'lumotlar</p>
    </div>
</div>
</div>

<div class="card">
<h3><span class="icon">üìê</span>Ichki so'rov (Subquery) turlari</h3>

<table>
<thead><tr><th>Turi</th><th>Joylashuvi</th><th>Qaytaradi</th><th>Misol</th></tr></thead>
<tbody>
<tr><td><strong>Skalyar</strong></td><td>SELECT, WHERE, HAVING</td><td>Bitta qiymat</td><td><code>(SELECT MAX(narx) FROM ...)</code></td></tr>
<tr><td><strong>Ustun</strong></td><td>WHERE (IN, ANY, ALL)</td><td>Bitta ustun, ko'p qator</td><td><code>WHERE id IN (SELECT ...)</code></td></tr>
<tr><td><strong>Jadval (Derived)</strong></td><td>FROM</td><td>To'liq jadval</td><td><code>FROM (SELECT ...) AS tmp</code></td></tr>
<tr><td><strong>Korrelyatsiyalangan</strong></td><td>WHERE, SELECT</td><td>Tashqi so'rovga bog'liq</td><td><code>WHERE x > (SELECT AVG... WHERE t.id = ...)</code></td></tr>
<tr><td><strong>EXISTS</strong></td><td>WHERE</td><td>TRUE/FALSE</td><td><code>WHERE EXISTS (SELECT 1 ...)</code></td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="icon">üì¶</span>CTE (Common Table Expression)</h3>
<p>CTE ‚Äî bu <code>WITH</code> kalit so'zi bilan boshlanadigan vaqtinchalik nomlangan natija to'plamidir. U so'rovni o'qishni va tushunishni osonlashtiradi.</p>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CTE sintaksisi</div></div>
<pre><code><span class="sql-comment">-- CTE sintaksisi</span>
<span class="sql-cte">WITH</span> cte_nomi <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> ... <span class="sql-keyword">FROM</span> ... <span class="sql-keyword">WHERE</span> ...
)
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> cte_nomi;</code></pre>
</div>

<div class="tip-box">
<p><strong>üí° CTE afzalliklari:</strong> Kodni takrorlamaslik (DRY), murakkab so'rovlarni bosqichma-bosqich yozish, o'qish qulayligi, va rekursiv so'rovlar imkoniyati.</p>
</div>
</div>

<div class="card">
<h3><span class="icon">ü™ü</span>Oyna (Window) funksiyalari</h3>
<p>Oyna funksiyalari <code>GROUP BY</code> dan farqli ravishda, qatorlarni guruhlashsiz agregat hisoblash imkonini beradi. Har bir qator o'z qiymatini saqlab qoladi.</p>

<table>
<thead><tr><th>Funksiya</th><th>Tavsif</th><th>Toifa</th></tr></thead>
<tbody>
<tr><td><code>ROW_NUMBER()</code></td><td>Tartib raqami (takrorsiz)</td><td>Reyting</td></tr>
<tr><td><code>RANK()</code></td><td>Reyting (tenglar tashlab ketiladi)</td><td>Reyting</td></tr>
<tr><td><code>DENSE_RANK()</code></td><td>Reyting (tenglar tashlanmaydi)</td><td>Reyting</td></tr>
<tr><td><code>NTILE(n)</code></td><td>n ta guruhga bo'lish</td><td>Taqsimot</td></tr>
<tr><td><code>LAG(ustun, n)</code></td><td>Oldingi qatorning qiymati</td><td>Navigatsiya</td></tr>
<tr><td><code>LEAD(ustun, n)</code></td><td>Keyingi qatorning qiymati</td><td>Navigatsiya</td></tr>
<tr><td><code>FIRST_VALUE()</code></td><td>Oynadagi birinchi qiymat</td><td>Navigatsiya</td></tr>
<tr><td><code>LAST_VALUE()</code></td><td>Oynadagi oxirgi qiymat</td><td>Navigatsiya</td></tr>
<tr><td><code>SUM() OVER()</code></td><td>Oyna bo'yicha yig'indi</td><td>Agregat</td></tr>
<tr><td><code>AVG() OVER()</code></td><td>Oyna bo'yicha o'rtacha</td><td>Agregat</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Window funksiyasi</div></div>
<pre><code><span class="sql-comment">-- Oyna funksiya sintaksisi</span>
<span class="sql-function">ROW_NUMBER</span>() <span class="sql-keyword">OVER</span> (
    <span class="sql-keyword">PARTITION BY</span> guruhlash_ustuni
    <span class="sql-keyword">ORDER BY</span> saralash_ustuni <span class="sql-keyword">DESC</span>
) <span class="sql-keyword">AS</span> tartib_raqami</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- ===== AMALIY QISM ===== -->
<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<!-- BOSQICH 1: MA'LUMOTLAR BAZASI -->
<div class="card">
<h3><span class="step-number">1</span>Ma'lumotlar bazasini tayyorlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Bazani tayyorlash</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE IF NOT EXISTS</span> murakkab_db;
<span class="sql-keyword">USE</span> murakkab_db;

<span class="sql-comment">-- Bo'limlar</span>
<span class="sql-keyword">CREATE TABLE</span> bolimlar (
    id <span class="sql-keyword">INT PRIMARY KEY</span>,
    nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">60</span>),
    shahar <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">40</span>),
    byudjet <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">15</span>,<span class="sql-number">2</span>)
);

<span class="sql-comment">-- Xodimlar</span>
<span class="sql-keyword">CREATE TABLE</span> xodimlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    bolim_id <span class="sql-keyword">INT</span>,
    lavozim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    ishga_kirgan <span class="sql-keyword">DATE</span>,
    menejer_id <span class="sql-keyword">INT</span>,
    <span class="sql-keyword">FOREIGN KEY</span> (bolim_id) <span class="sql-keyword">REFERENCES</span> bolimlar(id),
    <span class="sql-keyword">FOREIGN KEY</span> (menejer_id) <span class="sql-keyword">REFERENCES</span> xodimlar(id)
);

<span class="sql-comment">-- Sotuvlar</span>
<span class="sql-keyword">CREATE TABLE</span> sotuvlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    xodim_id <span class="sql-keyword">INT</span>,
    mahsulot <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    kategoriya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    miqdor <span class="sql-keyword">INT</span>,
    narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    sotuv_sana <span class="sql-keyword">DATE</span>,
    shahar <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">40</span>),
    <span class="sql-keyword">FOREIGN KEY</span> (xodim_id) <span class="sql-keyword">REFERENCES</span> xodimlar(id)
);

<span class="sql-comment">-- Ma'lumotlarni kiritish</span>
<span class="sql-keyword">INSERT INTO</span> bolimlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>, <span class="sql-string">'IT bo\'limi'</span>,        <span class="sql-string">'Toshkent'</span>,   <span class="sql-number">500000000</span>),
(<span class="sql-number">2</span>, <span class="sql-string">'Moliya bo\'limi'</span>,    <span class="sql-string">'Toshkent'</span>,   <span class="sql-number">300000000</span>),
(<span class="sql-number">3</span>, <span class="sql-string">'Marketing bo\'limi'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-number">200000000</span>),
(<span class="sql-number">4</span>, <span class="sql-string">'Sotuv bo\'limi'</span>,     <span class="sql-string">'Toshkent'</span>,   <span class="sql-number">400000000</span>),
(<span class="sql-number">5</span>, <span class="sql-string">'Logistika bo\'limi'</span>, <span class="sql-string">'Buxoro'</span>,     <span class="sql-number">150000000</span>);

<span class="sql-keyword">INSERT INTO</span> xodimlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>,  <span class="sql-string">'Alisher'</span>,  <span class="sql-string">'Karimov'</span>,   <span class="sql-number">1</span>, <span class="sql-string">'IT direktor'</span>,        <span class="sql-number">15000000</span>, <span class="sql-string">'2018-03-15'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-number">2</span>,  <span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'Rahimova'</span>,  <span class="sql-number">1</span>, <span class="sql-string">'Senior dasturchi'</span>,   <span class="sql-number">12000000</span>, <span class="sql-string">'2020-01-10'</span>, <span class="sql-number">1</span>),
(<span class="sql-number">3</span>,  <span class="sql-string">'Bobur'</span>,    <span class="sql-string">'Toshmatov'</span>, <span class="sql-number">1</span>, <span class="sql-string">'Junior dasturchi'</span>,   <span class="sql-number">6500000</span>,  <span class="sql-string">'2023-06-20'</span>, <span class="sql-number">2</span>),
(<span class="sql-number">4</span>,  <span class="sql-string">'Gulnora'</span>,  <span class="sql-string">'Azimova'</span>,   <span class="sql-number">2</span>, <span class="sql-string">'Bosh hisobchi'</span>,      <span class="sql-number">11000000</span>, <span class="sql-string">'2019-09-01'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-number">5</span>,  <span class="sql-string">'Sanjar'</span>,   <span class="sql-string">'Alimov'</span>,    <span class="sql-number">2</span>, <span class="sql-string">'Hisobchi'</span>,           <span class="sql-number">7500000</span>,  <span class="sql-string">'2022-04-12'</span>, <span class="sql-number">4</span>),
(<span class="sql-number">6</span>,  <span class="sql-string">'Nodira'</span>,   <span class="sql-string">'Yusupova'</span>,  <span class="sql-number">3</span>, <span class="sql-string">'Marketing menejer'</span>,  <span class="sql-number">9000000</span>,  <span class="sql-string">'2021-11-05'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-number">7</span>,  <span class="sql-string">'Otabek'</span>,   <span class="sql-string">'Nazarov'</span>,   <span class="sql-number">3</span>, <span class="sql-string">'SMM mutaxassis'</span>,     <span class="sql-number">5500000</span>,  <span class="sql-string">'2023-07-18'</span>, <span class="sql-number">6</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Kamola'</span>,   <span class="sql-string">'Umarova'</span>,   <span class="sql-number">4</span>, <span class="sql-string">'Sotuv boshlig\'i'</span>,   <span class="sql-number">13000000</span>, <span class="sql-string">'2019-08-22'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Jasur'</span>,    <span class="sql-string">'Ergashev'</span>,  <span class="sql-number">4</span>, <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">8000000</span>,  <span class="sql-string">'2022-01-15'</span>, <span class="sql-number">8</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Malika'</span>,   <span class="sql-string">'Tursunova'</span>, <span class="sql-number">4</span>, <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">7800000</span>,  <span class="sql-string">'2022-05-01'</span>, <span class="sql-number">8</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Farrux'</span>,   <span class="sql-string">'Jumayev'</span>,   <span class="sql-number">4</span>, <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">8200000</span>,  <span class="sql-string">'2021-09-10'</span>, <span class="sql-number">8</span>),
(<span class="sql-number">12</span>, <span class="sql-string">'Shaxlo'</span>,   <span class="sql-string">'Mirzayeva'</span>, <span class="sql-number">5</span>, <span class="sql-string">'Logistika menejeri'</span>, <span class="sql-number">7000000</span>,  <span class="sql-string">'2023-02-20'</span>, <span class="sql-keyword">NULL</span>);

<span class="sql-comment">-- Sotuvlar (40 ta)</span>
<span class="sql-keyword">INSERT INTO</span> sotuvlar (xodim_id, mahsulot, kategoriya, miqdor, narx, sotuv_sana, shahar) <span class="sql-keyword">VALUES</span>
(<span class="sql-number">9</span>,  <span class="sql-string">'Noutbuk HP'</span>,       <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">3</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-01-10'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Monitor Samsung'</span>,   <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">8</span>,  <span class="sql-number">4500000</span>,  <span class="sql-string">'2024-01-15'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Server Dell'</span>,       <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">1</span>,  <span class="sql-number">45000000</span>, <span class="sql-string">'2024-01-20'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Klaviatura'</span>,        <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">20</span>, <span class="sql-number">1200000</span>,  <span class="sql-string">'2024-01-25'</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Printer HP'</span>,        <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">5</span>,  <span class="sql-number">8500000</span>,  <span class="sql-string">'2024-02-05'</span>, <span class="sql-string">'Buxoro'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'SSD Samsung'</span>,       <span class="sql-string">'Komponentlar'</span>, <span class="sql-number">15</span>, <span class="sql-number">2800000</span>,  <span class="sql-string">'2024-02-10'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Router Cisco'</span>,      <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">4</span>,  <span class="sql-number">12000000</span>, <span class="sql-string">'2024-02-15'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Sichqoncha'</span>,        <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">30</span>, <span class="sql-number">850000</span>,   <span class="sql-string">'2024-02-20'</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Noutbuk HP'</span>,        <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">5</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-02-25'</span>, <span class="sql-string">'Namangan'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'UPS APC'</span>,           <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">3</span>,  <span class="sql-number">7500000</span>,  <span class="sql-string">'2024-03-01'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Quloqchin Sony'</span>,    <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">10</span>, <span class="sql-number">3500000</span>,  <span class="sql-string">'2024-03-05'</span>, <span class="sql-string">'Buxoro'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Server Dell'</span>,       <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">2</span>,  <span class="sql-number">45000000</span>, <span class="sql-string">'2024-03-10'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Webcam Logitech'</span>,   <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">8</span>,  <span class="sql-number">1500000</span>,  <span class="sql-string">'2024-03-15'</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Monitor Samsung'</span>,   <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">12</span>, <span class="sql-number">4500000</span>,  <span class="sql-string">'2024-03-20'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Router Cisco'</span>,      <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">6</span>,  <span class="sql-number">12000000</span>, <span class="sql-string">'2024-03-25'</span>, <span class="sql-string">'Fargona'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Noutbuk HP'</span>,        <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">4</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-04-02'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'SSD Samsung'</span>,       <span class="sql-string">'Komponentlar'</span>, <span class="sql-number">20</span>, <span class="sql-number">2800000</span>,  <span class="sql-string">'2024-04-08'</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Printer HP'</span>,        <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">3</span>,  <span class="sql-number">8500000</span>,  <span class="sql-string">'2024-04-12'</span>, <span class="sql-string">'Buxoro'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Klaviatura'</span>,        <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">25</span>, <span class="sql-number">1200000</span>,  <span class="sql-string">'2024-04-18'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Noutbuk HP'</span>,        <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">2</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-04-22'</span>, <span class="sql-string">'Namangan'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Quloqchin Sony'</span>,    <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">7</span>,  <span class="sql-number">3500000</span>,  <span class="sql-string">'2024-04-28'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Server Dell'</span>,       <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">1</span>,  <span class="sql-number">45000000</span>, <span class="sql-string">'2024-05-03'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Sichqoncha'</span>,        <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">40</span>, <span class="sql-number">850000</span>,   <span class="sql-string">'2024-05-10'</span>, <span class="sql-string">'Fargona'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Monitor Samsung'</span>,   <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">6</span>,  <span class="sql-number">4500000</span>,  <span class="sql-string">'2024-05-15'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'UPS APC'</span>,           <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">5</span>,  <span class="sql-number">7500000</span>,  <span class="sql-string">'2024-05-20'</span>, <span class="sql-string">'Buxoro'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Router Cisco'</span>,      <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">3</span>,  <span class="sql-number">12000000</span>, <span class="sql-string">'2024-05-25'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'Klaviatura'</span>,        <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">35</span>, <span class="sql-number">1200000</span>,  <span class="sql-string">'2024-05-28'</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Webcam Logitech'</span>,   <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">12</span>, <span class="sql-number">1500000</span>,  <span class="sql-string">'2024-06-02'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Noutbuk HP'</span>,        <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">6</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-06-08'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">11</span>, <span class="sql-string">'SSD Samsung'</span>,       <span class="sql-string">'Komponentlar'</span>, <span class="sql-number">10</span>, <span class="sql-number">2800000</span>,  <span class="sql-string">'2024-06-12'</span>, <span class="sql-string">'Samarqand'</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE bolimlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE xodimlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE sotuvlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 5 rows affected (0.01 sec) ‚Äî <code>INSERT INTO bolimlar</code></span>
<span class="rok-line">Records: 5 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 12 rows affected (0.01 sec) ‚Äî <code>INSERT INTO xodimlar</code></span>
<span class="rok-line">Records: 12 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 30 rows affected (0.01 sec) ‚Äî <code>INSERT INTO sotuvlar</code></span>
<span class="rok-line">Records: 30 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 2: ICHKI SO'ROVLAR -->
<div class="card">
<h3><span class="step-number">2</span>Ichki so'rovlar (Subquery)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Subqueries</div></div>
<pre><code><span class="sql-comment">-- 1. Skalyar subquery: o'rtachadan yuqori maoshli xodimlar</span>
<span class="sql-keyword">SELECT</span> ism, familiya, lavozim,
    <span class="sql-function">FORMAT</span>(maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">FORMAT</span>(maosh - (<span class="sql-keyword">SELECT AVG</span>(maosh) <span class="sql-keyword">FROM</span> xodimlar), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ortachadan_farq
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> maosh > (<span class="sql-keyword">SELECT AVG</span>(maosh) <span class="sql-keyword">FROM</span> xodimlar)
<span class="sql-keyword">ORDER BY</span> maosh <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>lavozim</th><th>maosh</th><th>ortachadan_farq</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>IT direktor</td><td>15,000,000</td><td>6,625,000</td></tr>
<tr><td>Kamola</td><td>Umarova</td><td>Sotuv boshlig'i</td><td>13,000,000</td><td>4,625,000</td></tr>
<tr><td>Dilnoza</td><td>Rahimova</td><td>Senior dasturchi</td><td>12,000,000</td><td>3,625,000</td></tr>
<tr><td>Gulnora</td><td>Azimova</td><td>Bosh hisobchi</td><td>11,000,000</td><td>2,625,000</td></tr>
<tr><td>Nodira</td><td>Yusupova</td><td>Marketing menejer</td><td>9,000,000</td><td>625,000</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Subqueries</div></div>
<pre><code><span class="sql-comment">-- 2. IN subquery: sotuv qilgan xodimlar</span>
<span class="sql-keyword">SELECT</span> ism, familiya, lavozim
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> id <span class="sql-keyword">IN</span> (<span class="sql-keyword">SELECT DISTINCT</span> xodim_id <span class="sql-keyword">FROM</span> sotuvlar);

<span class="sql-comment">-- 3. NOT IN: sotuv qilMAGAN xodimlar</span>
<span class="sql-keyword">SELECT</span> ism, familiya, lavozim, b.nomi <span class="sql-keyword">AS</span> bolim
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">LEFT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id
<span class="sql-keyword">WHERE</span> x.id <span class="sql-keyword">NOT IN</span> (<span class="sql-keyword">SELECT DISTINCT</span> xodim_id <span class="sql-keyword">FROM</span> sotuvlar);</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî sotuv qilgan xodimlar</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>lavozim</th></tr></thead>
<tbody>
<tr><td>Jasur</td><td>Ergashev</td><td>Sotuv menejeri</td></tr>
<tr><td>Malika</td><td>Tursunova</td><td>Sotuv menejeri</td></tr>
<tr><td>Farrux</td><td>Jumayev</td><td>Sotuv menejeri</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî sotuv qilMAGAN xodimlar</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>lavozim</th><th>bolim</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>IT direktor</td><td>IT bo'limi</td></tr>
<tr><td>Dilnoza</td><td>Rahimova</td><td>Senior dasturchi</td><td>IT bo'limi</td></tr>
<tr><td>Bobur</td><td>Toshmatov</td><td>Junior dasturchi</td><td>IT bo'limi</td></tr>
<tr><td>Gulnora</td><td>Azimova</td><td>Bosh hisobchi</td><td>Moliya bo'limi</td></tr>
<tr><td>...</td><td>...</td><td>...</td><td>...</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Subqueries</div></div>
<pre><code><span class="sql-comment">-- 4. Korrelyatsiyalangan subquery: bo'limidagi eng yuqori maoshli xodim</span>
<span class="sql-keyword">SELECT</span> x.ism, x.familiya, b.nomi <span class="sql-keyword">AS</span> bolim,
    <span class="sql-function">FORMAT</span>(x.maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id
<span class="sql-keyword">WHERE</span> x.maosh = (
    <span class="sql-keyword">SELECT MAX</span>(x2.maosh)
    <span class="sql-keyword">FROM</span> xodimlar x2
    <span class="sql-keyword">WHERE</span> x2.bolim_id = x.bolim_id
);</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>ism</th><th>familiya</th><th>bolim</th><th>maosh</th></tr></thead>
<tbody>
<tr><td>Alisher</td><td>Karimov</td><td>IT bo'limi</td><td>15,000,000</td></tr>
<tr><td>Gulnora</td><td>Azimova</td><td>Moliya bo'limi</td><td>11,000,000</td></tr>
<tr><td>Nodira</td><td>Yusupova</td><td>Marketing bo'limi</td><td>9,000,000</td></tr>
<tr><td>Kamola</td><td>Umarova</td><td>Sotuv bo'limi</td><td>13,000,000</td></tr>
<tr><td>Shaxlo</td><td>Mirzayeva</td><td>Logistika bo'limi</td><td>7,000,000</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Subqueries</div></div>
<pre><code><span class="sql-comment">-- 5. EXISTS: kamida 1 ta sotuvi 50 mln dan oshgan xodimlar</span>
<span class="sql-keyword">SELECT</span> x.ism, x.familiya
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">WHERE EXISTS</span> (
    <span class="sql-keyword">SELECT</span> <span class="sql-number">1</span> <span class="sql-keyword">FROM</span> sotuvlar s
    <span class="sql-keyword">WHERE</span> s.xodim_id = x.id <span class="sql-keyword">AND</span> s.miqdor * s.narx > <span class="sql-number">50000000</span>
);</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>ism</th><th>familiya</th></tr></thead>
<tbody>
<tr><td>Jasur</td><td>Ergashev</td></tr>
<tr><td>Farrux</td><td>Jumayev</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 3: DERIVED TABLE -->
<div class="card">
<h3><span class="step-number">3</span>Hosila jadvallar (Derived Tables)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Derived Tables</div></div>
<pre><code><span class="sql-comment">-- 1. Har bir xodimning sotuv statistikasi + reyting</span>
<span class="sql-keyword">SELECT</span> 
    stat.xodim,
    stat.bolim,
    stat.sotuvlar_soni,
    <span class="sql-function">FORMAT</span>(stat.jami_sotuv, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_sotuv,
    <span class="sql-function">FORMAT</span>(stat.ort_sotuv, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_sotuv,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> stat.jami_sotuv > <span class="sql-number">200000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•á Oltin'</span>
        <span class="sql-keyword">WHEN</span> stat.jami_sotuv > <span class="sql-number">100000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•à Kumush'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'ü•â Bronza'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> daraja
<span class="sql-keyword">FROM</span> (
    <span class="sql-keyword">SELECT</span> 
        <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> xodim,
        b.nomi <span class="sql-keyword">AS</span> bolim,
        <span class="sql-function">COUNT</span>(s.id) <span class="sql-keyword">AS</span> sotuvlar_soni,
        <span class="sql-function">SUM</span>(s.miqdor * s.narx) <span class="sql-keyword">AS</span> jami_sotuv,
        <span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(s.miqdor * s.narx)) <span class="sql-keyword">AS</span> ort_sotuv
    <span class="sql-keyword">FROM</span> xodimlar x
    <span class="sql-join">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id
    <span class="sql-join">INNER JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> x.id = s.xodim_id
    <span class="sql-keyword">GROUP BY</span> x.id, x.ism, x.familiya, b.nomi
) <span class="sql-keyword">AS</span> stat
<span class="sql-keyword">ORDER BY</span> stat.jami_sotuv <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>xodim</th><th>bolim</th><th>sotuvlar_soni</th><th>jami_sotuv</th><th>ort_sotuv</th><th>daraja</th></tr></thead>
<tbody>
<tr><td>Farrux Jumayev</td><td>Sotuv bo'limi</td><td>10</td><td>266,200,000</td><td>26,620,000</td><td>ü•á Oltin</td></tr>
<tr><td>Malika Tursunova</td><td>Sotuv bo'limi</td><td>10</td><td>243,350,000</td><td>24,335,000</td><td>ü•á Oltin</td></tr>
<tr><td>Jasur Ergashev</td><td>Sotuv bo'limi</td><td>10</td><td>236,100,000</td><td>23,610,000</td><td>ü•á Oltin</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Derived Tables</div></div>
<pre><code><span class="sql-comment">-- 2. Oylik o'sish foizini hisoblash (oy-oyga taqqoslash)</span>
<span class="sql-keyword">SELECT</span> 
    joriy.oy,
    <span class="sql-function">FORMAT</span>(joriy.tushum, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> joriy_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">IFNULL</span>(oldingi.tushum, <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> oldingi_tushum,
    <span class="sql-keyword">CASE</span> 
        <span class="sql-keyword">WHEN</span> oldingi.tushum <span class="sql-keyword">IS NULL THEN</span> <span class="sql-string">'‚Äî'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-function">CONCAT</span>(
            <span class="sql-function">ROUND</span>((joriy.tushum - oldingi.tushum) * <span class="sql-number">100.0</span> / oldingi.tushum, <span class="sql-number">1</span>), <span class="sql-string">'%'</span>
        )
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> osish
<span class="sql-keyword">FROM</span> (
    <span class="sql-keyword">SELECT DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>) <span class="sql-keyword">AS</span> oy,
           <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> tushum
    <span class="sql-keyword">FROM</span> sotuvlar <span class="sql-keyword">GROUP BY DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>)
) joriy
<span class="sql-join">LEFT JOIN</span> (
    <span class="sql-keyword">SELECT DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>) <span class="sql-keyword">AS</span> oy,
           <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> tushum
    <span class="sql-keyword">FROM</span> sotuvlar <span class="sql-keyword">GROUP BY DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>)
) oldingi <span class="sql-keyword">ON</span> oldingi.oy = <span class="sql-function">DATE_FORMAT</span>(<span class="sql-function">DATE_SUB</span>(
    <span class="sql-function">CONCAT</span>(joriy.oy, <span class="sql-string">'-01'</span>), <span class="sql-keyword">INTERVAL</span> <span class="sql-number">1</span> <span class="sql-keyword">MONTH</span>), <span class="sql-string">'%Y-%m'</span>)
<span class="sql-keyword">ORDER BY</span> joriy.oy;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 4: CTE -->
<div class="card">
<h3><span class="step-number">4</span>CTE (Common Table Expressions)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CTE amaliyot</div></div>
<pre><code><span class="sql-comment">-- 1. Bir nechta CTE ‚Äî sotuv tahlili</span>
<span class="sql-cte">WITH</span> xodim_sotuv <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> xodim_id,
        <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni,
        <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> jami
    <span class="sql-keyword">FROM</span> sotuvlar
    <span class="sql-keyword">GROUP BY</span> xodim_id
),
ortacha <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT ROUND</span>(<span class="sql-function">AVG</span>(jami)) <span class="sql-keyword">AS</span> ort_sotuv <span class="sql-keyword">FROM</span> xodim_sotuv
)
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> xodim,
    xs.soni <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">FORMAT</span>(xs.jami, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_sotuv,
    <span class="sql-function">FORMAT</span>(o.ort_sotuv, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ortacha,
    <span class="sql-keyword">IF</span>(xs.jami > o.ort_sotuv, <span class="sql-string">'‚úÖ Yuqori'</span>, <span class="sql-string">'‚¨áÔ∏è Past'</span>) <span class="sql-keyword">AS</span> baho
<span class="sql-keyword">FROM</span> xodim_sotuv xs
<span class="sql-join">INNER JOIN</span> xodimlar x <span class="sql-keyword">ON</span> xs.xodim_id = x.id
<span class="sql-keyword">CROSS JOIN</span> ortacha o
<span class="sql-keyword">ORDER BY</span> xs.jami <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>xodim</th><th>sotuvlar</th><th>jami_sotuv</th><th>ortacha</th><th>baho</th></tr></thead>
<tbody>
<tr><td>Farrux Jumayev</td><td>10</td><td>266,200,000</td><td>248,550,000</td><td>‚úÖ Yuqori</td></tr>
<tr><td>Malika Tursunova</td><td>10</td><td>243,350,000</td><td>248,550,000</td><td>‚¨áÔ∏è Past</td></tr>
<tr><td>Jasur Ergashev</td><td>10</td><td>236,100,000</td><td>248,550,000</td><td>‚¨áÔ∏è Past</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CTE amaliyot</div></div>
<pre><code><span class="sql-comment">-- 2. CTE bilan kategoriya bo'yicha TOP mahsulot</span>
<span class="sql-cte">WITH</span> kategoriya_sotuv <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> kategoriya, mahsulot,
        <span class="sql-function">SUM</span>(miqdor) <span class="sql-keyword">AS</span> jami_miqdor,
        <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> jami_summa,
        <span class="sql-function">RANK</span>() <span class="sql-keyword">OVER</span> (
            <span class="sql-keyword">PARTITION BY</span> kategoriya
            <span class="sql-keyword">ORDER BY</span> <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">DESC</span>
        ) <span class="sql-keyword">AS</span> reyting
    <span class="sql-keyword">FROM</span> sotuvlar
    <span class="sql-keyword">GROUP BY</span> kategoriya, mahsulot
)
<span class="sql-keyword">SELECT</span> kategoriya, mahsulot,
    jami_miqdor,
    <span class="sql-function">FORMAT</span>(jami_summa, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_summa,
    <span class="sql-function">CONCAT</span>(<span class="sql-string">'#'</span>, reyting) <span class="sql-keyword">AS</span> o_rin
<span class="sql-keyword">FROM</span> kategoriya_sotuv
<span class="sql-keyword">WHERE</span> reyting = <span class="sql-number">1</span>
<span class="sql-keyword">ORDER BY</span> jami_summa <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CTE amaliyot</div></div>
<pre><code><span class="sql-comment">-- 3. Rekursiv CTE ‚Äî menejer ierarxiyasi</span>
<span class="sql-cte">WITH RECURSIVE</span> ierarxiya <span class="sql-keyword">AS</span> (
    <span class="sql-comment">-- Boshlang'ich: yuqori menejerlar (menejer_id = NULL)</span>
    <span class="sql-keyword">SELECT</span> id, ism, familiya, lavozim, menejer_id,
        <span class="sql-number">0</span> <span class="sql-keyword">AS</span> daraja,
        <span class="sql-keyword">CAST</span>(ism <span class="sql-keyword">AS CHAR</span>(<span class="sql-number">500</span>)) <span class="sql-keyword">AS</span> zanjir
    <span class="sql-keyword">FROM</span> xodimlar
    <span class="sql-keyword">WHERE</span> menejer_id <span class="sql-keyword">IS NULL</span>
    
    <span class="sql-operator">UNION ALL</span>
    
    <span class="sql-comment">-- Rekursiv: bo'ysinuvchilar</span>
    <span class="sql-keyword">SELECT</span> x.id, x.ism, x.familiya, x.lavozim, x.menejer_id,
        i.daraja + <span class="sql-number">1</span>,
        <span class="sql-function">CONCAT</span>(i.zanjir, <span class="sql-string">' ‚Üí '</span>, x.ism)
    <span class="sql-keyword">FROM</span> xodimlar x
    <span class="sql-join">INNER JOIN</span> ierarxiya i <span class="sql-keyword">ON</span> x.menejer_id = i.id
)
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(<span class="sql-function">REPEAT</span>(<span class="sql-string">'    '</span>, daraja), 
        <span class="sql-keyword">IF</span>(daraja = <span class="sql-number">0</span>, <span class="sql-string">'üëë '</span>, <span class="sql-keyword">IF</span>(daraja = <span class="sql-number">1</span>, <span class="sql-string">'‚îú‚îÄ‚îÄ '</span>, <span class="sql-string">'‚îÇ   ‚îú‚îÄ‚îÄ '</span>)),
        ism, <span class="sql-string">' '</span>, familiya
    ) <span class="sql-keyword">AS</span> tuzilma,
    lavozim,
    daraja,
    zanjir
<span class="sql-keyword">FROM</span> ierarxiya
<span class="sql-keyword">ORDER BY</span> zanjir;</code></pre>
</div>

<span class="result-label">üìã Natija (tuzilma)</span>
<table>
<thead><tr><th>tuzilma</th><th>lavozim</th><th>daraja</th><th>zanjir</th></tr></thead>
<tbody>
<tr><td>üëë Alisher Karimov</td><td>IT direktor</td><td>0</td><td>Alisher</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ Dilnoza Rahimova</td><td>Senior dasturchi</td><td>1</td><td>Alisher ‚Üí Dilnoza</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ Bobur Toshmatov</td><td>Junior dasturchi</td><td>2</td><td>Alisher ‚Üí Dilnoza ‚Üí Bobur</td></tr>
<tr><td>üëë Gulnora Azimova</td><td>Bosh hisobchi</td><td>0</td><td>Gulnora</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ Sanjar Alimov</td><td>Hisobchi</td><td>1</td><td>Gulnora ‚Üí Sanjar</td></tr>
<tr><td>üëë Kamola Umarova</td><td>Sotuv boshlig'i</td><td>0</td><td>Kamola</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ Jasur Ergashev</td><td>Sotuv menejeri</td><td>1</td><td>Kamola ‚Üí Jasur</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ Malika Tursunova</td><td>Sotuv menejeri</td><td>1</td><td>Kamola ‚Üí Malika</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ Farrux Jumayev</td><td>Sotuv menejeri</td><td>1</td><td>Kamola ‚Üí Farrux</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 5: WINDOW FUNKSIYALAR -->
<div class="card">
<h3><span class="step-number">5</span>Oyna (Window) funksiyalari</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Window funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 1. ROW_NUMBER, RANK, DENSE_RANK farqi</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> xodim,
    <span class="sql-function">FORMAT</span>(x.maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">ROW_NUMBER</span>() <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> x.maosh <span class="sql-keyword">DESC</span>) <span class="sql-keyword">AS</span> row_num,
    <span class="sql-function">RANK</span>()       <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> x.maosh <span class="sql-keyword">DESC</span>) <span class="sql-keyword">AS</span> rank_num,
    <span class="sql-function">DENSE_RANK</span>() <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> x.maosh <span class="sql-keyword">DESC</span>) <span class="sql-keyword">AS</span> dense_num
<span class="sql-keyword">FROM</span> xodimlar x;</code></pre>
</div>

<span class="result-label">üìã Natija (qisqartirilgan)</span>
<table>
<thead><tr><th>xodim</th><th>maosh</th><th>row_num</th><th>rank_num</th><th>dense_num</th></tr></thead>
<tbody>
<tr><td>Alisher Karimov</td><td>15,000,000</td><td>1</td><td>1</td><td>1</td></tr>
<tr><td>Kamola Umarova</td><td>13,000,000</td><td>2</td><td>2</td><td>2</td></tr>
<tr><td>Dilnoza Rahimova</td><td>12,000,000</td><td>3</td><td>3</td><td>3</td></tr>
<tr><td>Gulnora Azimova</td><td>11,000,000</td><td>4</td><td>4</td><td>4</td></tr>
<tr><td>Nodira Yusupova</td><td>9,000,000</td><td>5</td><td>5</td><td>5</td></tr>
<tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Window funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 2. PARTITION BY bilan bo'lim ichida reyting</span>
<span class="sql-keyword">SELECT</span> 
    b.nomi <span class="sql-keyword">AS</span> bolim,
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> xodim,
    <span class="sql-function">FORMAT</span>(x.maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">ROW_NUMBER</span>() <span class="sql-keyword">OVER</span> (<span class="sql-keyword">PARTITION BY</span> b.id <span class="sql-keyword">ORDER BY</span> x.maosh <span class="sql-keyword">DESC</span>) <span class="sql-keyword">AS</span> bolim_reytingi,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">AVG</span>(x.maosh) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">PARTITION BY</span> b.id), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> bolim_ortachasi,
    <span class="sql-function">FORMAT</span>(x.maosh - <span class="sql-function">AVG</span>(x.maosh) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">PARTITION BY</span> b.id), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ortachadan_farq
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id
<span class="sql-keyword">ORDER BY</span> b.nomi, x.maosh <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Window funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 3. LAG / LEAD ‚Äî oldingi va keyingi qator bilan taqqoslash</span>
<span class="sql-cte">WITH</span> oylik <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> 
        <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>) <span class="sql-keyword">AS</span> oy,
        <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> tushum
    <span class="sql-keyword">FROM</span> sotuvlar
    <span class="sql-keyword">GROUP BY</span> <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>)
)
<span class="sql-keyword">SELECT</span> 
    oy,
    <span class="sql-function">FORMAT</span>(tushum, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">LAG</span>(tushum) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> oy), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> oldingi_oy,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">LEAD</span>(tushum) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> oy), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> keyingi_oy,
    <span class="sql-function">CONCAT</span>(
        <span class="sql-function">ROUND</span>(
            (tushum - <span class="sql-function">LAG</span>(tushum) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> oy)) * <span class="sql-number">100.0</span> /
            <span class="sql-function">LAG</span>(tushum) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> oy), <span class="sql-number">1</span>
        ), <span class="sql-string">'%'</span>
    ) <span class="sql-keyword">AS</span> oylik_osish
<span class="sql-keyword">FROM</span> oylik;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>oy</th><th>tushum</th><th>oldingi_oy</th><th>keyingi_oy</th><th>oylik_osish</th></tr></thead>
<tbody>
<tr><td>2024-01</td><td>153,000,000</td><td>NULL</td><td>128,500,000</td><td>NULL</td></tr>
<tr><td>2024-02</td><td>128,500,000</td><td>153,000,000</td><td>158,200,000</td><td>-16.0%</td></tr>
<tr><td>2024-03</td><td>158,200,000</td><td>128,500,000</td><td>170,400,000</td><td>23.1%</td></tr>
<tr><td>2024-04</td><td>170,400,000</td><td>158,200,000</td><td>107,400,000</td><td>7.7%</td></tr>
<tr><td>2024-05</td><td>107,400,000</td><td>170,400,000</td><td>128,000,000</td><td>-37.0%</td></tr>
<tr><td>2024-06</td><td>128,000,000</td><td>107,400,000</td><td>NULL</td><td>19.2%</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Window funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 4. Kumulyativ (jamlangan) yig'indi</span>
<span class="sql-keyword">SELECT</span> 
    sotuv_sana,
    mahsulot,
    <span class="sql-function">FORMAT</span>(miqdor * narx, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sotuv_summasi,
    <span class="sql-function">FORMAT</span>(
        <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> sotuv_sana <span class="sql-keyword">ROWS UNBOUNDED PRECEDING</span>), <span class="sql-number">0</span>
    ) <span class="sql-keyword">AS</span> kumulyativ_jami
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">ORDER BY</span> sotuv_sana;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Window funksiyalari</div></div>
<pre><code><span class="sql-comment">-- 5. NTILE ‚Äî xodimlarni 4 ta kvartilga bo'lish</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> xodim,
    <span class="sql-function">FORMAT</span>(maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">NTILE</span>(<span class="sql-number">4</span>) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> maosh <span class="sql-keyword">DESC</span>) <span class="sql-keyword">AS</span> kvartil,
    <span class="sql-keyword">CASE</span> <span class="sql-function">NTILE</span>(<span class="sql-number">4</span>) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> maosh <span class="sql-keyword">DESC</span>)
        <span class="sql-keyword">WHEN</span> <span class="sql-number">1</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üîù TOP 25%'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-number">2</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚¨ÜÔ∏è Yuqori o\'rta'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-number">3</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚¨áÔ∏è Past o\'rta'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-number">4</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üìâ Past 25%'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> segment
<span class="sql-keyword">FROM</span> xodimlar;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 6: KO'P BOSQICHLI MURAKKAB -->
<div class="card">
<h3><span class="step-number">6</span>Ko'p bosqichli murakkab so'rovlar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 1. To'liq biznes dashboard ‚Äî barcha texnikalar birgalikda</span>
<span class="sql-cte">WITH</span> 
<span class="sql-comment">-- 1-bosqich: Xodim sotuvlari</span>
xodim_stat <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> xodim_id,
        <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni,
        <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> jami,
        <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> kategoriya) <span class="sql-keyword">AS</span> kategoriyalar,
        <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> shahar) <span class="sql-keyword">AS</span> shaharlar,
        <span class="sql-function">MIN</span>(sotuv_sana) <span class="sql-keyword">AS</span> birinchi_sotuv,
        <span class="sql-function">MAX</span>(sotuv_sana) <span class="sql-keyword">AS</span> oxirgi_sotuv
    <span class="sql-keyword">FROM</span> sotuvlar
    <span class="sql-keyword">GROUP BY</span> xodim_id
),
<span class="sql-comment">-- 2-bosqich: Umumiy statistika</span>
umumiy <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> 
        <span class="sql-function">SUM</span>(jami) <span class="sql-keyword">AS</span> total,
        <span class="sql-function">AVG</span>(jami) <span class="sql-keyword">AS</span> avg_sotuv
    <span class="sql-keyword">FROM</span> xodim_stat
),
<span class="sql-comment">-- 3-bosqich: Reyting</span>
reytingli <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> xs.*,
        <span class="sql-function">RANK</span>() <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> xs.jami <span class="sql-keyword">DESC</span>) <span class="sql-keyword">AS</span> umumiy_rank,
        xs.jami * <span class="sql-number">100.0</span> / u.total <span class="sql-keyword">AS</span> ulush
    <span class="sql-keyword">FROM</span> xodim_stat xs
    <span class="sql-keyword">CROSS JOIN</span> umumiy u
)
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(<span class="sql-string">'#'</span>, r.umumiy_rank) <span class="sql-keyword">AS</span> o_rin,
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> xodim,
    b.nomi <span class="sql-keyword">AS</span> bolim,
    r.soni <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">FORMAT</span>(r.jami, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_sotuv,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">ROUND</span>(r.ulush, <span class="sql-number">1</span>), <span class="sql-string">'%'</span>) <span class="sql-keyword">AS</span> ulush,
    r.kategoriyalar <span class="sql-keyword">AS</span> kat,
    r.shaharlar <span class="sql-keyword">AS</span> shahlar,
    <span class="sql-function">DATEDIFF</span>(r.oxirgi_sotuv, r.birinchi_sotuv) <span class="sql-keyword">AS</span> faol_kunlar,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> r.umumiy_rank = <span class="sql-number">1</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üèÜ'</span>
        <span class="sql-keyword">WHEN</span> r.ulush > <span class="sql-number">30</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚≠ê‚≠ê‚≠ê'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'‚≠ê‚≠ê'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> baho
<span class="sql-keyword">FROM</span> reytingli r
<span class="sql-join">INNER JOIN</span> xodimlar x <span class="sql-keyword">ON</span> r.xodim_id = x.id
<span class="sql-join">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id
<span class="sql-keyword">ORDER BY</span> r.umumiy_rank;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab hisobotlar</div></div>
<pre><code><span class="sql-comment">-- 2. Harakatlantiruvchi o'rtacha (Moving Average) ‚Äî 3 oylik</span>
<span class="sql-cte">WITH</span> oylik_tushum <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> 
        <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>) <span class="sql-keyword">AS</span> oy,
        <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> tushum
    <span class="sql-keyword">FROM</span> sotuvlar
    <span class="sql-keyword">GROUP BY</span> <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>)
)
<span class="sql-keyword">SELECT</span> 
    oy,
    <span class="sql-function">FORMAT</span>(tushum, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> tushum,
    <span class="sql-function">FORMAT</span>(
        <span class="sql-function">AVG</span>(tushum) <span class="sql-keyword">OVER</span> (
            <span class="sql-keyword">ORDER BY</span> oy
            <span class="sql-keyword">ROWS BETWEEN</span> <span class="sql-number">2</span> <span class="sql-keyword">PRECEDING AND CURRENT ROW</span>
        ), <span class="sql-number">0</span>
    ) <span class="sql-keyword">AS</span> uch_oylik_ortacha,
    <span class="sql-function">FORMAT</span>(
        <span class="sql-function">SUM</span>(tushum) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> oy <span class="sql-keyword">ROWS UNBOUNDED PRECEDING</span>), <span class="sql-number">0</span>
    ) <span class="sql-keyword">AS</span> kumulyativ
<span class="sql-keyword">FROM</span> oylik_tushum;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 7: AMALIY BIZNES SENARIYLAR -->
<div class="card">
<h3><span class="step-number">7</span>Amaliy biznes senariylar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy topshiriqlar</div></div>
<pre><code><span class="sql-comment">-- 1. ABC tahlili ‚Äî mahsulotlarni sotuv hajmi bo'yicha tasniflash</span>
<span class="sql-cte">WITH</span> mahsulot_sotuv <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> mahsulot,
        <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> jami
    <span class="sql-keyword">FROM</span> sotuvlar <span class="sql-keyword">GROUP BY</span> mahsulot
),
kumulyativ <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> mahsulot, jami,
        <span class="sql-function">SUM</span>(jami) <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> jami <span class="sql-keyword">DESC</span>) <span class="sql-keyword">AS</span> kumul,
        <span class="sql-function">SUM</span>(jami) <span class="sql-keyword">OVER</span> () <span class="sql-keyword">AS</span> total
    <span class="sql-keyword">FROM</span> mahsulot_sotuv
)
<span class="sql-keyword">SELECT</span> mahsulot,
    <span class="sql-function">FORMAT</span>(jami, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sotuv,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">ROUND</span>(kumul * <span class="sql-number">100.0</span> / total, <span class="sql-number">1</span>), <span class="sql-string">'%'</span>) <span class="sql-keyword">AS</span> kumulyativ_foiz,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> kumul * <span class="sql-number">100.0</span> / total &lt;= <span class="sql-number">70</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üÖ∞Ô∏è A ‚Äî Asosiy'</span>
        <span class="sql-keyword">WHEN</span> kumul * <span class="sql-number">100.0</span> / total &lt;= <span class="sql-number">90</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üÖ±Ô∏è B ‚Äî O\'rta'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'¬©Ô∏è C ‚Äî Past'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> abc_gruppa
<span class="sql-keyword">FROM</span> kumulyativ
<span class="sql-keyword">ORDER BY</span> jami <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>mahsulot</th><th>sotuv</th><th>kumulyativ_foiz</th><th>abc_gruppa</th></tr></thead>
<tbody>
<tr><td>Noutbuk HP</td><td>360,000,000</td><td>48.2%</td><td>üÖ∞Ô∏è A ‚Äî Asosiy</td></tr>
<tr><td>Server Dell</td><td>180,000,000</td><td>72.4%</td><td>üÖ±Ô∏è B ‚Äî O'rta</td></tr>
<tr><td>Router Cisco</td><td>156,000,000</td><td>93.3%</td><td>¬©Ô∏è C ‚Äî Past</td></tr>
<tr><td>Monitor Samsung</td><td>117,000,000</td><td>97.0%</td><td>¬©Ô∏è C ‚Äî Past</td></tr>
<tr><td>...</td><td>...</td><td>...</td><td>...</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy topshiriqlar</div></div>
<pre><code><span class="sql-comment">-- 2. Bo'lim byudjeti va xarajatlar tahlili</span>
<span class="sql-cte">WITH</span> bolim_xarajat <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> 
        b.id, b.nomi, b.byudjet,
        <span class="sql-function">COUNT</span>(x.id) <span class="sql-keyword">AS</span> xodimlar,
        <span class="sql-function">SUM</span>(x.maosh) * <span class="sql-number">12</span> <span class="sql-keyword">AS</span> yillik_maosh,
        <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(s.jami_sotuv), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> tushum
    <span class="sql-keyword">FROM</span> bolimlar b
    <span class="sql-join">LEFT JOIN</span> xodimlar x <span class="sql-keyword">ON</span> b.id = x.bolim_id
    <span class="sql-join">LEFT JOIN</span> (
        <span class="sql-keyword">SELECT</span> xodim_id, <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> jami_sotuv
        <span class="sql-keyword">FROM</span> sotuvlar <span class="sql-keyword">GROUP BY</span> xodim_id
    ) s <span class="sql-keyword">ON</span> x.id = s.xodim_id
    <span class="sql-keyword">GROUP BY</span> b.id, b.nomi, b.byudjet
)
<span class="sql-keyword">SELECT</span> 
    nomi <span class="sql-keyword">AS</span> bolim,
    xodimlar,
    <span class="sql-function">FORMAT</span>(byudjet, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> byudjet,
    <span class="sql-function">FORMAT</span>(yillik_maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> yillik_maosh,
    <span class="sql-function">FORMAT</span>(tushum, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> tushum,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">ROUND</span>(yillik_maosh * <span class="sql-number">100.0</span> / byudjet, <span class="sql-number">1</span>), <span class="sql-string">'%'</span>) <span class="sql-keyword">AS</span> byudjet_sarfi,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> tushum > yillik_maosh <span class="sql-keyword">THEN</span> <span class="sql-string">'üü¢ Foydali'</span>
        <span class="sql-keyword">WHEN</span> tushum > <span class="sql-number">0</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üü° Qisman'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'üî¥ Xarajat markazi'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> holat
<span class="sql-keyword">FROM</span> bolim_xarajat
<span class="sql-keyword">ORDER BY</span> tushum <span class="sql-keyword">DESC</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 8: MURAKKAB HISOBOT -->
<div class="card">
<h3><span class="step-number">8</span>Yakuniy murakkab hisobot</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Yakuniy hisobot</div></div>
<pre><code><span class="sql-comment">-- Kompaniya to'liq hisoboti ‚Äî barcha texnikalar birgalikda</span>
<span class="sql-cte">WITH</span> 
sotuv_stat <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT</span> xodim_id,
        <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni,
        <span class="sql-function">SUM</span>(miqdor * narx) <span class="sql-keyword">AS</span> jami,
        <span class="sql-function">SUM</span>(miqdor) <span class="sql-keyword">AS</span> dona,
        <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> shahar) <span class="sql-keyword">AS</span> shaharlar,
        <span class="sql-function">GROUP_CONCAT</span>(<span class="sql-keyword">DISTINCT</span> kategoriya <span class="sql-keyword">ORDER BY</span> kategoriya <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>) <span class="sql-keyword">AS</span> kat_list
    <span class="sql-keyword">FROM</span> sotuvlar <span class="sql-keyword">GROUP BY</span> xodim_id
),
umumiy <span class="sql-keyword">AS</span> (
    <span class="sql-keyword">SELECT SUM</span>(jami) <span class="sql-keyword">AS</span> total, <span class="sql-function">AVG</span>(jami) <span class="sql-keyword">AS</span> avg_jami <span class="sql-keyword">FROM</span> sotuv_stat
)
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">ROW_NUMBER</span>() <span class="sql-keyword">OVER</span> (<span class="sql-keyword">ORDER BY</span> <span class="sql-function">IFNULL</span>(ss.jami, <span class="sql-number">0</span>) <span class="sql-keyword">DESC</span>) <span class="sql-keyword">AS</span> <span class="sql-string">'#'</span>,
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, <span class="sql-function">UPPER</span>(x.familiya)) <span class="sql-keyword">AS</span> xodim,
    x.lavozim,
    b.nomi <span class="sql-keyword">AS</span> bolim,
    <span class="sql-function">FORMAT</span>(x.maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, x.ishga_kirgan, <span class="sql-function">CURDATE</span>()), <span class="sql-string">'y '</span>,
           <span class="sql-function">MOD</span>(<span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">MONTH</span>, x.ishga_kirgan, <span class="sql-function">CURDATE</span>()), <span class="sql-number">12</span>), <span class="sql-string">'m'</span>) <span class="sql-keyword">AS</span> staj,
    <span class="sql-function">IFNULL</span>(ss.soni, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">IFNULL</span>(ss.jami, <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_sotuv,
    <span class="sql-function">IFNULL</span>(<span class="sql-function">CONCAT</span>(<span class="sql-function">ROUND</span>(ss.jami * <span class="sql-number">100.0</span> / u.total, <span class="sql-number">1</span>), <span class="sql-string">'%'</span>), <span class="sql-string">'0%'</span>) <span class="sql-keyword">AS</span> ulush,
    <span class="sql-function">IFNULL</span>(ss.kat_list, <span class="sql-string">'‚Äî'</span>) <span class="sql-keyword">AS</span> kategoriyalar,
    <span class="sql-function">IFNULL</span>(
        <span class="sql-function">CONCAT</span>(m.ism, <span class="sql-string">' '</span>, m.familiya), <span class="sql-string">'‚Äî (rahbar)'</span>
    ) <span class="sql-keyword">AS</span> menejer,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">IFNULL</span>(ss.jami, <span class="sql-number">0</span>) > u.avg_jami <span class="sql-keyword">THEN</span> <span class="sql-string">'‚≠ê‚≠ê‚≠ê'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">IFNULL</span>(ss.jami, <span class="sql-number">0</span>) > <span class="sql-number">0</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚≠ê‚≠ê'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'‚Äî'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> baho
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-join">LEFT JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id
<span class="sql-join">LEFT JOIN</span> sotuv_stat ss <span class="sql-keyword">ON</span> x.id = ss.xodim_id
<span class="sql-join">LEFT JOIN</span> xodimlar m <span class="sql-keyword">ON</span> x.menejer_id = m.id
<span class="sql-keyword">CROSS JOIN</span> umumiy u
<span class="sql-keyword">ORDER BY</span> <span class="sql-function">IFNULL</span>(ss.jami, <span class="sql-number">0</span>) <span class="sql-keyword">DESC</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- QIYOSIY JADVAL -->
<h2><span class="icon">üìä</span>Murakkab so'rov texnikalari ‚Äî qiyoslash</h2>
<div class="card-flat">
<table>
<thead><tr><th>Texnika</th><th>Qachon ishlatiladi</th><th>Afzalligi</th><th>Kamchiligi</th></tr></thead>
<tbody>
<tr><td><strong>Subquery (WHERE)</strong></td><td>Oddiy filtrlash, mavjudlikni tekshirish</td><td>Oddiy, tushunish oson</td><td>Ko'p takrorda sekin</td></tr>
<tr><td><strong>Derived Table</strong></td><td>Oraliq natijalarni hisoblash</td><td>Moslashuvchan</td><td>Takroran ishlatib bo'lmaydi</td></tr>
<tr><td><strong>CTE (WITH)</strong></td><td>Murakkab, ko'p bosqichli so'rovlar</td><td>O'qish qulay, qayta ishlatish</td><td>Ayrim MBBT da sekinroq</td></tr>
<tr><td><strong>Recursive CTE</strong></td><td>Ierarxiya, daraxtsimon tuzilma</td><td>Yagona yechim</td><td>Cheksiz tsikl xavfi</td></tr>
<tr><td><strong>Window funksiyalar</strong></td><td>Reyting, kumulyativ, taqqoslash</td><td>Qatorlarni saqlab qoladi</td><td>Sintaksis murakkab</td></tr>
<tr><td><strong>EXISTS / NOT EXISTS</strong></td><td>Mavjudlikni tekshirish</td><td>IN dan tezroq (katta jadvallar)</td><td>Tushunish qiyinroq</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- NAZORAT SAVOLLARI -->
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card">
<ol>
<li>Skalyar subquery va jadval subquery orasidagi farq nimada?</li>
<li>Korrelyatsiyalangan subquery oddiy subquery dan nimasi bilan farq qiladi?</li>
<li><code>IN</code> va <code>EXISTS</code> orasida qachon qaysi birini ishlatish yaxshiroq?</li>
<li>CTE nima va u Derived Table dan nimasi bilan afzalroq?</li>
<li>Rekursiv CTE da cheksiz tsikldan qanday himoyalanish mumkin?</li>
<li><code>ROW_NUMBER()</code>, <code>RANK()</code> va <code>DENSE_RANK()</code> orasidagi farqni misol bilan tushuntiring.</li>
<li><code>LAG()</code> va <code>LEAD()</code> funksiyalari qanday holatlarda foydali?</li>
<li><code>ROWS BETWEEN ... AND ...</code> oyna freymi qanday ishlaydi?</li>
</ol>
</div>

<!-- AMALIY TOPSHIRIQLAR -->
<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>
<div class="card">
<ol>
<li><strong>Subquery</strong>: O'rtachadan yuqori maoshli xodimlarni va ularning bo'limlarini ko'rsating</li>
<li><strong>Korrelyatsiyalangan subquery</strong>: Har bir bo'limdagi eng ko'p maosh oluvchini toping</li>
<li><strong>EXISTS</strong>: Kamida bitta 30 mln dan katta sotuv qilgan xodimlarni toping</li>
<li><strong>CTE</strong>: 3 bosqichli CTE bilan xodim reytingi va umumiy ulushini hisoblang</li>
<li><strong>Recursive CTE</strong>: Xodimlar ierarxiyasini daraxt ko'rinishida chiqaring</li>
<li><strong>Window</strong>: Har bir xodimning bo'limidagi maosh reytingini va bo'lim o'rtachasidan farqini hisoblang</li>
<li><strong>LAG/LEAD</strong>: Oylik tushum o'sishini foizda hisoblang</li>
<li><strong>üí´ Bonus</strong>: CTE + Window + JOIN + CASE bilan to'liq kompaniya dashboardi yarating (xodim reytingi, sotuv ulushi, ABC tahlili, kumulyativ yig'indi)</li>
</ol>
</div>

<!-- HISOBOT SHABLONI -->
<h2><span class="icon">üìù</span>Hisobot shabloni</h2>
<table>
<thead><tr><th>Bo'lim</th><th>Tavsif</th></tr></thead>
<tbody>
<tr><td><strong>Ishdan maqsad</strong></td><td>Murakkab SQL so'rovlarni tuzish va amaliyotda qo'llash</td></tr>
<tr><td><strong>Ichki so'rovlar</strong></td><td>Skalyar, ustun, korrelyatsiyalangan subquery va EXISTS</td></tr>
<tr><td><strong>Derived Tables</strong></td><td>FROM ichidagi hosila jadvallar bilan ishlash</td></tr>
<tr><td><strong>CTE</strong></td><td>WITH bilan ko'p bosqichli so'rovlar va Recursive CTE</td></tr>
<tr><td><strong>Window funksiyalar</strong></td><td>ROW_NUMBER, RANK, LAG, LEAD, kumulyativ yig'indi</td></tr>
<tr><td><strong>Biznes senariylar</strong></td><td>ABC tahlili, byudjet tahlili, to'liq dashboard</td></tr>
<tr><td><strong>Xulosa</strong></td><td>O'rganilgan texnikalar va ularning amaliy qo'llanilishi</td></tr>
</tbody>
</table>

<div class="luxury-divider"></div>

<!-- XULOSA -->
<div class="card">
<h2><span class="icon">üèÜ</span>Xulosa</h2>
<p>Ushbu amaliy mashg'ulotni yakunlagan talaba quyidagi ko'nikmalarga ega bo'ladi:</p>
<ul>
<li><strong>Ichki so'rovlar:</strong> skalyar, ustun, jadval va korrelyatsiyalangan subquery yozish</li>
<li><strong>EXISTS / NOT EXISTS:</strong> mavjudlikni tekshirish va IN dan farqini tushunish</li>
<li><strong>Hosila jadvallar (Derived Tables):</strong> FROM ichida murakkab oraliq hisoblashlar</li>
<li><strong>CTE (WITH):</strong> ko'p bosqichli, o'qishga qulay murakkab so'rovlar</li>
<li><strong>Rekursiv CTE:</strong> ierarxik (daraxtsimon) ma'lumotlarni so'rash</li>
<li><strong>Oyna funksiyalar:</strong> ROW_NUMBER, RANK, DENSE_RANK, NTILE bilan reytinglash</li>
<li><strong>LAG / LEAD:</strong> qatorlararo taqqoslash va o'sish foizini hisoblash</li>
<li><strong>Kumulyativ yig'indi</strong> va <strong>harakatlantiruvchi o'rtacha</strong> (Moving Average)</li>
<li><strong>ABC tahlili</strong>, <strong>byudjet tahlili</strong> kabi real <strong>biznes senariylar</strong>ni SQL da yechish</li>
<li>Barcha texnikalarni birgalikda ishlatib <strong>murakkab biznes dashboardlar</strong> yaratish</li>
</ul>
</div>
</div>
</div>

<!-- ===== TUTORIAL 12 ===== -->
<div class="section-block" id="t12">
<div class="container">
<h1>12-amaliy mashg'ulot</h1>
<p class="subtitle">SQL tilida INDEX yaratish</p>
<div class="gold-line"></div>

<div class="meta-info">
    <strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp;
    <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp;
    <strong>üéØ Daraja:</strong> Yuqori
</div>

<!-- ===== NAZARIY QISM ===== -->
<h2><span class="icon">üìñ</span>Nazariy qism</h2>

<div class="card">
<h3><span class="icon">üìá</span>INDEX nima?</h3>
<p><strong>INDEX (indeks)</strong> ‚Äî bu ma'lumotlar bazasida qidiruv tezligini sezilarli darajada oshiruvchi maxsus ma'lumotlar tuzilmasidir. U xuddi kitob oxiridagi <strong>alfavit ko'rsatkich</strong>ga o'xshaydi: kerakli sahifani topish uchun butun kitobni varaqlab o'tirmasdan, ko'rsatkichdan kerakli so'zni topib, to'g'ridan-to'g'ri kerakli sahifaga o'tasiz.</p>

<div class="theory-box">
<p><strong>üí° Asosiy g'oya:</strong> Indekssiz MySQL <em>Full Table Scan</em> ‚Äî jadvaldagi <strong>barcha</strong> qatorlarni birma-bir tekshiradi. Indeks bilan esa <strong>B-Tree</strong> (balanslangan daraxt) tuzilmasi orqali kerakli ma'lumotni tezda topadi.</p>
</div>

<!-- B-Tree diagramma -->
<div class="index-diagram">
<svg viewBox="0 0 600 280" xmlns="http://www.w3.org/2000/svg" style="max-width:550px;">
    <!-- Ildiz -->
    <rect x="220" y="10" width="160" height="40" rx="10" fill="#1a1a1a"/>
    <text x="300" y="36" text-anchor="middle" fill="#d4af37" font-size="14" font-weight="bold">20 | 40 | 60</text>
    <!-- 2-daraja -->
    <rect x="40" y="90" width="120" height="36" rx="8" fill="#333"/>
    <text x="100" y="114" text-anchor="middle" fill="#d4af37" font-size="12">5 | 10 | 15</text>
    <rect x="240" y="90" width="120" height="36" rx="8" fill="#333"/>
    <text x="300" y="114" text-anchor="middle" fill="#d4af37" font-size="12">25 | 30 | 35</text>
    <rect x="440" y="90" width="120" height="36" rx="8" fill="#333"/>
    <text x="500" y="114" text-anchor="middle" fill="#d4af37" font-size="12">45 | 50 | 55</text>
    <!-- Barglar -->
    <rect x="10" y="170" width="70" height="30" rx="6" fill="#d4af37"/>
    <text x="45" y="190" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">1,2,3,4</text>
    <rect x="90" y="170" width="70" height="30" rx="6" fill="#d4af37"/>
    <text x="125" y="190" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">6,7,8,9</text>
    <rect x="180" y="170" width="80" height="30" rx="6" fill="#d4af37"/>
    <text x="220" y="190" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">11,12..15</text>
    <rect x="280" y="170" width="80" height="30" rx="6" fill="#d4af37"/>
    <text x="320" y="190" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">21,22..25</text>
    <rect x="380" y="170" width="80" height="30" rx="6" fill="#d4af37"/>
    <text x="420" y="190" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">31,32..35</text>
    <rect x="480" y="170" width="80" height="30" rx="6" fill="#d4af37"/>
    <text x="520" y="190" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">41,42..50</text>
    <!-- Chiziqlar -->
    <line x1="260" y1="50" x2="100" y2="90" stroke="#d4af37" stroke-width="1.5"/>
    <line x1="300" y1="50" x2="300" y2="90" stroke="#d4af37" stroke-width="1.5"/>
    <line x1="340" y1="50" x2="500" y2="90" stroke="#d4af37" stroke-width="1.5"/>
    <line x1="60" y1="126" x2="45" y2="170" stroke="#888" stroke-width="1"/>
    <line x1="100" y1="126" x2="125" y2="170" stroke="#888" stroke-width="1"/>
    <line x1="140" y1="126" x2="220" y2="170" stroke="#888" stroke-width="1"/>
    <line x1="260" y1="126" x2="320" y2="170" stroke="#888" stroke-width="1"/>
    <line x1="340" y1="126" x2="420" y2="170" stroke="#888" stroke-width="1"/>
    <line x1="500" y1="126" x2="520" y2="170" stroke="#888" stroke-width="1"/>
    <!-- Izoh -->
    <text x="300" y="235" text-anchor="middle" fill="#555" font-size="13" font-weight="600">B-Tree indeks tuzilmasi</text>
    <text x="300" y="258" text-anchor="middle" fill="#888" font-size="11">1 mln qatordan qidirish: ~20 operatsiya (Full Scan: 1,000,000 operatsiya)</text>
</svg>
</div>
</div>

<div class="card">
<h3><span class="icon">üìã</span>INDEX turlari</h3>

<div class="concept-grid">
    <div class="concept-card">
        <h4>üîë PRIMARY KEY</h4>
        <p>Asosiy kalit ‚Äî avtomatik yaratiladi, unikal, NULL bo'lmaydi</p>
    </div>
    <div class="concept-card">
        <h4>üîê UNIQUE</h4>
        <p>Unikal indeks ‚Äî takrorlanmas qiymatlar, NULL mumkin</p>
    </div>
    <div class="concept-card">
        <h4>üìá INDEX (B-Tree)</h4>
        <p>Oddiy indeks ‚Äî eng ko'p ishlatiladigan tur</p>
    </div>
    <div class="concept-card">
        <h4>üìù FULLTEXT</h4>
        <p>To'liq matn qidirish ‚Äî katta matn maydonlari uchun</p>
    </div>
    <div class="concept-card">
        <h4>üóÇ COMPOSITE</h4>
        <p>Kompozit indeks ‚Äî bir nechta ustun birgalikda</p>
    </div>
    <div class="concept-card">
        <h4>üìç SPATIAL</h4>
        <p>Fazoviy indeks ‚Äî geografik ma'lumotlar uchun</p>
    </div>
</div>

<table>
<thead><tr><th>INDEX turi</th><th>Yaratilish</th><th>NULL</th><th>Takror</th><th>Qachon ishlatiladi</th></tr></thead>
<tbody>
<tr><td><code>PRIMARY KEY</code></td><td>Avtomatik (jadval yaratishda)</td><td>‚ùå Yo'q</td><td>‚ùå Yo'q</td><td>Jadvalning asosiy identifikatori</td></tr>
<tr><td><code>UNIQUE INDEX</code></td><td>Qo'lda</td><td>‚úÖ Ha (1 ta)</td><td>‚ùå Yo'q</td><td>Email, telefon, pasport kabi unikal maydonlar</td></tr>
<tr><td><code>INDEX (B-Tree)</code></td><td>Qo'lda</td><td>‚úÖ Ha</td><td>‚úÖ Ha</td><td>WHERE, JOIN, ORDER BY da tez-tez ishlatiladigan ustunlar</td></tr>
<tr><td><code>FULLTEXT</code></td><td>Qo'lda</td><td>‚úÖ Ha</td><td>‚úÖ Ha</td><td>Katta matnlardan so'z qidirish (MATCH...AGAINST)</td></tr>
<tr><td><code>COMPOSITE</code></td><td>Qo'lda</td><td>‚úÖ Ha</td><td>‚úÖ Ha</td><td>Bir nechta ustun bo'yicha birgalikda qidirish</td></tr>
<tr><td><code>SPATIAL</code></td><td>Qo'lda</td><td>‚ùå Yo'q</td><td>‚úÖ Ha</td><td>Geografik koordinatalar (GIS)</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="icon">‚öñÔ∏è</span>INDEX afzalliklari va kamchiliklari</h3>

<table>
<thead><tr><th>‚úÖ Afzalliklari</th><th>‚ùå Kamchiliklari</th></tr></thead>
<tbody>
<tr><td>SELECT so'rovlarni tezlashtiradi</td><td>INSERT / UPDATE / DELETE ni sekinlashtiradi</td></tr>
<tr><td>WHERE filtrlashni tezlashtiradi</td><td>Qo'shimcha disk joy egallaydi</td></tr>
<tr><td>JOIN operatsiyalarni tezlashtiradi</td><td>Ko'p indeks = ko'proq xotira sarfi</td></tr>
<tr><td>ORDER BY saralashni tezlashtiradi</td><td>Indekslarni yangilash vaqt talab qiladi</td></tr>
<tr><td>GROUP BY guruhlashni tezlashtiradi</td><td>Noto'g'ri indeks samaradorlikni kamaytiradi</td></tr>
</tbody>
</table>

<div class="warning-box">
<p><strong>‚ö†Ô∏è Qoida:</strong> Har bir jadvalda <strong>5-7 ta</strong>dan ortiq indeks yaratmaslik tavsiya etiladi. Ortiqcha indekslar <code>INSERT</code> va <code>UPDATE</code> operatsiyalarni sezilarli sekinlashtiradi.</p>
</div>
</div>

<div class="card">
<h3><span class="icon">üìê</span>Qachon INDEX yaratish kerak?</h3>

<table>
<thead><tr><th>‚úÖ INDEX yarating</th><th>‚ùå INDEX yaratMANG</th></tr></thead>
<tbody>
<tr><td>WHERE da tez-tez ishlatiladigan ustunlar</td><td>Kam qatorli jadvallar (&lt; 1000)</td></tr>
<tr><td>JOIN da bog'lanadigan ustunlar (FK)</td><td>Tez-tez o'zgaradigan ustunlar</td></tr>
<tr><td>ORDER BY bilan saralanadigan ustunlar</td><td>Katta matnli ustunlar (TEXT, BLOB)</td></tr>
<tr><td>GROUP BY bilan guruhlangan ustunlar</td><td>Juda kam unikal qiymatli ustunlar (jinsi: E/A)</td></tr>
<tr><td>Yuqori selektivlikka ega ustunlar</td><td>Kam ishlatiladigan ustunlar</td></tr>
</tbody>
</table>

<div class="tip-box">
<p><strong>üí° Selektivlik:</strong> Ustundagi <strong>unikal qiymatlar soni / umumiy qatorlar soni</strong>. Qiymat 1 ga yaqinlashgani sari indeks samaradorligi ortadi. Masalan: <code>email</code> (yuqori selektivlik) ‚Äî yaxshi indeks; <code>jinsi</code> (past selektivlik) ‚Äî yomon indeks.</p>
</div>
</div>

<div class="luxury-divider"></div>

<!-- ===== AMALIY QISM ===== -->
<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<!-- BOSQICH 1 -->
<div class="card">
<h3><span class="step-number">1</span>Ma'lumotlar bazasini tayyorlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Bazani tayyorlash</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE IF NOT EXISTS</span> index_db;
<span class="sql-keyword">USE</span> index_db;

<span class="sql-comment">-- Xodimlar jadvali (katta hajmda)</span>
<span class="sql-keyword">CREATE TABLE</span> xodimlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    email <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    telefon <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">20</span>),
    bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    lavozim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    ishga_kirgan <span class="sql-keyword">DATE</span>,
    shahar <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">40</span>),
    jinsi <span class="sql-keyword">ENUM</span>(<span class="sql-string">'Erkak'</span>, <span class="sql-string">'Ayol'</span>),
    izoh <span class="sql-keyword">TEXT</span>
);

<span class="sql-comment">-- Buyurtmalar jadvali</span>
<span class="sql-keyword">CREATE TABLE</span> buyurtmalar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    xodim_id <span class="sql-keyword">INT</span>,
    mijoz_nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    mahsulot <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    kategoriya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    miqdor <span class="sql-keyword">INT</span>,
    narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    buyurtma_sana <span class="sql-keyword">DATE</span>,
    shahar <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">40</span>),
    holat <span class="sql-keyword">ENUM</span>(<span class="sql-string">'yangi'</span>, <span class="sql-string">'jarayonda'</span>, <span class="sql-string">'yetkazildi'</span>, <span class="sql-string">'bekor'</span>),
    <span class="sql-keyword">FOREIGN KEY</span> (xodim_id) <span class="sql-keyword">REFERENCES</span> xodimlar(id)
);

<span class="sql-comment">-- Maqolalar jadvali (FULLTEXT uchun)</span>
<span class="sql-keyword">CREATE TABLE</span> maqolalar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    sarlavha <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">200</span>) <span class="sql-keyword">NOT NULL</span>,
    matn <span class="sql-keyword">TEXT</span>,
    muallif <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    kategoriya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    yaratilgan <span class="sql-keyword">DATETIME DEFAULT CURRENT_TIMESTAMP</span>
);

<span class="sql-comment">-- Namuna ma'lumotlari: Xodimlar</span>
<span class="sql-keyword">INSERT INTO</span> xodimlar (ism, familiya, email, telefon, bolim, lavozim, maosh, ishga_kirgan, shahar, jinsi, izoh) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Alisher'</span>,  <span class="sql-string">'Karimov'</span>,   <span class="sql-string">'alisher@kompaniya.uz'</span>,  <span class="sql-string">'+998901234567'</span>, <span class="sql-string">'IT'</span>,        <span class="sql-string">'Senior dasturchi'</span>,   <span class="sql-number">12500000</span>, <span class="sql-string">'2020-03-15'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'Erkak'</span>, <span class="sql-string">'Python va Java dasturlash bo\'yicha katta tajribaga ega mutaxassis'</span>),
(<span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'Rahimova'</span>,  <span class="sql-string">'dilnoza@kompaniya.uz'</span>,  <span class="sql-string">'+998931112233'</span>, <span class="sql-string">'IT'</span>,        <span class="sql-string">'Junior dasturchi'</span>,   <span class="sql-number">6200000</span>,  <span class="sql-string">'2023-01-10'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'Ayol'</span>,  <span class="sql-string">'Frontend dasturlash va React bo\'yicha mutaxassis'</span>),
(<span class="sql-string">'Bobur'</span>,    <span class="sql-string">'Toshmatov'</span>, <span class="sql-string">'bobur@kompaniya.uz'</span>,    <span class="sql-string">'+998944445566'</span>, <span class="sql-string">'IT'</span>,        <span class="sql-string">'DevOps muhandis'</span>,    <span class="sql-number">10800000</span>, <span class="sql-string">'2021-06-20'</span>, <span class="sql-string">'Samarqand'</span>, <span class="sql-string">'Erkak'</span>, <span class="sql-string">'AWS bulut xizmatlari va Docker konteynerlash bo\'yicha sertifikatlangan'</span>),
(<span class="sql-string">'Gulnora'</span>,  <span class="sql-string">'Azimova'</span>,   <span class="sql-string">'gulnora@kompaniya.uz'</span>,  <span class="sql-string">'+998977778899'</span>, <span class="sql-string">'Moliya'</span>,    <span class="sql-string">'Bosh hisobchi'</span>,      <span class="sql-number">9800000</span>,  <span class="sql-string">'2019-09-01'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'Ayol'</span>,  <span class="sql-string">'ACCA sertifikati va 10 yillik buxgalteriya tajribasi'</span>),
(<span class="sql-string">'Sanjar'</span>,   <span class="sql-string">'Alimov'</span>,    <span class="sql-string">'sanjar@kompaniya.uz'</span>,   <span class="sql-string">'+998901001020'</span>, <span class="sql-string">'Moliya'</span>,    <span class="sql-string">'Hisobchi'</span>,           <span class="sql-number">7100000</span>,  <span class="sql-string">'2022-04-12'</span>, <span class="sql-string">'Buxoro'</span>,    <span class="sql-string">'Erkak'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-string">'Nodira'</span>,   <span class="sql-string">'Yusupova'</span>,  <span class="sql-string">'nodira@kompaniya.uz'</span>,   <span class="sql-string">'+998951234567'</span>, <span class="sql-string">'Marketing'</span>, <span class="sql-string">'Marketing menejer'</span>,  <span class="sql-number">8700000</span>,  <span class="sql-string">'2021-11-05'</span>, <span class="sql-string">'Namangan'</span>,  <span class="sql-string">'Ayol'</span>,  <span class="sql-string">'Raqamli marketing strategiyasi va SMM bo\'yicha tajribali menejer'</span>),
(<span class="sql-string">'Otabek'</span>,   <span class="sql-string">'Nazarov'</span>,   <span class="sql-string">'otabek@kompaniya.uz'</span>,   <span class="sql-string">'+998955556677'</span>, <span class="sql-string">'Marketing'</span>, <span class="sql-string">'SMM mutaxassis'</span>,     <span class="sql-number">5500000</span>,  <span class="sql-string">'2023-07-18'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'Erkak'</span>, <span class="sql-keyword">NULL</span>),
(<span class="sql-string">'Kamola'</span>,   <span class="sql-string">'Umarova'</span>,   <span class="sql-string">'kamola@kompaniya.uz'</span>,   <span class="sql-string">'+998903334455'</span>, <span class="sql-string">'Sotuv'</span>,     <span class="sql-string">'Sotuv boshlig\'i'</span>,   <span class="sql-number">13000000</span>, <span class="sql-string">'2019-08-22'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'Ayol'</span>,  <span class="sql-string">'B2B sotuv strategiyasi va mijozlar bilan munosabatlarni boshqarish tajribasi'</span>),
(<span class="sql-string">'Jasur'</span>,    <span class="sql-string">'Ergashev'</span>,  <span class="sql-string">'jasur@kompaniya.uz'</span>,    <span class="sql-string">'+998911122233'</span>, <span class="sql-string">'Sotuv'</span>,     <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">8000000</span>,  <span class="sql-string">'2022-01-15'</span>, <span class="sql-string">'Fargona'</span>,   <span class="sql-string">'Erkak'</span>, <span class="sql-string">'Korporativ mijozlar bilan ishlash bo\'yicha mutaxassis'</span>),
(<span class="sql-string">'Malika'</span>,   <span class="sql-string">'Tursunova'</span>, <span class="sql-string">'malika@kompaniya.uz'</span>,   <span class="sql-string">'+998998887766'</span>, <span class="sql-string">'Sotuv'</span>,     <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">7800000</span>,  <span class="sql-string">'2022-05-01'</span>, <span class="sql-string">'Andijon'</span>,   <span class="sql-string">'Ayol'</span>,  <span class="sql-keyword">NULL</span>);

<span class="sql-comment">-- Buyurtmalar (20 ta)</span>
<span class="sql-keyword">INSERT INTO</span> buyurtmalar (xodim_id, mijoz_nomi, mahsulot, kategoriya, miqdor, narx, buyurtma_sana, shahar, holat) <span class="sql-keyword">VALUES</span>
(<span class="sql-number">9</span>,  <span class="sql-string">'Texno Market'</span>,     <span class="sql-string">'Noutbuk HP'</span>,      <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">3</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-01-15'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Digital Solutions'</span>, <span class="sql-string">'Monitor Samsung'</span>, <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">8</span>,  <span class="sql-number">4500000</span>,  <span class="sql-string">'2024-01-20'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'SmartTech Group'</span>,   <span class="sql-string">'Server Dell'</span>,     <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">1</span>,  <span class="sql-number">45000000</span>, <span class="sql-string">'2024-02-05'</span>, <span class="sql-string">'Samarqand'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'BizHub Partners'</span>,   <span class="sql-string">'Printer HP'</span>,      <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">5</span>,  <span class="sql-number">8500000</span>,  <span class="sql-string">'2024-02-10'</span>, <span class="sql-string">'Buxoro'</span>,    <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'GameWorld'</span>,         <span class="sql-string">'Sichqoncha'</span>,      <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">30</span>, <span class="sql-number">850000</span>,   <span class="sql-string">'2024-02-14'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'CloudNet Services'</span>, <span class="sql-string">'Router Cisco'</span>,    <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">4</span>,  <span class="sql-number">12000000</span>, <span class="sql-string">'2024-03-01'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'jarayonda'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'EduTech Academy'</span>,   <span class="sql-string">'Noutbuk HP'</span>,      <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">10</span>, <span class="sql-number">18000000</span>, <span class="sql-string">'2024-03-10'</span>, <span class="sql-string">'Namangan'</span>,  <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'AudioPlus'</span>,         <span class="sql-string">'Quloqchin Sony'</span>,  <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">12</span>, <span class="sql-number">3500000</span>,  <span class="sql-string">'2024-03-15'</span>, <span class="sql-string">'Fargona'</span>,   <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'DataPro Systems'</span>,   <span class="sql-string">'SSD Samsung'</span>,     <span class="sql-string">'Komponentlar'</span>, <span class="sql-number">20</span>, <span class="sql-number">2800000</span>,  <span class="sql-string">'2024-03-20'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'jarayonda'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'NetCom Group'</span>,      <span class="sql-string">'Kabel Cat6'</span>,      <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">50</span>, <span class="sql-number">350000</span>,   <span class="sql-string">'2024-04-01'</span>, <span class="sql-string">'Samarqand'</span>, <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'OfficeMax'</span>,         <span class="sql-string">'Monitor Samsung'</span>, <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">15</span>, <span class="sql-number">4500000</span>,  <span class="sql-string">'2024-04-08'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'PrintHouse'</span>,        <span class="sql-string">'Printer HP'</span>,      <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">3</span>,  <span class="sql-number">8500000</span>,  <span class="sql-string">'2024-04-15'</span>, <span class="sql-string">'Buxoro'</span>,    <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'MegaHost'</span>,          <span class="sql-string">'Server Dell'</span>,     <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">2</span>,  <span class="sql-number">45000000</span>, <span class="sql-string">'2024-04-22'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'yangi'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'StreamPro'</span>,         <span class="sql-string">'Webcam Logitech'</span>, <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">8</span>,  <span class="sql-number">1500000</span>,  <span class="sql-string">'2024-05-03'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'yangi'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'ServerPark'</span>,        <span class="sql-string">'Router Cisco'</span>,    <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">6</span>,  <span class="sql-number">12000000</span>, <span class="sql-string">'2024-05-10'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'jarayonda'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'KeyMaster'</span>,         <span class="sql-string">'Klaviatura'</span>,      <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">40</span>, <span class="sql-number">1200000</span>,  <span class="sql-string">'2024-05-15'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'yetkazildi'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'BigData Corp'</span>,      <span class="sql-string">'Server Dell'</span>,     <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">1</span>,  <span class="sql-number">45000000</span>, <span class="sql-string">'2024-05-20'</span>, <span class="sql-string">'Samarqand'</span>, <span class="sql-string">'yangi'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'TechStore'</span>,         <span class="sql-string">'Noutbuk HP'</span>,      <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">4</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-06-01'</span>, <span class="sql-string">'Toshkent'</span>,  <span class="sql-string">'yangi'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'CompStore'</span>,         <span class="sql-string">'SSD Samsung'</span>,     <span class="sql-string">'Komponentlar'</span>, <span class="sql-number">15</span>, <span class="sql-number">2800000</span>,  <span class="sql-string">'2024-06-08'</span>, <span class="sql-string">'Buxoro'</span>,    <span class="sql-string">'jarayonda'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'SafeEnergy'</span>,        <span class="sql-string">'UPS APC'</span>,         <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">5</span>,  <span class="sql-number">7500000</span>,  <span class="sql-string">'2024-06-12'</span>, <span class="sql-string">'Andijon'</span>,   <span class="sql-string">'yetkazildi'</span>);

<span class="sql-comment">-- Maqolalar</span>
<span class="sql-keyword">INSERT INTO</span> maqolalar (sarlavha, matn, muallif, kategoriya) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'MySQL indekslar bo\'yicha qo\'llanma'</span>, <span class="sql-string">'MySQL ma\'lumotlar bazasida indekslar so\'rovlar tezligini oshirish uchun muhim vositadir. B-Tree indekslari eng keng tarqalgan bo\'lib, ular qidirish, saralash va guruhlash operatsiyalarini tezlashtiradi. To\'g\'ri indekslash strategiyasi dastur samaradorligini bir necha barobar oshirishi mumkin.'</span>, <span class="sql-string">'Alisher Karimov'</span>, <span class="sql-string">'Texnologiya'</span>),
(<span class="sql-string">'Python dasturlash asoslari'</span>, <span class="sql-string">'Python zamonaviy dasturlash tillaridan biri bo\'lib, uning sodda sintaksisi va kuchli kutubxonalari uni mashhur qilgan. Python sun\'iy intellekt, ma\'lumotlar tahlili va web dasturlash sohalarida keng qo\'llaniladi. Django va Flask frameworklari Python yordamida web ilovalar yaratishda eng ko\'p ishlatiladigan vositalardir.'</span>, <span class="sql-string">'Dilnoza Rahimova'</span>, <span class="sql-string">'Texnologiya'</span>),
(<span class="sql-string">'Raqamli marketing strategiyalari'</span>, <span class="sql-string">'Zamonaviy biznesda raqamli marketing muhim o\'rin tutadi. Ijtimoiy tarmoqlar orqali marketing, qidiruv tizimlarini optimallashtirish va kontentga asoslangan marketing eng samarali usullardan hisoblanadi. Muvaffaqiyatli marketing strategiyasi kompaniya daromadini sezilarli darajada oshirishi mumkin.'</span>, <span class="sql-string">'Nodira Yusupova'</span>, <span class="sql-string">'Marketing'</span>),
(<span class="sql-string">'Bulut texnologiyalari va DevOps'</span>, <span class="sql-string">'Bulut texnologiyalari IT infratuzilmasini boshqarishda inqilob yasadi. AWS, Azure va Google Cloud xizmatlari kompaniyalarga moslashuvchan va tejamkor yechimlar taqdim etadi. Docker konteynerlar va Kubernetes orkestratsiyasi zamonaviy dasturiy ta\'minotni joylashtirish standartiga aylandi.'</span>, <span class="sql-string">'Bobur Toshmatov'</span>, <span class="sql-string">'Texnologiya'</span>),
(<span class="sql-string">'Moliyaviy hisobot tayyorlash'</span>, <span class="sql-string">'Kompaniya moliyaviy hisoboti biznes qarorlar qabul qilishda asosiy ma\'lumot manbai hisoblanadi. Balans hisoboti, foyda va zarar hisoboti hamda pul oqimi hisoboti eng muhim moliyaviy hujjatlardir. ACCA va IFRS standartlari xalqaro miqyosda tan olingan hisobot standartlaridir.'</span>, <span class="sql-string">'Gulnora Azimova'</span>, <span class="sql-string">'Moliya'</span>);</code></pre>
</div>

<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE index_db</code></span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE xodimlar</code></span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE buyurtmalar</code></span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE maqolalar</code></span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 10 rows affected (0.01 sec) ‚Äî <code>INSERT INTO xodimlar</code></span>
<span class="rok-line">Records: 10 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 20 rows affected (0.01 sec) ‚Äî <code>INSERT INTO buyurtmalar</code></span>
<span class="rok-line">Records: 20 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 5 rows affected (0.01 sec) ‚Äî <code>INSERT INTO maqolalar</code></span>
<span class="rok-line">Records: 5 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>

</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 2: INDEKSLARNI YARATISH -->
<div class="card">
<h3><span class="step-number">2</span>INDEX yaratish usullari</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî INDEX operatsiyalari</div></div>
<pre><code><span class="sql-comment">-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="sql-comment">-- 1. ODDIY INDEX yaratish</span>
<span class="sql-comment">-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>

<span class="sql-comment">-- Usul 1: CREATE INDEX buyrug'i bilan</span>
<span class="sql-keyword">CREATE INDEX</span> <span class="sql-index">idx_xodimlar_bolim</span> <span class="sql-keyword">ON</span> xodimlar(bolim);

<span class="sql-comment">-- Usul 2: ALTER TABLE bilan</span>
<span class="sql-keyword">ALTER TABLE</span> xodimlar <span class="sql-keyword">ADD INDEX</span> <span class="sql-index">idx_xodimlar_shahar</span> (shahar);

<span class="sql-comment">-- Usul 3: Jadval yaratishda</span>
<span class="sql-comment">-- CREATE TABLE ... (... INDEX idx_nomi (ustun_nomi))</span>

<span class="sql-comment">-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="sql-comment">-- 2. UNIQUE INDEX yaratish</span>
<span class="sql-comment">-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>

<span class="sql-keyword">CREATE UNIQUE INDEX</span> <span class="sql-index">idx_xodimlar_email</span> <span class="sql-keyword">ON</span> xodimlar(email);
<span class="sql-keyword">CREATE UNIQUE INDEX</span> <span class="sql-index">idx_xodimlar_telefon</span> <span class="sql-keyword">ON</span> xodimlar(telefon);

<span class="sql-comment">-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="sql-comment">-- 3. COMPOSITE (ko'p ustunli) INDEX</span>
<span class="sql-comment">-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>

<span class="sql-keyword">CREATE INDEX</span> <span class="sql-index">idx_xodimlar_bolim_maosh</span> <span class="sql-keyword">ON</span> xodimlar(bolim, maosh);
<span class="sql-keyword">CREATE INDEX</span> <span class="sql-index">idx_buyurt_sana_holat</span> <span class="sql-keyword">ON</span> buyurtmalar(buyurtma_sana, holat);
<span class="sql-keyword">CREATE INDEX</span> <span class="sql-index">idx_buyurt_xodim_kat</span> <span class="sql-keyword">ON</span> buyurtmalar(xodim_id, kategoriya);

<span class="sql-comment">-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="sql-comment">-- 4. FULLTEXT INDEX yaratish</span>
<span class="sql-comment">-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>

<span class="sql-keyword">CREATE FULLTEXT INDEX</span> <span class="sql-index">idx_maqola_matn</span> <span class="sql-keyword">ON</span> maqolalar(sarlavha, matn);

<span class="sql-comment">-- Xodimlar izohiga ham FULLTEXT</span>
<span class="sql-keyword">ALTER TABLE</span> xodimlar <span class="sql-keyword">ADD FULLTEXT INDEX</span> <span class="sql-index">idx_xodimlar_izoh</span> (izoh);</code></pre>
</div>

<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE INDEX idx_xodimlar_bolim</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>ALTER TABLE ADD INDEX idx_xodimlar_shahar</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE UNIQUE INDEX idx_xodimlar_email</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE UNIQUE INDEX idx_xodimlar_telefon</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE INDEX idx_xodimlar_bolim_maosh</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE INDEX idx_buyurt_sana_holat</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE INDEX idx_buyurt_xodim_kat</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE FULLTEXT INDEX idx_maqola_matn</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>ALTER TABLE ADD FULLTEXT INDEX idx_xodimlar_izoh</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>

</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 3: INDEX MA'LUMOTLARINI KO'RISH -->
<div class="card">
<h3><span class="step-number">3</span>INDEX ma'lumotlarini ko'rish va boshqarish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî SHOW INDEX</div></div>
<pre><code><span class="sql-comment">-- 1. Jadvaldagi barcha indekslarni ko'rish</span>
<span class="sql-keyword">SHOW INDEX FROM</span> xodimlar;</code></pre>
</div>

<span class="result-label">üìã Asosiy maydonlar</span>
<table>
<thead><tr><th>Key_name</th><th>Column_name</th><th>Non_unique</th><th>Index_type</th></tr></thead>
<tbody>
<tr><td>PRIMARY</td><td>id</td><td>0</td><td>BTREE</td></tr>
<tr class="highlight-row"><td>idx_xodimlar_email</td><td>email</td><td>0</td><td>BTREE</td></tr>
<tr class="highlight-row"><td>idx_xodimlar_telefon</td><td>telefon</td><td>0</td><td>BTREE</td></tr>
<tr><td>idx_xodimlar_bolim</td><td>bolim</td><td>1</td><td>BTREE</td></tr>
<tr><td>idx_xodimlar_shahar</td><td>shahar</td><td>1</td><td>BTREE</td></tr>
<tr><td>idx_xodimlar_bolim_maosh</td><td>bolim</td><td>1</td><td>BTREE</td></tr>
<tr><td>idx_xodimlar_bolim_maosh</td><td>maosh</td><td>1</td><td>BTREE</td></tr>
<tr><td>idx_xodimlar_izoh</td><td>izoh</td><td>1</td><td>FULLTEXT</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî SHOW INDEX</div></div>
<pre><code><span class="sql-comment">-- 2. Buyurtmalar indekslari</span>
<span class="sql-keyword">SHOW INDEX FROM</span> buyurtmalar;

<span class="sql-comment">-- 3. Maqolalar indekslari</span>
<span class="sql-keyword">SHOW INDEX FROM</span> maqolalar;

<span class="sql-comment">-- 4. Jadval hajmi va indekslar hajmi</span>
<span class="sql-keyword">SELECT</span> 
    table_name <span class="sql-keyword">AS</span> jadval,
    <span class="sql-function">ROUND</span>(data_length / <span class="sql-number">1024</span>, <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> data_KB,
    <span class="sql-function">ROUND</span>(index_length / <span class="sql-number">1024</span>, <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> index_KB,
    <span class="sql-function">ROUND</span>((data_length + index_length) / <span class="sql-number">1024</span>, <span class="sql-number">1</span>) <span class="sql-keyword">AS</span> jami_KB,
    table_rows <span class="sql-keyword">AS</span> qatorlar
<span class="sql-keyword">FROM</span> information_schema.tables
<span class="sql-keyword">WHERE</span> table_schema = <span class="sql-string">'index_db'</span>;

<span class="sql-comment">-- 5. INDEX ni o'chirish</span>
<span class="sql-comment">-- DROP INDEX idx_nomi ON jadval_nomi;</span>
<span class="sql-comment">-- ALTER TABLE jadval_nomi DROP INDEX idx_nomi;</span></code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî SHOW INDEX FROM buyurtmalar</span>
<table>
<thead><tr><th>Key_name</th><th>Column_name</th><th>Non_unique</th><th>Index_type</th></tr></thead>
<tbody>
<tr><td>PRIMARY</td><td>id</td><td>0</td><td>BTREE</td></tr>
<tr><td>xodim_id</td><td>xodim_id</td><td>1</td><td>BTREE</td></tr>
<tr><td>idx_buyurt_sana_holat</td><td>buyurtma_sana</td><td>1</td><td>BTREE</td></tr>
<tr><td>idx_buyurt_sana_holat</td><td>holat</td><td>1</td><td>BTREE</td></tr>
<tr><td>idx_buyurt_xodim_kat</td><td>xodim_id</td><td>1</td><td>BTREE</td></tr>
<tr><td>idx_buyurt_xodim_kat</td><td>kategoriya</td><td>1</td><td>BTREE</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî SHOW INDEX FROM maqolalar</span>
<table>
<thead><tr><th>Key_name</th><th>Column_name</th><th>Non_unique</th><th>Index_type</th></tr></thead>
<tbody>
<tr><td>PRIMARY</td><td>id</td><td>0</td><td>BTREE</td></tr>
<tr><td>idx_maqola_matn</td><td>sarlavha</td><td>1</td><td>FULLTEXT</td></tr>
<tr><td>idx_maqola_matn</td><td>matn</td><td>1</td><td>FULLTEXT</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî Jadval hajmi va indekslar hajmi</span>
<table>
<thead><tr><th>jadval</th><th>data_KB</th><th>index_KB</th><th>jami_KB</th><th>qatorlar</th></tr></thead>
<tbody>
<tr><td>buyurtmalar</td><td>16.0</td><td>48.0</td><td>64.0</td><td>20</td></tr>
<tr><td>maqolalar</td><td>16.0</td><td>32.0</td><td>48.0</td><td>5</td></tr>
<tr><td>xodimlar</td><td>16.0</td><td>80.0</td><td>96.0</td><td>10</td></tr>
</tbody>
</table>

</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 4: EXPLAIN BILAN TAHLIL -->
<div class="card">
<h3><span class="step-number">4</span>EXPLAIN bilan so'rov rejasini tahlil qilish</h3>

<div class="info-box">
<p><strong>üìå EXPLAIN</strong> ‚Äî so'rov qanday bajarilishini ko'rsatadi: qaysi indeks ishlatiladi, nechta qator tekshiriladi, qanday usul tanlanadi.</p>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî EXPLAIN tahlili</div></div>
<pre><code><span class="sql-comment">-- 1. Indekssiz so'rov (Full Table Scan)</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">WHERE</span> lavozim = <span class="sql-string">'Sotuv menejeri'</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî type: ALL (Full Scan)</span>
<table>
<thead><tr><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td><strong style="color:red;">ALL</strong></td><td>NULL</td><td>NULL</td><td>10</td><td>Using where</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî EXPLAIN tahlili</div></div>
<pre><code><span class="sql-comment">-- 2. Indeksli so'rov (Index Scan)</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">WHERE</span> bolim = <span class="sql-string">'IT'</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî type: ref (Index ishlatildi!)</span>
<table>
<thead><tr><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td><strong style="color:green;">ref</strong></td><td>idx_xodimlar_bolim,idx_xodimlar_bolim_maosh</td><td>idx_xodimlar_bolim</td><td>3</td><td>NULL</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî EXPLAIN tahlili</div></div>
<pre><code><span class="sql-comment">-- 3. UNIQUE INDEX bilan (eng tez)</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">WHERE</span> email = <span class="sql-string">'alisher@kompaniya.uz'</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî type: const (Eng tez!)</span>
<table>
<thead><tr><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td><strong style="color:green;">const</strong></td><td>idx_xodimlar_email</td><td>idx_xodimlar_email</td><td>1</td><td>NULL</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî EXPLAIN tahlili</div></div>
<pre><code><span class="sql-comment">-- 4. Composite INDEX tahlili</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar 
<span class="sql-keyword">WHERE</span> bolim = <span class="sql-string">'IT'</span> <span class="sql-keyword">AND</span> maosh > <span class="sql-number">8000000</span>;

<span class="sql-comment">-- 5. JOIN so'rovda INDEX</span>
<span class="sql-keyword">EXPLAIN SELECT</span> x.ism, b.mahsulot, b.narx
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">INNER JOIN</span> buyurtmalar b <span class="sql-keyword">ON</span> x.id = b.xodim_id
<span class="sql-keyword">WHERE</span> b.kategoriya = <span class="sql-string">'Elektronika'</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî EXPLAIN 4: Composite INDEX (bolim + maosh)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>xodimlar</td><td><strong style="color:green;">range</strong></td><td>idx_xodimlar_bolim,idx_xodimlar_bolim_maosh</td><td>idx_xodimlar_bolim_maosh</td><td>2</td><td>Using index condition</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN 5: JOIN so'rovda INDEX</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>b</td><td><strong style="color:green;">ref</strong></td><td>xodim_id,idx_buyurt_xodim_kat</td><td>idx_buyurt_xodim_kat</td><td>5</td><td>Using where</td></tr>
<tr><td>1</td><td>SIMPLE</td><td>x</td><td><strong style="color:green;">eq_ref</strong></td><td>PRIMARY</td><td>PRIMARY</td><td>1</td><td>NULL</td></tr>
</tbody>
</table>

<div class="card-flat" style="margin-top: 25px;">
<h3>üìä EXPLAIN type qiymatlari (yaxshidan yomonga)</h3>
<div class="perf-bar"><span class="perf-bar-label"><code>system / const</code></span><div class="perf-bar-track"><div class="perf-bar-fill fill-fast" style="width:100%">Eng tez ‚Äî 1 ta qator</div></div></div>
<div class="perf-bar"><span class="perf-bar-label"><code>eq_ref</code></span><div class="perf-bar-track"><div class="perf-bar-fill fill-fast" style="width:90%">Juda tez ‚Äî UNIQUE JOIN</div></div></div>
<div class="perf-bar"><span class="perf-bar-label"><code>ref</code></span><div class="perf-bar-track"><div class="perf-bar-fill fill-fast" style="width:80%">Tez ‚Äî oddiy INDEX</div></div></div>
<div class="perf-bar"><span class="perf-bar-label"><code>range</code></span><div class="perf-bar-track"><div class="perf-bar-fill fill-medium" style="width:60%">O'rtacha ‚Äî diapazon qidirish</div></div></div>
<div class="perf-bar"><span class="perf-bar-label"><code>index</code></span><div class="perf-bar-track"><div class="perf-bar-fill fill-medium" style="width:40%">Sekin ‚Äî to'liq INDEX skan</div></div></div>
<div class="perf-bar"><span class="perf-bar-label"><code>ALL</code></span><div class="perf-bar-track"><div class="perf-bar-fill fill-slow" style="width:20%">Eng sekin ‚Äî Full Table Scan</div></div></div>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 5: COMPOSITE INDEX -->
<div class="card">
<h3><span class="step-number">5</span>Composite INDEX va chap prefiks qoidasi</h3>

<div class="warning-box">
<p><strong>‚ö†Ô∏è Chap prefiks qoidasi (Leftmost Prefix Rule):</strong> Composite indeks <code>(A, B, C)</code> faqat quyidagi kombinatsiyalarda ishlaydi: <code>A</code>, <code>A+B</code>, <code>A+B+C</code>. Faqat <code>B</code> yoki faqat <code>C</code> bo'yicha qidirishda <strong>ishlamaydi</strong>!</p>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Composite INDEX</div></div>
<pre><code><span class="sql-comment">-- Composite index yaratish</span>
<span class="sql-keyword">CREATE INDEX</span> <span class="sql-index">idx_buyurt_shahar_kat_holat</span> 
<span class="sql-keyword">ON</span> buyurtmalar(shahar, kategoriya, holat);

<span class="sql-comment">-- ‚úÖ INDEX ishlaydi: chap prefiks (shahar)</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> shahar = <span class="sql-string">'Toshkent'</span>;

<span class="sql-comment">-- ‚úÖ INDEX ishlaydi: chap prefiks (shahar + kategoriya)</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> shahar = <span class="sql-string">'Toshkent'</span> <span class="sql-keyword">AND</span> kategoriya = <span class="sql-string">'Elektronika'</span>;

<span class="sql-comment">-- ‚úÖ INDEX to'liq ishlaydi (shahar + kategoriya + holat)</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> shahar = <span class="sql-string">'Toshkent'</span> <span class="sql-keyword">AND</span> kategoriya = <span class="sql-string">'Elektronika'</span> <span class="sql-keyword">AND</span> holat = <span class="sql-string">'yetkazildi'</span>;

<span class="sql-comment">-- ‚ùå INDEX ISHLAMAYDI: chap prefikssiz (faqat kategoriya)</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> kategoriya = <span class="sql-string">'Elektronika'</span>;

<span class="sql-comment">-- ‚ùå INDEX ISHLAMAYDI: chap prefikssiz (faqat holat)</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> holat = <span class="sql-string">'yetkazildi'</span>;</code></pre>
</div>

<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE INDEX idx_buyurt_shahar_kat_holat</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: shahar (chap prefiks ishlaydi)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>buyurtmalar</td><td><strong style="color:green;">ref</strong></td><td>idx_buyurt_shahar_kat_holat</td><td>idx_buyurt_shahar_kat_holat</td><td>10</td><td>Using index condition</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: shahar + kategoriya (ishlaydi)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>buyurtmalar</td><td><strong style="color:green;">ref</strong></td><td>idx_buyurt_shahar_kat_holat</td><td>idx_buyurt_shahar_kat_holat</td><td>4</td><td>Using index condition</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: shahar + kategoriya + holat (to'liq ishlaydi)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>buyurtmalar</td><td><strong style="color:green;">ref</strong></td><td>idx_buyurt_shahar_kat_holat</td><td>idx_buyurt_shahar_kat_holat</td><td>2</td><td>Using index condition</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: faqat kategoriya (INDEX ishlamaydi!)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>buyurtmalar</td><td><strong style="color:red;">ALL</strong></td><td>NULL</td><td>NULL</td><td>20</td><td>Using where</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: faqat holat (INDEX ishlamaydi!)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>buyurtmalar</td><td><strong style="color:red;">ALL</strong></td><td>NULL</td><td>NULL</td><td>20</td><td>Using where</td></tr>
</tbody>
</table>

<div class="tip-box">
<p><strong>üí° Amaliy maslahat:</strong> Composite indeks yaratishda ustunlarni <strong>selektivlik bo'yicha</strong> (yuqoridan pastga) tartiblang. Eng ko'p unikal qiymatli ustun birinchi bo'lsin.</p>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 6: FULLTEXT INDEX -->
<div class="card">
<h3><span class="step-number">6</span>FULLTEXT INDEX bilan to'liq matn qidirish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî FULLTEXT INDEX</div></div>
<pre><code><span class="sql-comment">-- 1. Oddiy FULLTEXT qidirish ‚Äî NATURAL LANGUAGE MODE</span>
<span class="sql-keyword">SELECT</span> 
    sarlavha, muallif, kategoriya,
    <span class="sql-function">MATCH</span>(sarlavha, matn) <span class="sql-function">AGAINST</span>(<span class="sql-string">'dasturlash Python'</span>) <span class="sql-keyword">AS</span> relevantlik
<span class="sql-keyword">FROM</span> maqolalar
<span class="sql-keyword">WHERE</span> <span class="sql-function">MATCH</span>(sarlavha, matn) <span class="sql-function">AGAINST</span>(<span class="sql-string">'dasturlash Python'</span>)
<span class="sql-keyword">ORDER BY</span> relevantlik <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî FULLTEXT qidirish: 'dasturlash Python'</span>
<table>
<thead><tr><th>sarlavha</th><th>muallif</th><th>kategoriya</th><th>relevantlik</th></tr></thead>
<tbody>
<tr><td>Python dasturlash asoslari</td><td>Dilnoza Rahimova</td><td>Texnologiya</td><td>1.5271453857</td></tr>
<tr><td>MySQL indekslar bo'yicha qo'llanma</td><td>Alisher Karimov</td><td>Texnologiya</td><td>0.0906190574</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî FULLTEXT INDEX</div></div>
<pre><code><span class="sql-comment">-- 2. BOOLEAN MODE ‚Äî aniq qidirish</span>
<span class="sql-keyword">SELECT</span> sarlavha, muallif
<span class="sql-keyword">FROM</span> maqolalar
<span class="sql-keyword">WHERE</span> <span class="sql-function">MATCH</span>(sarlavha, matn) <span class="sql-function">AGAINST</span>(
    <span class="sql-string">'+marketing -moliya'</span> <span class="sql-keyword">IN BOOLEAN MODE</span>
);
<span class="sql-comment">-- + : so'z bo'lishi SHART</span>
<span class="sql-comment">-- - : so'z bo'lmasligi kerak</span>
<span class="sql-comment">-- * : so'z boshi bo'yicha qidirish</span></code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî BOOLEAN MODE: '+marketing -moliya'</span>
<table>
<thead><tr><th>sarlavha</th><th>muallif</th></tr></thead>
<tbody>
<tr><td>Raqamli marketing strategiyalari</td><td>Nodira Yusupova</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî FULLTEXT INDEX</div></div>
<pre><code><span class="sql-comment">-- 3. Xodimlar izohidan qidirish</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> xodim,
    lavozim,
    <span class="sql-function">LEFT</span>(izoh, <span class="sql-number">60</span>) <span class="sql-keyword">AS</span> izoh_qisqa,
    <span class="sql-function">ROUND</span>(<span class="sql-function">MATCH</span>(izoh) <span class="sql-function">AGAINST</span>(<span class="sql-string">'sertifikat tajriba'</span>), <span class="sql-number">2</span>) <span class="sql-keyword">AS</span> ball
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> <span class="sql-function">MATCH</span>(izoh) <span class="sql-function">AGAINST</span>(<span class="sql-string">'sertifikat tajriba'</span>)
<span class="sql-keyword">ORDER BY</span> ball <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî Xodimlar izohidan qidirish: 'sertifikat tajriba'</span>
<table>
<thead><tr><th>xodim</th><th>lavozim</th><th>izoh_qisqa</th><th>ball</th></tr></thead>
<tbody>
<tr><td>Gulnora Azimova</td><td>Bosh hisobchi</td><td>ACCA sertifikati va 10 yillik buxgalteriya tajribasi</td><td>1.43</td></tr>
<tr><td>Bobur Toshmatov</td><td>DevOps muhandis</td><td>AWS bulut xizmatlari va Docker konteynerlash bo'yicha se...</td><td>0.36</td></tr>
<tr><td>Alisher Karimov</td><td>Senior dasturchi</td><td>Python va Java dasturlash bo'yicha katta tajribaga ega m...</td><td>0.18</td></tr>
<tr><td>Nodira Yusupova</td><td>Marketing menejer</td><td>Raqamli marketing strategiyasi va SMM bo'yicha tajribali...</td><td>0.18</td></tr>
<tr><td>Kamola Umarova</td><td>Sotuv boshlig'i</td><td>B2B sotuv strategiyasi va mijozlar bilan munosabatlarni ...</td><td>0.18</td></tr>
<tr><td>Jasur Ergashev</td><td>Sotuv menejeri</td><td>Korporativ mijozlar bilan ishlash bo'yicha mutaxassis</td><td>0.00</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî FULLTEXT INDEX</div></div>
<pre><code><span class="sql-comment">-- 4. BOOLEAN MODE bilan murakkab qidirish</span>
<span class="sql-keyword">SELECT</span> sarlavha, muallif
<span class="sql-keyword">FROM</span> maqolalar
<span class="sql-keyword">WHERE</span> <span class="sql-function">MATCH</span>(sarlavha, matn) <span class="sql-function">AGAINST</span>(
    <span class="sql-string">'+texnologiya +bulut -marketing'</span> <span class="sql-keyword">IN BOOLEAN MODE</span>
);

<span class="sql-comment">-- 5. So'z boshi bo'yicha qidirish (*)</span>
<span class="sql-keyword">SELECT</span> sarlavha, muallif
<span class="sql-keyword">FROM</span> maqolalar
<span class="sql-keyword">WHERE</span> <span class="sql-function">MATCH</span>(sarlavha, matn) <span class="sql-function">AGAINST</span>(
    <span class="sql-string">'dastur*'</span> <span class="sql-keyword">IN BOOLEAN MODE</span>
);</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî BOOLEAN MODE: '+texnologiya +bulut -marketing'</span>
<table>
<thead><tr><th>sarlavha</th><th>muallif</th></tr></thead>
<tbody>
<tr><td>Bulut texnologiyalari va DevOps</td><td>Bobur Toshmatov</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî BOOLEAN MODE: 'dastur*' (so'z boshi)</span>
<table>
<thead><tr><th>sarlavha</th><th>muallif</th></tr></thead>
<tbody>
<tr><td>Python dasturlash asoslari</td><td>Dilnoza Rahimova</td></tr>
<tr><td>MySQL indekslar bo'yicha qo'llanma</td><td>Alisher Karimov</td></tr>
<tr><td>Bulut texnologiyalari va DevOps</td><td>Bobur Toshmatov</td></tr>
</tbody>
</table>

</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 7: INDEX OPTIMALLASHTIRISH -->
<div class="card">
<h3><span class="step-number">7</span>INDEX optimallashtirish va eng yaxshi amaliyotlar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî INDEX optimallash</div></div>
<pre><code><span class="sql-comment">-- 1. Covering Index ‚Äî barcha kerakli ma'lumot indeksda</span>
<span class="sql-keyword">CREATE INDEX</span> <span class="sql-index">idx_buyurt_covering</span> 
<span class="sql-keyword">ON</span> buyurtmalar(xodim_id, kategoriya, narx, miqdor);

<span class="sql-comment">-- Tezkor so'rov: MySQL jadvalga murojaat qilmasdan javob beradi</span>
<span class="sql-keyword">EXPLAIN SELECT</span> xodim_id, kategoriya, <span class="sql-function">SUM</span>(narx * miqdor)
<span class="sql-keyword">FROM</span> buyurtmalar
<span class="sql-keyword">WHERE</span> xodim_id = <span class="sql-number">9</span>
<span class="sql-keyword">GROUP BY</span> kategoriya;
<span class="sql-comment">-- Extra: Using index (Covering Index!)</span></code></pre>
</div>

<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE INDEX idx_buyurt_covering</code></span>
<span class="rok-line">Records: 0 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: Covering Index (Using index!)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>buyurtmalar</td><td><strong style="color:green;">ref</strong></td><td>idx_buyurt_xodim_kat,idx_buyurt_covering</td><td>idx_buyurt_covering</td><td>7</td><td><strong style="color:green;">Using index</strong></td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî INDEX optimallash</div></div>
<pre><code><span class="sql-comment">-- 2. INDEX ishlamaydigan holatlar</span>

<span class="sql-comment">-- ‚ùå Funksiya ichida ustun ‚Äî INDEX ishlamaydi</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> <span class="sql-function">YEAR</span>(ishga_kirgan) = <span class="sql-number">2020</span>;

<span class="sql-comment">-- ‚úÖ To'g'ri usul ‚Äî diapazon bilan</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> ishga_kirgan <span class="sql-keyword">BETWEEN</span> <span class="sql-string">'2020-01-01'</span> <span class="sql-keyword">AND</span> <span class="sql-string">'2020-12-31'</span>;

<span class="sql-comment">-- ‚ùå LIKE boshida % ‚Äî INDEX ishlamaydi</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> familiya <span class="sql-keyword">LIKE</span> <span class="sql-string">'%ov'</span>;

<span class="sql-comment">-- ‚úÖ LIKE oxirida % ‚Äî INDEX ishlaydi</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> familiya <span class="sql-keyword">LIKE</span> <span class="sql-string">'Kar%'</span>;

<span class="sql-comment">-- ‚ùå Tip konversiya ‚Äî INDEX ishlamaydi</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> telefon = <span class="sql-number">998901234567</span>;  <span class="sql-comment">-- son, VARCHAR emas!</span>

<span class="sql-comment">-- ‚úÖ To'g'ri tip</span>
<span class="sql-keyword">EXPLAIN SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> telefon = <span class="sql-string">'+998901234567'</span>;  <span class="sql-comment">-- satr</span></code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: YEAR(ishga_kirgan) = 2020 (INDEX ishlamaydi)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>xodimlar</td><td><strong style="color:red;">ALL</strong></td><td>NULL</td><td>NULL</td><td>10</td><td>Using where</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: BETWEEN diapazon (to'g'ri usul)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>xodimlar</td><td><strong style="color:red;">ALL</strong></td><td>NULL</td><td>NULL</td><td>10</td><td>Using where</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: LIKE '%ov' (INDEX ishlamaydi)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>xodimlar</td><td><strong style="color:red;">ALL</strong></td><td>NULL</td><td>NULL</td><td>10</td><td>Using where</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: LIKE 'Kar%' (INDEX ishlaydi)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>xodimlar</td><td><strong style="color:red;">ALL</strong></td><td>NULL</td><td>NULL</td><td>10</td><td>Using where</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: telefon = 998901234567 (tip konversiya, INDEX ishlamaydi)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>xodimlar</td><td><strong style="color:red;">ALL</strong></td><td>idx_xodimlar_telefon</td><td>NULL</td><td>10</td><td>Using where</td></tr>
</tbody>
</table>

<span class="result-label">üìã Natija ‚Äî EXPLAIN: telefon = '+998901234567' (to'g'ri tip, INDEX ishlaydi)</span>
<table>
<thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>possible_keys</th><th>key</th><th>rows</th><th>Extra</th></tr></thead>
<tbody>
<tr><td>1</td><td>SIMPLE</td><td>xodimlar</td><td><strong style="color:green;">const</strong></td><td>idx_xodimlar_telefon</td><td>idx_xodimlar_telefon</td><td>1</td><td>NULL</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî INDEX optimallash</div></div>
<pre><code><span class="sql-comment">-- 3. Indeks statistikasini yangilash</span>
<span class="sql-keyword">ANALYZE TABLE</span> xodimlar;
<span class="sql-keyword">ANALYZE TABLE</span> buyurtmalar;

<span class="sql-comment">-- 4. Ortiqcha indekslarni aniqlash</span>
<span class="sql-keyword">SELECT</span> 
    table_name, index_name, 
    <span class="sql-function">GROUP_CONCAT</span>(column_name <span class="sql-keyword">ORDER BY</span> seq_in_index) <span class="sql-keyword">AS</span> ustunlar,
    index_type, non_unique
<span class="sql-keyword">FROM</span> information_schema.statistics
<span class="sql-keyword">WHERE</span> table_schema = <span class="sql-string">'index_db'</span>
<span class="sql-keyword">GROUP BY</span> table_name, index_name, index_type, non_unique
<span class="sql-keyword">ORDER BY</span> table_name, index_name;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 8: MURAKKAB SENARIOLAR -->
<div class="card">
<h3><span class="step-number">8</span>Murakkab amaliy senariolar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy optimallash</div></div>
<pre><code><span class="sql-comment">-- 1. Sekin so'rovni aniqlash va optimallashtirish</span>
<span class="sql-comment">-- Sekin so'rov (indekssiz):</span>
<span class="sql-keyword">EXPLAIN SELECT</span> 
    x.ism, x.familiya, x.bolim,
    <span class="sql-function">COUNT</span>(b.id) <span class="sql-keyword">AS</span> buyurtmalar,
    <span class="sql-function">SUM</span>(b.miqdor * b.narx) <span class="sql-keyword">AS</span> jami
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">LEFT JOIN</span> buyurtmalar b <span class="sql-keyword">ON</span> x.id = b.xodim_id
<span class="sql-keyword">WHERE</span> b.buyurtma_sana >= <span class="sql-string">'2024-03-01'</span>
  <span class="sql-keyword">AND</span> b.holat = <span class="sql-string">'yetkazildi'</span>
<span class="sql-keyword">GROUP BY</span> x.id, x.ism, x.familiya, x.bolim;

<span class="sql-comment">-- Optimallashtirish: kerakli indeks yaratish</span>
<span class="sql-keyword">CREATE INDEX</span> <span class="sql-index">idx_buyurt_sana_holat_xodim</span> 
<span class="sql-keyword">ON</span> buyurtmalar(buyurtma_sana, holat, xodim_id);

<span class="sql-comment">-- Endi qaytadan EXPLAIN ‚Äî index ishlatilishini tekshirish</span>
<span class="sql-keyword">EXPLAIN SELECT</span> 
    x.ism, x.familiya, x.bolim,
    <span class="sql-function">COUNT</span>(b.id) <span class="sql-keyword">AS</span> buyurtmalar,
    <span class="sql-function">SUM</span>(b.miqdor * b.narx) <span class="sql-keyword">AS</span> jami
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">LEFT JOIN</span> buyurtmalar b <span class="sql-keyword">ON</span> x.id = b.xodim_id
<span class="sql-keyword">WHERE</span> b.buyurtma_sana >= <span class="sql-string">'2024-03-01'</span>
  <span class="sql-keyword">AND</span> b.holat = <span class="sql-string">'yetkazildi'</span>
<span class="sql-keyword">GROUP BY</span> x.id, x.ism, x.familiya, x.bolim;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy optimallash</div></div>
<pre><code><span class="sql-comment">-- 2. Indekslar hisoboti ‚Äî barcha jadvallar</span>
<span class="sql-keyword">SELECT</span> 
    s.table_name <span class="sql-keyword">AS</span> jadval,
    s.index_name <span class="sql-keyword">AS</span> indeks,
    <span class="sql-function">GROUP_CONCAT</span>(s.column_name <span class="sql-keyword">ORDER BY</span> s.seq_in_index) <span class="sql-keyword">AS</span> ustunlar,
    s.index_type <span class="sql-keyword">AS</span> turi,
    <span class="sql-keyword">IF</span>(s.non_unique = <span class="sql-number">0</span>, <span class="sql-string">'Unikal'</span>, <span class="sql-string">'Oddiy'</span>) <span class="sql-keyword">AS</span> unikallik,
    <span class="sql-function">ROUND</span>(
        (<span class="sql-keyword">SELECT</span> index_length <span class="sql-keyword">FROM</span> information_schema.tables t
         <span class="sql-keyword">WHERE</span> t.table_schema = s.table_schema 
           <span class="sql-keyword">AND</span> t.table_name = s.table_name) / <span class="sql-number">1024</span>, <span class="sql-number">1</span>
    ) <span class="sql-keyword">AS</span> index_hajmi_KB
<span class="sql-keyword">FROM</span> information_schema.statistics s
<span class="sql-keyword">WHERE</span> s.table_schema = <span class="sql-string">'index_db'</span>
<span class="sql-keyword">GROUP BY</span> s.table_name, s.index_name, s.index_type, s.non_unique, s.table_schema
<span class="sql-keyword">ORDER BY</span> s.table_name, s.index_name;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Amaliy optimallash</div></div>
<pre><code><span class="sql-comment">-- 3. INDEX o'chirish namunalari</span>
<span class="sql-comment">-- Ortiqcha yoki samarasiz indekslarni olib tashlash</span>
<span class="sql-keyword">DROP INDEX</span> <span class="sql-index">idx_buyurt_covering</span> <span class="sql-keyword">ON</span> buyurtmalar;

<span class="sql-comment">-- INDEX qayta yaratish (fragmentatsiyani bartaraf qilish)</span>
<span class="sql-keyword">ALTER TABLE</span> buyurtmalar <span class="sql-keyword">DROP INDEX</span> <span class="sql-index">idx_buyurt_sana_holat</span>;
<span class="sql-keyword">CREATE INDEX</span> <span class="sql-index">idx_buyurt_sana_holat</span> <span class="sql-keyword">ON</span> buyurtmalar(buyurtma_sana, holat);

<span class="sql-comment">-- Jadval optimizatsiyasi</span>
<span class="sql-keyword">OPTIMIZE TABLE</span> xodimlar;
<span class="sql-keyword">OPTIMIZE TABLE</span> buyurtmalar;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- QIYOSIY JADVAL -->
<h2><span class="icon">üìä</span>INDEX turlari ‚Äî qisqacha qiyoslash</h2>
<div class="card-flat">
<table>
<thead><tr><th>INDEX turi</th><th>Sintaksis</th><th>Qachon ishlatiladi</th><th>Samaradorlik</th></tr></thead>
<tbody>
<tr><td><strong>PRIMARY KEY</strong></td><td><code>PRIMARY KEY (id)</code></td><td>Jadval identifikatori</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
<tr><td><strong>UNIQUE</strong></td><td><code>CREATE UNIQUE INDEX</code></td><td>Email, telefon ‚Äî takrorsiz qiymatlar</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
<tr><td><strong>INDEX (B-Tree)</strong></td><td><code>CREATE INDEX</code></td><td>WHERE, JOIN, ORDER BY ustunlari</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
<tr><td><strong>COMPOSITE</strong></td><td><code>CREATE INDEX(a,b,c)</code></td><td>Ko'p ustunli filtrlash</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
<tr><td><strong>FULLTEXT</strong></td><td><code>CREATE FULLTEXT INDEX</code></td><td>Matn qidirish (MATCH...AGAINST)</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
<tr><td><strong>Covering</strong></td><td>Barcha ustunlarni o'z ichiga oladi</td><td>Tez-tez bajariladigan so'rovlar</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- NAZORAT SAVOLLARI -->
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card">
<ol>
<li>INDEX nima va u qanday ishlaydi? B-Tree tuzilmasini tushuntiring.</li>
<li><code>PRIMARY KEY</code>, <code>UNIQUE INDEX</code> va oddiy <code>INDEX</code> orasidagi farqlarni ayting.</li>
<li>Composite INDEX da "chap prefiks qoidasi" (Leftmost Prefix Rule) nima?</li>
<li><code>FULLTEXT INDEX</code> qanday ishlaydi? <code>BOOLEAN MODE</code> da <code>+</code>, <code>-</code>, <code>*</code> belgilari nima?</li>
<li><code>EXPLAIN</code> natijasidagi <code>type</code> qiymatlarini tushuntiring (ALL, ref, const).</li>
<li>INDEX qachon ishlamaydi? Kamida 3 ta holatni sanang.</li>
<li>"Covering Index" nima va nima uchun u tezroq?</li>
<li>Jadvalda nechta INDEX yaratish maqsadga muvofiq? Ortiqcha indekslarning zarari nima?</li>
</ol>
</div>

<!-- AMALIY TOPSHIRIQLAR -->
<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>
<div class="card">
<ol>
<li><code>xodimlar</code> jadvalida <strong>ishga_kirgan</strong> ustuniga oddiy INDEX yarating</li>
<li><code>buyurtmalar</code> jadvalida <strong>mijoz_nomi</strong> ga UNIQUE INDEX yarating va EXPLAIN bilan tekshiring</li>
<li><strong>Composite INDEX</strong> <code>(shahar, kategoriya)</code> yarating va chap prefiks qoidasini 3 ta EXPLAIN bilan isbotlang</li>
<li><code>maqolalar</code> jadvalida <strong>FULLTEXT</strong> qidirish bilan "texnologiya" so'zini qidiring</li>
<li><code>EXPLAIN</code> yordamida ikkita so'rovni (indeksli va indekssiz) taqqoslang va farqini izohlang</li>
<li>Jadvallaridagi <strong>barcha indekslar ro'yxati</strong>ni <code>SHOW INDEX</code> bilan chiqaring</li>
<li>Indekslar <strong>hajmini</strong> <code>information_schema</code> dan so'rab, hisobotini tuzing</li>
<li><strong>üí´ Bonus:</strong> Sekin so'rovni toping, unga mos INDEX yarating, EXPLAIN bilan oldin/keyin natijalarni taqqoslab, optimallashtirish hisobotini yozing</li>
</ol>
</div>

<!-- HISOBOT SHABLONI -->
<h2><span class="icon">üìù</span>Hisobot shabloni</h2>
<table>
<thead><tr><th>Bo'lim</th><th>Tavsif</th></tr></thead>
<tbody>
<tr><td><strong>Ishdan maqsad</strong></td><td>SQL INDEX tushunchasi, turlari va amaliy yaratishni o'rganish</td></tr>
<tr><td><strong>INDEX yaratish</strong></td><td>Oddiy, UNIQUE, COMPOSITE va FULLTEXT indekslar yaratish</td></tr>
<tr><td><strong>EXPLAIN tahlili</strong></td><td>So'rov rejasini o'rganish va indeks ta'sirini baholash</td></tr>
<tr><td><strong>Composite INDEX</strong></td><td>Chap prefiks qoidasi va ko'p ustunli indekslar</td></tr>
<tr><td><strong>FULLTEXT</strong></td><td>To'liq matn qidirish (NATURAL LANGUAGE, BOOLEAN MODE)</td></tr>
<tr><td><strong>Optimallashtirish</strong></td><td>INDEX ishlamaydigan holatlar, Covering Index, eng yaxshi amaliyotlar</td></tr>
<tr><td><strong>Xulosa</strong></td><td>O'rganilgan texnikalar va indekslash strategiyasi</td></tr>
</tbody>
</table>

<div class="luxury-divider"></div>

<!-- XULOSA -->
<div class="card">
<h2><span class="icon">üèÜ</span>Xulosa</h2>
<p>Ushbu amaliy mashg'ulotni yakunlagan talaba quyidagi ko'nikmalarga ega bo'ladi:</p>
<ul>
<li><strong>INDEX tushunchasi:</strong> B-Tree tuzilmasi va Full Table Scan dan farqi</li>
<li><strong>INDEX turlari:</strong> PRIMARY KEY, UNIQUE, INDEX, COMPOSITE, FULLTEXT yaratish</li>
<li><strong>INDEX yaratish usullari:</strong> CREATE INDEX, ALTER TABLE, jadval ichida</li>
<li><strong>EXPLAIN:</strong> so'rov rejasini tahlil qilish va type qiymatlarini tushunish</li>
<li><strong>Composite INDEX:</strong> chap prefiks qoidasini bilish va to'g'ri qo'llash</li>
<li><strong>FULLTEXT:</strong> NATURAL LANGUAGE va BOOLEAN MODE da to'liq matn qidirish</li>
<li><strong>Optimallashtirish:</strong> Covering Index, indeks ishlamaydigan holatlar, ANALYZE va OPTIMIZE</li>
<li><strong>Selektivlik:</strong> indeks samaradorligini baholash va to'g'ri ustunlarni tanlash</li>
<li>Sekin so'rovlarni aniqlash va <strong>INDEX yordamida tezlashtirish</strong></li>
</ul>
</div>
</div>
</div>

<!-- ===== TUTORIAL 13 ===== -->
<div class="section-block" id="t13">
<div class="container">
<h1>13-amaliy mashg'ulot</h1>
<p class="subtitle">Tasavvur, VIEW yaratish va undan foydalanish</p>
<div class="gold-line"></div>

<div class="meta-info">
    <strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp;
    <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp;
    <strong>üéØ Daraja:</strong> O'rta-yuqori
</div>

<!-- ===== NAZARIY QISM ===== -->
<h2><span class="icon">üìñ</span>Nazariy qism</h2>

<div class="card">
<h3><span class="icon">üëÅÔ∏è</span>VIEW (Tasavvur) nima?</h3>
<p><strong>VIEW</strong> ‚Äî bu saqlangan SQL so'rov asosida yaratiladigan <em>virtual jadval</em>dir. U o'zida ma'lumot saqlamaydi, balki har safar murojaat qilinganda asosiy jadvallardan ma'lumotni qayta so'raydi. VIEW ni oddiy jadval kabi <code>SELECT</code>, ba'zi hollarda <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> bilan ishlatish mumkin.</p>

<div class="theory-box">
<p><strong>üí° Sodda qilib aytganda:</strong> VIEW ‚Äî bu murakkab so'rovga berilgan <strong>nom</strong>. Har safar murakkab so'rovni yozish o'rniga, unga nom berib, keyin shu nom bilan chaqirasiz. Xuddi dasturlashdagi <strong>funksiya</strong>ga o'xshaydi.</p>
</div>

<!-- VIEW diagramma -->
<div class="view-diagram">
<svg viewBox="0 0 600 220" xmlns="http://www.w3.org/2000/svg" style="max-width:560px;">
    <!-- Jadvallar -->
    <rect x="10" y="20" width="130" height="80" rx="12" fill="#1a1a1a"/>
    <text x="75" y="50" text-anchor="middle" fill="#d4af37" font-size="12" font-weight="bold">üìã xodimlar</text>
    <text x="75" y="72" text-anchor="middle" fill="#aaa" font-size="10">id, ism, maosh...</text>

    <rect x="160" y="20" width="130" height="80" rx="12" fill="#1a1a1a"/>
    <text x="225" y="50" text-anchor="middle" fill="#d4af37" font-size="12" font-weight="bold">üìã bolimlar</text>
    <text x="225" y="72" text-anchor="middle" fill="#aaa" font-size="10">id, nomi, shahar...</text>

    <rect x="310" y="20" width="130" height="80" rx="12" fill="#1a1a1a"/>
    <text x="375" y="50" text-anchor="middle" fill="#d4af37" font-size="12" font-weight="bold">üìã sotuvlar</text>
    <text x="375" y="72" text-anchor="middle" fill="#aaa" font-size="10">id, summa, sana...</text>

    <!-- Strelkalar -->
    <path d="M75 100 L75 125 Q75 135 85 135 L225 135 Q235 135 235 145 L235 150" stroke="#d4af37" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
    <path d="M225 100 L225 150" stroke="#d4af37" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
    <path d="M375 100 L375 125 Q375 135 365 135 L235 135 Q225 135 225 145 L225 150" stroke="#d4af37" stroke-width="2" fill="none"/>

    <!-- SQL blok -->
    <rect x="140" y="120" width="170" height="30" rx="8" fill="#333"/>
    <text x="225" y="140" text-anchor="middle" fill="#50fa7b" font-size="10" font-weight="bold">SELECT + JOIN + WHERE</text>

    <!-- VIEW -->
    <rect x="130" y="155" width="190" height="55" rx="15" fill="none" stroke="#d4af37" stroke-width="2.5" stroke-dasharray="8,4"/>
    <text x="225" y="178" text-anchor="middle" fill="#d4af37" font-size="14" font-weight="bold">üëÅÔ∏è VIEW</text>
    <text x="225" y="198" text-anchor="middle" fill="#888" font-size="10">Virtual jadval ‚Äî ma'lumot saqlamaydi</text>

    <!-- Foydalanuvchi -->
    <rect x="460" y="155" width="120" height="50" rx="12" fill="#d4af37"/>
    <text x="520" y="178" text-anchor="middle" fill="#fff" font-size="11" font-weight="bold">üë§ Foydalanuvchi</text>
    <text x="520" y="195" text-anchor="middle" fill="#fff" font-size="10">SELECT * FROM view</text>

    <line x1="320" y1="180" x2="460" y2="180" stroke="#d4af37" stroke-width="2" stroke-dasharray="6,3"/>
    <polygon points="455,175 465,180 455,185" fill="#d4af37"/>

    <defs><marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 0, 8 3, 0 6" fill="#d4af37"/></marker></defs>
</svg>
</div>
</div>

<div class="card">
<h3><span class="icon">üìê</span>VIEW turlari va xususiyatlari</h3>

<div class="concept-grid">
    <div class="concept-card">
        <h4>üìñ Oddiy VIEW</h4>
        <p>Bitta jadval, oddiy SELECT ‚Äî yangilash mumkin</p>
    </div>
    <div class="concept-card">
        <h4>üîó Murakkab VIEW</h4>
        <p>JOIN, GROUP BY, agregat ‚Äî faqat o'qish</p>
    </div>
    <div class="concept-card">
        <h4>üîí WITH CHECK OPTION</h4>
        <p>VIEW sharti doirasida yangilashni nazorat qiladi</p>
    </div>
    <div class="concept-card">
        <h4>üìä Materialized (MySQL da yo'q)</h4>
        <p>Ma'lumotni keshlaydigan VIEW ‚Äî ayrim MBBT larda mavjud</p>
    </div>
</div>

<table>
<thead><tr><th>Xususiyat</th><th>Oddiy VIEW</th><th>Murakkab VIEW</th></tr></thead>
<tbody>
<tr><td><strong>Jadvallar soni</strong></td><td>1 ta jadval</td><td>2+ jadval (JOIN)</td></tr>
<tr><td><strong>Agregat funksiyalar</strong></td><td>Yo'q</td><td>Bor (SUM, AVG...)</td></tr>
<tr><td><strong>GROUP BY</strong></td><td>Yo'q</td><td>Bor</td></tr>
<tr><td><strong>DISTINCT</strong></td><td>Yo'q</td><td>Bor</td></tr>
<tr><td><strong>SELECT (o'qish)</strong></td><td>‚úÖ Ha</td><td>‚úÖ Ha</td></tr>
<tr><td><strong>INSERT</strong></td><td>‚úÖ Mumkin</td><td>‚ùå Mumkin emas</td></tr>
<tr><td><strong>UPDATE</strong></td><td>‚úÖ Mumkin</td><td>‚ùå Mumkin emas</td></tr>
<tr><td><strong>DELETE</strong></td><td>‚úÖ Mumkin</td><td>‚ùå Mumkin emas</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="icon">‚öñÔ∏è</span>VIEW afzalliklari</h3>

<table>
<thead><tr><th>Afzallik</th><th>Tushuntirish</th><th>Misol</th></tr></thead>
<tbody>
<tr><td><strong>üîí Xavfsizlik</strong></td><td>Maxfiy ustunlarni yashirish</td><td>Maosh ko'rinmaydigan xodimlar VIEW</td></tr>
<tr><td><strong>‚ôªÔ∏è Qayta ishlatish</strong></td><td>Murakkab so'rovni bir marta yozish</td><td>Hisobot VIEW ni ko'p joyda chaqirish</td></tr>
<tr><td><strong>üìñ Soddalik</strong></td><td>Murakkab JOIN larni yashirish</td><td>Foydalanuvchi uchun oddiy jadval ko'rinishi</td></tr>
<tr><td><strong>üèó Abstraktsiya</strong></td><td>Jadval tuzilmasi o'zgarganda VIEW saqlanadi</td><td>Dastur kodi VIEW ga bog'langan, jadvalga emas</td></tr>
<tr><td><strong>üìä Standartlashtirish</strong></td><td>Bir xil hisoblash formulalarini ta'minlash</td><td>Sof foyda, soliq ‚Äî hamma uchun bir xil</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- ===== AMALIY QISM ===== -->
<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<!-- BOSQICH 1 -->
<div class="card">
<h3><span class="step-number">1</span>Ma'lumotlar bazasini tayyorlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Bazani tayyorlash</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE IF NOT EXISTS</span> view_db;
<span class="sql-keyword">USE</span> view_db;

<span class="sql-comment">-- Bo'limlar</span>
<span class="sql-keyword">CREATE TABLE</span> bolimlar (
    id <span class="sql-keyword">INT PRIMARY KEY</span>,
    nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">60</span>),
    shahar <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">40</span>),
    byudjet <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">15</span>,<span class="sql-number">2</span>)
);

<span class="sql-comment">-- Xodimlar</span>
<span class="sql-keyword">CREATE TABLE</span> xodimlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    email <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    telefon <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">20</span>),
    bolim_id <span class="sql-keyword">INT</span>,
    lavozim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    ishga_kirgan <span class="sql-keyword">DATE</span>,
    holat <span class="sql-keyword">ENUM</span>(<span class="sql-string">'faol'</span>, <span class="sql-string">'ta\'til'</span>, <span class="sql-string">'bo\'shatilgan'</span>) <span class="sql-keyword">DEFAULT</span> <span class="sql-string">'faol'</span>,
    <span class="sql-keyword">FOREIGN KEY</span> (bolim_id) <span class="sql-keyword">REFERENCES</span> bolimlar(id)
);

<span class="sql-comment">-- Sotuvlar</span>
<span class="sql-keyword">CREATE TABLE</span> sotuvlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    xodim_id <span class="sql-keyword">INT</span>,
    mahsulot <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    kategoriya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    miqdor <span class="sql-keyword">INT</span>,
    narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    sotuv_sana <span class="sql-keyword">DATE</span>,
    shahar <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">40</span>),
    <span class="sql-keyword">FOREIGN KEY</span> (xodim_id) <span class="sql-keyword">REFERENCES</span> xodimlar(id)
);

<span class="sql-comment">-- Ma'lumotlarni kiritish</span>
<span class="sql-keyword">INSERT INTO</span> bolimlar <span class="sql-keyword">VALUES</span>
(<span class="sql-number">1</span>, <span class="sql-string">'IT bo\'limi'</span>,        <span class="sql-string">'Toshkent'</span>,   <span class="sql-number">500000000</span>),
(<span class="sql-number">2</span>, <span class="sql-string">'Moliya bo\'limi'</span>,    <span class="sql-string">'Toshkent'</span>,   <span class="sql-number">300000000</span>),
(<span class="sql-number">3</span>, <span class="sql-string">'Marketing bo\'limi'</span>, <span class="sql-string">'Samarqand'</span>,  <span class="sql-number">200000000</span>),
(<span class="sql-number">4</span>, <span class="sql-string">'Sotuv bo\'limi'</span>,     <span class="sql-string">'Toshkent'</span>,   <span class="sql-number">400000000</span>),
(<span class="sql-number">5</span>, <span class="sql-string">'Logistika bo\'limi'</span>, <span class="sql-string">'Buxoro'</span>,     <span class="sql-number">150000000</span>);

<span class="sql-keyword">INSERT INTO</span> xodimlar (ism, familiya, email, telefon, bolim_id, lavozim, maosh, ishga_kirgan, holat) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Alisher'</span>,  <span class="sql-string">'Karimov'</span>,   <span class="sql-string">'alisher@kompaniya.uz'</span>,  <span class="sql-string">'+998901234567'</span>, <span class="sql-number">1</span>, <span class="sql-string">'IT direktor'</span>,        <span class="sql-number">15000000</span>, <span class="sql-string">'2018-03-15'</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'Rahimova'</span>,  <span class="sql-string">'dilnoza@kompaniya.uz'</span>,  <span class="sql-string">'+998931112233'</span>, <span class="sql-number">1</span>, <span class="sql-string">'Senior dasturchi'</span>,   <span class="sql-number">12000000</span>, <span class="sql-string">'2020-01-10'</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-string">'Bobur'</span>,    <span class="sql-string">'Toshmatov'</span>, <span class="sql-string">'bobur@kompaniya.uz'</span>,    <span class="sql-string">'+998944445566'</span>, <span class="sql-number">1</span>, <span class="sql-string">'Junior dasturchi'</span>,   <span class="sql-number">6500000</span>,  <span class="sql-string">'2023-06-20'</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-string">'Gulnora'</span>,  <span class="sql-string">'Azimova'</span>,   <span class="sql-string">'gulnora@kompaniya.uz'</span>,  <span class="sql-string">'+998977778899'</span>, <span class="sql-number">2</span>, <span class="sql-string">'Bosh hisobchi'</span>,      <span class="sql-number">11000000</span>, <span class="sql-string">'2019-09-01'</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-string">'Sanjar'</span>,   <span class="sql-string">'Alimov'</span>,    <span class="sql-string">'sanjar@kompaniya.uz'</span>,   <span class="sql-string">'+998901001020'</span>, <span class="sql-number">2</span>, <span class="sql-string">'Hisobchi'</span>,           <span class="sql-number">7500000</span>,  <span class="sql-string">'2022-04-12'</span>, <span class="sql-string">'ta\'til'</span>),
(<span class="sql-string">'Nodira'</span>,   <span class="sql-string">'Yusupova'</span>,  <span class="sql-string">'nodira@kompaniya.uz'</span>,   <span class="sql-string">'+998951234567'</span>, <span class="sql-number">3</span>, <span class="sql-string">'Marketing menejer'</span>,  <span class="sql-number">9000000</span>,  <span class="sql-string">'2021-11-05'</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-string">'Otabek'</span>,   <span class="sql-string">'Nazarov'</span>,   <span class="sql-string">'otabek@kompaniya.uz'</span>,   <span class="sql-string">'+998955556677'</span>, <span class="sql-number">3</span>, <span class="sql-string">'SMM mutaxassis'</span>,     <span class="sql-number">5500000</span>,  <span class="sql-string">'2023-07-18'</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-string">'Kamola'</span>,   <span class="sql-string">'Umarova'</span>,   <span class="sql-string">'kamola@kompaniya.uz'</span>,   <span class="sql-string">'+998903334455'</span>, <span class="sql-number">4</span>, <span class="sql-string">'Sotuv boshlig\'i'</span>,   <span class="sql-number">13000000</span>, <span class="sql-string">'2019-08-22'</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-string">'Jasur'</span>,    <span class="sql-string">'Ergashev'</span>,  <span class="sql-string">'jasur@kompaniya.uz'</span>,    <span class="sql-string">'+998911122233'</span>, <span class="sql-number">4</span>, <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">8000000</span>,  <span class="sql-string">'2022-01-15'</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-string">'Malika'</span>,   <span class="sql-string">'Tursunova'</span>, <span class="sql-string">'malika@kompaniya.uz'</span>,   <span class="sql-string">'+998998887766'</span>, <span class="sql-number">4</span>, <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">7800000</span>,  <span class="sql-string">'2022-05-01'</span>, <span class="sql-string">'faol'</span>),
(<span class="sql-string">'Farrux'</span>,   <span class="sql-string">'Jumayev'</span>,   <span class="sql-string">'farrux@kompaniya.uz'</span>,   <span class="sql-string">'+998912223344'</span>, <span class="sql-number">4</span>, <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">8200000</span>,  <span class="sql-string">'2021-09-10'</span>, <span class="sql-string">'bo\'shatilgan'</span>),
(<span class="sql-string">'Shaxlo'</span>,   <span class="sql-string">'Mirzayeva'</span>, <span class="sql-string">'shaxlo@kompaniya.uz'</span>,   <span class="sql-string">'+998935556677'</span>, <span class="sql-number">5</span>, <span class="sql-string">'Logistika menejeri'</span>, <span class="sql-number">7000000</span>,  <span class="sql-string">'2023-02-20'</span>, <span class="sql-string">'faol'</span>);

<span class="sql-comment">-- Sotuvlar (25 ta)</span>
<span class="sql-keyword">INSERT INTO</span> sotuvlar (xodim_id, mahsulot, kategoriya, miqdor, narx, sotuv_sana, shahar) <span class="sql-keyword">VALUES</span>
(<span class="sql-number">9</span>,  <span class="sql-string">'Noutbuk HP'</span>,       <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">3</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-01-10'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Monitor Samsung'</span>,  <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">8</span>,  <span class="sql-number">4500000</span>,  <span class="sql-string">'2024-01-15'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Server Dell'</span>,      <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">1</span>,  <span class="sql-number">45000000</span>, <span class="sql-string">'2024-01-20'</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Klaviatura'</span>,       <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">20</span>, <span class="sql-number">1200000</span>,  <span class="sql-string">'2024-02-05'</span>, <span class="sql-string">'Buxoro'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Printer HP'</span>,       <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">5</span>,  <span class="sql-number">8500000</span>,  <span class="sql-string">'2024-02-10'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Router Cisco'</span>,     <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">4</span>,  <span class="sql-number">12000000</span>, <span class="sql-string">'2024-02-15'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Noutbuk HP'</span>,       <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">5</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-03-01'</span>, <span class="sql-string">'Namangan'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Quloqchin Sony'</span>,   <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">12</span>, <span class="sql-number">3500000</span>,  <span class="sql-string">'2024-03-10'</span>, <span class="sql-string">'Fargona'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'SSD Samsung'</span>,      <span class="sql-string">'Komponentlar'</span>, <span class="sql-number">20</span>, <span class="sql-number">2800000</span>,  <span class="sql-string">'2024-03-15'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Server Dell'</span>,      <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">2</span>,  <span class="sql-number">45000000</span>, <span class="sql-string">'2024-03-20'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Sichqoncha'</span>,       <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">30</span>, <span class="sql-number">850000</span>,   <span class="sql-string">'2024-04-02'</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Noutbuk HP'</span>,       <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">4</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-04-08'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Webcam Logitech'</span>,  <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">8</span>,  <span class="sql-number">1500000</span>,  <span class="sql-string">'2024-04-15'</span>, <span class="sql-string">'Buxoro'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Monitor Samsung'</span>,  <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">10</span>, <span class="sql-number">4500000</span>,  <span class="sql-string">'2024-04-22'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Printer HP'</span>,       <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">3</span>,  <span class="sql-number">8500000</span>,  <span class="sql-string">'2024-04-28'</span>, <span class="sql-string">'Namangan'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Klaviatura'</span>,       <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">25</span>, <span class="sql-number">1200000</span>,  <span class="sql-string">'2024-05-05'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Router Cisco'</span>,     <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">3</span>,  <span class="sql-number">12000000</span>, <span class="sql-string">'2024-05-12'</span>, <span class="sql-string">'Fargona'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Server Dell'</span>,      <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">1</span>,  <span class="sql-number">45000000</span>, <span class="sql-string">'2024-05-18'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'UPS APC'</span>,          <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">5</span>,  <span class="sql-number">7500000</span>,  <span class="sql-string">'2024-05-25'</span>, <span class="sql-string">'Buxoro'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Noutbuk HP'</span>,       <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">6</span>,  <span class="sql-number">18000000</span>, <span class="sql-string">'2024-06-01'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'SSD Samsung'</span>,      <span class="sql-string">'Komponentlar'</span>, <span class="sql-number">10</span>, <span class="sql-number">2800000</span>,  <span class="sql-string">'2024-06-08'</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Quloqchin Sony'</span>,   <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">7</span>,  <span class="sql-number">3500000</span>,  <span class="sql-string">'2024-06-12'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">10</span>, <span class="sql-string">'Klaviatura'</span>,       <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">35</span>, <span class="sql-number">1200000</span>,  <span class="sql-string">'2024-06-18'</span>, <span class="sql-string">'Samarqand'</span>),
(<span class="sql-number">8</span>,  <span class="sql-string">'Webcam Logitech'</span>,  <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">10</span>, <span class="sql-number">1500000</span>,  <span class="sql-string">'2024-06-22'</span>, <span class="sql-string">'Toshkent'</span>),
(<span class="sql-number">9</span>,  <span class="sql-string">'Monitor Samsung'</span>,  <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">5</span>,  <span class="sql-number">4500000</span>,  <span class="sql-string">'2024-06-28'</span>, <span class="sql-string">'Namangan'</span>);</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 2: ODDIY VIEW -->
<div class="card">
<h3><span class="step-number">2</span>Oddiy VIEW yaratish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CREATE VIEW</div></div>
<pre><code><span class="sql-comment">-- 1. Xodimlar umumiy ro'yxati (maosh va shaxsiy ma'lumotlar YASHIRILGAN)</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_xodimlar_umumiy</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    id,
    <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> toliq_ism,
    lavozim,
    bolim_id,
    ishga_kirgan,
    holat
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> holat != <span class="sql-string">'bo\'shatilgan'</span>;

<span class="sql-comment">-- Foydalanish ‚Äî oddiy jadval kabi!</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_xodimlar_umumiy</span>;
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_xodimlar_umumiy</span> <span class="sql-keyword">WHERE</span> holat = <span class="sql-string">'faol'</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>id</th><th>toliq_ism</th><th>lavozim</th><th>bolim_id</th><th>ishga_kirgan</th><th>holat</th></tr></thead>
<tbody>
<tr><td>1</td><td>Alisher Karimov</td><td>IT direktor</td><td>1</td><td>2018-03-15</td><td>faol</td></tr>
<tr><td>2</td><td>Dilnoza Rahimova</td><td>Senior dasturchi</td><td>1</td><td>2020-01-10</td><td>faol</td></tr>
<tr><td>3</td><td>Bobur Toshmatov</td><td>Junior dasturchi</td><td>1</td><td>2023-06-20</td><td>faol</td></tr>
<tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CREATE VIEW</div></div>
<pre><code><span class="sql-comment">-- 2. Faqat faol xodimlar VIEW</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_faol_xodimlar</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> id, ism, familiya, email, bolim_id, lavozim, maosh, ishga_kirgan
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> holat = <span class="sql-string">'faol'</span>;

<span class="sql-comment">-- 3. Yuqori maoshli xodimlar VIEW</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_yuqori_maosh</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> id, ism, familiya, lavozim,
    <span class="sql-function">FORMAT</span>(maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh_formatlangan
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> maosh >= <span class="sql-number">10000000</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 3: JOIN BILAN VIEW -->
<div class="card">
<h3><span class="step-number">3</span>JOIN asosidagi VIEW lar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab VIEW</div></div>
<pre><code><span class="sql-comment">-- 1. Xodimlar profili ‚Äî bo'lim ma'lumotlari bilan</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_xodim_profil</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    x.id,
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> xodim,
    x.lavozim,
    b.nomi <span class="sql-keyword">AS</span> bolim,
    b.shahar <span class="sql-keyword">AS</span> bolim_shahri,
    <span class="sql-function">FORMAT</span>(x.maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    x.ishga_kirgan,
    <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, x.ishga_kirgan, <span class="sql-function">CURDATE</span>()) <span class="sql-keyword">AS</span> staj_yil,
    x.holat
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id;

<span class="sql-comment">-- Foydalanish</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_xodim_profil</span> <span class="sql-keyword">WHERE</span> bolim = <span class="sql-string">'IT bo\'limi'</span>;
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_xodim_profil</span> <span class="sql-keyword">WHERE</span> staj_yil >= <span class="sql-number">3</span> <span class="sql-keyword">ORDER BY</span> staj_yil <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab VIEW</div></div>
<pre><code><span class="sql-comment">-- 2. Sotuvlar batafsil ‚Äî xodim va bo'lim bilan</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_sotuv_batafsil</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    s.id <span class="sql-keyword">AS</span> sotuv_id,
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> sotuvchi,
    b.nomi <span class="sql-keyword">AS</span> bolim,
    s.mahsulot,
    s.kategoriya,
    s.miqdor,
    <span class="sql-function">FORMAT</span>(s.narx, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> narx,
    <span class="sql-function">FORMAT</span>(s.miqdor * s.narx, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_summa,
    s.sotuv_sana,
    s.shahar
<span class="sql-keyword">FROM</span> sotuvlar s
<span class="sql-keyword">INNER JOIN</span> xodimlar x <span class="sql-keyword">ON</span> s.xodim_id = x.id
<span class="sql-keyword">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id;

<span class="sql-comment">-- Oddiy jadval kabi filtrlash, saralash</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_sotuv_batafsil</span> <span class="sql-keyword">WHERE</span> kategoriya = <span class="sql-string">'Elektronika'</span>;
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_sotuv_batafsil</span> <span class="sql-keyword">WHERE</span> sotuvchi = <span class="sql-string">'Jasur Ergashev'</span> <span class="sql-keyword">ORDER BY</span> sotuv_sana;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 4: AGREGAT VIEW -->
<div class="card">
<h3><span class="step-number">4</span>Agregat funksiyali VIEW lar (hisobot VIEW)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Agregat VIEW</div></div>
<pre><code><span class="sql-comment">-- 1. Bo'lim statistikasi VIEW</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_bolim_statistika</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    b.nomi <span class="sql-keyword">AS</span> bolim,
    b.shahar,
    <span class="sql-function">COUNT</span>(x.id) <span class="sql-keyword">AS</span> xodimlar_soni,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(x.maosh)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MIN</span>(x.maosh), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> min_maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">MAX</span>(x.maosh), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> max_maosh,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(x.maosh) * <span class="sql-number">12</span>, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> yillik_maosh_fondi,
    <span class="sql-function">FORMAT</span>(b.byudjet, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> byudjet,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">SUM</span>(x.maosh) * <span class="sql-number">12</span> * <span class="sql-number">100.0</span> / b.byudjet, <span class="sql-number">1</span>), <span class="sql-string">'%'</span>) <span class="sql-keyword">AS</span> byudjet_sarfi
<span class="sql-keyword">FROM</span> bolimlar b
<span class="sql-keyword">LEFT JOIN</span> xodimlar x <span class="sql-keyword">ON</span> b.id = x.bolim_id <span class="sql-keyword">AND</span> x.holat = <span class="sql-string">'faol'</span>
<span class="sql-keyword">GROUP BY</span> b.id, b.nomi, b.shahar, b.byudjet;

<span class="sql-comment">-- Oddiy qilib chaqirish</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_bolim_statistika</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>bolim</th><th>shahar</th><th>xodimlar</th><th>ort_maosh</th><th>min_maosh</th><th>max_maosh</th><th>byudjet_sarfi</th></tr></thead>
<tbody>
<tr><td>IT bo'limi</td><td>Toshkent</td><td>3</td><td>11,166,667</td><td>6,500,000</td><td>15,000,000</td><td>80.4%</td></tr>
<tr><td>Moliya bo'limi</td><td>Toshkent</td><td>1</td><td>11,000,000</td><td>11,000,000</td><td>11,000,000</td><td>44.0%</td></tr>
<tr><td>Marketing bo'limi</td><td>Samarqand</td><td>2</td><td>7,250,000</td><td>5,500,000</td><td>9,000,000</td><td>87.0%</td></tr>
<tr><td>Sotuv bo'limi</td><td>Toshkent</td><td>3</td><td>9,600,000</td><td>7,800,000</td><td>13,000,000</td><td>86.4%</td></tr>
<tr><td>Logistika bo'limi</td><td>Buxoro</td><td>1</td><td>7,000,000</td><td>7,000,000</td><td>7,000,000</td><td>56.0%</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Agregat VIEW</div></div>
<pre><code><span class="sql-comment">-- 2. Sotuvchi reytingi VIEW</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_sotuvchi_reyting</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> sotuvchi,
    <span class="sql-function">COUNT</span>(s.id) <span class="sql-keyword">AS</span> sotuvlar_soni,
    <span class="sql-function">SUM</span>(s.miqdor) <span class="sql-keyword">AS</span> jami_dona,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(s.miqdor * s.narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_sotuv,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> s.kategoriya) <span class="sql-keyword">AS</span> kategoriyalar,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> s.shahar) <span class="sql-keyword">AS</span> shaharlar,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">SUM</span>(s.miqdor * s.narx) > <span class="sql-number">200000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•á Oltin'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">SUM</span>(s.miqdor * s.narx) > <span class="sql-number">100000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'ü•à Kumush'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'ü•â Bronza'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> daraja
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">INNER JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> x.id = s.xodim_id
<span class="sql-keyword">GROUP BY</span> x.id, x.ism, x.familiya;

<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_sotuvchi_reyting</span> <span class="sql-keyword">ORDER BY</span> sotuvlar_soni <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Agregat VIEW</div></div>
<pre><code><span class="sql-comment">-- 3. Oylik sotuv hisoboti VIEW</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_oylik_hisobot</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>) <span class="sql-keyword">AS</span> oy,
    <span class="sql-function">MONTHNAME</span>(sotuv_sana) <span class="sql-keyword">AS</span> oy_nomi,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">SUM</span>(miqdor) <span class="sql-keyword">AS</span> jami_dona,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_tushum,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(miqdor * narx)), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> ort_sotuv,
    <span class="sql-function">COUNT</span>(<span class="sql-keyword">DISTINCT</span> xodim_id) <span class="sql-keyword">AS</span> sotuvchilar
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> <span class="sql-function">DATE_FORMAT</span>(sotuv_sana, <span class="sql-string">'%Y-%m'</span>), <span class="sql-function">MONTHNAME</span>(sotuv_sana);

<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_oylik_hisobot</span> <span class="sql-keyword">ORDER BY</span> oy;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Agregat VIEW</div></div>
<pre><code><span class="sql-comment">-- 4. Kategoriya tahlili VIEW</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_kategoriya_tahlil</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    kategoriya,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">SUM</span>(miqdor) <span class="sql-keyword">AS</span> jami_dona,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_tushum,
    <span class="sql-function">CONCAT</span>(<span class="sql-function">ROUND</span>(
        <span class="sql-function">SUM</span>(miqdor * narx) * <span class="sql-number">100.0</span> / (<span class="sql-keyword">SELECT SUM</span>(miqdor * narx) <span class="sql-keyword">FROM</span> sotuvlar), <span class="sql-number">1</span>
    ), <span class="sql-string">'%'</span>) <span class="sql-keyword">AS</span> ulushi,
    <span class="sql-function">GROUP_CONCAT</span>(<span class="sql-keyword">DISTINCT</span> mahsulot <span class="sql-keyword">ORDER BY</span> mahsulot <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>) <span class="sql-keyword">AS</span> mahsulotlar
<span class="sql-keyword">FROM</span> sotuvlar
<span class="sql-keyword">GROUP BY</span> kategoriya;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 5: VIEW NI VIEW ICHIDA -->
<div class="card">
<h3><span class="step-number">5</span>VIEW lar ustida so'rov va ichma-ich VIEW</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî VIEW ustida so‚Äòrov</div></div>
<pre><code><span class="sql-comment">-- 1. VIEW ustida agregat so'rov</span>
<span class="sql-keyword">SELECT</span> 
    daraja,
    <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> soni
<span class="sql-keyword">FROM</span> <span class="sql-view">v_sotuvchi_reyting</span>
<span class="sql-keyword">GROUP BY</span> daraja;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî VIEW ustida so‚Äòrov</div></div>
<pre><code><span class="sql-comment">-- 2. VIEW ustida VIEW ‚Äî ko'p darajali abstraktsiya</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_toshkent_xodimlar</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_xodim_profil</span>
<span class="sql-keyword">WHERE</span> bolim_shahri = <span class="sql-string">'Toshkent'</span> <span class="sql-keyword">AND</span> holat = <span class="sql-string">'faol'</span>;

<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_toshkent_xodimlar</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî VIEW ustida so‚Äòrov</div></div>
<pre><code><span class="sql-comment">-- 3. VIEW ni JOIN da ishlatish</span>
<span class="sql-keyword">SELECT</span> 
    p.xodim,
    p.bolim,
    p.maosh,
    p.staj_yil,
    <span class="sql-function">IFNULL</span>(r.jami_tushum, <span class="sql-string">'0'</span>) <span class="sql-keyword">AS</span> sotuv_tushumi,
    <span class="sql-function">IFNULL</span>(r.daraja, <span class="sql-string">'‚Äî Sotuvchi emas'</span>) <span class="sql-keyword">AS</span> daraja
<span class="sql-keyword">FROM</span> <span class="sql-view">v_xodim_profil</span> p
<span class="sql-keyword">LEFT JOIN</span> <span class="sql-view">v_sotuvchi_reyting</span> r <span class="sql-keyword">ON</span> p.xodim = r.sotuvchi
<span class="sql-keyword">ORDER BY</span> r.jami_tushum <span class="sql-keyword">DESC</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 6: UPDATABLE VIEW -->
<div class="card">
<h3><span class="step-number">6</span>Yangilanuvchi (Updatable) VIEW va WITH CHECK OPTION</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Yangilanuvchi VIEW</div></div>
<pre><code><span class="sql-comment">-- 1. Yangilanuvchi VIEW yaratish</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_it_xodimlar</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> id, ism, familiya, lavozim, maosh, holat
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> bolim_id = <span class="sql-number">1</span>;

<span class="sql-comment">-- VIEW orqali UPDATE</span>
<span class="sql-keyword">UPDATE</span> <span class="sql-view">v_it_xodimlar</span> <span class="sql-keyword">SET</span> maosh = <span class="sql-number">7000000</span> <span class="sql-keyword">WHERE</span> id = <span class="sql-number">3</span>;

<span class="sql-comment">-- Asl jadvalda tekshirish</span>
<span class="sql-keyword">SELECT</span> id, ism, maosh <span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">WHERE</span> id = <span class="sql-number">3</span>;</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî maosh yangilandi!</span>
<table>
<thead><tr><th>id</th><th>ism</th><th>maosh</th></tr></thead>
<tbody><tr class="highlight-row"><td>3</td><td>Bobur</td><td>7,000,000</td></tr></tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Yangilanuvchi VIEW</div></div>
<pre><code><span class="sql-comment">-- 2. WITH CHECK OPTION ‚Äî VIEW shartini nazorat qilish</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_faol_it</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> id, ism, familiya, maosh, holat
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> bolim_id = <span class="sql-number">1</span> <span class="sql-keyword">AND</span> holat = <span class="sql-string">'faol'</span>
<span class="sql-operator">WITH CHECK OPTION</span>;

<span class="sql-comment">-- ‚úÖ Bu ishlaydi (shart doirasida)</span>
<span class="sql-keyword">UPDATE</span> <span class="sql-view">v_faol_it</span> <span class="sql-keyword">SET</span> maosh = <span class="sql-number">7200000</span> <span class="sql-keyword">WHERE</span> id = <span class="sql-number">3</span>;

<span class="sql-comment">-- ‚ùå Bu XATO beradi ‚Äî holat o'zgarganda VIEW shartiga mos kelmaydi</span>
<span class="sql-comment">-- UPDATE v_faol_it SET holat = 'bo\'shatilgan' WHERE id = 3;</span>
<span class="sql-comment">-- ERROR: CHECK OPTION failed 'view_db.v_faol_it'</span></code></pre>
</div>

<div class="warning-box">
<p><strong>‚ö†Ô∏è WITH CHECK OPTION:</strong> VIEW orqali kiritilgan yoki yangilangan ma'lumot VIEW ning <code>WHERE</code> shartiga mos kelishini ta'minlaydi. Agar mos kelmasa ‚Äî xato beradi va o'zgarishga ruxsat bermaydi.</p>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Yangilanuvchi VIEW</div></div>
<pre><code><span class="sql-comment">-- 3. VIEW orqali INSERT (oddiy VIEW da)</span>
<span class="sql-keyword">INSERT INTO</span> <span class="sql-view">v_it_xodimlar</span> (id, ism, familiya, lavozim, maosh, holat)
<span class="sql-keyword">VALUES</span> (<span class="sql-number">13</span>, <span class="sql-string">'Sardor'</span>, <span class="sql-string">'Tojiyev'</span>, <span class="sql-string">'Stajyor'</span>, <span class="sql-number">3500000</span>, <span class="sql-string">'faol'</span>);

<span class="sql-comment">-- Tekshirish</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">WHERE</span> id = <span class="sql-number">13</span>;

<span class="sql-comment">-- VIEW orqali DELETE</span>
<span class="sql-keyword">DELETE FROM</span> <span class="sql-view">v_it_xodimlar</span> <span class="sql-keyword">WHERE</span> id = <span class="sql-number">13</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 7: VIEW BOSHQARISH -->
<div class="card">
<h3><span class="step-number">7</span>VIEW larni boshqarish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî VIEW boshqarish</div></div>
<pre><code><span class="sql-comment">-- 1. Barcha VIEW larni ko'rish</span>
<span class="sql-keyword">SHOW FULL TABLES WHERE</span> Table_type = <span class="sql-string">'VIEW'</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>Tables_in_view_db</th><th>Table_type</th></tr></thead>
<tbody>
<tr><td>v_bolim_statistika</td><td>VIEW</td></tr>
<tr><td>v_faol_it</td><td>VIEW</td></tr>
<tr><td>v_faol_xodimlar</td><td>VIEW</td></tr>
<tr><td>v_it_xodimlar</td><td>VIEW</td></tr>
<tr><td>v_kategoriya_tahlil</td><td>VIEW</td></tr>
<tr><td>v_oylik_hisobot</td><td>VIEW</td></tr>
<tr><td>v_sotuv_batafsil</td><td>VIEW</td></tr>
<tr><td>v_sotuvchi_reyting</td><td>VIEW</td></tr>
<tr><td>v_toshkent_xodimlar</td><td>VIEW</td></tr>
<tr><td>v_xodim_profil</td><td>VIEW</td></tr>
<tr><td>v_xodimlar_umumiy</td><td>VIEW</td></tr>
<tr><td>v_yuqori_maosh</td><td>VIEW</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî VIEW boshqarish</div></div>
<pre><code><span class="sql-comment">-- 2. VIEW tuzilmasini ko'rish</span>
<span class="sql-keyword">SHOW CREATE VIEW</span> <span class="sql-view">v_xodim_profil</span>;

<span class="sql-comment">-- 3. information_schema dan VIEW haqida</span>
<span class="sql-keyword">SELECT</span> 
    table_name <span class="sql-keyword">AS</span> view_nomi,
    is_updatable <span class="sql-keyword">AS</span> yangilanuvchi,
    check_option
<span class="sql-keyword">FROM</span> information_schema.views
<span class="sql-keyword">WHERE</span> table_schema = <span class="sql-string">'view_db'</span>
<span class="sql-keyword">ORDER BY</span> table_name;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî VIEW boshqarish</div></div>
<pre><code><span class="sql-comment">-- 4. VIEW ni o'zgartirish (CREATE OR REPLACE)</span>
<span class="sql-keyword">CREATE OR REPLACE VIEW</span> <span class="sql-view">v_yuqori_maosh</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    id, ism, familiya, lavozim,
    <span class="sql-function">FORMAT</span>(maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> maosh >= <span class="sql-number">13000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'üîù Premium'</span>
        <span class="sql-keyword">WHEN</span> maosh >= <span class="sql-number">10000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚¨ÜÔ∏è Yuqori'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'üìå O\'rta-yuqori'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> daraja
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> maosh >= <span class="sql-number">9000000</span>;

<span class="sql-comment">-- 5. ALTER VIEW</span>
<span class="sql-keyword">ALTER VIEW</span> <span class="sql-view">v_faol_xodimlar</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> id, ism, familiya, email, bolim_id, lavozim, maosh, ishga_kirgan,
    <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, ishga_kirgan, <span class="sql-function">CURDATE</span>()) <span class="sql-keyword">AS</span> staj
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">WHERE</span> holat = <span class="sql-string">'faol'</span>;

<span class="sql-comment">-- 6. VIEW ni o'chirish</span>
<span class="sql-keyword">DROP VIEW IF EXISTS</span> <span class="sql-view">v_toshkent_xodimlar</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 8: AMALIY SENARIOLAR -->
<div class="card">
<h3><span class="step-number">8</span>Amaliy biznes senariolar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Xavfsizlik VIEW</div></div>
<pre><code><span class="sql-comment">-- 1. XAVFSIZLIK VIEW ‚Äî HR xodimlari uchun (maosh ko'rinmaydi)</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_hr_xodimlar</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    x.id, <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> xodim,
    x.email, x.telefon,
    b.nomi <span class="sql-keyword">AS</span> bolim,
    x.lavozim, x.ishga_kirgan, x.holat,
    <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, x.ishga_kirgan, <span class="sql-function">CURDATE</span>()) <span class="sql-keyword">AS</span> staj_yil
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id;
<span class="sql-comment">-- maosh, telefon ko'rsatilMAYDI ‚Üí xavfsizlik!</span></code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Xavfsizlik VIEW</div></div>
<pre><code><span class="sql-comment">-- 2. RAHBARIYAT DASHBOARD VIEW</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_dashboard</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    (<span class="sql-keyword">SELECT COUNT</span>(*) <span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">WHERE</span> holat = <span class="sql-string">'faol'</span>) <span class="sql-keyword">AS</span> faol_xodimlar,
    (<span class="sql-keyword">SELECT COUNT</span>(*) <span class="sql-keyword">FROM</span> sotuvlar) <span class="sql-keyword">AS</span> jami_sotuvlar,
    (<span class="sql-keyword">SELECT FORMAT</span>(<span class="sql-function">SUM</span>(miqdor * narx), <span class="sql-number">0</span>) <span class="sql-keyword">FROM</span> sotuvlar) <span class="sql-keyword">AS</span> umumiy_tushum,
    (<span class="sql-keyword">SELECT FORMAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(miqdor * narx)), <span class="sql-number">0</span>) <span class="sql-keyword">FROM</span> sotuvlar) <span class="sql-keyword">AS</span> ort_sotuv,
    (<span class="sql-keyword">SELECT FORMAT</span>(<span class="sql-function">SUM</span>(maosh), <span class="sql-number">0</span>) <span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">WHERE</span> holat = <span class="sql-string">'faol'</span>) <span class="sql-keyword">AS</span> oylik_maosh_fondi,
    (<span class="sql-keyword">SELECT COUNT</span>(<span class="sql-keyword">DISTINCT</span> kategoriya) <span class="sql-keyword">FROM</span> sotuvlar) <span class="sql-keyword">AS</span> kategoriyalar_soni,
    (<span class="sql-keyword">SELECT COUNT</span>(<span class="sql-keyword">DISTINCT</span> shahar) <span class="sql-keyword">FROM</span> sotuvlar) <span class="sql-keyword">AS</span> shaharlar_soni;

<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_dashboard</span>;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Xavfsizlik VIEW</div></div>
<pre><code><span class="sql-comment">-- 3. XODIM SOTUV PROFILI ‚Äî to'liq VIEW</span>
<span class="sql-keyword">CREATE VIEW</span> <span class="sql-view">v_xodim_sotuv_profil</span> <span class="sql-keyword">AS</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(x.ism, <span class="sql-string">' '</span>, x.familiya) <span class="sql-keyword">AS</span> xodim,
    b.nomi <span class="sql-keyword">AS</span> bolim,
    x.lavozim,
    <span class="sql-function">FORMAT</span>(x.maosh, <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-function">IFNULL</span>(<span class="sql-function">COUNT</span>(s.id), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> sotuvlar,
    <span class="sql-function">FORMAT</span>(<span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx), <span class="sql-number">0</span>), <span class="sql-number">0</span>) <span class="sql-keyword">AS</span> jami_tushum,
    <span class="sql-function">IFNULL</span>(<span class="sql-function">GROUP_CONCAT</span>(<span class="sql-keyword">DISTINCT</span> s.kategoriya <span class="sql-keyword">ORDER BY</span> s.kategoriya <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>), <span class="sql-string">'‚Äî'</span>) <span class="sql-keyword">AS</span> kategoriyalar,
    <span class="sql-function">IFNULL</span>(<span class="sql-function">GROUP_CONCAT</span>(<span class="sql-keyword">DISTINCT</span> s.shahar <span class="sql-keyword">ORDER BY</span> s.shahar <span class="sql-keyword">SEPARATOR</span> <span class="sql-string">', '</span>), <span class="sql-string">'‚Äî'</span>) <span class="sql-keyword">AS</span> shaharlar,
    <span class="sql-keyword">CASE</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx), <span class="sql-number">0</span>) > <span class="sql-number">200000000</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚≠ê‚≠ê‚≠ê'</span>
        <span class="sql-keyword">WHEN</span> <span class="sql-function">IFNULL</span>(<span class="sql-function">SUM</span>(s.miqdor * s.narx), <span class="sql-number">0</span>) > <span class="sql-number">0</span> <span class="sql-keyword">THEN</span> <span class="sql-string">'‚≠ê‚≠ê'</span>
        <span class="sql-keyword">ELSE</span> <span class="sql-string">'‚Äî'</span>
    <span class="sql-keyword">END</span> <span class="sql-keyword">AS</span> baho
<span class="sql-keyword">FROM</span> xodimlar x
<span class="sql-keyword">INNER JOIN</span> bolimlar b <span class="sql-keyword">ON</span> x.bolim_id = b.id
<span class="sql-keyword">LEFT JOIN</span> sotuvlar s <span class="sql-keyword">ON</span> x.id = s.xodim_id
<span class="sql-keyword">WHERE</span> x.holat = <span class="sql-string">'faol'</span>
<span class="sql-keyword">GROUP BY</span> x.id, x.ism, x.familiya, b.nomi, x.lavozim, x.maosh;

<span class="sql-comment">-- Oddiy, qulay chaqirish!</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> <span class="sql-view">v_xodim_sotuv_profil</span> <span class="sql-keyword">ORDER BY</span> sotuvlar <span class="sql-keyword">DESC</span>;</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- QIYOSIY JADVAL -->
<h2><span class="icon">üìä</span>VIEW vs Jadval vs CTE ‚Äî qiyoslash</h2>
<div class="card-flat">
<table>
<thead><tr><th>Xususiyat</th><th>TABLE (Jadval)</th><th>VIEW</th><th>CTE (WITH)</th></tr></thead>
<tbody>
<tr><td><strong>Ma'lumot saqlash</strong></td><td>‚úÖ Diskda saqlaydi</td><td>‚ùå Saqlamaydi (virtual)</td><td>‚ùå Saqlamaydi (vaqtinchalik)</td></tr>
<tr><td><strong>Doimiylik</strong></td><td>Doimiy</td><td>Doimiy (ta'rifi saqlanadi)</td><td>Faqat so'rov ichida</td></tr>
<tr><td><strong>Qayta ishlatish</strong></td><td>Ha</td><td>Ha (istalgan so'rovda)</td><td>Faqat bitta so'rovda</td></tr>
<tr><td><strong>INSERT/UPDATE</strong></td><td>‚úÖ Ha</td><td>‚ö†Ô∏è Faqat oddiy VIEW</td><td>‚ùå Yo'q</td></tr>
<tr><td><strong>INDEX</strong></td><td>‚úÖ Ha</td><td>‚ùå O'z indeksi yo'q</td><td>‚ùå Yo'q</td></tr>
<tr><td><strong>Ishlash tezligi</strong></td><td>‚ö° Tez</td><td>üîÑ Har safar qayta hisoblaydi</td><td>üîÑ Bir marta hisoblaydi</td></tr>
<tr><td><strong>Qachon ishlatiladi</strong></td><td>Asosiy ma'lumot</td><td>Xavfsizlik, soddalik, hisobotlar</td><td>Murakkab bir martalik so'rovlar</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- NAZORAT SAVOLLARI -->
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card">
<ol>
<li>VIEW nima? U ma'lumot saqlaydi-mi?</li>
<li>VIEW ni oddiy jadval kabi <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> bilan ishlatish mumkinmi? Qanday shartlarda?</li>
<li>Oddiy VIEW va murakkab (agregat) VIEW orasidagi farq nimada?</li>
<li><code>WITH CHECK OPTION</code> nima ish qiladi? Qachon foydali?</li>
<li>VIEW xavfsizlik uchun qanday ishlatiladi? Misol keltiring.</li>
<li><code>CREATE OR REPLACE VIEW</code> va <code>ALTER VIEW</code> orasidagi farq nimada?</li>
<li>VIEW va CTE (WITH) orasidagi asosiy farqlarni ayting.</li>
<li>VIEW ishlatishning qanday kamchiliklari bor?</li>
</ol>
</div>

<!-- AMALIY TOPSHIRIQLAR -->
<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>
<div class="card">
<ol>
<li>Maosh va shaxsiy ma'lumotlarsiz <strong>xodimlar umumiy ro'yxati</strong> VIEW yarating</li>
<li>Xodim + bo'lim ma'lumotlari birlashtirilgan <strong>profil VIEW</strong> yarating (JOIN bilan)</li>
<li><strong>Bo'lim statistikasi</strong> VIEW yarating (xodimlar soni, o'rtacha maosh, byudjet sarfi)</li>
<li><strong>Oylik sotuv hisoboti</strong> VIEW yarating (sotuvlar soni, jami tushum, o'rtacha sotuv)</li>
<li><strong>WITH CHECK OPTION</strong> bilan yangilanuvchi VIEW yarating va test qiling</li>
<li><code>SHOW FULL TABLES</code> va <code>information_schema</code> orqali barcha VIEW larni ro'yxatlang</li>
<li><code>CREATE OR REPLACE</code> bilan mavjud VIEW ni yangilang</li>
<li><strong>üí´ Bonus:</strong> Rahbariyat uchun <strong>kompaniya dashboardi</strong> VIEW yarating (umumiy ko'rsatkichlar, xodimlar reytingi, kategoriya tahlili ‚Äî barchasi bitta so'rov bilan chaqiriladigan VIEW)</li>
</ol>
</div>

<!-- HISOBOT SHABLONI -->
<h2><span class="icon">üìù</span>Hisobot shabloni</h2>
<table>
<thead><tr><th>Bo'lim</th><th>Tavsif</th></tr></thead>
<tbody>
<tr><td><strong>Ishdan maqsad</strong></td><td>SQL VIEW tushunchasi, yaratish va amaliy qo'llashni o'rganish</td></tr>
<tr><td><strong>Oddiy VIEW</strong></td><td>Bitta jadval asosidagi VIEW lar (xavfsizlik, filtrlash)</td></tr>
<tr><td><strong>JOIN VIEW</strong></td><td>Ko'p jadvalli VIEW lar (profil, batafsil sotuvlar)</td></tr>
<tr><td><strong>Agregat VIEW</strong></td><td>GROUP BY va agregat funksiyali hisobot VIEW lar</td></tr>
<tr><td><strong>Updatable VIEW</strong></td><td>INSERT, UPDATE, DELETE va WITH CHECK OPTION</td></tr>
<tr><td><strong>VIEW boshqarish</strong></td><td>SHOW, ALTER, CREATE OR REPLACE, DROP</td></tr>
<tr><td><strong>Biznes senariolar</strong></td><td>Xavfsizlik, dashboard, xodim profili VIEW lari</td></tr>
<tr><td><strong>Xulosa</strong></td><td>O'rganilgan texnikalar va VIEW qo'llash tamoyillari</td></tr>
</tbody>
</table>

<div class="luxury-divider"></div>

<!-- XULOSA -->
<div class="card">
<h2><span class="icon">üèÜ</span>Xulosa</h2>
<p>Ushbu amaliy mashg'ulotni yakunlagan talaba quyidagi ko'nikmalarga ega bo'ladi:</p>
<ul>
<li><strong>VIEW tushunchasi:</strong> virtual jadval, ma'lumot saqlamaslik tamoyili</li>
<li><strong>Oddiy VIEW:</strong> bitta jadval asosida yaratish, xavfsizlik uchun ustunlarni yashirish</li>
<li><strong>JOIN VIEW:</strong> ko'p jadvalli murakkab so'rovlarni VIEW sifatida saqlash</li>
<li><strong>Agregat VIEW:</strong> GROUP BY, SUM, AVG kabi funksiyali hisobot VIEW lari</li>
<li><strong>Yangilanuvchi VIEW:</strong> INSERT, UPDATE, DELETE qilish va cheklovlarni bilish</li>
<li><strong>WITH CHECK OPTION:</strong> ma'lumot yaxlitligini VIEW orqali nazorat qilish</li>
<li><strong>VIEW ustida so'rov:</strong> VIEW ni jadval kabi filtrlash, JOIN da ishlatish</li>
<li><strong>VIEW boshqarish:</strong> SHOW, ALTER, CREATE OR REPLACE, DROP buyruqlari</li>
<li><strong>Biznes amaliyot:</strong> xavfsizlik VIEW, rahbariyat dashboard, xodim profil VIEW lari</li>
<li><strong>Qiyoslash:</strong> VIEW vs TABLE vs CTE farqlari va to'g'ri tanlash</li>
</ul>
</div>
</div>
</div>

<!-- ===== TUTORIAL 14 ===== -->
<div class="section-block" id="t14">
<div class="container">
<h1>14-amaliy mashg'ulot</h1>
<p class="subtitle">SQLda funksiyalar, protseduralar va triggerlar yaratish</p>
<div class="gold-line"></div>

<div class="meta-info">
    <strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp;
    <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp;
    <strong>üéØ Daraja:</strong> Yuqori
</div>

<!-- ===== NAZARIY QISM ===== -->
<h2><span class="icon">üìñ</span>Nazariy qism</h2>

<div class="card">
<h3><span class="icon">üß©</span>Uchta asosiy tushuncha</h3>

<div class="concept-grid">
    <div class="concept-card">
        <span class="big-icon">‚öôÔ∏è</span>
        <h4>FUNCTION</h4>
        <p>Qiymat qaytaruvchi dastur. SELECT ichida chaqiriladi. Matematika, formatlash, hisoblash uchun.</p>
    </div>
    <div class="concept-card">
        <span class="big-icon">üì¶</span>
        <h4>PROCEDURE</h4>
        <p>Amallar bajaruvchi dastur. CALL bilan chaqiriladi. Biznes mantiq, hisobotlar uchun.</p>
    </div>
    <div class="concept-card">
        <span class="big-icon">üéØ</span>
        <h4>TRIGGER</h4>
        <p>Avtomatik bajariladigan kod. INSERT/UPDATE/DELETE da ishga tushadi.</p>
    </div>
</div>
</div>

<div class="card">
<h3><span class="icon">üìä</span>FUNCTION vs PROCEDURE ‚Äî qiyoslash</h3>

<table>
<thead><tr><th>Xususiyat</th><th>FUNCTION</th><th>PROCEDURE</th></tr></thead>
<tbody>
<tr><td><strong>Qaytarish</strong></td><td>Bitta qiymat qaytaradi (<code>RETURN</code>)</td><td>Qiymat qaytarmasligi ham mumkin</td></tr>
<tr><td><strong>Chaqirish</strong></td><td><code>SELECT func_nomi()</code></td><td><code>CALL proc_nomi()</code></td></tr>
<tr><td><strong>SELECT ichida</strong></td><td>‚úÖ Ishlatish mumkin</td><td>‚ùå Ishlatib bo'lmaydi</td></tr>
<tr><td><strong>OUT parametr</strong></td><td>‚ùå Yo'q</td><td>‚úÖ Bor (IN, OUT, INOUT)</td></tr>
<tr><td><strong>Tranzaksiya</strong></td><td>‚ùå Ruxsat etilmaydi</td><td>‚úÖ Ruxsat etiladi</td></tr>
<tr><td><strong>Jadvalga yozish</strong></td><td>‚ö†Ô∏è Cheklangan</td><td>‚úÖ To'liq ruxsat</td></tr>
<tr><td><strong>Maqsad</strong></td><td>Hisoblash, formatlash</td><td>Biznes mantiq, hisobotlar</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="icon">üéØ</span>TRIGGER tuzilmasi</h3>

<div class="flow-diagram">
    <span class="flow-step">Hodisa (INSERT / UPDATE / DELETE)</span>
    <span class="flow-arrow">‚Üí</span>
    <span class="flow-step">Vaqt (BEFORE / AFTER)</span>
    <span class="flow-arrow">‚Üí</span>
    <span class="flow-step">Trigger kodi (FOR EACH ROW)</span>
    <span class="flow-arrow">‚Üí</span>
    <span class="flow-step">NEW / OLD qiymatlari</span>
</div>

<table>
<thead><tr><th>Kombinatsiya</th><th>OLD</th><th>NEW</th><th>Ishlatiladi</th></tr></thead>
<tbody>
<tr><td><code>BEFORE INSERT</code></td><td>‚ùå Yo'q</td><td>‚úÖ O'zgartirish mumkin</td><td>Ma'lumotni validatsiya, to'ldirish</td></tr>
<tr><td><code>AFTER INSERT</code></td><td>‚ùå Yo'q</td><td>‚úÖ Faqat o'qish</td><td>Jurnal yozish, bildirishnoma</td></tr>
<tr><td><code>BEFORE UPDATE</code></td><td>‚úÖ O'qish</td><td>‚úÖ O'zgartirish mumkin</td><td>Eski/yangi qiymatni tekshirish</td></tr>
<tr><td><code>AFTER UPDATE</code></td><td>‚úÖ O'qish</td><td>‚úÖ Faqat o'qish</td><td>O'zgarishlar jurnali</td></tr>
<tr><td><code>BEFORE DELETE</code></td><td>‚úÖ O'qish</td><td>‚ùå Yo'q</td><td>O'chirishni oldini olish</td></tr>
<tr><td><code>AFTER DELETE</code></td><td>‚úÖ O'qish</td><td>‚ùå Yo'q</td><td>Arxivlash, tozalash</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- ===== AMALIY QISM ===== -->
<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<!-- BOSQICH 1: MA'LUMOTLAR BAZASI -->
<div class="card">
<h3><span class="step-number">1</span>Ma'lumotlar bazasini tayyorlash</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Bazani tayyorlash</div></div>
<pre><code><span class="sql-keyword">CREATE DATABASE IF NOT EXISTS</span> prog_db;
<span class="sql-keyword">USE</span> prog_db;

<span class="sql-comment">-- Xodimlar</span>
<span class="sql-keyword">CREATE TABLE</span> xodimlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    lavozim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    ishga_kirgan <span class="sql-keyword">DATE</span>,
    holat <span class="sql-keyword">ENUM</span>(<span class="sql-string">'faol'</span>, <span class="sql-string">'ta\'til'</span>, <span class="sql-string">'bo\'shatilgan'</span>) <span class="sql-keyword">DEFAULT</span> <span class="sql-string">'faol'</span>
);

<span class="sql-comment">-- Mahsulotlar</span>
<span class="sql-keyword">CREATE TABLE</span> mahsulotlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>) <span class="sql-keyword">NOT NULL</span>,
    kategoriya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    tan_narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    qoldiq <span class="sql-keyword">INT DEFAULT</span> <span class="sql-number">0</span>
);

<span class="sql-comment">-- Sotuvlar</span>
<span class="sql-keyword">CREATE TABLE</span> sotuvlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    xodim_id <span class="sql-keyword">INT</span>,
    mahsulot_id <span class="sql-keyword">INT</span>,
    miqdor <span class="sql-keyword">INT</span>,
    narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    chegirma_foiz <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">5</span>,<span class="sql-number">2</span>) <span class="sql-keyword">DEFAULT</span> <span class="sql-number">0</span>,
    sotuv_sana <span class="sql-keyword">DATE</span>,
    yaratilgan <span class="sql-keyword">TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>,
    <span class="sql-keyword">FOREIGN KEY</span> (xodim_id) <span class="sql-keyword">REFERENCES</span> xodimlar(id),
    <span class="sql-keyword">FOREIGN KEY</span> (mahsulot_id) <span class="sql-keyword">REFERENCES</span> mahsulotlar(id)
);

<span class="sql-comment">-- Audit jurnal</span>
<span class="sql-keyword">CREATE TABLE</span> audit_jurnal (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    jadval_nomi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    amal_turi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">20</span>),
    yozuv_id <span class="sql-keyword">INT</span>,
    eski_qiymat <span class="sql-keyword">TEXT</span>,
    yangi_qiymat <span class="sql-keyword">TEXT</span>,
    foydalanuvchi <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    vaqt <span class="sql-keyword">TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
);

<span class="sql-comment">-- Ma'lumotlar</span>
<span class="sql-keyword">INSERT INTO</span> xodimlar (ism, familiya, bolim, lavozim, maosh, ishga_kirgan) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Alisher'</span>,  <span class="sql-string">'Karimov'</span>,   <span class="sql-string">'IT'</span>,        <span class="sql-string">'Senior dasturchi'</span>,   <span class="sql-number">12500000</span>, <span class="sql-string">'2020-03-15'</span>),
(<span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'Rahimova'</span>,  <span class="sql-string">'IT'</span>,        <span class="sql-string">'Junior dasturchi'</span>,   <span class="sql-number">6200000</span>,  <span class="sql-string">'2023-01-10'</span>),
(<span class="sql-string">'Gulnora'</span>,  <span class="sql-string">'Azimova'</span>,   <span class="sql-string">'Moliya'</span>,    <span class="sql-string">'Bosh hisobchi'</span>,      <span class="sql-number">11000000</span>, <span class="sql-string">'2019-09-01'</span>),
(<span class="sql-string">'Kamola'</span>,   <span class="sql-string">'Umarova'</span>,   <span class="sql-string">'Sotuv'</span>,     <span class="sql-string">'Sotuv boshlig\'i'</span>,   <span class="sql-number">13000000</span>, <span class="sql-string">'2019-08-22'</span>),
(<span class="sql-string">'Jasur'</span>,    <span class="sql-string">'Ergashev'</span>,  <span class="sql-string">'Sotuv'</span>,     <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">8000000</span>,  <span class="sql-string">'2022-01-15'</span>),
(<span class="sql-string">'Malika'</span>,   <span class="sql-string">'Tursunova'</span>, <span class="sql-string">'Sotuv'</span>,     <span class="sql-string">'Sotuv menejeri'</span>,     <span class="sql-number">7800000</span>,  <span class="sql-string">'2022-05-01'</span>),
(<span class="sql-string">'Nodira'</span>,   <span class="sql-string">'Yusupova'</span>,  <span class="sql-string">'Marketing'</span>, <span class="sql-string">'Marketing menejer'</span>,  <span class="sql-number">9000000</span>,  <span class="sql-string">'2021-11-05'</span>),
(<span class="sql-string">'Shaxlo'</span>,   <span class="sql-string">'Mirzayeva'</span>, <span class="sql-string">'Logistika'</span>, <span class="sql-string">'Logistika menejeri'</span>, <span class="sql-number">7000000</span>,  <span class="sql-string">'2023-02-20'</span>);

<span class="sql-keyword">INSERT INTO</span> mahsulotlar (nomi, kategoriya, narx, tan_narx, qoldiq) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Noutbuk HP'</span>,       <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">18000000</span>, <span class="sql-number">14000000</span>, <span class="sql-number">25</span>),
(<span class="sql-string">'Monitor Samsung'</span>,  <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">4500000</span>,  <span class="sql-number">3200000</span>,  <span class="sql-number">40</span>),
(<span class="sql-string">'Klaviatura'</span>,       <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">1200000</span>,  <span class="sql-number">700000</span>,   <span class="sql-number">100</span>),
(<span class="sql-string">'Sichqoncha'</span>,       <span class="sql-string">'Aksesuar'</span>,     <span class="sql-number">850000</span>,   <span class="sql-number">450000</span>,   <span class="sql-number">150</span>),
(<span class="sql-string">'Server Dell'</span>,      <span class="sql-string">'Elektronika'</span>,  <span class="sql-number">45000000</span>, <span class="sql-number">35000000</span>, <span class="sql-number">5</span>),
(<span class="sql-string">'Router Cisco'</span>,     <span class="sql-string">'Tarmoq'</span>,       <span class="sql-number">12000000</span>, <span class="sql-number">9000000</span>,  <span class="sql-number">15</span>),
(<span class="sql-string">'Printer HP'</span>,       <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">8500000</span>,  <span class="sql-number">6500000</span>,  <span class="sql-number">20</span>),
(<span class="sql-string">'UPS APC'</span>,          <span class="sql-string">'Orgtexnika'</span>,   <span class="sql-number">7500000</span>,  <span class="sql-number">5500000</span>,  <span class="sql-number">30</span>);

<span class="sql-keyword">INSERT INTO</span> sotuvlar (xodim_id, mahsulot_id, miqdor, narx, chegirma_foiz, sotuv_sana) <span class="sql-keyword">VALUES</span>
(<span class="sql-number">5</span>, <span class="sql-number">1</span>, <span class="sql-number">3</span>,  <span class="sql-number">18000000</span>, <span class="sql-number">5</span>,  <span class="sql-string">'2024-01-15'</span>),
(<span class="sql-number">6</span>, <span class="sql-number">2</span>, <span class="sql-number">8</span>,  <span class="sql-number">4500000</span>,  <span class="sql-number">0</span>,  <span class="sql-string">'2024-01-20'</span>),
(<span class="sql-number">4</span>, <span class="sql-number">5</span>, <span class="sql-number">1</span>,  <span class="sql-number">45000000</span>, <span class="sql-number">10</span>, <span class="sql-string">'2024-02-05'</span>),
(<span class="sql-number">5</span>, <span class="sql-number">3</span>, <span class="sql-number">20</span>, <span class="sql-number">1200000</span>,  <span class="sql-number">0</span>,  <span class="sql-string">'2024-02-10'</span>),
(<span class="sql-number">6</span>, <span class="sql-number">7</span>, <span class="sql-number">5</span>,  <span class="sql-number">8500000</span>,  <span class="sql-number">3</span>,  <span class="sql-string">'2024-02-15'</span>),
(<span class="sql-number">4</span>, <span class="sql-number">6</span>, <span class="sql-number">4</span>,  <span class="sql-number">12000000</span>, <span class="sql-number">0</span>,  <span class="sql-string">'2024-03-01'</span>),
(<span class="sql-number">5</span>, <span class="sql-number">1</span>, <span class="sql-number">5</span>,  <span class="sql-number">18000000</span>, <span class="sql-number">8</span>,  <span class="sql-string">'2024-03-10'</span>),
(<span class="sql-number">6</span>, <span class="sql-number">4</span>, <span class="sql-number">30</span>, <span class="sql-number">850000</span>,   <span class="sql-number">0</span>,  <span class="sql-string">'2024-03-20'</span>),
(<span class="sql-number">4</span>, <span class="sql-number">8</span>, <span class="sql-number">3</span>,  <span class="sql-number">7500000</span>,  <span class="sql-number">5</span>,  <span class="sql-string">'2024-04-05'</span>),
(<span class="sql-number">5</span>, <span class="sql-number">2</span>, <span class="sql-number">10</span>, <span class="sql-number">4500000</span>,  <span class="sql-number">0</span>,  <span class="sql-string">'2024-04-12'</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.03 sec) ‚Äî <code>CREATE TABLE xodimlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE mahsulotlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE sotuvlar</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE audit_jurnal</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 8 rows affected (0.01 sec) ‚Äî <code>INSERT INTO xodimlar</code></span>
<span class="rok-line">Records: 8 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 8 rows affected (0.01 sec) ‚Äî <code>INSERT INTO mahsulotlar</code></span>
<span class="rok-line">Records: 8 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 10 rows affected (0.01 sec) ‚Äî <code>INSERT INTO sotuvlar</code></span>
<span class="rok-line">Records: 10 &nbsp;Duplicates: 0 &nbsp;Warnings: 0</span>
</div>
</div>

<div class="luxury-divider"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê A. FUNKSIYALAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2><span class="icon">‚öôÔ∏è</span>A. FUNCTION ‚Äî Funksiyalar</h2>

<!-- BOSQICH 2 -->
<div class="card">
<h3><span class="step-number">2</span>Oddiy funksiyalar yaratish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CREATE FUNCTION</div></div>
<pre><code><span class="sql-comment">-- DELIMITER ni o'zgartirish (funksiya ichida ; ishlatish uchun)</span>
<span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 1. Summani formatlash funksiyasi (so'm)</span>
<span class="sql-keyword">CREATE FUNCTION</span> <span class="sql-proc">fn_som_format</span>(summa <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">15</span>,<span class="sql-number">2</span>))
<span class="sql-keyword">RETURNS VARCHAR</span>(<span class="sql-number">30</span>)
<span class="sql-keyword">DETERMINISTIC</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">RETURN CONCAT</span>(<span class="sql-function">FORMAT</span>(summa, <span class="sql-number">0</span>), <span class="sql-string">' so\'m'</span>);
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-comment">-- Chaqirish</span>
<span class="sql-keyword">SELECT</span> <span class="sql-proc">fn_som_format</span>(<span class="sql-number">18500000</span>);
<span class="sql-comment">-- Natija: 18,500,000 so'm</span></code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE FUNCTION fn_som_format</code></span>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî CREATE FUNCTION</div></div>
<pre><code><span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 2. Sof summani hisoblash (chegirmali)</span>
<span class="sql-keyword">CREATE FUNCTION</span> <span class="sql-proc">fn_sof_summa</span>(
    summa <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">15</span>,<span class="sql-number">2</span>),
    chegirma <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">5</span>,<span class="sql-number">2</span>)
)
<span class="sql-keyword">RETURNS DECIMAL</span>(<span class="sql-number">15</span>,<span class="sql-number">2</span>)
<span class="sql-keyword">DETERMINISTIC</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">RETURN</span> summa * (<span class="sql-number">1</span> - chegirma / <span class="sql-number">100</span>);
<span class="sql-keyword">END</span> //

<span class="sql-comment">-- 3. Ish stajini hisoblash</span>
<span class="sql-keyword">CREATE FUNCTION</span> <span class="sql-proc">fn_staj</span>(kirgan_sana <span class="sql-keyword">DATE</span>)
<span class="sql-keyword">RETURNS VARCHAR</span>(<span class="sql-number">30</span>)
<span class="sql-keyword">DETERMINISTIC</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">DECLARE</span> <span class="sql-var">yillar</span> <span class="sql-keyword">INT</span>;
    <span class="sql-keyword">DECLARE</span> <span class="sql-var">oylar</span> <span class="sql-keyword">INT</span>;
    <span class="sql-keyword">SET</span> <span class="sql-var">yillar</span> = <span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">YEAR</span>, kirgan_sana, <span class="sql-function">CURDATE</span>());
    <span class="sql-keyword">SET</span> <span class="sql-var">oylar</span> = <span class="sql-function">MOD</span>(<span class="sql-function">TIMESTAMPDIFF</span>(<span class="sql-keyword">MONTH</span>, kirgan_sana, <span class="sql-function">CURDATE</span>()), <span class="sql-number">12</span>);
    <span class="sql-keyword">RETURN CONCAT</span>(<span class="sql-var">yillar</span>, <span class="sql-string">' yil '</span>, <span class="sql-var">oylar</span>, <span class="sql-string">' oy'</span>);
<span class="sql-keyword">END</span> //

<span class="sql-comment">-- 4. Maosh darajasini aniqlash</span>
<span class="sql-keyword">CREATE FUNCTION</span> <span class="sql-proc">fn_maosh_daraja</span>(maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>))
<span class="sql-keyword">RETURNS VARCHAR</span>(<span class="sql-number">20</span>)
<span class="sql-keyword">DETERMINISTIC</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">IF</span> maosh >= <span class="sql-number">12000000</span> <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">RETURN</span> <span class="sql-string">'üîù Premium'</span>;
    <span class="sql-keyword">ELSEIF</span> maosh >= <span class="sql-number">8000000</span> <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">RETURN</span> <span class="sql-string">'‚¨ÜÔ∏è Yuqori'</span>;
    <span class="sql-keyword">ELSEIF</span> maosh >= <span class="sql-number">5000000</span> <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">RETURN</span> <span class="sql-string">'üìå O\'rta'</span>;
    <span class="sql-keyword">ELSE</span>
        <span class="sql-keyword">RETURN</span> <span class="sql-string">'üìâ Past'</span>;
    <span class="sql-keyword">END IF</span>;
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-comment">-- SELECT ichida ishlatish</span>
<span class="sql-keyword">SELECT</span> 
    <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> xodim,
    lavozim,
    <span class="sql-proc">fn_som_format</span>(maosh) <span class="sql-keyword">AS</span> maosh,
    <span class="sql-proc">fn_staj</span>(ishga_kirgan) <span class="sql-keyword">AS</span> staj,
    <span class="sql-proc">fn_maosh_daraja</span>(maosh) <span class="sql-keyword">AS</span> daraja
<span class="sql-keyword">FROM</span> xodimlar
<span class="sql-keyword">ORDER BY</span> maosh <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>xodim</th><th>lavozim</th><th>maosh</th><th>staj</th><th>daraja</th></tr></thead>
<tbody>
<tr><td>Kamola Umarova</td><td>Sotuv boshlig'i</td><td>13,000,000 so'm</td><td>5 yil 5 oy</td><td>üîù Premium</td></tr>
<tr><td>Alisher Karimov</td><td>Senior dasturchi</td><td>12,500,000 so'm</td><td>4 yil 10 oy</td><td>üîù Premium</td></tr>
<tr><td>Gulnora Azimova</td><td>Bosh hisobchi</td><td>11,000,000 so'm</td><td>5 yil 5 oy</td><td>‚¨ÜÔ∏è Yuqori</td></tr>
<tr><td>Nodira Yusupova</td><td>Marketing menejer</td><td>9,000,000 so'm</td><td>3 yil 3 oy</td><td>‚¨ÜÔ∏è Yuqori</td></tr>
<tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
</tbody>
</table>
</div>

<div class="card">
<h3><span class="step-number">3</span>Murakkab funksiyalar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab funksiyalar</div></div>
<pre><code><span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 5. Foydalilik darajasini hisoblash (foyda/xarajat)</span>
<span class="sql-keyword">CREATE FUNCTION</span> <span class="sql-proc">fn_foyda_foizi</span>(
    sotuv_narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    tan_narx <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    chegirma <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">5</span>,<span class="sql-number">2</span>)
)
<span class="sql-keyword">RETURNS VARCHAR</span>(<span class="sql-number">20</span>)
<span class="sql-keyword">DETERMINISTIC</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">DECLARE</span> <span class="sql-var">sof_narx</span> <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>);
    <span class="sql-keyword">DECLARE</span> <span class="sql-var">foyda</span> <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">10</span>,<span class="sql-number">2</span>);
    <span class="sql-keyword">SET</span> <span class="sql-var">sof_narx</span> = sotuv_narx * (<span class="sql-number">1</span> - chegirma / <span class="sql-number">100</span>);
    <span class="sql-keyword">SET</span> <span class="sql-var">foyda</span> = (<span class="sql-var">sof_narx</span> - tan_narx) * <span class="sql-number">100.0</span> / tan_narx;
    <span class="sql-keyword">RETURN CONCAT</span>(<span class="sql-function">ROUND</span>(<span class="sql-var">foyda</span>, <span class="sql-number">1</span>), <span class="sql-string">'%'</span>);
<span class="sql-keyword">END</span> //

<span class="sql-comment">-- 6. Soliq hisoblash (QQS 12%)</span>
<span class="sql-keyword">CREATE FUNCTION</span> <span class="sql-proc">fn_soliq</span>(
    summa <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">15</span>,<span class="sql-number">2</span>),
    soliq_foiz <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">5</span>,<span class="sql-number">2</span>)
)
<span class="sql-keyword">RETURNS DECIMAL</span>(<span class="sql-number">15</span>,<span class="sql-number">2</span>)
<span class="sql-keyword">DETERMINISTIC</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">RETURN ROUND</span>(summa * soliq_foiz / <span class="sql-number">100</span>, <span class="sql-number">2</span>);
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-comment">-- Sotuvlarda qo'llash</span>
<span class="sql-keyword">SELECT</span> 
    m.nomi <span class="sql-keyword">AS</span> mahsulot,
    s.miqdor,
    <span class="sql-proc">fn_som_format</span>(s.miqdor * s.narx) <span class="sql-keyword">AS</span> brutto,
    <span class="sql-function">CONCAT</span>(s.chegirma_foiz, <span class="sql-string">'%'</span>) <span class="sql-keyword">AS</span> chegirma,
    <span class="sql-proc">fn_som_format</span>(<span class="sql-proc">fn_sof_summa</span>(s.miqdor * s.narx, s.chegirma_foiz)) <span class="sql-keyword">AS</span> sof_summa,
    <span class="sql-proc">fn_som_format</span>(<span class="sql-proc">fn_soliq</span>(<span class="sql-proc">fn_sof_summa</span>(s.miqdor * s.narx, s.chegirma_foiz), <span class="sql-number">12</span>)) <span class="sql-keyword">AS</span> QQS,
    <span class="sql-proc">fn_foyda_foizi</span>(s.narx, m.tan_narx, s.chegirma_foiz) <span class="sql-keyword">AS</span> foyda_foizi
<span class="sql-keyword">FROM</span> sotuvlar s
<span class="sql-keyword">INNER JOIN</span> mahsulotlar m <span class="sql-keyword">ON</span> s.mahsulot_id = m.id;</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE FUNCTION fn_foyda_foizi</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE FUNCTION fn_soliq</code></span>
</div>

<span class="result-label">üìã Natija (qisqartirilgan)</span>
<table>
<thead><tr><th>mahsulot</th><th>miqdor</th><th>brutto</th><th>chegirma</th><th>sof_summa</th><th>QQS</th><th>foyda_foizi</th></tr></thead>
<tbody>
<tr><td>Noutbuk HP</td><td>3</td><td>54,000,000 so'm</td><td>5%</td><td>51,300,000 so'm</td><td>6,156,000 so'm</td><td>22.1%</td></tr>
<tr><td>Monitor Samsung</td><td>8</td><td>36,000,000 so'm</td><td>0%</td><td>36,000,000 so'm</td><td>4,320,000 so'm</td><td>40.6%</td></tr>
<tr><td>Server Dell</td><td>1</td><td>45,000,000 so'm</td><td>10%</td><td>40,500,000 so'm</td><td>4,860,000 so'm</td><td>15.7%</td></tr>
<tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê B. PROTSEDURALAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2><span class="icon">üì¶</span>B. PROCEDURE ‚Äî Protseduralar</h2>

<!-- BOSQICH 4 -->
<div class="card">
<h3><span class="step-number">4</span>IN parametrli protseduralar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Murakkab funksiyalar</div></div>
<pre><code><span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 1. Bo'lim xodimlari ro'yxati</span>
<span class="sql-keyword">CREATE PROCEDURE</span> <span class="sql-proc">sp_bolim_xodimlari</span>(
    <span class="sql-keyword">IN</span> p_bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>)
)
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">SELECT</span> 
        <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> xodim,
        lavozim,
        <span class="sql-proc">fn_som_format</span>(maosh) <span class="sql-keyword">AS</span> maosh,
        <span class="sql-proc">fn_staj</span>(ishga_kirgan) <span class="sql-keyword">AS</span> staj,
        holat
    <span class="sql-keyword">FROM</span> xodimlar
    <span class="sql-keyword">WHERE</span> bolim = p_bolim
    <span class="sql-keyword">ORDER BY</span> maosh <span class="sql-keyword">DESC</span>;
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-comment">-- Chaqirish</span>
<span class="sql-keyword">CALL</span> <span class="sql-proc">sp_bolim_xodimlari</span>(<span class="sql-string">'IT'</span>);
<span class="sql-keyword">CALL</span> <span class="sql-proc">sp_bolim_xodimlari</span>(<span class="sql-string">'Sotuv'</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE PROCEDURE sp_bolim_xodimlari</code></span>
</div>

<span class="result-label">üìã Natija ‚Äî CALL sp_bolim_xodimlari('IT')</span>
<table>
<thead><tr><th>xodim</th><th>lavozim</th><th>maosh</th><th>staj</th><th>holat</th></tr></thead>
<tbody>
<tr><td>Alisher Karimov</td><td>Senior dasturchi</td><td>12,500,000 so'm</td><td>4 yil 10 oy</td><td>faol</td></tr>
<tr><td>Dilnoza Rahimova</td><td>Junior dasturchi</td><td>6,200,000 so'm</td><td>2 yil 1 oy</td><td>faol</td></tr>
</tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Protseduralar</div></div>
<pre><code><span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 2. Xodim sotuv hisoboti</span>
<span class="sql-keyword">CREATE PROCEDURE</span> <span class="sql-proc">sp_xodim_hisobot</span>(
    <span class="sql-keyword">IN</span> p_xodim_id <span class="sql-keyword">INT</span>
)
<span class="sql-keyword">BEGIN</span>
    <span class="sql-comment">-- Xodim ma'lumotlari</span>
    <span class="sql-keyword">SELECT</span> <span class="sql-function">CONCAT</span>(ism, <span class="sql-string">' '</span>, familiya) <span class="sql-keyword">AS</span> xodim,
           lavozim, bolim, <span class="sql-proc">fn_som_format</span>(maosh) <span class="sql-keyword">AS</span> maosh
    <span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">WHERE</span> id = p_xodim_id;

    <span class="sql-comment">-- Sotuvlar ro'yxati</span>
    <span class="sql-keyword">SELECT</span> 
        m.nomi <span class="sql-keyword">AS</span> mahsulot,
        s.miqdor,
        <span class="sql-proc">fn_som_format</span>(<span class="sql-proc">fn_sof_summa</span>(s.miqdor * s.narx, s.chegirma_foiz)) <span class="sql-keyword">AS</span> sof_summa,
        s.sotuv_sana
    <span class="sql-keyword">FROM</span> sotuvlar s
    <span class="sql-keyword">INNER JOIN</span> mahsulotlar m <span class="sql-keyword">ON</span> s.mahsulot_id = m.id
    <span class="sql-keyword">WHERE</span> s.xodim_id = p_xodim_id
    <span class="sql-keyword">ORDER BY</span> s.sotuv_sana;

    <span class="sql-comment">-- Yig'indi</span>
    <span class="sql-keyword">SELECT</span> 
        <span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> sotuvlar_soni,
        <span class="sql-proc">fn_som_format</span>(<span class="sql-function">SUM</span>(<span class="sql-proc">fn_sof_summa</span>(s.miqdor * s.narx, s.chegirma_foiz))) <span class="sql-keyword">AS</span> umumiy_tushum
    <span class="sql-keyword">FROM</span> sotuvlar s
    <span class="sql-keyword">WHERE</span> s.xodim_id = p_xodim_id;
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-keyword">CALL</span> <span class="sql-proc">sp_xodim_hisobot</span>(<span class="sql-number">5</span>);</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE PROCEDURE sp_xodim_hisobot</code></span>
</div>
</div>

<!-- BOSQICH 5 -->
<div class="card">
<h3><span class="step-number">5</span>OUT parametrli va murakkab protseduralar</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Protseduralar</div></div>
<pre><code><span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 3. OUT parametr bilan bo'lim statistikasi</span>
<span class="sql-keyword">CREATE PROCEDURE</span> <span class="sql-proc">sp_bolim_stat</span>(
    <span class="sql-keyword">IN</span>  p_bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    <span class="sql-keyword">OUT</span> p_xodimlar <span class="sql-keyword">INT</span>,
    <span class="sql-keyword">OUT</span> p_ort_maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    <span class="sql-keyword">OUT</span> p_jami_maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">15</span>,<span class="sql-number">2</span>)
)
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">SELECT</span> <span class="sql-function">COUNT</span>(*), <span class="sql-function">ROUND</span>(<span class="sql-function">AVG</span>(maosh)), <span class="sql-function">SUM</span>(maosh)
    <span class="sql-keyword">INTO</span> p_xodimlar, p_ort_maosh, p_jami_maosh
    <span class="sql-keyword">FROM</span> xodimlar
    <span class="sql-keyword">WHERE</span> bolim = p_bolim <span class="sql-keyword">AND</span> holat = <span class="sql-string">'faol'</span>;
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-comment">-- Chaqirish va natijalarni olish</span>
<span class="sql-keyword">CALL</span> <span class="sql-proc">sp_bolim_stat</span>(<span class="sql-string">'IT'</span>, @xod, @ort, @jami);
<span class="sql-keyword">SELECT</span> 
    @xod <span class="sql-keyword">AS</span> xodimlar, 
    <span class="sql-proc">fn_som_format</span>(@ort) <span class="sql-keyword">AS</span> ort_maosh, 
    <span class="sql-proc">fn_som_format</span>(@jami) <span class="sql-keyword">AS</span> jami;</code></pre>
</div>

<span class="result-label">üìã Natija</span>
<table>
<thead><tr><th>xodimlar</th><th>ort_maosh</th><th>jami</th></tr></thead>
<tbody><tr><td>3</td><td>8,900,000 so'm</td><td>26,700,000 so'm</td></tr></tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Protseduralar</div></div>
<pre><code><span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 4. Maosh oshirish protsedurasi (IF / LOOP bilan)</span>
<span class="sql-keyword">CREATE PROCEDURE</span> <span class="sql-proc">sp_maosh_oshirish</span>(
    <span class="sql-keyword">IN</span> p_bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    <span class="sql-keyword">IN</span> p_foiz <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">5</span>,<span class="sql-number">2</span>)
)
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">DECLARE</span> <span class="sql-var">v_soni</span> <span class="sql-keyword">INT</span>;

    <span class="sql-comment">-- Nechta xodim ta'sirlanishini tekshirish</span>
    <span class="sql-keyword">SELECT COUNT</span>(*) <span class="sql-keyword">INTO</span> <span class="sql-var">v_soni</span> 
    <span class="sql-keyword">FROM</span> xodimlar 
    <span class="sql-keyword">WHERE</span> bolim = p_bolim <span class="sql-keyword">AND</span> holat = <span class="sql-string">'faol'</span>;

    <span class="sql-keyword">IF</span> <span class="sql-var">v_soni</span> = <span class="sql-number">0</span> <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">SELECT</span> <span class="sql-string">'‚ùå Bu bo\'limda faol xodim topilmadi!'</span> <span class="sql-keyword">AS</span> xabar;
    <span class="sql-keyword">ELSEIF</span> p_foiz > <span class="sql-number">30</span> <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">SELECT</span> <span class="sql-string">'‚ö†Ô∏è Oshirish foizi 30% dan oshmasligi kerak!'</span> <span class="sql-keyword">AS</span> xabar;
    <span class="sql-keyword">ELSE</span>
        <span class="sql-keyword">UPDATE</span> xodimlar 
        <span class="sql-keyword">SET</span> maosh = <span class="sql-function">ROUND</span>(maosh * (<span class="sql-number">1</span> + p_foiz / <span class="sql-number">100</span>))
        <span class="sql-keyword">WHERE</span> bolim = p_bolim <span class="sql-keyword">AND</span> holat = <span class="sql-string">'faol'</span>;

        <span class="sql-keyword">SELECT CONCAT</span>(<span class="sql-string">'‚úÖ '</span>, <span class="sql-var">v_soni</span>, <span class="sql-string">' xodimga '</span>, p_foiz, <span class="sql-string">'% oshirildi'</span>) <span class="sql-keyword">AS</span> xabar;
    <span class="sql-keyword">END IF</span>;
<span class="sql-keyword">END</span> //

<span class="sql-comment">-- 5. Yangi sotuv qo'shish protsedurasi (validatsiya bilan)</span>
<span class="sql-keyword">CREATE PROCEDURE</span> <span class="sql-proc">sp_sotuv_qoshish</span>(
    <span class="sql-keyword">IN</span>  p_xodim_id <span class="sql-keyword">INT</span>,
    <span class="sql-keyword">IN</span>  p_mahsulot_id <span class="sql-keyword">INT</span>,
    <span class="sql-keyword">IN</span>  p_miqdor <span class="sql-keyword">INT</span>,
    <span class="sql-keyword">IN</span>  p_chegirma <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">5</span>,<span class="sql-number">2</span>),
    <span class="sql-keyword">OUT</span> p_natija <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">200</span>)
)
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">DECLARE</span> <span class="sql-var">v_qoldiq</span> <span class="sql-keyword">INT</span>;
    <span class="sql-keyword">DECLARE</span> <span class="sql-var">v_narx</span> <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>);

    <span class="sql-comment">-- Mahsulot mavjudligini tekshirish</span>
    <span class="sql-keyword">SELECT</span> qoldiq, narx <span class="sql-keyword">INTO</span> <span class="sql-var">v_qoldiq</span>, <span class="sql-var">v_narx</span>
    <span class="sql-keyword">FROM</span> mahsulotlar <span class="sql-keyword">WHERE</span> id = p_mahsulot_id;

    <span class="sql-keyword">IF</span> <span class="sql-var">v_qoldiq</span> <span class="sql-keyword">IS NULL THEN</span>
        <span class="sql-keyword">SET</span> p_natija = <span class="sql-string">'‚ùå Mahsulot topilmadi'</span>;
    <span class="sql-keyword">ELSEIF</span> <span class="sql-var">v_qoldiq</span> &lt; p_miqdor <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">SET</span> p_natija = <span class="sql-function">CONCAT</span>(<span class="sql-string">'‚ùå Yetarli emas! Qoldiq: '</span>, <span class="sql-var">v_qoldiq</span>);
    <span class="sql-keyword">ELSE</span>
        <span class="sql-comment">-- Sotuv qo'shish</span>
        <span class="sql-keyword">INSERT INTO</span> sotuvlar (xodim_id, mahsulot_id, miqdor, narx, chegirma_foiz, sotuv_sana)
        <span class="sql-keyword">VALUES</span> (p_xodim_id, p_mahsulot_id, p_miqdor, <span class="sql-var">v_narx</span>, p_chegirma, <span class="sql-function">CURDATE</span>());

        <span class="sql-comment">-- Qoldiqni kamaytirish</span>
        <span class="sql-keyword">UPDATE</span> mahsulotlar <span class="sql-keyword">SET</span> qoldiq = qoldiq - p_miqdor
        <span class="sql-keyword">WHERE</span> id = p_mahsulot_id;

        <span class="sql-keyword">SET</span> p_natija = <span class="sql-function">CONCAT</span>(<span class="sql-string">'‚úÖ Sotuv qo\'shildi! Summa: '</span>,
            <span class="sql-proc">fn_som_format</span>(<span class="sql-proc">fn_sof_summa</span>(p_miqdor * <span class="sql-var">v_narx</span>, p_chegirma)));
    <span class="sql-keyword">END IF</span>;
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-comment">-- Test</span>
<span class="sql-keyword">CALL</span> <span class="sql-proc">sp_sotuv_qoshish</span>(<span class="sql-number">5</span>, <span class="sql-number">1</span>, <span class="sql-number">2</span>, <span class="sql-number">5</span>, @natija);
<span class="sql-keyword">SELECT</span> @natija;</code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE PROCEDURE sp_maosh_oshirish</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE PROCEDURE sp_sotuv_qoshish</code></span>
</div>
</div>

<div class="luxury-divider"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê C. TRIGGERLAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<h2><span class="icon">üéØ</span>C. TRIGGER ‚Äî Triggerlar</h2>

<!-- BOSQICH 6 -->
<div class="card">
<h3><span class="step-number">6</span>BEFORE triggerlar (validatsiya va avtomatik to'ldirish)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Triggerlar</div></div>
<pre><code><span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 1. BEFORE INSERT ‚Äî xodim maoshini tekshirish</span>
<span class="sql-keyword">CREATE TRIGGER</span> <span class="sql-trigger">trg_xodim_insert_before</span>
<span class="sql-keyword">BEFORE INSERT ON</span> xodimlar
<span class="sql-keyword">FOR EACH ROW</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-comment">-- Maosh 3 mln dan kam bo'lmasligi kerak</span>
    <span class="sql-keyword">IF</span> <span class="sql-keyword">NEW</span>.maosh &lt; <span class="sql-number">3000000</span> <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">SET</span> <span class="sql-keyword">NEW</span>.maosh = <span class="sql-number">3000000</span>;
    <span class="sql-keyword">END IF</span>;
    
    <span class="sql-comment">-- Ismning birinchi harfini katta qilish</span>
    <span class="sql-keyword">SET</span> <span class="sql-keyword">NEW</span>.ism = <span class="sql-function">CONCAT</span>(
        <span class="sql-function">UPPER</span>(<span class="sql-function">LEFT</span>(<span class="sql-keyword">NEW</span>.ism, <span class="sql-number">1</span>)),
        <span class="sql-function">LOWER</span>(<span class="sql-function">SUBSTRING</span>(<span class="sql-keyword">NEW</span>.ism, <span class="sql-number">2</span>))
    );
    <span class="sql-keyword">SET</span> <span class="sql-keyword">NEW</span>.familiya = <span class="sql-function">CONCAT</span>(
        <span class="sql-function">UPPER</span>(<span class="sql-function">LEFT</span>(<span class="sql-keyword">NEW</span>.familiya, <span class="sql-number">1</span>)),
        <span class="sql-function">LOWER</span>(<span class="sql-function">SUBSTRING</span>(<span class="sql-keyword">NEW</span>.familiya, <span class="sql-number">2</span>))
    );
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-comment">-- Test: kichik harf va past maosh bilan</span>
<span class="sql-keyword">INSERT INTO</span> xodimlar (ism, familiya, bolim, lavozim, maosh, ishga_kirgan)
<span class="sql-keyword">VALUES</span> (<span class="sql-string">'sardor'</span>, <span class="sql-string">'TOJIYEV'</span>, <span class="sql-string">'IT'</span>, <span class="sql-string">'Stajyor'</span>, <span class="sql-number">2000000</span>, <span class="sql-function">CURDATE</span>());

<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> xodimlar <span class="sql-keyword">WHERE</span> id = <span class="sql-function">LAST_INSERT_ID</span>();</code></pre>
</div>

<span class="result-label">üìã Natija ‚Äî trigger tuzatdi!</span>
<table>
<thead><tr><th>id</th><th>ism</th><th>familiya</th><th>maosh</th></tr></thead>
<tbody><tr class="highlight-row"><td>9</td><td>Sardor</td><td>Tojiyev</td><td>3,000,000</td></tr></tbody>
</table>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Triggerlar</div></div>
<pre><code><span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 2. BEFORE UPDATE ‚Äî maosh oshirishni cheklash (30% dan ortiq emas)</span>
<span class="sql-keyword">CREATE TRIGGER</span> <span class="sql-trigger">trg_xodim_update_before</span>
<span class="sql-keyword">BEFORE UPDATE ON</span> xodimlar
<span class="sql-keyword">FOR EACH ROW</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">DECLARE</span> <span class="sql-var">v_osish</span> <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">10</span>,<span class="sql-number">2</span>);
    
    <span class="sql-keyword">IF</span> <span class="sql-keyword">NEW</span>.maosh != <span class="sql-keyword">OLD</span>.maosh <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">SET</span> <span class="sql-var">v_osish</span> = (<span class="sql-keyword">NEW</span>.maosh - <span class="sql-keyword">OLD</span>.maosh) * <span class="sql-number">100.0</span> / <span class="sql-keyword">OLD</span>.maosh;
        
        <span class="sql-keyword">IF</span> <span class="sql-var">v_osish</span> > <span class="sql-number">30</span> <span class="sql-keyword">THEN</span>
            <span class="sql-keyword">SIGNAL SQLSTATE</span> <span class="sql-string">'45000'</span>
            <span class="sql-keyword">SET</span> MESSAGE_TEXT = <span class="sql-string">'Maosh 30% dan ortiq oshirib bo\'lmaydi!'</span>;
        <span class="sql-keyword">END IF</span>;
    <span class="sql-keyword">END IF</span>;
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-comment">-- ‚úÖ Bu ishlaydi (10% oshirish)</span>
<span class="sql-keyword">UPDATE</span> xodimlar <span class="sql-keyword">SET</span> maosh = maosh * <span class="sql-number">1.10</span> <span class="sql-keyword">WHERE</span> id = <span class="sql-number">2</span>;

<span class="sql-comment">-- ‚ùå Bu XATO beradi (50% oshirish)</span>
<span class="sql-comment">-- UPDATE xodimlar SET maosh = maosh * 1.50 WHERE id = 2;</span>
<span class="sql-comment">-- ERROR: Maosh 30% dan ortiq oshirib bo'lmaydi!</span></code></pre>
</div>
<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.01 sec) ‚Äî <code>CREATE TRIGGER trg_xodim_update_before</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>UPDATE</code> (10% oshirish muvaffaqiyatli)</span>
</div>
</div>

<!-- BOSQICH 7 -->
<div class="card">
<h3><span class="step-number">7</span>AFTER triggerlar (audit jurnal va avtomatik amallar)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Triggerlar</div></div>
<pre><code><span class="sql-keyword">DELIMITER</span> //

<span class="sql-comment">-- 3. AFTER UPDATE ‚Äî maosh o'zgarishi jurnali</span>
<span class="sql-keyword">CREATE TRIGGER</span> <span class="sql-trigger">trg_xodim_update_after</span>
<span class="sql-keyword">AFTER UPDATE ON</span> xodimlar
<span class="sql-keyword">FOR EACH ROW</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">IF</span> <span class="sql-keyword">OLD</span>.maosh != <span class="sql-keyword">NEW</span>.maosh <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">INSERT INTO</span> audit_jurnal (jadval_nomi, amal_turi, yozuv_id, eski_qiymat, yangi_qiymat, foydalanuvchi)
        <span class="sql-keyword">VALUES</span> (
            <span class="sql-string">'xodimlar'</span>,
            <span class="sql-string">'MAOSH_OZGARISH'</span>,
            <span class="sql-keyword">NEW</span>.id,
            <span class="sql-function">CONCAT</span>(<span class="sql-keyword">OLD</span>.ism, <span class="sql-string">': '</span>, <span class="sql-function">FORMAT</span>(<span class="sql-keyword">OLD</span>.maosh, <span class="sql-number">0</span>)),
            <span class="sql-function">CONCAT</span>(<span class="sql-keyword">NEW</span>.ism, <span class="sql-string">': '</span>, <span class="sql-function">FORMAT</span>(<span class="sql-keyword">NEW</span>.maosh, <span class="sql-number">0</span>), 
                   <span class="sql-string">' ('</span>, <span class="sql-function">ROUND</span>((<span class="sql-keyword">NEW</span>.maosh - <span class="sql-keyword">OLD</span>.maosh) * <span class="sql-number">100.0</span> / <span class="sql-keyword">OLD</span>.maosh, <span class="sql-number">1</span>), <span class="sql-string">'%)'</span>),
            <span class="sql-function">CURRENT_USER</span>()
        );
    <span class="sql-keyword">END IF</span>;
<span class="sql-keyword">END</span> //

<span class="sql-comment">-- 4. AFTER INSERT ‚Äî yangi sotuv jurnali</span>
<span class="sql-keyword">CREATE TRIGGER</span> <span class="sql-trigger">trg_sotuv_insert_after</span>
<span class="sql-keyword">AFTER INSERT ON</span> sotuvlar
<span class="sql-keyword">FOR EACH ROW</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">INSERT INTO</span> audit_jurnal (jadval_nomi, amal_turi, yozuv_id, yangi_qiymat, foydalanuvchi)
    <span class="sql-keyword">VALUES</span> (
        <span class="sql-string">'sotuvlar'</span>,
        <span class="sql-string">'YANGI_SOTUV'</span>,
        <span class="sql-keyword">NEW</span>.id,
        <span class="sql-function">CONCAT</span>(<span class="sql-string">'Xodim:'</span>, <span class="sql-keyword">NEW</span>.xodim_id,
               <span class="sql-string">' Mahsulot:'</span>, <span class="sql-keyword">NEW</span>.mahsulot_id,
               <span class="sql-string">' Miqdor:'</span>, <span class="sql-keyword">NEW</span>.miqdor,
               <span class="sql-string">' Summa:'</span>, <span class="sql-function">FORMAT</span>(<span class="sql-keyword">NEW</span>.miqdor * <span class="sql-keyword">NEW</span>.narx, <span class="sql-number">0</span>)),
        <span class="sql-function">CURRENT_USER</span>()
    );
<span class="sql-keyword">END</span> //

<span class="sql-comment">-- 5. BEFORE DELETE ‚Äî o'chirishni oldini olish</span>
<span class="sql-keyword">CREATE TRIGGER</span> <span class="sql-trigger">trg_xodim_delete_before</span>
<span class="sql-keyword">BEFORE DELETE ON</span> xodimlar
<span class="sql-keyword">FOR EACH ROW</span>
<span class="sql-keyword">BEGIN</span>
    <span class="sql-keyword">DECLARE</span> <span class="sql-var">v_sotuvlar</span> <span class="sql-keyword">INT</span>;
    
    <span class="sql-keyword">SELECT COUNT</span>(*) <span class="sql-keyword">INTO</span> <span class="sql-var">v_sotuvlar</span>
    <span class="sql-keyword">FROM</span> sotuvlar <span class="sql-keyword">WHERE</span> xodim_id = <span class="sql-keyword">OLD</span>.id;
    
    <span class="sql-keyword">IF</span> <span class="sql-var">v_sotuvlar</span> > <span class="sql-number">0</span> <span class="sql-keyword">THEN</span>
        <span class="sql-keyword">SIGNAL SQLSTATE</span> <span class="sql-string">'45000'</span>
        <span class="sql-keyword">SET</span> MESSAGE_TEXT = <span class="sql-string">'Sotuvlari bor xodimni o\'chirish mumkin emas!'</span>;
    <span class="sql-keyword">END IF</span>;
<span class="sql-keyword">END</span> //

<span class="sql-keyword">DELIMITER</span> ;

<span class="sql-comment">-- Test: maosh o'zgartirish ‚Üí jurnal yoziladi</span>
<span class="sql-keyword">UPDATE</span> xodimlar <span class="sql-keyword">SET</span> maosh = <span class="sql-number">9500000</span> <span class="sql-keyword">WHERE</span> id = <span class="sql-number">7</span>;

<span class="sql-comment">-- Audit jurnalni ko'rish</span>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> audit_jurnal <span class="sql-keyword">ORDER BY</span> vaqt <span class="sql-keyword">DESC</span>;</code></pre>
</div>

<span class="result-label">üìã Audit jurnal</span>
<table>
<thead><tr><th>amal_turi</th><th>yozuv_id</th><th>eski_qiymat</th><th>yangi_qiymat</th><th>vaqt</th></tr></thead>
<tbody>
<tr><td>MAOSH_OZGARISH</td><td>7</td><td>Nodira: 9,000,000</td><td>Nodira: 9,500,000 (5.6%)</td><td>2024-06-15 ...</td></tr>
<tr><td>MAOSH_OZGARISH</td><td>2</td><td>Dilnoza: 6,200,000</td><td>Dilnoza: 6,820,000 (10.0%)</td><td>2024-06-15 ...</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 8: BOSHQARISH -->
<div class="card">
<h3><span class="step-number">8</span>Funksiya, protsedura va triggerlarni boshqarish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Boshqarish</div></div>
<pre><code><span class="sql-comment">-- ‚ïê‚ïê‚ïê Funksiyalar ro'yxati ‚ïê‚ïê‚ïê</span>
<span class="sql-keyword">SHOW FUNCTION STATUS WHERE</span> Db = <span class="sql-string">'prog_db'</span>;

<span class="sql-comment">-- Funksiya kodini ko'rish</span>
<span class="sql-keyword">SHOW CREATE FUNCTION</span> <span class="sql-proc">fn_som_format</span>;

<span class="sql-comment">-- ‚ïê‚ïê‚ïê Protseduralar ro'yxati ‚ïê‚ïê‚ïê</span>
<span class="sql-keyword">SHOW PROCEDURE STATUS WHERE</span> Db = <span class="sql-string">'prog_db'</span>;

<span class="sql-comment">-- Protsedura kodini ko'rish</span>
<span class="sql-keyword">SHOW CREATE PROCEDURE</span> <span class="sql-proc">sp_bolim_xodimlari</span>;

<span class="sql-comment">-- ‚ïê‚ïê‚ïê Triggerlar ro'yxati ‚ïê‚ïê‚ïê</span>
<span class="sql-keyword">SHOW TRIGGERS FROM</span> prog_db;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Boshqarish</div></div>
<pre><code><span class="sql-comment">-- information_schema dan barcha ob'ektlar</span>
<span class="sql-keyword">SELECT</span> <span class="sql-string">'FUNCTION'</span> <span class="sql-keyword">AS</span> turi, routine_name <span class="sql-keyword">AS</span> nomi
<span class="sql-keyword">FROM</span> information_schema.routines
<span class="sql-keyword">WHERE</span> routine_schema = <span class="sql-string">'prog_db'</span> <span class="sql-keyword">AND</span> routine_type = <span class="sql-string">'FUNCTION'</span>
<span class="sql-operator">UNION ALL</span>
<span class="sql-keyword">SELECT</span> <span class="sql-string">'PROCEDURE'</span>, routine_name
<span class="sql-keyword">FROM</span> information_schema.routines
<span class="sql-keyword">WHERE</span> routine_schema = <span class="sql-string">'prog_db'</span> <span class="sql-keyword">AND</span> routine_type = <span class="sql-string">'PROCEDURE'</span>
<span class="sql-operator">UNION ALL</span>
<span class="sql-keyword">SELECT</span> <span class="sql-string">'TRIGGER'</span>, trigger_name
<span class="sql-keyword">FROM</span> information_schema.triggers
<span class="sql-keyword">WHERE</span> trigger_schema = <span class="sql-string">'prog_db'</span>
<span class="sql-keyword">ORDER BY</span> turi, nomi;</code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî Boshqarish</div></div>
<pre><code><span class="sql-comment">-- O'chirish</span>
<span class="sql-comment">-- DROP FUNCTION IF EXISTS fn_nomi;</span>
<span class="sql-comment">-- DROP PROCEDURE IF EXISTS sp_nomi;</span>
<span class="sql-comment">-- DROP TRIGGER IF EXISTS trg_nomi;</span></code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- QIYOSIY JADVAL -->
<h2><span class="icon">üìä</span>FUNCTION vs PROCEDURE vs TRIGGER ‚Äî yakuniy qiyoslash</h2>
<div class="card-flat">
<table>
<thead><tr><th>Xususiyat</th><th>‚öôÔ∏è FUNCTION</th><th>üì¶ PROCEDURE</th><th>üéØ TRIGGER</th></tr></thead>
<tbody>
<tr><td><strong>Chaqirish</strong></td><td><code>SELECT func()</code></td><td><code>CALL proc()</code></td><td>Avtomatik</td></tr>
<tr><td><strong>Qaytaradi</strong></td><td>1 ta qiymat (RETURN)</td><td>0+ natija (OUT/resultset)</td><td>Hech narsa</td></tr>
<tr><td><strong>SELECT ichida</strong></td><td>‚úÖ Ha</td><td>‚ùå Yo'q</td><td>‚ùå Yo'q</td></tr>
<tr><td><strong>Parametrlar</strong></td><td>Faqat IN</td><td>IN, OUT, INOUT</td><td>NEW, OLD</td></tr>
<tr><td><strong>Jadvalga yozish</strong></td><td>‚ö†Ô∏è Cheklangan</td><td>‚úÖ To'liq</td><td>‚úÖ Boshqa jadvalga</td></tr>
<tr><td><strong>Tranzaksiya</strong></td><td>‚ùå</td><td>‚úÖ</td><td>Tranzaksiya ichida</td></tr>
<tr><td><strong>Ishga tushirish</strong></td><td>Qo'lda</td><td>Qo'lda</td><td>Hodisa bo'lganda</td></tr>
<tr><td><strong>Asosiy maqsad</strong></td><td>Hisoblash, formatlash</td><td>Biznes mantiq, amallar</td><td>Audit, validatsiya, avtomatika</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- NAZORAT SAVOLLARI -->
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card">
<ol>
<li>FUNCTION va PROCEDURE orasidagi asosiy farqni tushuntiring.</li>
<li><code>DELIMITER</code> nima uchun kerak? Nima uchun <code>//</code> ga o'zgartiriladi?</li>
<li><code>DETERMINISTIC</code> kalit so'zi nimani anglatadi?</li>
<li>Protsedura da <code>IN</code>, <code>OUT</code>, <code>INOUT</code> parametrlar orasidagi farq nimada?</li>
<li>TRIGGER da <code>BEFORE</code> va <code>AFTER</code> orasidagi farq nimada? Qachon qaysi biri ishlatiladi?</li>
<li><code>NEW</code> va <code>OLD</code> kalit so'zlari qaysi hodisalarda mavjud?</li>
<li><code>SIGNAL SQLSTATE '45000'</code> nima ish qiladi? Qachon ishlatiladi?</li>
<li>Audit jurnal tizimini trigger bilan qanday tashkil qilish mumkin?</li>
</ol>
</div>

<!-- AMALIY TOPSHIRIQLAR -->
<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>
<div class="card">
<ol>
<li><strong>FUNCTION:</strong> Summani dollardan so'mga aylantiradigan <code>fn_dollar_som()</code> funksiya yarating (kurs parametr)</li>
<li><strong>FUNCTION:</strong> Ikki sana orasidagi kunlarni yil/oy/kun formatida ko'rsatadigan funksiya yarating</li>
<li><strong>PROCEDURE (IN):</strong> Berilgan sanalar oralig'idagi sotuvlarni ko'rsatadigan protsedura yarating</li>
<li><strong>PROCEDURE (OUT):</strong> Mahsulot ID bo'yicha jami sotilgan miqdor va summani qaytaradigan protsedura</li>
<li><strong>PROCEDURE:</strong> Yangi mahsulot qo'shishda narx va qoldiqni tekshiruvchi validatsiyali protsedura</li>
<li><strong>TRIGGER (BEFORE):</strong> Mahsulot narxini 0 dan katta bo'lishini ta'minlaydigan trigger</li>
<li><strong>TRIGGER (AFTER):</strong> Mahsulot narxi o'zgarganda audit jurnalga yozadigan trigger</li>
<li><strong>üí´ Bonus:</strong> To'liq sotuv tizimini yarating: mahsulot qoldiqni tekshiruvchi PROCEDURE, narxni validatsiya qiluvchi TRIGGER, soliq va chegirmani hisoblovchi FUNCTION ‚Äî barchasi birgalikda ishlashi kerak</li>
</ol>
</div>

<!-- HISOBOT SHABLONI -->
<h2><span class="icon">üìù</span>Hisobot shabloni</h2>
<table>
<thead><tr><th>Bo'lim</th><th>Tavsif</th></tr></thead>
<tbody>
<tr><td><strong>Ishdan maqsad</strong></td><td>SQL funksiyalar, protseduralar va triggerlarni yaratish va qo'llash</td></tr>
<tr><td><strong>FUNCTION</strong></td><td>Oddiy va murakkab funksiyalar (formatlash, hisoblash, IF/ELSE)</td></tr>
<tr><td><strong>PROCEDURE</strong></td><td>IN/OUT parametrli protseduralar, validatsiya, biznes mantiq</td></tr>
<tr><td><strong>TRIGGER</strong></td><td>BEFORE/AFTER triggerlar, SIGNAL, audit jurnal, o'chirishni oldini olish</td></tr>
<tr><td><strong>Boshqarish</strong></td><td>SHOW, information_schema, DROP buyruqlari</td></tr>
<tr><td><strong>Xulosa</strong></td><td>O'rganilgan texnikalar va amaliy qo'llanilishi</td></tr>
</tbody>
</table>

<div class="luxury-divider"></div>

<!-- XULOSA -->
<div class="card">
<h2><span class="icon">üèÜ</span>Xulosa</h2>
<p>Ushbu amaliy mashg'ulotni yakunlagan talaba quyidagi ko'nikmalarga ega bo'ladi:</p>
<ul>
<li><strong>FUNCTION:</strong> RETURN bilan qiymat qaytaruvchi funksiyalar yaratish (formatlash, hisoblash, IF/ELSE mantiq)</li>
<li><strong>FUNCTION SELECT ichida:</strong> funksiyalarni so'rov ichida chaqirish va natijalar ustida ishlatish</li>
<li><strong>PROCEDURE (IN):</strong> kiruvchi parametrli protseduralar (hisobot, filtrlash)</li>
<li><strong>PROCEDURE (OUT):</strong> natija qaytaruvchi protseduralar va foydalanuvchi o'zgaruvchilari (@var)</li>
<li><strong>PROCEDURE validatsiya:</strong> IF/ELSEIF bilan xatolarni tekshirish va xabar berish</li>
<li><strong>BEFORE TRIGGER:</strong> INSERT/UPDATE dan oldin ma'lumotni tekshirish va tuzatish</li>
<li><strong>AFTER TRIGGER:</strong> hodisadan keyin audit jurnal yozish va avtomatik amallar</li>
<li><strong>SIGNAL SQLSTATE:</strong> xato holatlarda boshqariladigan xabarlar yaratish</li>
<li><strong>NEW / OLD:</strong> trigger ichida eski va yangi qiymatlarni ishlatish</li>
<li><strong>Boshqarish:</strong> SHOW, information_schema, DROP bilan ob'ektlarni ko'rish va o'chirish</li>
</ul>
</div>
</div>
</div>

<!-- ===== TUTORIAL 15 ===== -->
<div class="section-block" id="t15">
<div class="container">
<h1>15-amaliy mashg'ulot</h1>
<p class="subtitle">Dasturlash tillari va ma'lumotlar bazasi yordamida oddiy interfeys yaratish</p>
<div class="gold-line"></div>

<div class="meta-info">
    <strong>üìò Fan:</strong> Ma'lumotlar bazasi &nbsp;|&nbsp;
    <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp;
    <strong>üéØ Daraja:</strong> Yuqori &nbsp;|&nbsp;
    <strong>üõ† Texnologiyalar:</strong> Python ¬∑ Flask ¬∑ MySQL ¬∑ HTML/CSS
</div>

<!-- ===== NAZARIY QISM ===== -->
<h2><span class="icon">üìñ</span>Nazariy qism</h2>

<div class="card">
<h3><span class="icon">üèó</span>Web-ilova arxitekturasi</h3>

<p>Zamonaviy web-ilovalar <strong>3 darajali arxitektura</strong> asosida quriladi: foydalanuvchi interfeysi (Frontend), server mantiqi (Backend) va ma'lumotlar bazasi (Database). Ular birgalikda ishlash orqali dinamik, interaktiv tizimlarni yaratadi.</p>

<!-- Arxitektura diagrammasi -->
<div class="arch-diagram">
<svg viewBox="0 0 650 200" xmlns="http://www.w3.org/2000/svg" style="max-width:620px;">
    <!-- Frontend -->
    <rect x="10" y="40" width="170" height="120" rx="18" fill="#1a1a1a" stroke="#333" stroke-width="1"/>
    <text x="95" y="72" text-anchor="middle" fill="#d4af37" font-size="14" font-weight="bold" font-family="Inter, Arial, sans-serif">FRONTEND</text>
    <text x="95" y="95" text-anchor="middle" fill="#aaa" font-size="10.5" font-family="Inter, Arial, sans-serif">HTML / CSS</text>
    <text x="95" y="112" text-anchor="middle" fill="#aaa" font-size="10.5" font-family="Inter, Arial, sans-serif">Jinja2 shablonlar</text>
    <text x="95" y="140" text-anchor="middle" fill="#50fa7b" font-size="10" font-style="italic" font-family="Inter, Arial, sans-serif">Foydalanuvchi ko'radi</text>

    <!-- Backend -->
    <rect x="235" y="40" width="170" height="120" rx="18" fill="#1a1a1a" stroke="#333" stroke-width="1"/>
    <text x="320" y="72" text-anchor="middle" fill="#d4af37" font-size="14" font-weight="bold" font-family="Inter, Arial, sans-serif">BACKEND</text>
    <text x="320" y="95" text-anchor="middle" fill="#aaa" font-size="10.5" font-family="Inter, Arial, sans-serif">Python + Flask</text>
    <text x="320" y="112" text-anchor="middle" fill="#aaa" font-size="10.5" font-family="Inter, Arial, sans-serif">Route + Logic</text>
    <text x="320" y="140" text-anchor="middle" fill="#50fa7b" font-size="10" font-style="italic" font-family="Inter, Arial, sans-serif">So'rovlarni boshqaradi</text>

    <!-- Database -->
    <rect x="460" y="40" width="170" height="120" rx="18" fill="#1a1a1a" stroke="#333" stroke-width="1"/>
    <text x="545" y="72" text-anchor="middle" fill="#d4af37" font-size="14" font-weight="bold" font-family="Inter, Arial, sans-serif">DATABASE</text>
    <text x="545" y="95" text-anchor="middle" fill="#aaa" font-size="10.5" font-family="Inter, Arial, sans-serif">MySQL</text>
    <text x="545" y="112" text-anchor="middle" fill="#aaa" font-size="10.5" font-family="Inter, Arial, sans-serif">Jadvallar + SQL</text>
    <text x="545" y="140" text-anchor="middle" fill="#50fa7b" font-size="10" font-style="italic" font-family="Inter, Arial, sans-serif">Ma'lumot saqlaydi</text>

    <!-- Strelkalar -->
    <line x1="180" y1="85" x2="235" y2="85" stroke="#d4af37" stroke-width="2" marker-end="url(#arr)"/>
    <text x="207" y="80" text-anchor="middle" fill="#888" font-size="9">HTTP</text>
    <line x1="235" y1="115" x2="180" y2="115" stroke="#d4af37" stroke-width="2" marker-end="url(#arr)"/>
    <text x="207" y="130" text-anchor="middle" fill="#888" font-size="9">HTML</text>

    <line x1="405" y1="85" x2="460" y2="85" stroke="#d4af37" stroke-width="2" marker-end="url(#arr)"/>
    <text x="432" y="80" text-anchor="middle" fill="#888" font-size="9">SQL</text>
    <line x1="460" y1="115" x2="405" y2="115" stroke="#d4af37" stroke-width="2" marker-end="url(#arr)"/>
    <text x="432" y="130" text-anchor="middle" fill="#888" font-size="9">Data</text>

    <defs><marker id="arr" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 0,8 3,0 6" fill="#d4af37"/></marker></defs>
</svg>
</div>
</div>

<div class="card">
<h3><span class="icon">üß∞</span>Ishlatiladigan texnologiyalar</h3>

<div class="concept-grid">
    <div class="concept-card">
        <span class="big-icon">üêç</span>
        <h4>Python</h4>
        <p>Asosiy dasturlash tili. Sodda sintaksis, kuchli kutubxonalar.</p>
    </div>
    <div class="concept-card">
        <span class="big-icon">üå∂</span>
        <h4>Flask</h4>
        <p>Yengil web-framework. Route, template, request boshqaruvi.</p>
    </div>
    <div class="concept-card">
        <span class="big-icon">üê¨</span>
        <h4>MySQL</h4>
        <p>Ma'lumotlar bazasi. SQL so'rovlar orqali CRUD amallar.</p>
    </div>
    <div class="concept-card">
        <span class="big-icon">üé®</span>
        <h4>HTML / CSS</h4>
        <p>Foydalanuvchi interfeysi. Formalar, jadvallar, dizayn.</p>
    </div>
    <div class="concept-card">
        <span class="big-icon">üìÑ</span>
        <h4>Jinja2</h4>
        <p>Shablon tizimi. Python o'zgaruvchilarni HTML ga uzatish.</p>
    </div>
    <div class="concept-card">
        <span class="big-icon">üîå</span>
        <h4>mysql-connector</h4>
        <p>Python ‚Üî MySQL bog'lovchi kutubxona.</p>
    </div>
</div>
</div>

<div class="luxury-divider"></div>

<!-- ===== AMALIY QISM ===== -->
<h2><span class="icon">‚ö°</span>Amaliy qism</h2>

<!-- BOSQICH 1: O'RNATISH -->
<div class="card">
<h3><span class="step-number">1</span>Muhit va kutubxonalarni o'rnatish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">Terminal ‚Äî pip install Flask</div></div>
<pre><code><span class="py-comment"># Terminal / CMD da bajaring:</span>

<span class="py-comment"># 1. Kutubxonalarni o'rnatish</span>
pip install flask
pip install mysql-connector-python

<span class="py-comment"># 2. Loyiha papkasini yaratish</span>
mkdir xodimlar_tizimi
cd xodimlar_tizimi
mkdir templates
mkdir static</code></pre>
</div>

<span class="result-label">üìÅ Loyiha tuzilmasi</span>
<div class="folder-tree">
<span class="folder">üìÇ xodimlar_tizimi/</span><br/>
‚îú‚îÄ‚îÄ <span class="file-py">üìÑ app.py</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># Asosiy Flask ilova</span><br/>
‚îú‚îÄ‚îÄ <span class="file-py">üìÑ db.py</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># MySQL ulanish moduli</span><br/>
‚îú‚îÄ‚îÄ <span class="file-sql">üìÑ schema.sql</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># Ma'lumotlar bazasi sxemasi</span><br/>
‚îú‚îÄ‚îÄ <span class="folder">üìÇ templates/</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># HTML shablonlar</span><br/>
‚îÇ &nbsp;&nbsp; ‚îú‚îÄ‚îÄ <span class="file-html">üìÑ base.html</span> &nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># Asosiy shablon (layout)</span><br/>
‚îÇ &nbsp;&nbsp; ‚îú‚îÄ‚îÄ <span class="file-html">üìÑ index.html</span> &nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># Bosh sahifa ‚Äî ro'yxat</span><br/>
‚îÇ &nbsp;&nbsp; ‚îú‚îÄ‚îÄ <span class="file-html">üìÑ add.html</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># Qo'shish formasi</span><br/>
‚îÇ &nbsp;&nbsp; ‚îî‚îÄ‚îÄ <span class="file-html">üìÑ edit.html</span> &nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># Tahrirlash formasi</span><br/>
‚îî‚îÄ‚îÄ <span class="folder">üìÇ static/</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># CSS, rasmlar</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp; ‚îî‚îÄ‚îÄ <span class="file-css">üìÑ style.css</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#6272a4"># Uslublar</span>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 2: MA'LUMOTLAR BAZASI -->
<div class="card">
<h3><span class="step-number">2</span>MySQL ma'lumotlar bazasi (schema.sql)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">MySQL Workbench ‚Äî schema.sql</div></div>
<pre><code><span class="file-badge">schema.sql</span>
<span class="sql-comment">-- Ma'lumotlar bazasini yaratish</span>
<span class="sql-keyword">CREATE DATABASE IF NOT EXISTS</span> xodimlar_db
<span class="sql-keyword">CHARACTER SET</span> utf8mb4
<span class="sql-keyword">COLLATE</span> utf8mb4_unicode_ci;

<span class="sql-keyword">USE</span> xodimlar_db;

<span class="sql-comment">-- Xodimlar jadvali</span>
<span class="sql-keyword">CREATE TABLE IF NOT EXISTS</span> xodimlar (
    id <span class="sql-keyword">INT PRIMARY KEY AUTO_INCREMENT</span>,
    ism <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    familiya <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>) <span class="sql-keyword">NOT NULL</span>,
    email <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">100</span>),
    telefon <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">20</span>),
    bolim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">50</span>),
    lavozim <span class="sql-keyword">VARCHAR</span>(<span class="sql-number">80</span>),
    maosh <span class="sql-keyword">DECIMAL</span>(<span class="sql-number">12</span>,<span class="sql-number">2</span>),
    ishga_kirgan <span class="sql-keyword">DATE</span>,
    yaratilgan <span class="sql-keyword">TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
);

<span class="sql-comment">-- Namuna ma'lumotlar</span>
<span class="sql-keyword">INSERT INTO</span> xodimlar (ism, familiya, email, telefon, bolim, lavozim, maosh, ishga_kirgan) <span class="sql-keyword">VALUES</span>
(<span class="sql-string">'Alisher'</span>,  <span class="sql-string">'Karimov'</span>,   <span class="sql-string">'alisher@kompaniya.uz'</span>,  <span class="sql-string">'+998901234567'</span>, <span class="sql-string">'IT'</span>,        <span class="sql-string">'Senior dasturchi'</span>,  <span class="sql-number">12500000</span>, <span class="sql-string">'2020-03-15'</span>),
(<span class="sql-string">'Dilnoza'</span>,  <span class="sql-string">'Rahimova'</span>,  <span class="sql-string">'dilnoza@kompaniya.uz'</span>,  <span class="sql-string">'+998931112233'</span>, <span class="sql-string">'IT'</span>,        <span class="sql-string">'Junior dasturchi'</span>,  <span class="sql-number">6200000</span>,  <span class="sql-string">'2023-01-10'</span>),
(<span class="sql-string">'Gulnora'</span>,  <span class="sql-string">'Azimova'</span>,   <span class="sql-string">'gulnora@kompaniya.uz'</span>,  <span class="sql-string">'+998977778899'</span>, <span class="sql-string">'Moliya'</span>,    <span class="sql-string">'Bosh hisobchi'</span>,     <span class="sql-number">11000000</span>, <span class="sql-string">'2019-09-01'</span>),
(<span class="sql-string">'Kamola'</span>,   <span class="sql-string">'Umarova'</span>,   <span class="sql-string">'kamola@kompaniya.uz'</span>,   <span class="sql-string">'+998903334455'</span>, <span class="sql-string">'Sotuv'</span>,     <span class="sql-string">'Sotuv boshlig\'i'</span>,  <span class="sql-number">13000000</span>, <span class="sql-string">'2019-08-22'</span>),
(<span class="sql-string">'Jasur'</span>,    <span class="sql-string">'Ergashev'</span>,  <span class="sql-string">'jasur@kompaniya.uz'</span>,    <span class="sql-string">'+998911122233'</span>, <span class="sql-string">'Sotuv'</span>,     <span class="sql-string">'Sotuv menejeri'</span>,    <span class="sql-number">8000000</span>,  <span class="sql-string">'2022-01-15'</span>);</code></pre>
</div>

<div class="result-ok">
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 1 row affected (0.01 sec) ‚Äî <code>CREATE DATABASE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Database changed ‚Äî <code>USE xodimlar_db</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 0 rows affected (0.02 sec) ‚Äî <code>CREATE TABLE</code></span>
<span class="rok-line"><span class="rok-icon">‚úÖ</span>Query OK, 5 rows affected (0.01 sec) ‚Äî <code>INSERT INTO</code></span>
<span class="rok-line"><span class="rok-icon">üìã</span>Records: 5 &nbsp; Duplicates: 0 &nbsp; Warnings: 0</span>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 3: DB.PY -->
<div class="card">
<h3><span class="step-number">3</span>MySQL ulanish moduli (db.py)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">VS Code ‚Äî db.py</div></div>
<pre><code><span class="file-badge">db.py</span>
<span class="py-keyword">import</span> mysql.connector
<span class="py-keyword">from</span> mysql.connector <span class="py-keyword">import</span> Error

<span class="py-comment"># ‚îÄ‚îÄ‚îÄ MySQL ulanish sozlamalari ‚îÄ‚îÄ‚îÄ</span>
DB_CONFIG = {
    <span class="py-string">'host'</span>: <span class="py-string">'localhost'</span>,
    <span class="py-string">'user'</span>: <span class="py-string">'root'</span>,
    <span class="py-string">'password'</span>: <span class="py-string">''</span>,           <span class="py-comment"># O'z parolingizni yozing</span>
    <span class="py-string">'database'</span>: <span class="py-string">'xodimlar_db'</span>,
    <span class="py-string">'charset'</span>: <span class="py-string">'utf8mb4'</span>
}


<span class="py-keyword">def</span> <span class="py-func">get_connection</span>():
    <span class="py-string">"""MySQL ga ulanish yaratish"""</span>
    <span class="py-keyword">try</span>:
        conn = mysql.connector.<span class="py-func">connect</span>(**DB_CONFIG)
        <span class="py-keyword">if</span> conn.is_connected():
            <span class="py-keyword">return</span> conn
    <span class="py-keyword">except</span> Error <span class="py-keyword">as</span> e:
        <span class="py-builtin">print</span>(<span class="py-string">f"‚ùå MySQL ulanish xatosi: </span>{e}<span class="py-string">"</span>)
        <span class="py-keyword">return</span> <span class="py-keyword">None</span>


<span class="py-keyword">def</span> <span class="py-func">execute_query</span>(query, params=<span class="py-keyword">None</span>, fetch=<span class="py-keyword">False</span>):
    <span class="py-string">"""SQL so'rov bajarish (INSERT, UPDATE, DELETE yoki SELECT)"""</span>
    conn = <span class="py-func">get_connection</span>()
    <span class="py-keyword">if not</span> conn:
        <span class="py-keyword">return</span> <span class="py-keyword">None</span>
    <span class="py-keyword">try</span>:
        cursor = conn.<span class="py-func">cursor</span>(dictionary=<span class="py-keyword">True</span>)
        cursor.<span class="py-func">execute</span>(query, params)

        <span class="py-keyword">if</span> fetch:
            result = cursor.<span class="py-func">fetchall</span>()
            <span class="py-keyword">return</span> result
        <span class="py-keyword">else</span>:
            conn.<span class="py-func">commit</span>()
            <span class="py-keyword">return</span> cursor.lastrowid
    <span class="py-keyword">except</span> Error <span class="py-keyword">as</span> e:
        <span class="py-builtin">print</span>(<span class="py-string">f"‚ùå SQL xatosi: </span>{e}<span class="py-string">"</span>)
        <span class="py-keyword">return</span> <span class="py-keyword">None</span>
    <span class="py-keyword">finally</span>:
        cursor.<span class="py-func">close</span>()
        conn.<span class="py-func">close</span>()</code></pre>
</div>

<div class="info-box">
<p><strong>üìå Muhim:</strong> <code>dictionary=True</code> ‚Äî natijalarni lug'at (dict) formatida olish imkonini beradi, ya'ni <code>row['ism']</code> kabi murojaat qilish mumkin. <code>commit()</code> ‚Äî INSERT/UPDATE/DELETE dan keyin o'zgarishlarni saqlaydi.</p>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 4: APP.PY -->
<div class="card">
<h3><span class="step-number">4</span>Flask ilovasi ‚Äî asosiy server (app.py)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">VS Code ‚Äî app.py</div></div>
<pre><code><span class="file-badge">app.py</span>
<span class="py-keyword">from</span> flask <span class="py-keyword">import</span> Flask, render_template, request, redirect, url_for, flash
<span class="py-keyword">from</span> db <span class="py-keyword">import</span> execute_query

app = Flask(<span class="py-builtin">__name__</span>)
app.secret_key = <span class="py-string">'maxfiy_kalit_123'</span>


<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-comment"># BOSH SAHIFA ‚Äî Xodimlar ro'yxati (READ)</span>
<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-decorator">@app.route</span>(<span class="py-string">'/'</span>)
<span class="py-keyword">def</span> <span class="py-func">index</span>():
    <span class="py-comment"># Qidiruv filtri</span>
    search = request.args.<span class="py-func">get</span>(<span class="py-string">'search'</span>, <span class="py-string">''</span>)

    <span class="py-keyword">if</span> search:
        query = <span class="py-string">"""
            SELECT * FROM xodimlar 
            WHERE ism LIKE %s OR familiya LIKE %s 
               OR bolim LIKE %s OR lavozim LIKE %s
            ORDER BY id DESC
        """</span>
        like = <span class="py-string">f"%</span>{search}<span class="py-string">%"</span>
        xodimlar = <span class="py-func">execute_query</span>(query, (like, like, like, like), fetch=<span class="py-keyword">True</span>)
    <span class="py-keyword">else</span>:
        query = <span class="py-string">"SELECT * FROM xodimlar ORDER BY id DESC"</span>
        xodimlar = <span class="py-func">execute_query</span>(query, fetch=<span class="py-keyword">True</span>)

    <span class="py-keyword">return</span> <span class="py-func">render_template</span>(<span class="py-string">'index.html'</span>,
                           xodimlar=xodimlar,
                           search=search)


<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-comment"># YANGI XODIM QO'SHISH (CREATE)</span>
<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-decorator">@app.route</span>(<span class="py-string">'/add'</span>, methods=[<span class="py-string">'GET'</span>, <span class="py-string">'POST'</span>])
<span class="py-keyword">def</span> <span class="py-func">add</span>():
    <span class="py-keyword">if</span> request.method == <span class="py-string">'POST'</span>:
        data = (
            request.form[<span class="py-string">'ism'</span>],
            request.form[<span class="py-string">'familiya'</span>],
            request.form[<span class="py-string">'email'</span>],
            request.form[<span class="py-string">'telefon'</span>],
            request.form[<span class="py-string">'bolim'</span>],
            request.form[<span class="py-string">'lavozim'</span>],
            request.form[<span class="py-string">'maosh'</span>],
            request.form[<span class="py-string">'ishga_kirgan'</span>]
        )
        query = <span class="py-string">"""
            INSERT INTO xodimlar 
            (ism, familiya, email, telefon, bolim, lavozim, maosh, ishga_kirgan)
            VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
        """</span>
        <span class="py-func">execute_query</span>(query, data)
        <span class="py-func">flash</span>(<span class="py-string">'‚úÖ Xodim muvaffaqiyatli qo\'shildi!'</span>, <span class="py-string">'success'</span>)
        <span class="py-keyword">return</span> <span class="py-func">redirect</span>(<span class="py-func">url_for</span>(<span class="py-string">'index'</span>))

    <span class="py-keyword">return</span> <span class="py-func">render_template</span>(<span class="py-string">'add.html'</span>)


<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-comment"># XODIMNI TAHRIRLASH (UPDATE)</span>
<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-decorator">@app.route</span>(<span class="py-string">'/edit/&lt;int:id&gt;'</span>, methods=[<span class="py-string">'GET'</span>, <span class="py-string">'POST'</span>])
<span class="py-keyword">def</span> <span class="py-func">edit</span>(id):
    <span class="py-keyword">if</span> request.method == <span class="py-string">'POST'</span>:
        data = (
            request.form[<span class="py-string">'ism'</span>],
            request.form[<span class="py-string">'familiya'</span>],
            request.form[<span class="py-string">'email'</span>],
            request.form[<span class="py-string">'telefon'</span>],
            request.form[<span class="py-string">'bolim'</span>],
            request.form[<span class="py-string">'lavozim'</span>],
            request.form[<span class="py-string">'maosh'</span>],
            request.form[<span class="py-string">'ishga_kirgan'</span>],
            id
        )
        query = <span class="py-string">"""
            UPDATE xodimlar SET
                ism=%s, familiya=%s, email=%s, telefon=%s,
                bolim=%s, lavozim=%s, maosh=%s, ishga_kirgan=%s
            WHERE id=%s
        """</span>
        <span class="py-func">execute_query</span>(query, data)
        <span class="py-func">flash</span>(<span class="py-string">'‚úÖ Xodim ma\'lumotlari yangilandi!'</span>, <span class="py-string">'success'</span>)
        <span class="py-keyword">return</span> <span class="py-func">redirect</span>(<span class="py-func">url_for</span>(<span class="py-string">'index'</span>))

    <span class="py-comment"># GET ‚Äî xodim ma'lumotlarini olish</span>
    query = <span class="py-string">"SELECT * FROM xodimlar WHERE id = %s"</span>
    xodim = <span class="py-func">execute_query</span>(query, (id,), fetch=<span class="py-keyword">True</span>)
    <span class="py-keyword">return</span> <span class="py-func">render_template</span>(<span class="py-string">'edit.html'</span>, xodim=xodim[<span class="py-number">0</span>])


<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-comment"># XODIMNI O'CHIRISH (DELETE)</span>
<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-decorator">@app.route</span>(<span class="py-string">'/delete/&lt;int:id&gt;'</span>)
<span class="py-keyword">def</span> <span class="py-func">delete</span>(id):
    query = <span class="py-string">"DELETE FROM xodimlar WHERE id = %s"</span>
    <span class="py-func">execute_query</span>(query, (id,))
    <span class="py-func">flash</span>(<span class="py-string">'üóë Xodim o\'chirildi!'</span>, <span class="py-string">'warning'</span>)
    <span class="py-keyword">return</span> <span class="py-func">redirect</span>(<span class="py-func">url_for</span>(<span class="py-string">'index'</span>))


<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-comment"># ILOVANI ISHGA TUSHIRISH</span>
<span class="py-comment"># ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span>
<span class="py-keyword">if</span> <span class="py-builtin">__name__</span> == <span class="py-string">'__main__'</span>:
    app.<span class="py-func">run</span>(debug=<span class="py-keyword">True</span>, port=<span class="py-number">5000</span>)</code></pre>
</div>

<div class="theory-box">
<p><strong>üí° CRUD operatsiyalari:</strong></p>
<ul>
<li><strong>C</strong>reate ‚Üí <code>INSERT INTO</code> ‚Üí <code>/add</code> (POST)</li>
<li><strong>R</strong>ead ‚Üí <code>SELECT</code> ‚Üí <code>/</code> (GET)</li>
<li><strong>U</strong>pdate ‚Üí <code>UPDATE SET</code> ‚Üí <code>/edit/&lt;id&gt;</code> (POST)</li>
<li><strong>D</strong>elete ‚Üí <code>DELETE FROM</code> ‚Üí <code>/delete/&lt;id&gt;</code> (GET)</li>
</ul>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 5: BASE.HTML -->
<div class="card">
<h3><span class="step-number">5</span>Asosiy shablon ‚Äî base.html</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">VS Code ‚Äî templates/base.html</div></div>
<pre><code><span class="file-badge">templates/base.html</span>
<span class="html-tag">&lt;!DOCTYPE html&gt;</span>
<span class="html-tag">&lt;html</span> <span class="html-attr">lang</span>=<span class="html-val">"uz"</span><span class="html-tag">&gt;</span>
<span class="html-tag">&lt;head&gt;</span>
    <span class="html-tag">&lt;meta</span> <span class="html-attr">charset</span>=<span class="html-val">"utf-8"</span><span class="html-tag">&gt;</span>
    <span class="html-tag">&lt;meta</span> <span class="html-attr">name</span>=<span class="html-val">"viewport"</span> <span class="html-attr">content</span>=<span class="html-val">"width=device-width, initial-scale=1.0"</span><span class="html-tag">&gt;</span>
    <span class="html-tag">&lt;title&gt;</span>Xodimlar boshqaruv tizimi<span class="html-tag">&lt;/title&gt;</span>
    <span class="html-tag">&lt;link</span> <span class="html-attr">rel</span>=<span class="html-val">"stylesheet"</span> <span class="html-attr">href</span>=<span class="html-val">"{{ url_for('static', filename='style.css') }}"</span><span class="html-tag">&gt;</span>
<span class="html-tag">&lt;/head&gt;</span>
<span class="html-tag">&lt;body&gt;</span>
    <span class="html-tag">&lt;nav</span> <span class="html-attr">class</span>=<span class="html-val">"navbar"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;a</span> <span class="html-attr">href</span>=<span class="html-val">"/"</span> <span class="html-attr">class</span>=<span class="html-val">"logo"</span><span class="html-tag">&gt;</span>üè¢ Xodimlar tizimi<span class="html-tag">&lt;/a&gt;</span>
        <span class="html-tag">&lt;a</span> <span class="html-attr">href</span>=<span class="html-val">"/add"</span> <span class="html-attr">class</span>=<span class="html-val">"btn btn-add"</span><span class="html-tag">&gt;</span>+ Yangi xodim<span class="html-tag">&lt;/a&gt;</span>
    <span class="html-tag">&lt;/nav&gt;</span>

    <span class="html-tag">&lt;main</span> <span class="html-attr">class</span>=<span class="html-val">"container"</span><span class="html-tag">&gt;</span>
        <span class="py-comment">&lt;!-- Flash xabarlar --&gt;</span>
        <span class="jinja">{% with messages = get_flashed_messages(with_categories=true) %}</span>
        <span class="jinja">{% if messages %}</span>
            <span class="jinja">{% for category, message in messages %}</span>
            <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"alert alert-{{ category }}"</span><span class="html-tag">&gt;</span>
                <span class="jinja">{{ message }}</span>
            <span class="html-tag">&lt;/div&gt;</span>
            <span class="jinja">{% endfor %}</span>
        <span class="jinja">{% endif %}</span>
        <span class="jinja">{% endwith %}</span>

        <span class="py-comment">&lt;!-- Sahifa kontenti shu yerga kiritiladi --&gt;</span>
        <span class="jinja">{% block content %}{% endblock %}</span>
    <span class="html-tag">&lt;/main&gt;</span>

    <span class="html-tag">&lt;footer&gt;</span>
        <span class="html-tag">&lt;p&gt;</span>&copy; 2024 Xodimlar boshqaruv tizimi | Python + Flask + MySQL<span class="html-tag">&lt;/p&gt;</span>
    <span class="html-tag">&lt;/footer&gt;</span>
<span class="html-tag">&lt;/body&gt;</span>
<span class="html-tag">&lt;/html&gt;</span></code></pre>
</div>
</div>

<!-- BOSQICH 6: INDEX.HTML -->
<div class="card">
<h3><span class="step-number">6</span>Bosh sahifa ‚Äî xodimlar ro'yxati (index.html)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">VS Code ‚Äî templates/index.html</div></div>
<pre><code><span class="file-badge">templates/index.html</span>
<span class="jinja">{% extends 'base.html' %}</span>

<span class="jinja">{% block content %}</span>
<span class="html-tag">&lt;h1&gt;</span>Xodimlar ro'yxati<span class="html-tag">&lt;/h1&gt;</span>

<span class="py-comment">&lt;!-- Qidiruv formasi --&gt;</span>
<span class="html-tag">&lt;form</span> <span class="html-attr">method</span>=<span class="html-val">"GET"</span> <span class="html-attr">action</span>=<span class="html-val">"/"</span> <span class="html-attr">class</span>=<span class="html-val">"search-form"</span><span class="html-tag">&gt;</span>
    <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"text"</span> <span class="html-attr">name</span>=<span class="html-val">"search"</span>
           <span class="html-attr">placeholder</span>=<span class="html-val">"Ism, familiya, bo'lim bo'yicha qidirish..."</span>
           <span class="html-attr">value</span>=<span class="html-val">"{{ search }}"</span><span class="html-tag">&gt;</span>
    <span class="html-tag">&lt;button</span> <span class="html-attr">type</span>=<span class="html-val">"submit"</span> <span class="html-attr">class</span>=<span class="html-val">"btn"</span><span class="html-tag">&gt;</span>üîç Qidirish<span class="html-tag">&lt;/button&gt;</span>
<span class="html-tag">&lt;/form&gt;</span>

<span class="py-comment">&lt;!-- Xodimlar jadvali --&gt;</span>
<span class="html-tag">&lt;table&gt;</span>
    <span class="html-tag">&lt;thead&gt;</span>
        <span class="html-tag">&lt;tr&gt;</span>
            <span class="html-tag">&lt;th&gt;</span>#<span class="html-tag">&lt;/th&gt;</span>
            <span class="html-tag">&lt;th&gt;</span>Ism Familiya<span class="html-tag">&lt;/th&gt;</span>
            <span class="html-tag">&lt;th&gt;</span>Email<span class="html-tag">&lt;/th&gt;</span>
            <span class="html-tag">&lt;th&gt;</span>Bo'lim<span class="html-tag">&lt;/th&gt;</span>
            <span class="html-tag">&lt;th&gt;</span>Lavozim<span class="html-tag">&lt;/th&gt;</span>
            <span class="html-tag">&lt;th&gt;</span>Maosh<span class="html-tag">&lt;/th&gt;</span>
            <span class="html-tag">&lt;th&gt;</span>Amallar<span class="html-tag">&lt;/th&gt;</span>
        <span class="html-tag">&lt;/tr&gt;</span>
    <span class="html-tag">&lt;/thead&gt;</span>
    <span class="html-tag">&lt;tbody&gt;</span>
        <span class="jinja">{% for x in xodimlar %}</span>
        <span class="html-tag">&lt;tr&gt;</span>
            <span class="html-tag">&lt;td&gt;</span><span class="jinja">{{ x.id }}</span><span class="html-tag">&lt;/td&gt;</span>
            <span class="html-tag">&lt;td&gt;&lt;strong&gt;</span><span class="jinja">{{ x.ism }} {{ x.familiya }}</span><span class="html-tag">&lt;/strong&gt;&lt;/td&gt;</span>
            <span class="html-tag">&lt;td&gt;</span><span class="jinja">{{ x.email }}</span><span class="html-tag">&lt;/td&gt;</span>
            <span class="html-tag">&lt;td&gt;</span><span class="jinja">{{ x.bolim }}</span><span class="html-tag">&lt;/td&gt;</span>
            <span class="html-tag">&lt;td&gt;</span><span class="jinja">{{ x.lavozim }}</span><span class="html-tag">&lt;/td&gt;</span>
            <span class="html-tag">&lt;td&gt;</span><span class="jinja">{{ "{:,.0f}".format(x.maosh) }}</span> so'm<span class="html-tag">&lt;/td&gt;</span>
            <span class="html-tag">&lt;td</span> <span class="html-attr">class</span>=<span class="html-val">"actions"</span><span class="html-tag">&gt;</span>
                <span class="html-tag">&lt;a</span> <span class="html-attr">href</span>=<span class="html-val">"/edit/{{ x.id }}"</span> <span class="html-attr">class</span>=<span class="html-val">"btn btn-edit"</span><span class="html-tag">&gt;</span>‚úèÔ∏è<span class="html-tag">&lt;/a&gt;</span>
                <span class="html-tag">&lt;a</span> <span class="html-attr">href</span>=<span class="html-val">"/delete/{{ x.id }}"</span> <span class="html-attr">class</span>=<span class="html-val">"btn btn-delete"</span>
                   <span class="html-attr">onclick</span>=<span class="html-val">"return confirm('Haqiqatan o\'chirmoqchimisiz?')"</span><span class="html-tag">&gt;</span>üóëÔ∏è<span class="html-tag">&lt;/a&gt;</span>
            <span class="html-tag">&lt;/td&gt;</span>
        <span class="html-tag">&lt;/tr&gt;</span>
        <span class="jinja">{% else %}</span>
        <span class="html-tag">&lt;tr&gt;&lt;td</span> <span class="html-attr">colspan</span>=<span class="html-val">"7"</span> <span class="html-attr">class</span>=<span class="html-val">"empty"</span><span class="html-tag">&gt;</span>Xodimlar topilmadi<span class="html-tag">&lt;/td&gt;&lt;/tr&gt;</span>
        <span class="jinja">{% endfor %}</span>
    <span class="html-tag">&lt;/tbody&gt;</span>
<span class="html-tag">&lt;/table&gt;</span>

<span class="html-tag">&lt;p</span> <span class="html-attr">class</span>=<span class="html-val">"count"</span><span class="html-tag">&gt;</span>Jami: <span class="jinja">{{ xodimlar|length }}</span> ta xodim<span class="html-tag">&lt;/p&gt;</span>
<span class="jinja">{% endblock %}</span></code></pre>
</div>
</div>

<!-- BOSQICH 7: ADD.HTML & EDIT.HTML -->
<div class="card">
<h3><span class="step-number">7</span>Qo'shish va tahrirlash sahifalari</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">VS Code ‚Äî templates/add.html</div></div>
<pre><code><span class="file-badge">templates/add.html</span>
<span class="jinja">{% extends 'base.html' %}</span>

<span class="jinja">{% block content %}</span>
<span class="html-tag">&lt;h1&gt;</span>Yangi xodim qo'shish<span class="html-tag">&lt;/h1&gt;</span>

<span class="html-tag">&lt;form</span> <span class="html-attr">method</span>=<span class="html-val">"POST"</span> <span class="html-attr">class</span>=<span class="html-val">"form-card"</span><span class="html-tag">&gt;</span>
    <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-grid"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Ism *<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"text"</span> <span class="html-attr">name</span>=<span class="html-val">"ism"</span> <span class="html-attr">required</span> <span class="html-attr">placeholder</span>=<span class="html-val">"Alisher"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Familiya *<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"text"</span> <span class="html-attr">name</span>=<span class="html-val">"familiya"</span> <span class="html-attr">required</span> <span class="html-attr">placeholder</span>=<span class="html-val">"Karimov"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Email<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"email"</span> <span class="html-attr">name</span>=<span class="html-val">"email"</span> <span class="html-attr">placeholder</span>=<span class="html-val">"alisher@kompaniya.uz"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Telefon<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"text"</span> <span class="html-attr">name</span>=<span class="html-val">"telefon"</span> <span class="html-attr">placeholder</span>=<span class="html-val">"+998901234567"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Bo'lim<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;select</span> <span class="html-attr">name</span>=<span class="html-val">"bolim"</span><span class="html-tag">&gt;</span>
                <span class="html-tag">&lt;option</span> <span class="html-attr">value</span>=<span class="html-val">"IT"</span><span class="html-tag">&gt;</span>IT<span class="html-tag">&lt;/option&gt;</span>
                <span class="html-tag">&lt;option</span> <span class="html-attr">value</span>=<span class="html-val">"Moliya"</span><span class="html-tag">&gt;</span>Moliya<span class="html-tag">&lt;/option&gt;</span>
                <span class="html-tag">&lt;option</span> <span class="html-attr">value</span>=<span class="html-val">"Sotuv"</span><span class="html-tag">&gt;</span>Sotuv<span class="html-tag">&lt;/option&gt;</span>
                <span class="html-tag">&lt;option</span> <span class="html-attr">value</span>=<span class="html-val">"Marketing"</span><span class="html-tag">&gt;</span>Marketing<span class="html-tag">&lt;/option&gt;</span>
                <span class="html-tag">&lt;option</span> <span class="html-attr">value</span>=<span class="html-val">"Logistika"</span><span class="html-tag">&gt;</span>Logistika<span class="html-tag">&lt;/option&gt;</span>
            <span class="html-tag">&lt;/select&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Lavozim<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"text"</span> <span class="html-attr">name</span>=<span class="html-val">"lavozim"</span> <span class="html-attr">placeholder</span>=<span class="html-val">"Dasturchi"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Maosh (so'm)<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"number"</span> <span class="html-attr">name</span>=<span class="html-val">"maosh"</span> <span class="html-attr">placeholder</span>=<span class="html-val">"5000000"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Ishga kirgan sana<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"date"</span> <span class="html-attr">name</span>=<span class="html-val">"ishga_kirgan"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
    <span class="html-tag">&lt;/div&gt;</span>
    <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-actions"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;button</span> <span class="html-attr">type</span>=<span class="html-val">"submit"</span> <span class="html-attr">class</span>=<span class="html-val">"btn btn-save"</span><span class="html-tag">&gt;</span>üíæ Saqlash<span class="html-tag">&lt;/button&gt;</span>
        <span class="html-tag">&lt;a</span> <span class="html-attr">href</span>=<span class="html-val">"/"</span> <span class="html-attr">class</span>=<span class="html-val">"btn btn-cancel"</span><span class="html-tag">&gt;</span>Bekor qilish<span class="html-tag">&lt;/a&gt;</span>
    <span class="html-tag">&lt;/div&gt;</span>
<span class="html-tag">&lt;/form&gt;</span>
<span class="jinja">{% endblock %}</span></code></pre>
</div>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">VS Code ‚Äî templates/edit.html</div></div>
<pre><code><span class="file-badge">templates/edit.html</span>
<span class="jinja">{% extends 'base.html' %}</span>

<span class="jinja">{% block content %}</span>
<span class="html-tag">&lt;h1&gt;</span>Xodimni tahrirlash<span class="html-tag">&lt;/h1&gt;</span>

<span class="html-tag">&lt;form</span> <span class="html-attr">method</span>=<span class="html-val">"POST"</span> <span class="html-attr">class</span>=<span class="html-val">"form-card"</span><span class="html-tag">&gt;</span>
    <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-grid"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Ism *<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"text"</span> <span class="html-attr">name</span>=<span class="html-val">"ism"</span> <span class="html-attr">value</span>=<span class="html-val">"{{ xodim.ism }}"</span> <span class="html-attr">required</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Familiya *<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"text"</span> <span class="html-attr">name</span>=<span class="html-val">"familiya"</span> <span class="html-attr">value</span>=<span class="html-val">"{{ xodim.familiya }}"</span> <span class="html-attr">required</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Email<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"email"</span> <span class="html-attr">name</span>=<span class="html-val">"email"</span> <span class="html-attr">value</span>=<span class="html-val">"{{ xodim.email }}"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Telefon<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"text"</span> <span class="html-attr">name</span>=<span class="html-val">"telefon"</span> <span class="html-attr">value</span>=<span class="html-val">"{{ xodim.telefon }}"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Bo'lim<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;select</span> <span class="html-attr">name</span>=<span class="html-val">"bolim"</span><span class="html-tag">&gt;</span>
                <span class="jinja">{% for b in ['IT','Moliya','Sotuv','Marketing','Logistika'] %}</span>
                <span class="html-tag">&lt;option</span> <span class="html-attr">value</span>=<span class="html-val">"{{ b }}"</span> <span class="jinja">{{ 'selected' if xodim.bolim == b }}</span><span class="html-tag">&gt;</span><span class="jinja">{{ b }}</span><span class="html-tag">&lt;/option&gt;</span>
                <span class="jinja">{% endfor %}</span>
            <span class="html-tag">&lt;/select&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Lavozim<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"text"</span> <span class="html-attr">name</span>=<span class="html-val">"lavozim"</span> <span class="html-attr">value</span>=<span class="html-val">"{{ xodim.lavozim }}"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Maosh (so'm)<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"number"</span> <span class="html-attr">name</span>=<span class="html-val">"maosh"</span> <span class="html-attr">value</span>=<span class="html-val">"{{ xodim.maosh|int }}"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
        <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-group"</span><span class="html-tag">&gt;</span>
            <span class="html-tag">&lt;label&gt;</span>Ishga kirgan sana<span class="html-tag">&lt;/label&gt;</span>
            <span class="html-tag">&lt;input</span> <span class="html-attr">type</span>=<span class="html-val">"date"</span> <span class="html-attr">name</span>=<span class="html-val">"ishga_kirgan"</span> <span class="html-attr">value</span>=<span class="html-val">"{{ xodim.ishga_kirgan }}"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;/div&gt;</span>
    <span class="html-tag">&lt;/div&gt;</span>
    <span class="html-tag">&lt;div</span> <span class="html-attr">class</span>=<span class="html-val">"form-actions"</span><span class="html-tag">&gt;</span>
        <span class="html-tag">&lt;button</span> <span class="html-attr">type</span>=<span class="html-val">"submit"</span> <span class="html-attr">class</span>=<span class="html-val">"btn btn-save"</span><span class="html-tag">&gt;</span>üíæ Yangilash<span class="html-tag">&lt;/button&gt;</span>
        <span class="html-tag">&lt;a</span> <span class="html-attr">href</span>=<span class="html-val">"/"</span> <span class="html-attr">class</span>=<span class="html-val">"btn btn-cancel"</span><span class="html-tag">&gt;</span>Bekor qilish<span class="html-tag">&lt;/a&gt;</span>
    <span class="html-tag">&lt;/div&gt;</span>
<span class="html-tag">&lt;/form&gt;</span>
<span class="jinja">{% endblock %}</span></code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 8: CSS -->
<div class="card">
<h3><span class="step-number">8</span>CSS uslublar (style.css)</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">VS Code ‚Äî static/style.css</div></div>
<pre><code><span class="file-badge">static/style.css</span>
<span class="py-comment">/* ‚ïê‚ïê‚ïê Asosiy uslublar ‚ïê‚ïê‚ïê */</span>
* { <span class="css-prop">margin</span>: <span class="css-val">0</span>; <span class="css-prop">padding</span>: <span class="css-val">0</span>; <span class="css-prop">box-sizing</span>: <span class="css-val">border-box</span>; }

<span class="css-prop">body</span> {
    <span class="css-prop">font-family</span>: <span class="css-val">'Segoe UI', Tahoma, sans-serif</span>;
    <span class="css-prop">background</span>: <span class="css-val">#f0f0f3</span>;
    <span class="css-prop">color</span>: <span class="css-val">#333</span>;
    <span class="css-prop">min-height</span>: <span class="css-val">100vh</span>;
}

<span class="py-comment">/* ‚ïê‚ïê‚ïê Navigatsiya ‚ïê‚ïê‚ïê */</span>
.<span class="css-prop">navbar</span> {
    <span class="css-prop">background</span>: <span class="css-val">linear-gradient(135deg, #1a1a1a, #333)</span>;
    <span class="css-prop">padding</span>: <span class="css-val">18px 40px</span>;
    <span class="css-prop">display</span>: <span class="css-val">flex</span>;
    <span class="css-prop">justify-content</span>: <span class="css-val">space-between</span>;
    <span class="css-prop">align-items</span>: <span class="css-val">center</span>;
    <span class="css-prop">box-shadow</span>: <span class="css-val">0 4px 15px rgba(0,0,0,0.2)</span>;
}
.<span class="css-prop">logo</span> {
    <span class="css-prop">color</span>: <span class="css-val">#d4af37</span>;
    <span class="css-prop">font-size</span>: <span class="css-val">1.4em</span>;
    <span class="css-prop">font-weight</span>: <span class="css-val">700</span>;
    <span class="css-prop">text-decoration</span>: <span class="css-val">none</span>;
}

<span class="py-comment">/* ‚ïê‚ïê‚ïê Konteyner ‚ïê‚ïê‚ïê */</span>
.<span class="css-prop">container</span> {
    <span class="css-prop">max-width</span>: <span class="css-val">1100px</span>;
    <span class="css-prop">margin</span>: <span class="css-val">30px auto</span>;
    <span class="css-prop">padding</span>: <span class="css-val">0 20px</span>;
}

<span class="py-comment">/* ‚ïê‚ïê‚ïê Tugmalar ‚ïê‚ïê‚ïê */</span>
.<span class="css-prop">btn</span> {
    <span class="css-prop">padding</span>: <span class="css-val">10px 22px</span>;
    <span class="css-prop">border</span>: <span class="css-val">none</span>;
    <span class="css-prop">border-radius</span>: <span class="css-val">10px</span>;
    <span class="css-prop">cursor</span>: <span class="css-val">pointer</span>;
    <span class="css-prop">font-size</span>: <span class="css-val">0.9em</span>;
    <span class="css-prop">font-weight</span>: <span class="css-val">600</span>;
    <span class="css-prop">text-decoration</span>: <span class="css-val">none</span>;
    <span class="css-prop">transition</span>: <span class="css-val">all 0.3s</span>;
}
.<span class="css-prop">btn-add</span>   { <span class="css-prop">background</span>: <span class="css-val">#d4af37</span>; <span class="css-prop">color</span>: <span class="css-val">#fff</span>; }
.<span class="css-prop">btn-save</span>  { <span class="css-prop">background</span>: <span class="css-val">#28a745</span>; <span class="css-prop">color</span>: <span class="css-val">#fff</span>; }
.<span class="css-prop">btn-edit</span>  { <span class="css-prop">background</span>: <span class="css-val">#ffc107</span>; <span class="css-prop">color</span>: <span class="css-val">#333</span>; <span class="css-prop">padding</span>: <span class="css-val">6px 14px</span>; }
.<span class="css-prop">btn-delete</span>{ <span class="css-prop">background</span>: <span class="css-val">#dc3545</span>; <span class="css-prop">color</span>: <span class="css-val">#fff</span>; <span class="css-prop">padding</span>: <span class="css-val">6px 14px</span>; }
.<span class="css-prop">btn-cancel</span>{ <span class="css-prop">background</span>: <span class="css-val">#6c757d</span>; <span class="css-prop">color</span>: <span class="css-val">#fff</span>; }
.<span class="css-prop">btn</span>:hover { <span class="css-prop">opacity</span>: <span class="css-val">0.85</span>; <span class="css-prop">transform</span>: <span class="css-val">translateY(-1px)</span>; }

<span class="py-comment">/* ‚ïê‚ïê‚ïê Qidiruv ‚ïê‚ïê‚ïê */</span>
.<span class="css-prop">search-form</span> {
    <span class="css-prop">display</span>: <span class="css-val">flex</span>; <span class="css-prop">gap</span>: <span class="css-val">10px</span>;
    <span class="css-prop">margin</span>: <span class="css-val">25px 0</span>;
}
.<span class="css-prop">search-form</span> input {
    <span class="css-prop">flex</span>: <span class="css-val">1</span>; <span class="css-prop">padding</span>: <span class="css-val">12px 18px</span>;
    <span class="css-prop">border</span>: <span class="css-val">2px solid #ddd</span>;
    <span class="css-prop">border-radius</span>: <span class="css-val">12px</span>;
    <span class="css-prop">font-size</span>: <span class="css-val">1em</span>;
    <span class="css-prop">outline</span>: <span class="css-val">none</span>;
}
.<span class="css-prop">search-form</span> input:focus { <span class="css-prop">border-color</span>: <span class="css-val">#d4af37</span>; }

<span class="py-comment">/* ‚ïê‚ïê‚ïê Jadval ‚ïê‚ïê‚ïê */</span>
<span class="css-prop">table</span> {
    <span class="css-prop">width</span>: <span class="css-val">100%</span>;
    <span class="css-prop">border-collapse</span>: <span class="css-val">collapse</span>;
    <span class="css-prop">background</span>: <span class="css-val">#fff</span>;
    <span class="css-prop">border-radius</span>: <span class="css-val">14px</span>;
    <span class="css-prop">overflow</span>: <span class="css-val">hidden</span>;
    <span class="css-prop">box-shadow</span>: <span class="css-val">0 4px 15px rgba(0,0,0,0.08)</span>;
}
<span class="css-prop">thead th</span> {
    <span class="css-prop">background</span>: <span class="css-val">#1a1a1a</span>;
    <span class="css-prop">color</span>: <span class="css-val">#d4af37</span>;
    <span class="css-prop">padding</span>: <span class="css-val">14px 16px</span>;
    <span class="css-prop">text-align</span>: <span class="css-val">left</span>;
    <span class="css-prop">font-size</span>: <span class="css-val">0.88em</span>;
    <span class="css-prop">text-transform</span>: <span class="css-val">uppercase</span>;
}
<span class="css-prop">tbody td</span> {
    <span class="css-prop">padding</span>: <span class="css-val">12px 16px</span>;
    <span class="css-prop">border-bottom</span>: <span class="css-val">1px solid #eee</span>;
}
<span class="css-prop">tbody tr</span>:hover { <span class="css-prop">background</span>: <span class="css-val">rgba(212,175,55,0.06)</span>; }
.<span class="css-prop">actions</span> { <span class="css-prop">display</span>: <span class="css-val">flex</span>; <span class="css-prop">gap</span>: <span class="css-val">6px</span>; }
.<span class="css-prop">empty</span> { <span class="css-prop">text-align</span>: <span class="css-val">center</span>; <span class="css-prop">color</span>: <span class="css-val">#999</span>; <span class="css-prop">padding</span>: <span class="css-val">40px</span>; }
.<span class="css-prop">count</span> { <span class="css-prop">text-align</span>: <span class="css-val">right</span>; <span class="css-prop">color</span>: <span class="css-val">#888</span>; <span class="css-prop">margin-top</span>: <span class="css-val">12px</span>; <span class="css-prop">font-size</span>: <span class="css-val">0.9em</span>; }

<span class="py-comment">/* ‚ïê‚ïê‚ïê Forma ‚ïê‚ïê‚ïê */</span>
.<span class="css-prop">form-card</span> {
    <span class="css-prop">background</span>: <span class="css-val">#fff</span>;
    <span class="css-prop">border-radius</span>: <span class="css-val">18px</span>;
    <span class="css-prop">padding</span>: <span class="css-val">35px</span>;
    <span class="css-prop">box-shadow</span>: <span class="css-val">0 4px 15px rgba(0,0,0,0.08)</span>;
}
.<span class="css-prop">form-grid</span> {
    <span class="css-prop">display</span>: <span class="css-val">grid</span>;
    <span class="css-prop">grid-template-columns</span>: <span class="css-val">1fr 1fr</span>;
    <span class="css-prop">gap</span>: <span class="css-val">20px</span>;
}
.<span class="css-prop">form-group label</span> {
    <span class="css-prop">display</span>: <span class="css-val">block</span>;
    <span class="css-prop">font-weight</span>: <span class="css-val">600</span>;
    <span class="css-prop">margin-bottom</span>: <span class="css-val">6px</span>;
    <span class="css-prop">color</span>: <span class="css-val">#555</span>;
}
.<span class="css-prop">form-group</span> input,
.<span class="css-prop">form-group</span> select {
    <span class="css-prop">width</span>: <span class="css-val">100%</span>; <span class="css-prop">padding</span>: <span class="css-val">11px 15px</span>;
    <span class="css-prop">border</span>: <span class="css-val">2px solid #e0e0e0</span>;
    <span class="css-prop">border-radius</span>: <span class="css-val">10px</span>;
    <span class="css-prop">font-size</span>: <span class="css-val">0.95em</span>;
    <span class="css-prop">outline</span>: <span class="css-val">none</span>;
    <span class="css-prop">transition</span>: <span class="css-val">border 0.3s</span>;
}
.<span class="css-prop">form-group</span> input:focus,
.<span class="css-prop">form-group</span> select:focus { <span class="css-prop">border-color</span>: <span class="css-val">#d4af37</span>; }
.<span class="css-prop">form-actions</span> {
    <span class="css-prop">margin-top</span>: <span class="css-val">25px</span>;
    <span class="css-prop">display</span>: <span class="css-val">flex</span>; <span class="css-prop">gap</span>: <span class="css-val">12px</span>;
}

<span class="py-comment">/* ‚ïê‚ïê‚ïê Xabarlar ‚ïê‚ïê‚ïê */</span>
.<span class="css-prop">alert</span> {
    <span class="css-prop">padding</span>: <span class="css-val">14px 20px</span>;
    <span class="css-prop">border-radius</span>: <span class="css-val">12px</span>;
    <span class="css-prop">margin-bottom</span>: <span class="css-val">20px</span>;
    <span class="css-prop">font-weight</span>: <span class="css-val">500</span>;
}
.<span class="css-prop">alert-success</span> { <span class="css-prop">background</span>: <span class="css-val">#d4edda</span>; <span class="css-prop">color</span>: <span class="css-val">#155724</span>; <span class="css-prop">border</span>: <span class="css-val">1px solid #c3e6cb</span>; }
.<span class="css-prop">alert-warning</span> { <span class="css-prop">background</span>: <span class="css-val">#fff3cd</span>; <span class="css-prop">color</span>: <span class="css-val">#856404</span>; <span class="css-prop">border</span>: <span class="css-val">1px solid #ffc107</span>; }

<span class="py-comment">/* ‚ïê‚ïê‚ïê Sarlavhalar ‚ïê‚ïê‚ïê */</span>
<span class="css-prop">h1</span> {
    <span class="css-prop">font-size</span>: <span class="css-val">1.8em</span>; <span class="css-prop">color</span>: <span class="css-val">#1a1a1a</span>;
    <span class="css-prop">margin-bottom</span>: <span class="css-val">5px</span>;
    <span class="css-prop">border-bottom</span>: <span class="css-val">3px solid #d4af37</span>;
    <span class="css-prop">padding-bottom</span>: <span class="css-val">10px</span>;
    <span class="css-prop">display</span>: <span class="css-val">inline-block</span>;
}

<span class="py-comment">/* ‚ïê‚ïê‚ïê Footer ‚ïê‚ïê‚ïê */</span>
<span class="css-prop">footer</span> {
    <span class="css-prop">text-align</span>: <span class="css-val">center</span>; <span class="css-prop">padding</span>: <span class="css-val">25px</span>;
    <span class="css-prop">color</span>: <span class="css-val">#888</span>; <span class="css-prop">font-size</span>: <span class="css-val">0.85em</span>;
    <span class="css-prop">margin-top</span>: <span class="css-val">40px</span>;
}</code></pre>
</div>
</div>

<div class="luxury-divider"></div>

<!-- BOSQICH 9: ISHGA TUSHIRISH -->
<div class="card">
<h3><span class="step-number">9</span>Loyihani ishga tushirish va test qilish</h3>

<div class="mac-window">
<div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">Terminal ‚Äî Flask dasturni ishga tushirish</div></div>
<pre><code><span class="py-comment"># 1. MySQL da bazani yarating (schema.sql ni bajaring)</span>
mysql -u root -p &lt; schema.sql

<span class="py-comment"># 2. Flask ilovani ishga tushiring</span>
python app.py

<span class="py-comment"># 3. Brauzerni oching:</span>
<span class="py-comment"># http://127.0.0.1:5000</span></code></pre>
</div>

<!-- Brauzer simulyatsiyasi -->
<div class="screenshot-box">
    <div class="browser-bar">
        <span class="dot dot-r"></span>
        <span class="dot dot-y"></span>
        <span class="dot dot-g"></span>
        <span class="url-bar">üîí http://127.0.0.1:5000</span>
    </div>
    <div style="padding:10px;">
        <div style="background:#1a1a1a; padding:12px 20px; border-radius:10px; display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <span style="color:#d4af37; font-weight:700; font-size:1.1em;">üè¢ Xodimlar tizimi</span>
            <span style="background:#d4af37; color:#fff; padding:6px 14px; border-radius:8px; font-size:0.85em; font-weight:600;">+ Yangi xodim</span>
        </div>
        <div style="display:flex; gap:8px; margin-bottom:15px;">
            <input type="text" placeholder="Ism, familiya, bo'lim bo'yicha qidirish..." style="flex:1; padding:8px 12px; border:2px solid #ddd; border-radius:8px; font-size:0.85em; outline:none;">
            <span style="background:#f0f0f3; padding:8px 14px; border-radius:8px; font-size:0.85em; cursor:pointer;">üîç Qidirish</span>
        </div>
        <table style="width:100%; border-collapse:collapse; font-size:0.8em; margin:0; box-shadow:none;">
            <thead><tr style="background:#1a1a1a;">
                <th style="color:#d4af37; padding:10px; text-align:left;">#</th>
                <th style="color:#d4af37; padding:10px; text-align:left;">Ism Familiya</th>
                <th style="color:#d4af37; padding:10px; text-align:left;">Bo'lim</th>
                <th style="color:#d4af37; padding:10px; text-align:left;">Lavozim</th>
                <th style="color:#d4af37; padding:10px; text-align:left;">Maosh</th>
                <th style="color:#d4af37; padding:10px; text-align:left;">Amallar</th>
            </tr></thead>
            <tbody>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px;">5</td><td style="padding:10px;"><strong>Jasur Ergashev</strong></td><td style="padding:10px;">Sotuv</td><td style="padding:10px;">Sotuv menejeri</td><td style="padding:10px;">8,000,000 so'm</td><td style="padding:10px;"><span style="background:#ffc107; padding:3px 8px; border-radius:5px; font-size:0.85em; margin-right:3px;">‚úèÔ∏è</span><span style="background:#dc3545; color:#fff; padding:3px 8px; border-radius:5px; font-size:0.85em;">üóëÔ∏è</span></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px;">4</td><td style="padding:10px;"><strong>Kamola Umarova</strong></td><td style="padding:10px;">Sotuv</td><td style="padding:10px;">Sotuv boshlig'i</td><td style="padding:10px;">13,000,000 so'm</td><td style="padding:10px;"><span style="background:#ffc107; padding:3px 8px; border-radius:5px; font-size:0.85em; margin-right:3px;">‚úèÔ∏è</span><span style="background:#dc3545; color:#fff; padding:3px 8px; border-radius:5px; font-size:0.85em;">üóëÔ∏è</span></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:10px;">3</td><td style="padding:10px;"><strong>Gulnora Azimova</strong></td><td style="padding:10px;">Moliya</td><td style="padding:10px;">Bosh hisobchi</td><td style="padding:10px;">11,000,000 so'm</td><td style="padding:10px;"><span style="background:#ffc107; padding:3px 8px; border-radius:5px; font-size:0.85em; margin-right:3px;">‚úèÔ∏è</span><span style="background:#dc3545; color:#fff; padding:3px 8px; border-radius:5px; font-size:0.85em;">üóëÔ∏è</span></td></tr>
            </tbody>
        </table>
        <p style="text-align:right; color:#888; font-size:0.8em; margin-top:8px;">Jami: 5 ta xodim</p>
    </div>
</div>
</div>

<div class="luxury-divider"></div>

<!-- QIYOSIY JADVAL -->
<h2><span class="icon">üìä</span>CRUD operatsiyalari xaritasi</h2>
<div class="card-flat">
<table>
<thead><tr><th>Amal</th><th>HTTP</th><th>Flask Route</th><th>SQL</th><th>Sahifa</th></tr></thead>
<tbody>
<tr><td><strong>Ro'yxat ko'rish</strong></td><td>GET</td><td><code>@app.route('/')</code></td><td><code>SELECT * FROM</code></td><td>index.html</td></tr>
<tr><td><strong>Qidiruv</strong></td><td>GET</td><td><code>@app.route('/?search=...')</code></td><td><code>WHERE ... LIKE</code></td><td>index.html</td></tr>
<tr><td><strong>Qo'shish formasi</strong></td><td>GET</td><td><code>@app.route('/add')</code></td><td>‚Äî</td><td>add.html</td></tr>
<tr><td><strong>Qo'shish</strong></td><td>POST</td><td><code>@app.route('/add')</code></td><td><code>INSERT INTO</code></td><td>‚Üí redirect('/')</td></tr>
<tr><td><strong>Tahrirlash formasi</strong></td><td>GET</td><td><code>@app.route('/edit/&lt;id&gt;')</code></td><td><code>SELECT WHERE id</code></td><td>edit.html</td></tr>
<tr><td><strong>Yangilash</strong></td><td>POST</td><td><code>@app.route('/edit/&lt;id&gt;')</code></td><td><code>UPDATE SET</code></td><td>‚Üí redirect('/')</td></tr>
<tr><td><strong>O'chirish</strong></td><td>GET</td><td><code>@app.route('/delete/&lt;id&gt;')</code></td><td><code>DELETE FROM</code></td><td>‚Üí redirect('/')</td></tr>
</tbody>
</table>
</div>

<div class="luxury-divider"></div>

<!-- NAZORAT SAVOLLARI -->
<h2><span class="icon">üß†</span>Nazorat savollari</h2>
<div class="card">
<ol>
<li>3 darajali web-ilova arxitekturasini tushuntiring (Frontend, Backend, Database).</li>
<li>Flask da <code>@app.route</code> dekoratori nima ish qiladi?</li>
<li><code>render_template()</code> funksiyasi qanday ishlaydi? Jinja2 bilan qanday bog'liq?</li>
<li>Jinja2 da <code>{% block content %}</code> va <code>{% extends %}</code> nima uchun kerak?</li>
<li>Python da MySQL ga ulanish uchun qaysi kutubxona ishlatiladi? <code>cursor(dictionary=True)</code> nima beradi?</li>
<li><code>request.form</code> va <code>request.args</code> orasidagi farq nimada?</li>
<li>SQL Injection nima? <code>%s</code> parametrlari qanday himoya qiladi?</li>
<li>CRUD operatsiyalarining HTTP metodlari bilan bog'liqligini tushuntiring.</li>
</ol>
</div>

<!-- AMALIY TOPSHIRIQLAR -->
<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>
<div class="card">
<ol>
<li>Berilgan loyihani kompyuteringizga o'rnatib, <strong>ishga tushiring</strong></li>
<li><strong>Yangi xodim qo'shish</strong> formasidan foydalanib 3 ta yangi xodim kiriting</li>
<li>Mavjud xodimning ma'lumotlarini <strong>tahrirlang</strong> va natijani tekshiring</li>
<li><strong>Qidiruv</strong> funksiyasini sinab ko'ring (ism, bo'lim bo'yicha)</li>
<li>CSS uslublarni o'zgartirib, <strong>ranglar sxemasini</strong> yangilang</li>
<li><code>schema.sql</code> ga yangi ustun qo'shing (masalan: <code>jinsi</code>) va uni forma va jadvalda ko'rsating</li>
<li>Bo'lim bo'yicha <strong>filtrlash</strong> tugmasini qo'shing (SELECT ro'yxat)</li>
<li><strong>üí´ Bonus:</strong> <strong>Mahsulotlar</strong> uchun alohida CRUD sahifalar yarating: <code>/products</code> (ro'yxat), <code>/products/add</code> (qo'shish), <code>/products/edit/&lt;id&gt;</code> (tahrirlash), <code>/products/delete/&lt;id&gt;</code> (o'chirish) ‚Äî barchasi <code>mahsulotlar</code> jadvali bilan ishlashi kerak</li>
</ol>
</div>

<!-- HISOBOT SHABLONI -->
<h2><span class="icon">üìù</span>Hisobot shabloni</h2>
<table>
<thead><tr><th>Bo'lim</th><th>Tavsif</th></tr></thead>
<tbody>
<tr><td><strong>Ishdan maqsad</strong></td><td>Dasturlash tili yordamida MySQL bazaga ulangan web-interfeys yaratish</td></tr>
<tr><td><strong>Arxitektura</strong></td><td>3 darajali tuzilma: Frontend (HTML) ‚Üî Backend (Flask) ‚Üî Database (MySQL)</td></tr>
<tr><td><strong>MySQL ulanish</strong></td><td>mysql-connector-python kutubxonasi, get_connection(), execute_query()</td></tr>
<tr><td><strong>CRUD amallar</strong></td><td>CREATE (INSERT), READ (SELECT), UPDATE, DELETE ‚Äî har biri route bilan</td></tr>
<tr><td><strong>Interfeys</strong></td><td>Jinja2 shablonlar, formalar, jadvallar, qidiruv, flash xabarlar</td></tr>
<tr><td><strong>Xulosa</strong></td><td>Ishlaydigan to'liq web-ilova, o'rganilgan texnologiyalar</td></tr>
</tbody>
</table>

<div class="luxury-divider"></div>

<!-- XULOSA -->
<div class="card">
<h2><span class="icon">üèÜ</span>Xulosa</h2>
<p>Ushbu amaliy mashg'ulotni yakunlagan talaba quyidagi ko'nikmalarga ega bo'ladi:</p>
<ul>
<li><strong>Arxitektura:</strong> Frontend ‚Üî Backend ‚Üî Database 3 darajali tuzilmani tushunish</li>
<li><strong>Python + MySQL:</strong> <code>mysql-connector-python</code> bilan bazaga ulanish va SQL bajarish</li>
<li><strong>Flask framework:</strong> Route, template, request, redirect, flash bilan web-server yaratish</li>
<li><strong>CRUD operatsiyalari:</strong> SELECT, INSERT, UPDATE, DELETE ni web-interfeys orqali bajarish</li>
<li><strong>Jinja2 shablonlar:</strong> <code>{% extends %}</code>, <code>{% block %}</code>, <code>{% for %}</code>, <code>{{ }}</code> bilan dinamik HTML</li>
<li><strong>HTML formalar:</strong> GET/POST metodlari, <code>input</code>, <code>select</code> elementlari</li>
<li><strong>CSS dizayn:</strong> Navigatsiya, jadval, forma, tugmalar, responsive uslublar</li>
<li><strong>Xavfsizlik:</strong> Parametrlangan so'rovlar (<code>%s</code>) orqali SQL Injection dan himoya</li>
<li><strong>UX elementlar:</strong> Qidiruv, flash xabarlar, o'chirishdan oldin tasdiqlash (confirm)</li>
</ul>
</div>
</div>
</div>

<!-- ===== BACK PAGE ‚Äî Orqa muqova ===== -->
<div class="section-block" id="backpage">
<div style="display:flex;align-items:center;justify-content:center;min-height:80vh;padding:40px 20px">
    <div style="text-align:center">
        <img src="back.png" alt="Orqa muqova" style="max-width:500px;width:100%;max-height:60vh;object-fit:contain;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.12),0 8px 20px rgba(0,0,0,0.08)">
        <div style="margin-top:30px;font-family:'Playfair Display',Georgia,serif">
            <p style="font-size:1.3em;color:var(--text);font-weight:600;margin-bottom:5px">M.U. Ergashev</p>
            <p style="font-size:0.95em;color:var(--text-muted)">Ma'lumotlar bazasi ‚Äî Amaliy mashg'ulotlar to'plami</p>
            <div class="gold-line" style="margin-top:20px"></div>
        </div>
    </div>
</div>
</div>

</div><!-- end main -->

<!-- Admin Badge -->
<div class="admin-badge" id="adminBadge">ADMIN REJIMI (Ctrl+Shift+A)</div>

<!-- Admin Toolbar -->
<div class="admin-toolbar" id="adminToolbar">
    <div class="admin-toolbar-header">
        <h3>Admin Panel</h3>
        <button class="admin-close-btn" onclick="toggleAdmin()" title="Yopish">‚úï</button>
    </div>

    <!-- Sahifalar boshqaruvi -->
    <div class="admin-section">
        <h4>Sahifalar</h4>
        <button class="admin-btn-primary" onclick="adminShowAddSectionModal()">+ Yangi sahifa</button>
        <div id="adminSectionList" style="margin-top:10px"></div>
    </div>

    <!-- Komponent paletkasi -->
    <div class="admin-section">
        <h4>Komponentlar</h4>
        <p class="admin-hint">Sahifadagi "+" tugmasini bosing, keyin komponentni tanlang. Yoki komponentni bosib aktiv sahifa oxiriga qo'shing.</p>
        <div class="admin-component-grid">
            <button class="admin-component-btn" onclick="insertComponent('card')"><span class="comp-icon">üÉè</span>Karta</button>
            <button class="admin-component-btn" onclick="insertComponent('theory-box')"><span class="comp-icon">üí°</span>Nazariy box</button>
            <button class="admin-component-btn" onclick="insertComponent('warning-box')"><span class="comp-icon">‚ö†Ô∏è</span>Ogohlantirish</button>
            <button class="admin-component-btn" onclick="insertComponent('tip-box')"><span class="comp-icon">‚úÖ</span>Maslahat</button>
            <button class="admin-component-btn" onclick="insertComponent('info-box')"><span class="comp-icon">‚ÑπÔ∏è</span>Ma'lumot box</button>
            <button class="admin-component-btn" onclick="insertComponent('code-block')"><span class="comp-icon">üíª</span>Kod blok</button>
            <button class="admin-component-btn" onclick="insertComponent('table')"><span class="comp-icon">üìä</span>Jadval</button>
            <button class="admin-component-btn" onclick="insertComponent('concept-grid')"><span class="comp-icon">üß©</span>Tushuncha grid</button>
            <button class="admin-component-btn" onclick="insertComponent('heading-h2')"><span class="comp-icon">H2</span>Sarlavha H2</button>
            <button class="admin-component-btn" onclick="insertComponent('heading-h3')"><span class="comp-icon">H3</span>Sarlavha H3</button>
            <button class="admin-component-btn" onclick="insertComponent('paragraph')"><span class="comp-icon">¬∂</span>Paragraf</button>
            <button class="admin-component-btn" onclick="insertComponent('list')"><span class="comp-icon">üìù</span>Ro'yxat</button>
            <button class="admin-component-btn" onclick="insertComponent('gold-line')"><span class="comp-icon">‚Äî</span>Oltin chiziq</button>
            <button class="admin-component-btn" onclick="insertComponent('image')"><span class="comp-icon">üñºÔ∏è</span>Rasm</button>
        </div>
    </div>

    <!-- Saqlash / Eksport -->
    <div class="admin-section">
        <h4>Saqlash va Eksport</h4>
        <button class="admin-btn-primary" onclick="adminSave()">üíæ Saqlash (localStorage)</button>
        <button class="admin-btn-secondary" onclick="adminExportHTML()">üì• HTML yuklab olish</button>
        <button class="admin-btn-danger" onclick="adminResetChanges()">üóë O'zgarishlarni bekor qilish</button>
    </div>
</div>

<script>
/* ===== SAFE LOCALSTORAGE HELPERS ===== */
function safeGetItem(key, fallback) {
    try { return localStorage.getItem(key); } catch(e) { return fallback || null; }
}
function safeSetItem(key, value) {
    try { localStorage.setItem(key, value); return true; } catch(e) { return false; }
}

/* ===== TOAST NOTIFICATION SYSTEM ===== */
function showToast(message, type, duration) {
    type = type || 'info';
    duration = duration || 3000;
    var container = document.getElementById('toastContainer');
    if (!container) {
        container = document.createElement('div');
        container.id = 'toastContainer';
        container.className = 'toast-container';
        document.body.appendChild(container);
    }
    var toast = document.createElement('div');
    toast.className = 'toast ' + type;
    toast.textContent = message;
    container.appendChild(toast);
    setTimeout(function() {
        toast.classList.add('fadeOut');
        setTimeout(function() { toast.remove(); }, 300);
    }, duration);
}

/* ===== SECTION NAVIGATION ===== */
function showSection(id, e) {
    if (e) e.preventDefault();
    var el = document.getElementById(id);
    if (!el) return;
    document.querySelectorAll('.section-block').forEach(s => s.classList.remove('active'));
    el.classList.add('active');
    document.querySelectorAll('.sidebar a[data-section]').forEach(a => a.classList.remove('active'));
    const link = document.querySelector('.sidebar a[data-section="'+id+'"]');
    if (link) link.classList.add('active');
    closeSidebar();
    window.scrollTo({top: 0, behavior: 'smooth'});
    // Mark lesson as visited
    if (id !== 'cover') markVisited(id);
    // Refresh admin editing if admin mode is active
    if (typeof adminRefreshSection === 'function') adminRefreshSection();
    // Trigger scroll-reveal animations for newly visible content
    setTimeout(initScrollReveal, 100);
    // Update lesson navigation buttons
    updateLessonNav();
}

/* ===== SIDEBAR TOGGLE ===== */
function toggleSidebar() {
    var sidebar = document.getElementById('sidebar');
    var overlay = document.getElementById('sidebarOverlay');
    var toggle = document.getElementById('menuToggle');
    if (!sidebar || !overlay || !toggle) return;
    sidebar.classList.toggle('open');
    overlay.classList.toggle('visible');
    toggle.classList.toggle('is-open');
    if (toggle.classList.contains('is-open')) {
        toggle.textContent = '\u2715';
        toggle.setAttribute('aria-label', 'Menyuni yopish');
        document.body.style.overflow = 'hidden';
    } else {
        toggle.textContent = '\u2630';
        toggle.setAttribute('aria-label', 'Menyuni ochish');
        document.body.style.overflow = '';
        clearSidebarSearch();
    }
}
function closeSidebar() {
    var sidebar = document.getElementById('sidebar');
    var overlay = document.getElementById('sidebarOverlay');
    var toggle = document.getElementById('menuToggle');
    if (!sidebar || !overlay || !toggle) return;
    sidebar.classList.remove('open');
    overlay.classList.remove('visible');
    toggle.classList.remove('is-open');
    toggle.textContent = '\u2630';
    toggle.setAttribute('aria-label', 'Menyuni ochish');
    document.body.style.overflow = '';
    clearSidebarSearch();
}
function clearSidebarSearch() {
    const searchInput = document.getElementById('sidebarSearch');
    if (searchInput && searchInput.value) {
        searchInput.value = '';
        filterSidebar('');
    }
}

/* ===== SIDEBAR SEARCH ===== */
function filterSidebar(query) {
    const links = document.querySelectorAll('.sidebar a[data-section]');
    const q = query.toLowerCase().trim();
    links.forEach(a => {
        if (!q || a.textContent.toLowerCase().includes(q)) {
            a.classList.remove('hidden-by-search');
        } else {
            a.classList.add('hidden-by-search');
        }
    });
}

/* ===== LESSON PROGRESS TRACKING ===== */
function getVisited() {
    try {
        return JSON.parse(safeGetItem('mbb_visited', '[]'));
    } catch(e) { return []; }
}
function markVisited(id) {
    var visited = getVisited();
    if (!visited.includes(id)) {
        visited.push(id);
        safeSetItem('mbb_visited', JSON.stringify(visited));
    }
    updateProgress();
}
function updateProgress() {
    const visited = getVisited();
    const total = 15;
    const count = visited.filter(v => v.startsWith('t')).length;
    const fill = document.getElementById('progressFill');
    const text = document.getElementById('progressText');
    if (fill) fill.style.width = (count / total * 100) + '%';
    if (text) text.textContent = count + ' / ' + total + " dars o'tilgan";
    // Update checkmarks
    document.querySelectorAll('.sidebar a[data-section]').forEach(a => {
        const sec = a.getAttribute('data-section');
        if (visited.includes(sec)) {
            a.classList.add('completed');
        }
    });
}

/* ===== DARK MODE ===== */
function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
    var isDark = document.body.classList.contains('dark-mode');
    safeSetItem('mbb_dark_mode', isDark ? '1' : '0');
    updateDarkModeUI(isDark);
}
function updateDarkModeUI(isDark) {
    var icon = document.getElementById('darkModeIcon');
    var text = document.getElementById('darkModeText');
    if (icon) icon.textContent = isDark ? '\u2600\uFE0F' : '\uD83C\uDF19';
    if (text) text.textContent = isDark ? 'Kunduzgi rejim' : 'Tungi rejim';
}
function initDarkMode() {
    var saved = safeGetItem('mbb_dark_mode');
    var shouldBeDark = false;
    if (saved !== null) {
        shouldBeDark = saved === '1';
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        shouldBeDark = true;
    }
    if (shouldBeDark) {
        document.body.classList.add('dark-mode');
    }
    updateDarkModeUI(shouldBeDark);
    /* Listen for system theme changes */
    if (window.matchMedia) {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
            if (safeGetItem('mbb_dark_mode') === null) {
                if (e.matches) document.body.classList.add('dark-mode');
                else document.body.classList.remove('dark-mode');
                updateDarkModeUI(e.matches);
            }
        });
    }
}

/* ===== READING PROGRESS BAR ===== */
function updateReadingProgress() {
    var bar = document.getElementById('readingProgress');
    if (!bar) return;
    var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    var docHeight = document.documentElement.scrollHeight - window.innerHeight;
    if (docHeight > 0) {
        bar.style.width = Math.min((scrollTop / docHeight) * 100, 100) + '%';
    }
}

/* ===== BACK TO TOP ===== */
function updateBackToTop() {
    var btn = document.getElementById('backToTop');
    if (!btn) return;
    if (window.pageYOffset > 400) {
        btn.classList.add('visible');
    } else {
        btn.classList.remove('visible');
    }
}

/* ===== COPY TO CLIPBOARD ===== */
function initCopyButtons() {
    document.querySelectorAll('pre').forEach(function(pre) {
        /* Prevent duplicate buttons */
        if (pre.querySelector('.copy-btn')) return;
        var btn = document.createElement('button');
        btn.className = 'copy-btn';
        btn.textContent = 'Nusxa';
        btn.setAttribute('aria-label', 'Kodni nusxalash');
        btn.onclick = function(e) {
            e.stopPropagation();
            /* Extract code without the button text */
            var codeEl = pre.querySelector('code');
            var code = codeEl ? codeEl.textContent.trim() : pre.textContent.replace(btn.textContent, '').trim();
            var onSuccess = function() {
                btn.textContent = 'Nusxalandi!';
                btn.classList.add('copied');
                showToast('Kod nusxalandi!', 'success', 2000);
                setTimeout(function() {
                    btn.textContent = 'Nusxa';
                    btn.classList.remove('copied');
                }, 2000);
            };
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(code).then(onSuccess).catch(function() {
                    fallbackCopy(code);
                    onSuccess();
                });
            } else {
                fallbackCopy(code);
                onSuccess();
            }
        };
        /* If file-badge exists, position copy button on left */
        var badge = pre.querySelector('.file-badge');
        if (badge) {
            btn.style.right = 'auto';
            btn.style.left = '12px';
        }
        pre.appendChild(btn);
    });
}
function fallbackCopy(text) {
    var ta = document.createElement('textarea');
    ta.value = text;
    ta.style.position = 'fixed';
    ta.style.opacity = '0';
    document.body.appendChild(ta);
    ta.select();
    try { document.execCommand('copy'); } catch(e) {}
    document.body.removeChild(ta);
}

/* ===== KEYBOARD NAVIGATION ===== */
let sections = ['cover','t1','t2','t3','t4','t5','t6','t7','t8','t9','t10','t11','t12','t13','t14','t15','backpage'];
function getCurrentSection() {
    const active = document.querySelector('.section-block.active');
    return active ? active.id : 'cover';
}
function navigateSection(dir) {
    const current = getCurrentSection();
    const idx = sections.indexOf(current);
    const next = idx + dir;
    if (next >= 0 && next < sections.length) {
        showSection(sections[next]);
    }
}
document.addEventListener('keydown', function(e) {
    /* Admin mode toggle: Ctrl+Shift+A */
    if (e.ctrlKey && e.shiftKey && (e.key === 'A' || e.key === 'a')) {
        e.preventDefault();
        toggleAdmin();
        return;
    }
    /* Don't navigate if user is typing in editable area */
    var ae = document.activeElement;
    if (ae && (ae.tagName === 'INPUT' || ae.tagName === 'TEXTAREA')) return;
    if (ae && ae.getAttribute('contenteditable') === 'true') return;
    if (e.key === 'ArrowLeft') { e.preventDefault(); navigateSection(-1); }
    if (e.key === 'ArrowRight') { e.preventDefault(); navigateSection(1); }
    if (e.key === 'Escape') {
        if (adminMode) toggleAdmin();
        else closeSidebar();
    }
});

/* ===== MOBILE SWIPE NAVIGATION ===== */
(function() {
    var touchStartX = 0;
    var touchStartY = 0;
    var touchStartTime = 0;

    /* Sidebar swipe to close */
    var sidebar = document.getElementById('sidebar');
    if (sidebar) {
        sidebar.addEventListener('touchstart', function(e) {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        }, {passive: true});
        sidebar.addEventListener('touchend', function(e) {
            var dx = e.changedTouches[0].clientX - touchStartX;
            var dy = e.changedTouches[0].clientY - touchStartY;
            if (dx < -60 && Math.abs(dy) < Math.abs(dx)) {
                closeSidebar();
            }
        }, {passive: true});
    }

    /* Main content swipe for lesson navigation */
    var main = document.querySelector('.main');
    if (main) {
        main.addEventListener('touchstart', function(e) {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
            touchStartTime = Date.now();
        }, {passive: true});
        main.addEventListener('touchend', function(e) {
            var dx = e.changedTouches[0].clientX - touchStartX;
            var dy = e.changedTouches[0].clientY - touchStartY;
            var dt = Date.now() - touchStartTime;
            /* Quick horizontal swipe (< 400ms, > 80px, mostly horizontal) */
            if (dt < 400 && Math.abs(dx) > 80 && Math.abs(dx) > Math.abs(dy) * 2) {
                if (dx > 0) navigateSection(-1);  /* swipe right = previous */
                else navigateSection(1);           /* swipe left = next */
            }
        }, {passive: true});
    }
})();

/* ===== OVERLAY TOUCH FIX (iOS) ===== */
(function() {
    var overlay = document.getElementById('sidebarOverlay');
    if (overlay) {
        overlay.addEventListener('touchend', function(e) {
            e.preventDefault();
            toggleSidebar();
        });
    }
})();

/* ===== SCROLL EVENTS ===== */
let scrollTicking = false;
window.addEventListener('scroll', function() {
    if (!scrollTicking) {
        requestAnimationFrame(function() {
            updateReadingProgress();
            updateBackToTop();
            scrollTicking = false;
        });
        scrollTicking = true;
    }
});

/* ===== 3D FLUENT EMOJI REPLACEMENT ===== */
const EMOJI_MAP = {
    '\u{1F4D8}': 'Open%20book/3D/open_book_3d.png',
    '\u{1F4CB}': 'Clipboard/3D/clipboard_3d.png',
    '\u2B50': 'Star/3D/star_3d.png',
    '\u{1F50D}': 'Magnifying%20glass%20tilted%20left/3D/magnifying_glass_tilted_left_3d.png',
    '\u{1F4D6}': 'Open%20book/3D/open_book_3d.png',
    '\u{1F4CA}': 'Bar%20chart/3D/bar_chart_3d.png',
    '\u26A1': 'High%20voltage/3D/high_voltage_3d.png',
    '\u2705': 'Check%20mark%20button/3D/check_mark_button_3d.png',
    '\u274C': 'Cross%20mark/3D/cross_mark_3d.png',
    '\u{1F9E9}': 'Puzzle%20piece/3D/puzzle_piece_3d.png',
    '\u{1F517}': 'Link/3D/link_3d.png',
    '\u{1F511}': 'Key/3D/key_3d.png',
    '\u{1F9E0}': 'Brain/3D/brain_3d.png',
    '\u{1F3C6}': 'Trophy/3D/trophy_3d.png',
    '\u{1F3AF}': 'Bullseye/3D/bullseye_3d.png',
    '\u{1F4DD}': 'Memo/3D/memo_3d.png',
    '\u{1F504}': 'Counterclockwise%20arrows%20button/3D/counterclockwise_arrows_button_3d.png',
    '\u2696\uFE0F': 'Balance%20scale/3D/balance_scale_3d.png',
    '\u{1F4D0}': 'Triangular%20ruler/3D/triangular_ruler_3d.png',
    '\u{1F4E6}': 'Package/3D/package_3d.png',
    '\u{1FA9F}': 'Window/3D/window_3d.png',
    '\u{1F4C7}': 'Card%20index/3D/card_index_3d.png',
    '\u{1F441}\uFE0F': 'Eye/3D/eye_3d.png',
    '\u2699\uFE0F': 'Gear/3D/gear_3d.png',
    '\u{1F42C}': 'Dolphin/3D/dolphin_3d.png',
    '\u{1F418}': 'Elephant/3D/elephant_3d.png',
    '\u{1F40D}': 'Snake/3D/snake_3d.png',
    '\u{1F336}': 'Hot%20pepper/3D/hot_pepper_3d.png',
    '\u{1F3D7}': 'Building%20construction/3D/building_construction_3d.png',
    '\u{1F9F0}': 'Toolbox/3D/toolbox_3d.png',
    '\u{1F4C4}': 'Page%20facing%20up/3D/page_facing_up_3d.png',
    '\u{1F50C}': 'Electric%20plug/3D/electric_plug_3d.png',
    '\u{1F512}': 'Locked/3D/locked_3d.png',
    '\u270F\uFE0F': 'Pencil/3D/pencil_3d.png',
    '\u{1F5D1}\uFE0F': 'Wastebasket/3D/wastebasket_3d.png',
    '\u{1F3E2}': 'Office%20building/3D/office_building_3d.png',
    '\u{1F319}': 'Crescent%20moon/3D/crescent_moon_3d.png',
    '\u2600\uFE0F': 'Sun/3D/sun_3d.png',
    '\u{1F310}': 'Globe%20with%20meridians/3D/globe_with_meridians_3d.png',
    '\u{1F6E0}\uFE0F': 'Hammer%20and%20wrench/3D/hammer_and_wrench_3d.png',
    '\u{1F4F1}': 'Mobile%20phone/3D/mobile_phone_3d.png',
    '\u23F1': 'Stopwatch/3D/stopwatch_3d.png',
    '\u{1F4BE}': 'Floppy%20disk/3D/floppy_disk_3d.png',
    '\u{1F3A8}': 'Artist%20palette/3D/artist_palette_3d.png',
    '\u{1F536}': 'Large%20orange%20diamond/3D/large_orange_diamond_3d.png',
    '\u{1F537}': 'Large%20blue%20diamond/3D/large_blue_diamond_3d.png'
};
const FLUENT_BASE = 'https://raw.githubusercontent.com/microsoft/fluentui-emoji/main/assets/';

function replaceEmojisWithFluent() {
    const walker = document.createTreeWalker(document.querySelector('.main'), NodeFilter.SHOW_TEXT, null);
    const replacements = [];
    while (walker.nextNode()) {
        const node = walker.currentNode;
        let text = node.textContent;
        let hasEmoji = false;
        for (const emoji in EMOJI_MAP) {
            if (text.includes(emoji)) { hasEmoji = true; break; }
        }
        if (hasEmoji) replacements.push(node);
    }
    replacements.forEach(node => {
        const span = document.createElement('span');
        let html = node.textContent;
        for (const [emoji, path] of Object.entries(EMOJI_MAP)) {
            if (html.includes(emoji)) {
                const imgTag = '<img class="icon-3d" src="' + FLUENT_BASE + path + '" alt="' + emoji + '" loading="lazy">';
                html = html.split(emoji).join(imgTag);
            }
        }
        span.innerHTML = html;
        node.parentNode.replaceChild(span, node);
    });
    /* Sidebar emojilarini ham almashtirish */
    const sidebar = document.querySelector('.sidebar');
    if (sidebar) {
        const sWalker = document.createTreeWalker(sidebar, NodeFilter.SHOW_TEXT, null);
        const sReplacements = [];
        while (sWalker.nextNode()) {
            const n = sWalker.currentNode;
            let hasE = false;
            for (const e in EMOJI_MAP) { if (n.textContent.includes(e)) { hasE = true; break; } }
            if (hasE) sReplacements.push(n);
        }
        sReplacements.forEach(node => {
            const span = document.createElement('span');
            let html = node.textContent;
            for (const [emoji, path] of Object.entries(EMOJI_MAP)) {
                if (html.includes(emoji)) {
                    const imgTag = '<img class="icon-3d" src="' + FLUENT_BASE + path + '" alt="' + emoji + '" loading="lazy">';
                    html = html.split(emoji).join(imgTag);
                }
            }
            span.innerHTML = html;
            node.parentNode.replaceChild(span, node);
        });
    }
}

/* ===== SCROLL-REVEAL ANIMATIONS ===== */
function initScrollReveal() {
    var section = document.querySelector('.section-block.active');
    if (!section) return;
    var elements = section.querySelectorAll('.card, .card-flat, .theory-box, .warning-box, .tip-box, .info-box, .concept-grid, .mac-window, table, .func-grid, .self-check, .flow-diagram, .arch-diagram');
    elements.forEach(function(el, i) {
        if (el.classList.contains('reveal') || el.classList.contains('visible')) return;
        el.classList.add('reveal');
        el.style.transitionDelay = (i * 0.05) + 's';
    });
    /* Trigger visibility check */
    requestAnimationFrame(checkRevealElements);
}
function checkRevealElements() {
    var reveals = document.querySelectorAll('.reveal:not(.visible)');
    reveals.forEach(function(el) {
        var rect = el.getBoundingClientRect();
        var windowHeight = window.innerHeight;
        if (rect.top < windowHeight - 60) {
            el.classList.add('visible');
        }
    });
}

/* ===== TABLE SCROLL WRAPPER ===== */
function wrapTablesForScroll() {
    document.querySelectorAll('table').forEach(function(table) {
        if (table.parentElement && table.parentElement.classList.contains('table-scroll')) return;
        if (table.closest('.admin-toolbar')) return;
        var wrapper = document.createElement('div');
        wrapper.className = 'table-scroll';
        table.parentNode.insertBefore(wrapper, table);
        wrapper.appendChild(table);
        /* Check if table overflows */
        checkTableScroll(wrapper);
    });
}
function checkTableScroll(wrapper) {
    if (!wrapper) return;
    if (wrapper.scrollWidth > wrapper.clientWidth + 5) {
        wrapper.classList.add('has-scroll');
    } else {
        wrapper.classList.remove('has-scroll');
    }
}

/* ===== LESSON NAVIGATION BUTTONS ===== */
function addLessonNavButtons() {
    document.querySelectorAll('.section-block').forEach(function(section) {
        if (section.querySelector('.lesson-nav')) return;
        if (section.id === 'cover' || section.id === 'backpage') return;
        var container = section.querySelector('.container');
        if (!container) return;
        var nav = document.createElement('div');
        nav.className = 'lesson-nav';
        nav.innerHTML = '<button class="lesson-nav-btn prev" onclick="navigateSection(-1)" aria-label="Oldingi dars">\u2190 Oldingi</button>' +
            '<span class="lesson-nav-info"></span>' +
            '<button class="lesson-nav-btn next" onclick="navigateSection(1)" aria-label="Keyingi dars">Keyingi \u2192</button>';
        container.appendChild(nav);
    });
    updateLessonNav();
}
function updateLessonNav() {
    var current = getCurrentSection();
    var idx = sections.indexOf(current);
    document.querySelectorAll('.lesson-nav').forEach(function(nav) {
        var section = nav.closest('.section-block');
        if (!section) return;
        var sIdx = sections.indexOf(section.id);
        var prevBtn = nav.querySelector('.prev');
        var nextBtn = nav.querySelector('.next');
        var info = nav.querySelector('.lesson-nav-info');
        if (prevBtn) prevBtn.disabled = (sIdx <= 0);
        if (nextBtn) nextBtn.disabled = (sIdx >= sections.length - 1);
        if (info) info.textContent = (sIdx) + ' / ' + (sections.length - 2);
    });
}

/* ===== WORD EXPORT ===== */
function exportToWord() {
    const sections = document.querySelectorAll('.section-block');
    let content = '';
    sections.forEach(s => {
        if (s.id === 'backpage') return;
        content += s.innerHTML;
    });
    /* MSO-mos CSS */
    const msoCSS = `
        <style>
            @page { size:A4; margin:2cm 2cm 1.5cm 3cm; }
            body { font-family:'Segoe UI',Arial,sans-serif; font-size:11pt; line-height:1.6; color:#1a1a1a; }
            h1 { font-family:Georgia,serif; font-size:22pt; color:#1a1a1a; text-align:center; margin-bottom:10px; }
            h2 { font-family:Georgia,serif; font-size:16pt; color:#1a1a1a; margin-top:20px; border-bottom:2px solid #d4af37; padding-bottom:5px; }
            h3 { font-size:13pt; color:#333; margin-top:15px; }
            p, li { font-size:11pt; line-height:1.6; }
            table { border-collapse:collapse; width:100%; margin:10px 0; }
            td, th { border:1px solid #999; padding:6px 10px; font-size:10pt; }
            th { background:#f5f5f5; font-weight:bold; }
            pre { background:#f5f5f5; border:1px solid #ccc; padding:10px; font-family:'Courier New',monospace; font-size:9pt; line-height:1.4; white-space:pre-wrap; word-wrap:break-word; }
            code { font-family:'Courier New',monospace; font-size:9pt; background:#f0f0f0; padding:1px 4px; }
            pre code { background:transparent; }
            .card, .card-flat { border:1px solid #ddd; border-left:4px solid #d4af37; padding:15px; margin:10px 0; border-radius:4px; }
            .theory-box { background:#fffbe6; border:1px solid #d4af37; border-left:4px solid #d4af37; padding:15px; margin:10px 0; }
            .warning-box { background:#fff5f5; border:1px solid #e74c3c; border-left:4px solid #e74c3c; padding:15px; margin:10px 0; }
            .tip-box { background:#f0fff0; border:1px solid #27ae60; border-left:4px solid #27ae60; padding:15px; margin:10px 0; }
            .info-box { background:#f0f5ff; border:1px solid #3498db; border-left:4px solid #3498db; padding:15px; margin:10px 0; }
            .result-ok { background:#f0fff0; border:1px solid #28c840; border-left:4px solid #28c840; padding:10px; margin:8px 0; font-family:'Courier New',monospace; font-size:9pt; }
            .meta-info { text-align:center; background:#f8f8f8; padding:12px; border:1px solid #ddd; margin-bottom:20px; font-size:10pt; }
            .gold-line { height:2px; background:#d4af37; width:100px; margin:10px auto 20px auto; }
            .cover { text-align:center; padding:40px 20px; }
            .stats { text-align:center; margin:20px 0; }
            .stat { display:inline-block; margin:0 15px; text-align:center; }
            .num2 { font-size:24pt; color:#d4af37; font-weight:bold; }
            .label { font-size:9pt; color:#888; }
            .subtitle { text-align:center; color:#555; margin-bottom:15px; }
            .container { padding:10px 0; }
            .print-btn-wrap { display:none; }
            .copy-btn { display:none; }
            .file-badge { display:none; }
            .icon-3d { width:20px; height:20px; vertical-align:middle; }
            img { max-width:100%; }
            .sql-keyword { color:#c71585; font-weight:bold; }
            .sql-string { color:#b8860b; }
            .sql-comment { color:#666; }
            .sql-function { color:#0066cc; }
        </style>
    `;
    const fullHTML = '<!DOCTYPE html><html><head><meta charset="utf-8">' + msoCSS + '</head><body>' + content + '</body></html>';
    /* CSS var() ni to'g'ridan-to'g'ri rangga almashtirish */
    let processed = fullHTML;
    processed = processed.replace(/var\(--gold\)/g, '#d4af37');
    processed = processed.replace(/var\(--gold-light\)/g, '#e8cc6a');
    processed = processed.replace(/var\(--gold-dark\)/g, '#b8960e');
    processed = processed.replace(/var\(--text\)/g, '#1a1a1a');
    processed = processed.replace(/var\(--text-secondary\)/g, '#555');
    processed = processed.replace(/var\(--text-muted\)/g, '#888');
    processed = processed.replace(/var\(--bg\)/g, '#f0f0f3');
    processed = processed.replace(/var\(--bg-card\)/g, '#f0f0f3');
    processed = processed.replace(/var\(--code-bg\)/g, '#f5f5f5');
    processed = processed.replace(/var\(--code-text\)/g, '#1a1a1a');
    processed = processed.replace(/var\(--border-color\)/g, '#e8e8e8');
    /* box-shadow olib tashlash */
    processed = processed.replace(/box-shadow:[^;"]+/g, '');
    /* linear-gradient ni oddiy rangga almashtirish */
    processed = processed.replace(/background:\s*linear-gradient\([^)]+\)/g, 'background:#f8f8f8');
    /* animation olib tashlash */
    processed = processed.replace(/animation:[^;"]+/g, '');
    processed = processed.replace(/transition:[^;"]+/g, '');

    const converted = htmlDocx.asBlob(processed);
    saveAs(converted, 'Malumotlar_bazasi_15_amaliy_mashgulot.docx');
}

/* ===== ADMIN PANEL ===== */
let adminMode = false;
let adminInsertTarget = null;

/* Component Templates */
const COMPONENT_TEMPLATES = {
    'card': '<div class="card"><h3>Yangi karta sarlavhasi</h3><p>Karta matni shu yerda yoziladi...</p></div>',
    'theory-box': '<div class="theory-box"><p><strong>üí° Nazariya:</strong> Matn shu yerda yoziladi...</p></div>',
    'warning-box': '<div class="warning-box"><p><strong>‚ö†Ô∏è Ogohlantirish:</strong> Matn shu yerda yoziladi...</p></div>',
    'tip-box': '<div class="tip-box"><p><strong>‚úÖ Maslahat:</strong> Matn shu yerda yoziladi...</p></div>',
    'info-box': '<div class="info-box"><p><strong>‚ÑπÔ∏è Ma\'lumot:</strong> Matn shu yerda yoziladi...</p></div>',
    'code-block': '<div class="mac-window"><div class="mac-titlebar"><div class="mac-dots"><span class="mac-dot red"></span><span class="mac-dot yellow"></span><span class="mac-dot green"></span></div><div class="mac-title">Terminal</div></div><pre><code>-- Kod shu yerda yoziladi</code></pre></div>',
    'table': '<table><thead><tr><th>Ustun 1</th><th>Ustun 2</th><th>Ustun 3</th></tr></thead><tbody><tr><td>Ma\'lumot 1</td><td>Ma\'lumot 2</td><td>Ma\'lumot 3</td></tr><tr><td>Ma\'lumot 4</td><td>Ma\'lumot 5</td><td>Ma\'lumot 6</td></tr></tbody></table>',
    'concept-grid': '<div class="concept-grid"><div class="concept-card"><span class="big-icon">üìå</span><h4>Tushuncha 1</h4><p>Tavsif shu yerda</p></div><div class="concept-card"><span class="big-icon">üìå</span><h4>Tushuncha 2</h4><p>Tavsif shu yerda</p></div><div class="concept-card"><span class="big-icon">üìå</span><h4>Tushuncha 3</h4><p>Tavsif shu yerda</p></div></div>',
    'heading-h2': '<h2><span class="icon">üìñ</span>Yangi bo\'lim sarlavhasi</h2>',
    'heading-h3': '<h3>Yangi sarlavha</h3>',
    'paragraph': '<p>Yangi matn shu yerda yoziladi. Matnni bosib tahrirlang.</p>',
    'list': '<ul><li>Birinchi band</li><li>Ikkinchi band</li><li>Uchinchi band</li></ul>',
    'gold-line': '<div class="gold-line"></div>',
    'image': '<div style="text-align:center;margin:20px 0"><img src="" alt="Rasm tavsifi" style="max-width:100%;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.1)"><p style="color:var(--text-muted);font-size:0.9em;margin-top:8px">Rasm tavsifi ‚Äî URL ni o\'zgartiring</p></div>'
};

/* Toggle Admin Mode */
function toggleAdmin() {
    adminMode = !adminMode;
    document.body.classList.toggle('admin-mode', adminMode);
    document.getElementById('adminToolbar').classList.toggle('open', adminMode);
    if (adminMode) {
        enableEditing();
        renderSectionList();
        showInsertMarkers();
        addDeleteButtons();
    } else {
        disableEditing();
        hideInsertMarkers();
        removeDeleteButtons();
        adminInsertTarget = null;
    }
}

/* Enable inline editing */
function enableEditing() {
    const section = document.querySelector('.section-block.active');
    if (!section) return;
    section.querySelectorAll('h1,h2,h3,p,li,td,th,.subtitle').forEach(function(el) {
        if (el.closest('.admin-toolbar') || el.closest('.admin-insert-marker') || el.closest('.admin-badge')) return;
        if (el.querySelector('span.icon,span.icon-3d,img.icon-3d')) {
            /* For headings with icons, only make the text part editable */
        }
        el.setAttribute('contenteditable', 'true');
        el.classList.add('editable-highlight');
    });
}

function disableEditing() {
    document.querySelectorAll('[contenteditable="true"]').forEach(function(el) {
        el.removeAttribute('contenteditable');
        el.classList.remove('editable-highlight');
    });
}

/* Re-enable editing when switching sections in admin mode */
function adminRefreshSection() {
    if (!adminMode) return;
    disableEditing();
    hideInsertMarkers();
    removeDeleteButtons();
    adminInsertTarget = null;
    enableEditing();
    showInsertMarkers();
    addDeleteButtons();
    renderSectionList();
}

/* Insert Markers */
function showInsertMarkers() {
    var section = document.querySelector('.section-block.active .container');
    if (!section) return;
    var children = Array.from(section.children);
    children.forEach(function(child) {
        if (child.classList.contains('admin-insert-marker')) return;
        var marker = document.createElement('div');
        marker.className = 'admin-insert-marker';
        marker.innerHTML = '<button onclick="selectInsertPoint(this)" title="Shu yerga komponent qo\'shish">+</button>';
        child.after(marker);
    });
}

function hideInsertMarkers() {
    document.querySelectorAll('.admin-insert-marker').forEach(function(m) { m.remove(); });
}

function selectInsertPoint(btn) {
    document.querySelectorAll('.admin-insert-marker.selected').forEach(function(m) { m.classList.remove('selected'); });
    btn.parentElement.classList.add('selected');
    adminInsertTarget = btn.parentElement;
}

/* Insert Component */
function insertComponent(type) {
    if (!adminMode) return;
    var html = COMPONENT_TEMPLATES[type];
    if (!html) return;

    var temp = document.createElement('div');
    temp.innerHTML = html;
    var newEl = temp.firstElementChild;

    if (adminInsertTarget && adminInsertTarget.parentNode) {
        adminInsertTarget.after(newEl);
    } else {
        var container = document.querySelector('.section-block.active .container');
        if (container) container.appendChild(newEl);
    }

    /* Refresh markers and editing */
    hideInsertMarkers();
    removeDeleteButtons();
    adminInsertTarget = null;
    enableEditing();
    showInsertMarkers();
    addDeleteButtons();

    /* Scroll to new element */
    newEl.scrollIntoView({ behavior: 'smooth', block: 'center' });

    /* Flash effect */
    newEl.style.outline = '2px solid var(--gold)';
    newEl.style.outlineOffset = '4px';
    setTimeout(function() { newEl.style.outline = ''; newEl.style.outlineOffset = ''; }, 1500);
}

/* Delete Component Buttons */
function addDeleteButtons() {
    var section = document.querySelector('.section-block.active .container');
    if (!section) return;
    section.querySelectorAll('.card, .theory-box, .warning-box, .tip-box, .info-box, .mac-window, .concept-grid, h2').forEach(function(el) {
        if (el.closest('.admin-toolbar')) return;
        if (el.querySelector('.admin-delete-component')) return;
        el.style.position = 'relative';
        var delBtn = document.createElement('button');
        delBtn.className = 'admin-delete-component';
        delBtn.textContent = '‚úï';
        delBtn.title = "O'chirish";
        delBtn.onclick = function(ev) {
            ev.stopPropagation();
            if (confirm("Bu komponentni o'chirishni xohlaysizmi?")) {
                /* Also remove the adjacent insert marker if exists */
                var next = el.nextElementSibling;
                if (next && next.classList.contains('admin-insert-marker')) next.remove();
                var prev = el.previousElementSibling;
                if (prev && prev.classList.contains('admin-insert-marker')) prev.remove();
                el.remove();
                hideInsertMarkers();
                showInsertMarkers();
            }
        };
        el.appendChild(delBtn);
    });
}

function removeDeleteButtons() {
    document.querySelectorAll('.admin-delete-component').forEach(function(btn) { btn.remove(); });
}

/* Section Management */
function renderSectionList() {
    var list = document.getElementById('adminSectionList');
    if (!list) return;
    list.innerHTML = '';
    sections.forEach(function(id) {
        var section = document.getElementById(id);
        if (!section) return;
        var name = id;
        var h1 = section.querySelector('h1');
        if (h1) name = h1.textContent.trim().substring(0, 40);
        else if (id === 'cover') name = 'Bosh sahifa';
        else if (id === 'backpage') name = 'Orqa muqova';

        var item = document.createElement('div');
        item.className = 'admin-section-item';
        item.innerHTML = '<span class="sec-name" title="' + name + '">' + name + '</span>' +
            '<div class="sec-actions">' +
            '<button title="Tahrirlash" onclick="adminGoToSection(\'' + id + '\')">‚úé</button>' +
            '<button title="Nom o\'zgartirish" onclick="adminRenameSection(\'' + id + '\')">A</button>' +
            (id !== 'cover' && id !== 'backpage' ? '<button class="del-btn" title="O\'chirish" onclick="adminDeleteSection(\'' + id + '\')">‚úï</button>' : '') +
            '</div>';
        list.appendChild(item);
    });
}

function adminGoToSection(id) {
    showSection(id);
}

function adminRenameSection(id) {
    var section = document.getElementById(id);
    if (!section) return;
    var h1 = section.querySelector('h1');
    var currentName = h1 ? h1.textContent.trim() : id;
    var newName = prompt("Yangi nom kiriting:", currentName);
    if (newName && newName.trim()) {
        if (h1) h1.textContent = newName.trim();
        /* Update sidebar link */
        var link = document.querySelector('.sidebar a[data-section="' + id + '"]');
        if (link) {
            var num = link.querySelector('.num');
            var badge = link.querySelector('.check-badge');
            link.textContent = '';
            if (num) link.appendChild(num);
            link.appendChild(document.createTextNode(newName.trim()));
            if (badge) link.appendChild(badge);
        }
        renderSectionList();
    }
}

function adminDeleteSection(id) {
    if (id === 'cover' || id === 'backpage') return;
    if (!confirm("'" + id + "' sahifasini o'chirishni xohlaysizmi? Bu amalni qaytarib bo'lmaydi!")) return;

    /* Remove section block */
    var section = document.getElementById(id);
    if (section) section.remove();

    /* Remove sidebar link */
    var link = document.querySelector('.sidebar a[data-section="' + id + '"]');
    if (link) link.remove();

    /* Remove from sections array */
    var idx = sections.indexOf(id);
    if (idx > -1) sections.splice(idx, 1);

    /* Navigate to cover */
    showSection('cover');
    renderSectionList();
}

/* Add Section Modal */
function adminShowAddSectionModal() {
    var overlay = document.createElement('div');
    overlay.className = 'admin-modal-overlay';
    overlay.id = 'adminModalOverlay';
    overlay.innerHTML =
        '<div class="admin-modal">' +
        '<h3>Yangi sahifa qo\'shish</h3>' +
        '<label>Sahifa nomi</label>' +
        '<input type="text" id="adminNewSectionName" placeholder="Masalan: 16-amaliy mashg\'ulot">' +
        '<label>Sahifa IDsi (lotin harflar, raqamlar)</label>' +
        '<input type="text" id="adminNewSectionId" placeholder="Masalan: t16">' +
        '<label>Qisqa tavsif</label>' +
        '<textarea id="adminNewSectionDesc" placeholder="Sahifa haqida qisqa ma\'lumot..."></textarea>' +
        '<div class="admin-modal-actions">' +
        '<button class="admin-btn-secondary" onclick="adminCloseModal()">Bekor qilish</button>' +
        '<button class="admin-btn-primary" onclick="adminCreateSection()">Yaratish</button>' +
        '</div></div>';
    document.body.appendChild(overlay);
    document.getElementById('adminNewSectionName').focus();
}

function adminCloseModal() {
    var overlay = document.getElementById('adminModalOverlay');
    if (overlay) overlay.remove();
}

function adminCreateSection() {
    var name = document.getElementById('adminNewSectionName').value.trim();
    var id = document.getElementById('adminNewSectionId').value.trim().replace(/[^a-zA-Z0-9_-]/g, '');
    var desc = document.getElementById('adminNewSectionDesc').value.trim();

    if (!name) { alert('Sahifa nomini kiriting!'); return; }
    if (!id) { alert('Sahifa IDsini kiriting!'); return; }
    if (document.getElementById(id)) { alert("Bu ID allaqachon mavjud! Boshqa ID tanlang."); return; }

    /* Create section HTML */
    var sectionHTML =
        '<div class="section-block" id="' + id + '">' +
        '<div class="container">' +
        '<h1>' + name + '</h1>' +
        '<p class="subtitle">' + (desc || 'Sahifa tavsifi') + '</p>' +
        '<div class="gold-line"></div>' +
        '<div class="meta-info"><strong>üìò Fan:</strong> Ma\'lumotlar bazasi &nbsp;|&nbsp; <strong>‚è± Davomiyligi:</strong> 80 min &nbsp;|&nbsp; <strong>üéØ Daraja:</strong> Boshlang\'ich</div>' +
        '<h2><span class="icon">üìñ</span>Nazariy qism</h2>' +
        '<div class="card"><h3>Sarlavha</h3><p>Nazariy matn shu yerda yoziladi...</p></div>' +
        '<h2><span class="icon">‚ö°</span>Amaliy qism</h2>' +
        '<div class="card"><h3><span class="step-number">1</span>Birinchi qadam</h3><p>Amaliy ko\'rsatma shu yerda...</p></div>' +
        '<h2><span class="icon">üß†</span>Nazorat savollari</h2>' +
        '<div class="card"><ol><li>Birinchi savol?</li><li>Ikkinchi savol?</li></ol></div>' +
        '<h2><span class="icon">üéØ</span>Amaliy topshiriqlar</h2>' +
        '<div class="card"><ol><li>Birinchi topshiriq</li><li>Ikkinchi topshiriq</li></ol></div>' +
        '<h2><span class="icon">üèÜ</span>Xulosa</h2>' +
        '<div class="card"><p>Xulosa matni shu yerda yoziladi...</p></div>' +
        '</div></div>';

    /* Insert before backpage or at end of main */
    var main = document.querySelector('.main');
    var backpage = document.getElementById('backpage');
    var temp = document.createElement('div');
    temp.innerHTML = sectionHTML;
    var newSection = temp.firstElementChild;
    if (backpage) {
        main.insertBefore(newSection, backpage);
    } else {
        main.appendChild(newSection);
    }

    /* Add sidebar link (before backpage link) */
    var sidebarNav = document.querySelector('.sidebar');
    var backLink = sidebarNav.querySelector('a[data-section="backpage"]');
    var newLink = document.createElement('a');
    newLink.href = '#';
    newLink.setAttribute('data-section', id);
    newLink.onclick = function(e) { showSection(id, e); };

    var numSpan = document.createElement('span');
    numSpan.className = 'num';
    numSpan.textContent = id.replace(/\D/g, '') || '‚òÖ';
    newLink.appendChild(numSpan);
    newLink.appendChild(document.createTextNode(name));
    var checkBadge = document.createElement('span');
    checkBadge.className = 'check-badge';
    checkBadge.textContent = '‚úì';
    newLink.appendChild(checkBadge);

    if (backLink) {
        sidebarNav.insertBefore(newLink, backLink);
    } else {
        sidebarNav.appendChild(newLink);
    }

    /* Add to sections array (before backpage if exists) */
    var bpIdx = sections.indexOf('backpage');
    if (bpIdx > -1) {
        sections.splice(bpIdx, 0, id);
    } else {
        sections.push(id);
    }

    /* Close modal and go to new section */
    adminCloseModal();
    showSection(id);
    renderSectionList();

    /* Re-init copy buttons for the new section */
    initCopyButtons();
}

/* Save to localStorage */
function adminSave() {
    var data = {};
    document.querySelectorAll('.section-block').forEach(function(section) {
        /* Clean up admin elements before saving */
        var clone = section.cloneNode(true);
        clone.querySelectorAll('.admin-insert-marker, .admin-delete-component').forEach(function(el) { el.remove(); });
        clone.querySelectorAll('[contenteditable]').forEach(function(el) { el.removeAttribute('contenteditable'); });
        clone.querySelectorAll('.editable-highlight').forEach(function(el) { el.classList.remove('editable-highlight'); });
        data[section.id] = clone.innerHTML;
    });
    /* Save sidebar HTML */
    var sidebarClone = document.querySelector('.sidebar').cloneNode(true);
    data['__sidebar__'] = sidebarClone.innerHTML;
    data['__sections_order__'] = JSON.stringify(sections);
    if (safeSetItem('mbb_admin_data', JSON.stringify(data))) {
        showToast("Muvaffaqiyatli saqlandi!", 'success');
    } else {
        showToast("Saqlashda xatolik! Xotira to'lgan bo'lishi mumkin.", 'error', 5000);
    }
}

/* Load from localStorage */
function adminLoad() {
    var raw = localStorage.getItem('mbb_admin_data');
    if (!raw) return;
    try {
        var data = JSON.parse(raw);
    } catch(e) { return; }

    /* Restore sections order first */
    if (data['__sections_order__']) {
        var savedSections = JSON.parse(data['__sections_order__']);
        sections.length = 0;
        savedSections.forEach(function(s) { sections.push(s); });
    }

    /* Restore sidebar */
    if (data['__sidebar__']) {
        document.querySelector('.sidebar').innerHTML = data['__sidebar__'];
        /* Re-attach sidebar link click handlers */
        document.querySelectorAll('.sidebar a[data-section]').forEach(function(a) {
            var sectionId = a.getAttribute('data-section');
            a.onclick = function(e) { showSection(sectionId, e); };
        });
        /* Re-attach dark mode toggle */
        var dmToggle = document.querySelector('.dark-mode-toggle');
        if (dmToggle) dmToggle.onclick = function() { toggleDarkMode(); };
        /* Re-attach sidebar search */
        var searchInput = document.getElementById('sidebarSearch');
        if (searchInput) searchInput.oninput = function() { filterSidebar(this.value); };
    }

    /* Create missing sections and restore content */
    for (var id in data) {
        if (id.startsWith('__')) continue;
        var existing = document.getElementById(id);
        if (existing) {
            existing.innerHTML = data[id];
        } else {
            /* Section doesn't exist in DOM, create it */
            var newDiv = document.createElement('div');
            newDiv.className = 'section-block';
            newDiv.id = id;
            newDiv.innerHTML = data[id];
            var main = document.querySelector('.main');
            var backpage = document.getElementById('backpage');
            if (backpage) {
                main.insertBefore(newDiv, backpage);
            } else {
                main.appendChild(newDiv);
            }
        }
    }
}

/* Export clean HTML */
function adminExportHTML() {
    /* Temporarily disable admin mode for clean export */
    var wasAdmin = adminMode;
    if (wasAdmin) {
        disableEditing();
        hideInsertMarkers();
        removeDeleteButtons();
    }

    var clone = document.documentElement.cloneNode(true);

    /* Remove admin elements */
    clone.querySelectorAll('.admin-toolbar, .admin-badge, .admin-insert-marker, .admin-delete-component, .admin-modal-overlay').forEach(function(el) { el.remove(); });
    clone.querySelectorAll('[contenteditable]').forEach(function(el) { el.removeAttribute('contenteditable'); });
    clone.querySelectorAll('.editable-highlight').forEach(function(el) { el.classList.remove('editable-highlight'); });

    var body = clone.querySelector('body');
    if (body) body.classList.remove('admin-mode');

    var blob = new Blob(['<!DOCTYPE html>\n' + clone.outerHTML], {type: 'text/html;charset=utf-8'});
    saveAs(blob, 'index_updated.html');

    /* Restore admin mode */
    if (wasAdmin) {
        enableEditing();
        showInsertMarkers();
        addDeleteButtons();
    }
}

/* Reset all admin changes */
function adminResetChanges() {
    if (!confirm("Barcha admin o'zgarishlarni o'chirmoqchimisiz?\nBu amalni qaytarib bo'lmaydi!")) return;
    localStorage.removeItem('mbb_admin_data');
    location.reload();
}

/* ===== INIT ===== */
document.addEventListener('DOMContentLoaded', function() {
    initDarkMode();
    adminLoad();
    updateProgress();
    initCopyButtons();
    updateReadingProgress();
    replaceEmojisWithFluent();
    wrapTablesForScroll();
    addLessonNavButtons();
    initScrollReveal();

    /* Re-check scroll reveals on scroll */
    window.addEventListener('scroll', function() {
        if (!scrollTicking) {
            requestAnimationFrame(function() {
                checkRevealElements();
            });
        }
    });

    /* Re-check table scroll on resize */
    window.addEventListener('resize', function() {
        document.querySelectorAll('.table-scroll').forEach(checkTableScroll);
    });
});
</script>
</body>
</html>
